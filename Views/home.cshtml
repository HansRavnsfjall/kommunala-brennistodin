@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Core.Models.Blocks
@using Kob.ViewModels

@{
    Layout = "master.cshtml";
    ViewBag.Title = Model?.Name;
}

@* --- ALERT BAR --- *@
@{
    var showAlert = Model.Value<bool>("activateAlert");
    var alertText = Model.Value<string>("alert");
}

@if (showAlert && !string.IsNullOrWhiteSpace(alertText))
{
    <div class="global-alert">
        <div class="container">
            <div class="row">
                <div class="col-12 d-flex align-items-center">
        @Html.Raw(alertText)
        </div>
        </div>
        </div>
    </div>
}

@* --- BLOCKS --- *@
@{
    var blocks = Model.Value<BlockListModel>("modul");

    // fallback to ancestors, like your original logic
    if (blocks == null || !blocks.Any())
    {
        blocks = Model.Value<BlockListModel>("modul", fallback: Fallback.ToAncestors);
    }
}

@if (blocks != null && blocks.Any())
{
    @await Html.PartialAsync(
        "~/Views/Partials/Helpers/RenderBlockList.cshtml",
        new BlockListRenderModel
        {
            Blocks = blocks,
            Scope = Model.ContentType.Alias,
            FallbackView = "~/Views/Partials/BlockList/Default.cshtml"
        }
    )
}
