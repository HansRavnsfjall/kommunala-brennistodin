{"version":3,"file":"code-editor.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/code-editor/code-editor.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2023 Lee Kelleher\r\n\r\nimport { classMap, css, customElement, html, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbInputEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { UmbCodeEditorElement } from '@umbraco-cms/backoffice/code-editor';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\nimport { UMB_PROPERTY_CONTEXT } from '@umbraco-cms/backoffice/property';\r\n\r\ntype CodeEditorLanguage = UmbCodeEditorElement['language'];\r\n\r\n@customElement('contentment-property-editor-ui-code-editor')\r\nexport class ContentmentPropertyEditorUICodeEditorElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t@state()\r\n\tprivate _language?: CodeEditorLanguage;\r\n\r\n\t@state()\r\n\tprivate _loading = true;\r\n\r\n\t@state()\r\n\tprivate _hideMargin = false;\r\n\r\n\t@property()\r\n\tpublic value?: string;\r\n\r\n\tpublic set config(config: UmbPropertyEditorUiElement['config']) {\r\n\t\tif (!config) return;\r\n\r\n\t\tthis._language = config.getValueByAlias<CodeEditorLanguage>('mode');\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#loadCodeEditor();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_CONTEXT, (context) => {\r\n\t\t\tthis.observe(context?.appearance, (appearance) => {\r\n\t\t\t\tthis._hideMargin = appearance?.labelOnTop ?? false;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tasync #loadCodeEditor() {\r\n\t\ttry {\r\n\t\t\tawait import('@umbraco-cms/backoffice/code-editor');\r\n\t\t\tthis._loading = false;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t}\r\n\r\n\t#onChange(event: UmbInputEvent & { target: UmbCodeEditorElement }) {\r\n\t\tif (!(event instanceof UmbInputEvent)) return;\r\n\t\tthis.value = event.target.code;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (this._loading) return html`<uui-loader></uui-loader>`;\r\n\t\treturn html`\r\n\t\t\t<div id=\"code-editor\" class=${classMap({ margin: !this._hideMargin })}>\r\n\t\t\t\t<umb-code-editor language=${this._language ?? 'razor'} .code=${this.value ?? ''} @input=${this.#onChange}>\r\n\t\t\t\t</umb-code-editor>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#code-editor {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\theight: 200px;\r\n\r\n\t\t\t\t&.margin {\r\n\t\t\t\t\tmargin-left: -30px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t> umb-code-editor {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { ContentmentPropertyEditorUICodeEditorElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-property-editor-ui-code-editor': ContentmentPropertyEditorUICodeEditorElement;\r\n\t}\r\n}\r\n"],"names":["_ContentmentPropertyEditorUICodeEditorElement_instances","loadCodeEditor_fn","onChange_fn","ContentmentPropertyEditorUICodeEditorElement","UmbLitElement","__privateAdd","__privateMethod","UMB_PROPERTY_CONTEXT","context","appearance","config","html","classMap","error","event","UmbInputEvent","UmbChangeEvent","css","__decorateClass","state","property","customElement"],"mappings":";;;;;;;;;;8OAAAA,GAAAC,GAAAC;AAca,IAAAC,IAAN,cAA2DC,EAAoD;AAAA,EAmBrH,cAAc;AACP,UAAA,GApBDC,EAAA,MAAAL,CAAA,GAKN,KAAQ,WAAW,IAGnB,KAAQ,cAAc,IAcrBM,EAAA,MAAKN,GAALC,CAAA,EAAA,KAAA,IAAA,GAEK,KAAA,eAAeM,GAAsB,CAACC,MAAY;AACtD,WAAK,QAAQA,KAAA,gBAAAA,EAAS,YAAY,CAACC,MAAe;AAC5C,aAAA,eAAcA,KAAA,gBAAAA,EAAY,eAAc;AAAA,MAAA,CAC7C;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAfF,IAAW,OAAOC,GAA8C;AAC/D,IAAKA,MAEA,KAAA,YAAYA,EAAO,gBAAoC,MAAM;AAAA,EAAA;AAAA,EA8B1D,SAAS;AACb,WAAA,KAAK,WAAiBC,+BACnBA;AAAA,iCACwBC,EAAS,EAAE,QAAQ,CAAC,KAAK,YAAa,CAAA,CAAC;AAAA,gCACxC,KAAK,aAAa,OAAO,UAAU,KAAK,SAAS,EAAE,WAAWN,EAAA,MAAKN,GAASE,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AAsB5G;AAxEOF,IAAA,oBAAA,QAAA;AA+BAC,IAAe,iBAAG;AACnB,MAAA;AACH,UAAM,OAAO,qCAAqC,GAClD,KAAK,WAAW;AAAA,WACRY,GAAO;AACf,YAAQ,MAAMA,CAAK;AAAA,EAAA;AAErB;AAEAX,IAAS,SAACY,GAAyD;AAC9D,EAAEA,aAAiBC,MAClB,KAAA,QAAQD,EAAM,OAAO,MACrB,KAAA,cAAc,IAAIE,GAAgB;AACxC;AA5CYb,EAwDI,SAAS;AAAA,EACxBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcD;AArEQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKhB,EAEJ,WAAA,aAAA,CAAA;AAGAe,EAAA;AAAA,EADPC,EAAM;AAAA,GAJKhB,EAKJ,WAAA,YAAA,CAAA;AAGAe,EAAA;AAAA,EADPC,EAAM;AAAA,GAPKhB,EAQJ,WAAA,eAAA,CAAA;AAGDe,EAAA;AAAA,EADNE,EAAS;AAAA,GAVEjB,EAWL,WAAA,SAAA,CAAA;AAXKA,IAANe,EAAA;AAAA,EADNG,EAAc,4CAA4C;AAAA,GAC9ClB,CAAA;"}