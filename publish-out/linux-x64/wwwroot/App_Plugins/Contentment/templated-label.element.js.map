{"version":3,"file":"templated-label.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/templated-label/templated-label.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\n// Copyright Â© 2024 Lee Kelleher\n\nimport { parseBoolean, tryHideLabel, tryMoveBeforePropertyGroup } from '../../utils/index.js';\nimport { customElement, nothing, property, unsafeHTML, until } from '@umbraco-cms/backoffice/external/lit';\nimport { Liquid } from '../../external/liquidjs/index.js';\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\nimport type { PropertyValues } from '@umbraco-cms/backoffice/external/lit';\nimport type { Template } from '../../external/liquidjs/index.js';\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\n\n@customElement('contentment-property-editor-ui-templated-label')\nexport class ContentmentPropertyEditorUITemplatedLabelElement\n\textends UmbLitElement\n\timplements UmbPropertyEditorUiElement\n{\n\t#engine = new Liquid({ cache: true });\n\n\t#hideLabel: boolean = false;\n\n\t#hidePropertyGroup: boolean = false;\n\n\t#template?: Array<Template>;\n\n\t@property({ attribute: false })\n\tpublic value?: unknown;\n\n\tset config(config: UmbPropertyEditorUiElement['config']) {\n\t\tif (!config) return;\n\t\tthis.#hideLabel = parseBoolean(config.getValueByAlias('hideLabel'));\n\t\tthis.#hidePropertyGroup = parseBoolean(config.getValueByAlias('hidePropertyGroup'));\n\n\t\tconst notes = config.getValueByAlias<string>('notes') ?? '';\n\t\tthis.#template = this.#engine.parse(notes);\n\t}\n\n\tprotected override firstUpdated(_changedProperties: PropertyValues): void {\n\t\tsuper.firstUpdated(_changedProperties);\n\n\t\tif (this.#hideLabel) {\n\t\t\ttryHideLabel(this);\n\t\t}\n\n\t\tif (this.#hidePropertyGroup) {\n\t\t\ttryMoveBeforePropertyGroup(this);\n\t\t}\n\t}\n\n\toverride render() {\n\t\treturn until(this.#renderTemplate());\n\t}\n\n\tasync #renderTemplate() {\n\t\tif (!this.#engine || !this.#template) return null;\n\t\tconst markup = await this.#engine.render(this.#template, { model: { value: this.value } });\n\t\treturn markup ? unsafeHTML(markup) : nothing;\n\t}\n}\n\nexport { ContentmentPropertyEditorUITemplatedLabelElement as element };\n\ndeclare global {\n\tinterface HTMLElementTagNameMap {\n\t\t'contentment-property-editor-ui-templated-label': ContentmentPropertyEditorUITemplatedLabelElement;\n\t}\n}\n"],"names":["_engine","_hideLabel","_hidePropertyGroup","_template","_ContentmentPropertyEditorUITemplatedLabelElement_instances","renderTemplate_fn","ContentmentPropertyEditorUITemplatedLabelElement","UmbLitElement","__privateAdd","Liquid","config","__privateSet","parseBoolean","notes","__privateGet","_changedProperties","tryHideLabel","tryMoveBeforePropertyGroup","until","__privateMethod","markup","unsafeHTML","nothing","__decorateClass","property","customElement"],"mappings":";;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAYa,IAAAC,IAAN,cACEC,EAET;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GAINI,EAAA,MAAAR,GAAU,IAAIS,EAAO,EAAE,OAAO,IAAM,CAAA,GAEdD,EAAA,MAAAP,GAAA,EAAA,GAEQO,EAAA,MAAAN,GAAA,EAAA,GAE9BM,EAAA,MAAAL,CAAA;AAAA,EAAA;AAAA,EAKA,IAAI,OAAOO,GAA8C;AACxD,QAAI,CAACA,EAAQ;AACb,IAAAC,EAAA,MAAKV,GAAaW,EAAaF,EAAO,gBAAgB,WAAW,CAAC,CAAA,GAClEC,EAAA,MAAKT,GAAqBU,EAAaF,EAAO,gBAAgB,mBAAmB,CAAC,CAAA;AAElF,UAAMG,IAAQH,EAAO,gBAAwB,OAAO,KAAK;AACzD,IAAAC,EAAA,MAAKR,GAAYW,EAAA,MAAKd,CAAQ,EAAA,MAAMa,CAAK,CAAA;AAAA,EAAA;AAAA,EAGvB,aAAaE,GAA0C;AACzE,UAAM,aAAaA,CAAkB,GAEjCD,QAAKb,CAAY,KACpBe,EAAa,IAAI,GAGdF,QAAKZ,CAAoB,KAC5Be,EAA2B,IAAI;AAAA,EAChC;AAAA,EAGQ,SAAS;AACV,WAAAC,EAAMC,EAAK,MAAAf,GAAAC,CAAA,EAAL,KAAsB,IAAA,CAAA;AAAA,EAAA;AAQrC;AAzCCL,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAVMC,IAAA,oBAAA,QAAA;AAwCAC,IAAe,iBAAG;AACvB,MAAI,CAACS,EAAK,MAAAd,CAAA,KAAW,CAACc,EAAA,MAAKX,GAAkB,QAAA;AAC7C,QAAMiB,IAAS,MAAMN,EAAK,MAAAd,CAAA,EAAQ,OAAOc,EAAK,MAAAX,CAAA,GAAW,EAAE,OAAO,EAAE,OAAO,KAAK,MAAA,GAAS;AAClF,SAAAiB,IAASC,EAAWD,CAAM,IAAIE;AACtC;AA/BOC,EAAA;AAAA,EADNC,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GAZlBlB,EAaL,WAAA,SAAA,CAAA;AAbKA,IAANiB,EAAA;AAAA,EADNE,EAAc,gDAAgD;AAAA,GAClDnB,CAAA;"}