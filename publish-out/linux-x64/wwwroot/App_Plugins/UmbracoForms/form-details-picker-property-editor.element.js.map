{"version":3,"file":"form-details-picker-property-editor.element.js","sources":["../../../../src/property-editor/form-details-picker/form-details-picker-property-editor.element.ts"],"sourcesContent":["import type FormsInputThemeElement from \"../../components/input-theme/input-theme.element.js\";\nimport {\n  customElement,\n  html,\n  property,\n  state,\n  when,\n} from \"@umbraco-cms/backoffice/external/lit\";\nimport type { FormsInputFormElement } from \"@umbraco-forms/components\";\nimport { splitStringToArray } from \"@umbraco-cms/backoffice/utils\";\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\nimport type {\n  UmbPropertyEditorConfigCollection,\n  UmbPropertyEditorUiElement,\n} from \"@umbraco-cms/backoffice/property-editor\";\nimport type { UmbInputDocumentElement } from \"@umbraco-cms/backoffice/document\";\n\nexport type FormDetails = {\n  formId: string | null;\n  theme: string | null;\n  redirectToPageId: string | null;\n};\n\nconst elementName = \"forms-form-details-property-editor\";\n\n@customElement(elementName)\nexport class FormsFormDetailsPickerPropertyPickerElement\n  extends UmbLitElement\n  implements UmbPropertyEditorUiElement\n{\n  #value: FormDetails = {\n    formId: null,\n    theme: null,\n    redirectToPageId: null,\n  };\n\n  @property({ type: Object })\n  set value(value: FormDetails) {\n    this.#value = value ? structuredClone(value) : this.#value;\n  }\n\n  get value(): FormDetails {\n    return this.#value;\n  }\n\n  @state()\n  private _includeThemePicker: boolean = false;\n\n  @state()\n  private _includeRedirectPicker: boolean = false;\n\n  @state()\n  private _allowedForms: Array<string> = [];\n\n  @state()\n  private _allowedFolders: Array<string> = [];\n\n  public set config(config: UmbPropertyEditorConfigCollection | undefined) {\n    this._includeThemePicker =\n      config?.getValueByAlias(\"includeThemePicker\") || false;\n    this._includeRedirectPicker =\n      config?.getValueByAlias(\"includeRedirectPicker\") || false;\n    this._allowedFolders = config?.getValueByAlias(\"allowedFolders\") || [];\n    this._allowedForms = config?.getValueByAlias(\"allowedForms\") || [];\n  }\n\n  #onPickedFormsChange(event: Event) {\n    const target = event.target as FormsInputFormElement;\n    this.value.formId =\n      target.selection.length > 0 ? target.selection[0] : null;\n    this.dispatchEvent(new CustomEvent(\"property-value-change\"));\n  }\n\n  #onThemeChange(event: Event) {\n    const target = event.target as FormsInputThemeElement;\n    this.value.theme = target.value;\n    this.dispatchEvent(new CustomEvent(\"property-value-change\"));\n  }\n\n  #onRedirectToPageChange(e: CustomEvent) {\n    const redirectToPageId = (e.target as UmbInputDocumentElement)\n      .value as string;\n    this.value.redirectToPageId =\n      redirectToPageId !== \"\" ? redirectToPageId : null;\n    this.dispatchEvent(new CustomEvent(\"property-value-change\"));\n  }\n\n  render() {\n    return html`\n      <umb-property-layout\n        alias=\"form\"\n        .label=${this.localize.term(\"formPicker_form\")}\n      >\n        <forms-input-form\n          id=\"form\"\n          .selection=${this.value?.formId\n            ? splitStringToArray(this.value.formId)\n            : []}\n          .multiple=${false}\n          .allowedFolders=${this._allowedFolders}\n          .allowedForms=${this._allowedForms}\n          @change=${this.#onPickedFormsChange}\n          slot=\"editor\"\n        ></forms-input-form>\n      </umb-property-layout>\n\n      ${when(\n        this._includeThemePicker,\n        () =>\n          html` <umb-property-layout\n            alias=\"theme\"\n            .label=${this.localize.term(\"formPicker_theme\")}\n          >\n            <forms-input-theme\n              @change=${this.#onThemeChange}\n              .value=${this.value?.theme || \"\"}\n              slot=\"editor\"\n            ></forms-input-theme>\n          </umb-property-layout>`,\n      )}\n      ${when(\n        this._includeRedirectPicker,\n        () => html`\n          <umb-property-layout\n            alias=\"theme\"\n            .label=${this.localize.term(\"formPicker_redirectToPage\")}\n            .description=${this.localize.term(\n              \"formPicker_redirectToPageDescription\",\n            )}\n          >\n            <umb-input-document\n              slot=\"editor\"\n              .value=${this.value?.redirectToPageId || \"\"}\n              max=\"1\"\n              @change=${this.#onRedirectToPageChange}\n            ></umb-input-document>\n          </umb-property-layout>\n        `,\n      )}\n    `;\n  }\n}\n\nexport default FormsFormDetailsPickerPropertyPickerElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: FormsFormDetailsPickerPropertyPickerElement;\n  }\n}\n"],"names":["_value","_FormsFormDetailsPickerPropertyPickerElement_instances","onPickedFormsChange_fn","onThemeChange_fn","onRedirectToPageChange_fn","elementName","FormsFormDetailsPickerPropertyPickerElement","UmbLitElement","__privateAdd","value","__privateSet","__privateGet","config","html","_a","splitStringToArray","__privateMethod","when","event","target","redirectToPageId","__decorateClass","property","state","customElement","FormsFormDetailsPickerPropertyPickerElement$1"],"mappings":"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"}