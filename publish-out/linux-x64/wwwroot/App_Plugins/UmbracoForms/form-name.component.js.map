{"version":3,"file":"form-name.component.js","sources":["../../../../src/ufm/form-name/form-name.element.ts","../../../../src/ufm/form-name/form-name.component.ts"],"sourcesContent":["import { FormsFormItemRepository } from \"../../section/forms/repository/index.js\";\nimport { customElement, property } from \"@umbraco-cms/backoffice/external/lit\";\nimport {\n  UMB_UFM_RENDER_CONTEXT,\n  UmbUfmElementBase,\n} from \"@umbraco-cms/backoffice/ufm\";\n\nconst elementName = \"ufm-form-name\";\n\n@customElement(elementName)\nexport class FormsUfmFormNameElement extends UmbUfmElementBase {\n  @property()\n  alias?: string;\n\n  constructor() {\n    super();\n\n    this.consumeContext(UMB_UFM_RENDER_CONTEXT, (context) => {\n      this.observe(\n        context?.value,\n        async (value) => {\n          const formId = this.#getFormIdFromValue(value);\n          if (formId) {\n            const repository = new FormsFormItemRepository(this);\n            const { data } = await repository.requestItems([formId]);\n            if (data && data.length > 0) {\n              this.value = data[0].name;\n            }\n          }\n        },\n        \"observeValue\",\n      );\n    });\n  }\n\n  #getFormIdFromValue(value): string | undefined {\n    if (this.alias && typeof value === \"object\") {\n      const valueAsObject = value as object;\n\n      // Handle both the single form picker (where we have just a form Id) and\n      // the form details picker (where we have an object, with a `formId` property containing the form Id).\n      const formDetails = valueAsObject[this.alias];\n      if (!formDetails) {\n        return undefined;\n      }\n\n      if (typeof formDetails === \"object\") {\n        return formDetails[\"formId\"].toString();\n      } else {\n        return formDetails.toString();\n      }\n    }\n  }\n}\n\nexport { FormsUfmFormNameElement as element };\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: FormsUfmFormNameElement;\n  }\n}\n","import type { UfmToken } from \"@umbraco-cms/backoffice/ufm\";\nimport { UmbUfmComponentBase } from \"@umbraco-cms/backoffice/ufm\";\nimport \"./form-name.element.js\";\n\nexport class FormsUfmFormNameComponent extends UmbUfmComponentBase {\n  render(token: UfmToken) {\n    if (!token.text) return;\n\n    const attributes = super.getAttributes(token.text);\n    return `<ufm-form-name ${attributes}></ufm-form-name>`;\n  }\n}\n\nexport { FormsUfmFormNameComponent as api };\n"],"names":["_FormsUfmFormNameElement_instances","getFormIdFromValue_fn","elementName","FormsUfmFormNameElement","UmbUfmElementBase","__privateAdd","UMB_UFM_RENDER_CONTEXT","context","value","formId","__privateMethod","repository","FormsFormItemRepository","data","formDetails","__decorateClass","property","customElement","FormsUfmFormNameComponent","UmbUfmComponentBase","token"],"mappings":";;;;;;;;;;;;8OAAAA,GAAAC;AAOA,MAAMC,IAAc;AAGb,IAAMC,IAAN,cAAsCC,EAAkB;AAAA,EAI7D,cAAc;AACZ,UAAA,GALGC,EAAA,MAAAL,CAAA,GAOH,KAAK,eAAeM,GAAwB,CAACC,MAAY;AACvD,WAAK;AAAA,QACHA,KAAA,gBAAAA,EAAS;AAAA,QACT,OAAOC,MAAU;AACf,gBAAMC,IAASC,EAAA,MAAKV,GAAAC,CAAA,EAAL,KAAA,MAAyBO,CAAA;AACxC,cAAIC,GAAQ;AACV,kBAAME,IAAa,IAAIC,EAAwB,IAAI,GAC7C,EAAE,MAAAC,MAAS,MAAMF,EAAW,aAAa,CAACF,CAAM,CAAC;AACvD,YAAII,KAAQA,EAAK,SAAS,MACxB,KAAK,QAAQA,EAAK,CAAC,EAAE;AAAA,UACvB;AAAA,QACF;AAAA,QAEF;AAAA,MAAA;AAAA,IACF,CACD;AAAA,EAAA;AAqBL;AA3COb,IAAA,oBAAA,QAAA;AAyBLC,IAAmB,SAACO,GAA2B;AAC7C,MAAI,KAAK,SAAS,OAAOA,KAAU,UAAU;AAK3C,UAAMM,IAJgBN,EAIY,KAAK,KAAK;AAC5C,WAAKM,IAID,OAAOA,KAAgB,WAClBA,EAAY,OAAU,SAAA,IAEtBA,EAAY,SAAA,IANnB;AAAA,EAOF;AAEJ;AAxCAC,EAAA;AAAA,EADCC,EAAA;AAAS,GADCb,EAEX,WAAA,SAAA,CAAA;AAFWA,IAANY,EAAA;AAAA,EADNE,EAAcf,CAAW;AAAA,GACbC,CAAA;ACNN,MAAMe,UAAkCC,EAAoB;AAAA,EACjE,OAAOC,GAAiB;AACtB,WAAKA,EAAM,OAGJ,kBADY,MAAM,cAAcA,EAAM,IAAI,CACd,sBAHlB;AAAA,EAGkB;AAEvC;"}