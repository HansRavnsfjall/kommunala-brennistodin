{"version":3,"file":"save-and-preview.action.js","sources":["../../../../src/section/forms/workspace/actions/save-and-preview.action.ts"],"sourcesContent":["import { FORMS_FORM_WORKSPACE_CONTEXT } from \"../form-workspace.context-token.js\";\nimport { FORMS_PREVIEW_MODAL } from \"../../../../modal/token/form-preview-modal.token.js\";\nimport { UmbSaveWorkspaceAction } from \"@umbraco-cms/backoffice/workspace\";\nimport { umbOpenModal } from \"@umbraco-cms/backoffice/modal\";\n\nexport class FormsSaveAndPreviewWorkspaceAction extends UmbSaveWorkspaceAction {\n  override async execute() {\n    // Save form\n    await super.execute();\n\n    // Open preview modal\n    const workspaceContext = await this.getContext(\n      FORMS_FORM_WORKSPACE_CONTEXT,\n    );\n    if (!workspaceContext) {\n      throw new Error(\"Forms form workspace context not found\");\n    }\n\n    await umbOpenModal(this, FORMS_PREVIEW_MODAL, {\n      data: {\n        unique: workspaceContext.getUnique(),\n      },\n    }).catch(() => undefined);\n  }\n}\n\nexport { FormsSaveAndPreviewWorkspaceAction as api };\n"],"names":["FormsSaveAndPreviewWorkspaceAction","UmbSaveWorkspaceAction","workspaceContext","FORMS_FORM_WORKSPACE_CONTEXT","umbOpenModal","FORMS_PREVIEW_MODAL"],"mappings":";;;AAKO,MAAMA,UAA2CC,EAAuB;AAAA,EAC7E,MAAe,UAAU;AAEvB,UAAM,MAAM,QAAA;AAGZ,UAAMC,IAAmB,MAAM,KAAK;AAAA,MAClCC;AAAA,IAAA;AAEF,QAAI,CAACD;AACH,YAAM,IAAI,MAAM,wCAAwC;AAG1D,UAAME,EAAa,MAAMC,GAAqB;AAAA,MAC5C,MAAM;AAAA,QACJ,QAAQH,EAAiB,UAAA;AAAA,MAAU;AAAA,IACrC,CACD,EAAE,MAAM,MAAA;AAAA,KAAe;AAAA,EAAA;AAE5B;"}