{"version":3,"file":"workspace-view-form-design.element.js","sources":["../../../../src/section/forms/workspace/views/design/workspace-view-form-design.element.ts"],"sourcesContent":["import { FORMS_FORM_WORKSPACE_CONTEXT } from \"../../form-workspace.context-token.js\";\nimport {\n  FORMS_STRUCTURE_MANAGER,\n  FormStructureManager,\n} from \"../../form-structure-manager.class.js\";\nimport { FormsFieldTypeCollectionRepository } from \"../../../../provider-types/field-types/repository/collection/index.js\";\nimport type { FormsFormPageElement } from \"./components/forms-form-page.design.element.js\";\nimport { UmbTextStyles } from \"@umbraco-cms/backoffice/style\";\nimport {\n  css,\n  html,\n  customElement,\n  state,\n  LitElement,\n  when,\n  queryAsync,\n} from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\nimport type {\n  Field,\n  FieldTypeWithSettings,\n  FormDesign,\n  FormSecurityForUser,\n} from \"@umbraco-forms/generated\";\nimport { FORMS_CONTEXT } from \"@umbraco-forms/context\";\nimport type {\n  UUISelectElement,\n  UUISelectEvent,\n} from \"@umbraco-cms/backoffice/external/uui\";\nimport type { UmbWorkspaceViewElement } from \"@umbraco-cms/backoffice/workspace\";\n\nconst elementName = \"workspace-view-form-design\";\n\n@customElement(elementName)\nexport class UmbWorkspaceViewFormDesignElement\n  extends UmbElementMixin(LitElement)\n  implements UmbWorkspaceViewElement\n{\n  @state()\n  _form?: FormDesign;\n\n  @state()\n  _userSecurity?: FormSecurityForUser;\n\n  @state()\n  _sortModeActive = false;\n\n  @queryAsync(\"forms-form-page\")\n  _pagesPromise?: Promise<FormsFormPageElement>;\n\n  #workspaceContext?: typeof FORMS_FORM_WORKSPACE_CONTEXT.TYPE;\n  #formsContext?: typeof FORMS_CONTEXT.TYPE;\n  #structureManager?: FormStructureManager;\n\n  #init?: Promise<unknown>;\n\n  #allFields: Array<Field> = [];\n  #allFieldTypes: Array<FieldTypeWithSettings> = [];\n\n  constructor() {\n    super();\n\n    this.#init = Promise.all([\n      this.consumeContext(FORMS_FORM_WORKSPACE_CONTEXT, (instance) => {\n        this.#workspaceContext = instance;\n      }).asPromise(),\n\n      this.consumeContext(FORMS_CONTEXT, (context) => {\n        this.#formsContext = context;\n      }).asPromise(),\n    ]);\n\n    this.#initialize();\n  }\n\n  async #initialize() {\n    await this.#init;\n    if (!this.#workspaceContext) return;\n\n    this.#structureManager = new FormStructureManager(\n      this,\n      this.#workspaceContext,\n    );\n    this.provideContext(FORMS_STRUCTURE_MANAGER, this.#structureManager);\n\n    const repository = new FormsFieldTypeCollectionRepository(this);\n    const { data } = await repository.requestCollection();\n    this.#allFieldTypes = data?.items || [];\n\n    this.observe(this.#workspaceContext.data, (form) => {\n      if (!form) return;\n      this._form = form;\n\n      if (this.#workspaceContext) {\n        this.#allFields = this.#workspaceContext?.getAllFields();\n      }\n\n      this.#setUpPageScrollObserver();\n    });\n\n    this.observe(this.#formsContext?.userSecurity, (userSecurity) => {\n      this._userSecurity = userSecurity;\n    });\n  }\n\n  #onAddPageClick(addToTop: boolean) {\n    this.#structureManager?.addFormPage(addToTop);\n  }\n\n  #onReorderClick() {\n    this._sortModeActive = !this._sortModeActive;\n    this.#scrollToActivePageIndex();\n  }\n\n  #activePageIndex: number = -1;\n  #disableVisiblePageTracking: boolean = false;\n  #pageCount: number = -1;\n\n  async #setUpPageScrollObserver() {\n    if (!this._form) return;\n\n    // The queryAsync decorator returns a promise which resolves when the queried element is available\n    // We can await that promise to ensure the pages have rendered, then use querySelectorAll to get the full set\n    await this._pagesPromise;\n\n    // If we haven't changed the number of pages since the last setup, no need to do it again.\n    if (this.#pageCount > 0 && this._form.pages.length === this.#pageCount)\n      return;\n\n    const options = {\n      root: null,\n      threshold: 0.1,\n    };\n\n    const callback = (entries) => {\n      if (!this.#disableVisiblePageTracking) {\n        const pageIndexes = entries\n          .filter((e) => e.isIntersecting)\n          .map((e) => e.target.getAttribute(\"data-page-index\"));\n        pageIndexes.forEach((pageIndex) => {\n          if (!pageIndex) {\n            return;\n          }\n          this.#activePageIndex = pageIndex;\n        });\n      }\n    };\n\n    const observer = new IntersectionObserver(callback, options);\n\n    const pages = this.renderRoot.querySelectorAll(\"forms-form-page\");\n    this.#pageCount = pages.length;\n\n    pages.forEach((page) => {\n      observer.observe(page);\n    });\n  }\n\n  #scrollToActivePageIndex() {\n    if (this.#activePageIndex >= 0) {\n      const pageElement = this.shadowRoot!.querySelector(\n        \"forms-form-page[data-page-index='\" + this.#activePageIndex + \"']\",\n      );\n      if (pageElement) {\n        this.#scrollToPage(pageElement);\n      }\n    }\n  }\n\n  #getPageNumberOptions() {\n    const options =\n      this._form?.pages.map((p, i) => ({\n        name: (i + 1).toString(),\n        value: i.toString(),\n        selected: false,\n      })) ?? [];\n    options.unshift({\n      name: this.localize.term(\"formEdit_jumpToPage\"),\n      value: \"\",\n      selected: true,\n    });\n    return options;\n  }\n\n  #onJumpToPageChange(e: UUISelectEvent) {\n    const element = e.target as UUISelectElement;\n    const value = element.value.toString();\n    if (value !== \"\") {\n      const pageElement = this.shadowRoot!.querySelector(\n        \"forms-form-page[data-page-index='\" + value + \"']\",\n      );\n      if (pageElement) {\n        this.#scrollToPage(pageElement);\n      }\n    }\n\n    this.#resetJumpToPageOptions(element);\n  }\n\n  #scrollToPage(element: Element) {\n    this.#disableVisiblePageTracking = true;\n    element.scrollIntoView();\n    this.#disableVisiblePageTracking = false;\n  }\n\n  #resetJumpToPageOptions(element: UUISelectElement) {\n    for (let index = 0; index < element.options.length; index++) {\n      const option = element.options[index];\n      option.selected = false;\n    }\n    element.options[0].selected = true;\n    this.requestUpdate();\n  }\n\n  render() {\n    return html`\n      <div id=\"formHeader\">\n        <div class=\"actions\">\n          ${when(\n            !this._sortModeActive,\n            () =>\n              html` <uui-button-group>\n                <uui-button\n                  look=\"placeholder\"\n                  label=${this.localize.term(\"formEdit_addToTop\")}\n                  @click=${() => this.#onAddPageClick(true)}\n                  >${this.localize.term(\"formEdit_addToTop\")}</uui-button\n                >\n                <uui-button\n                  look=\"placeholder\"\n                  label=${this.localize.term(\"formEdit_addToBottom\")}\n                  @click=${() => this.#onAddPageClick(false)}\n                  >${this.localize.term(\"formEdit_addToBottom\")}</uui-button\n                >\n              </uui-button-group>`,\n          )}\n\n          <uui-button\n            @click=${this.#onReorderClick}\n            compact\n            look=\"outline\"\n            label=${this.localize.term(\n              this._sortModeActive ? \"general_reorderDone\" : \"general_reorder\",\n            )}\n            ><uui-icon name=\"icon-navigation\"></uui-icon>${this.localize.term(\n              this._sortModeActive ? \"general_reorderDone\" : \"general_reorder\",\n            )}\n          </uui-button>\n\n          ${when(\n            this._form && this._form.pages.length > 1,\n            () => html`\n              <uui-select\n                label=${this.localize.term(\"formEdit_jumpToPage\")}\n                name=\"jumpToPage\"\n                @change=${this.#onJumpToPageChange}\n                .options=${this.#getPageNumberOptions()}\n              ></uui-select>\n            `,\n          )}\n        </div>\n      </div>\n\n      <div id=\"formPages\">\n        ${this._form?.pages.map(\n          (page, idx) =>\n            html`<forms-form-page\n              class=\"sort-mode-${this._sortModeActive ? \"active\" : \"inactive\"}\"\n              data-page-index=\"${idx}\"\n              .page=${page}\n              .index=${idx}\n              .allFields=${this.#allFields}\n              .allFieldTypes=${this.#allFieldTypes}\n              ?sort-mode-active=${this._sortModeActive}\n            >\n            </forms-form-page>`,\n        )}\n      </div>\n\n      <div id=\"formFooter\">\n        ${when(\n          !this._sortModeActive,\n          () =>\n            html` <uui-button\n              @click=${() => this.#onAddPageClick(false)}\n              look=\"outline\"\n              label=${this.localize.term(\"formEdit_addPage\")}\n            ></uui-button>`,\n        )}\n      </div>\n\n      ${when(\n        !this._sortModeActive &&\n          this._userSecurity?.userSecurity.manageWorkflows, // TODO: <-- ths doesn't work when we have group security enabled.\n        () =>\n          html` <forms-form-workflow-summary\n            .workflows=${this._form?.formWorkflows}\n            .submitMessageDetail=${{\n              messageOnSubmit: this._form?.messageOnSubmit,\n              messageOnSubmitIsHtml: this._form?.messageOnSubmitIsHtml ?? false,\n              goToPageOnSubmit: this._form?.goToPageOnSubmit,\n            }}\n            ?manualApproval=${this._form?.manualApproval}\n            .allFields=${this.#allFields}\n          ></forms-form-workflow-summary>`,\n      )}\n    `;\n  }\n\n  static styles = [\n    UmbTextStyles,\n    css`\n      :host {\n        display: block;\n        padding: var(--uui-size-layout-1);\n      }\n\n      #formHeader {\n        position: sticky;\n        top: 0;\n        border: solid 1px #ccc;\n        padding: 10px;\n        background-color: #fff;\n        z-index: 9;\n        margin-bottom: var(--uui-size-5);\n        display: flex;\n        justify-content: flex-end;\n        column-gap: var(--uui-size-3);\n      }\n\n      #formHeader .actions > * {\n        vertical-align: middle;\n      }\n\n      forms-form-page.sort-mode-inactive {\n        scroll-margin-top: 80px;\n      }\n\n      forms-form-page.sort-mode-active {\n        scroll-margin-top: 30px;\n      }\n\n      #formFooter {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-bottom: 30px;\n      }\n\n      uui-button uui-icon {\n        margin-right: var(--uui-size-2);\n      }\n    `,\n  ];\n}\n\nexport default UmbWorkspaceViewFormDesignElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: UmbWorkspaceViewFormDesignElement;\n  }\n}\n"],"names":["_workspaceContext","_formsContext","_structureManager","_init","_allFields","_allFieldTypes","_UmbWorkspaceViewFormDesignElement_instances","initialize_fn","onAddPageClick_fn","onReorderClick_fn","_activePageIndex","_disableVisiblePageTracking","_pageCount","setUpPageScrollObserver_fn","scrollToActivePageIndex_fn","getPageNumberOptions_fn","onJumpToPageChange_fn","scrollToPage_fn","resetJumpToPageOptions_fn","elementName","UmbWorkspaceViewFormDesignElement","UmbElementMixin","LitElement","__privateAdd","__privateSet","FORMS_FORM_WORKSPACE_CONTEXT","instance","FORMS_CONTEXT","context","__privateMethod","html","when","_a","page","idx","__privateGet","_b","_c","_d","_e","FormStructureManager","FORMS_STRUCTURE_MANAGER","repository","FormsFieldTypeCollectionRepository","data","form","userSecurity","addToTop","options","callback","entries","e","pageIndex","observer","pages","pageElement","p","i","element","value","index","option","UmbTextStyles","css","__decorateClass","state","queryAsync","customElement","UmbWorkspaceViewFormDesignElement$1"],"mappings":"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"}