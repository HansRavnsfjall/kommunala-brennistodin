{"version":3,"file":"workspace-view-security-user-group-permissions.element.js","sources":["../../../../src/section/security/workspace/views/permissions/workspace-view-security-user-group-permissions.element.ts"],"sourcesContent":["import { FORMS_SECURITY_USER_GROUP_WORKSPACE_CONTEXT } from \"../../security-user-group-workspace.context-token.js\";\nimport type { PackagePermissionsSecurityBase } from \"../../../entities.js\";\nimport type { FormsSecurityUserGroupWorkspaceContext } from \"../../security-user-group-workspace.context.js\";\nimport { UmbWorkspaceViewSecurityPermissionsBaseElement } from \"./workspace-view-security-permissions-base.element.js\";\nimport {\n  html,\n  customElement,\n  state,\n} from \"@umbraco-cms/backoffice/external/lit\";\nimport type { UmbWorkspaceViewElement } from \"@umbraco-cms/backoffice/workspace\";\nimport type { FormSecurityForGroup } from \"@umbraco-forms/generated\";\nimport type { UUIBooleanInputEvent } from \"@umbraco-cms/backoffice/external/uui\";\n\nconst elementName = \"workspace-view-security-user-group-permissions\";\n\n@customElement(elementName)\nexport class UmbWorkspaceViewSecurityUserGroupPermissionsElement\n  extends UmbWorkspaceViewSecurityPermissionsBaseElement<FormsSecurityUserGroupWorkspaceContext>\n  implements UmbWorkspaceViewElement\n{\n  @state()\n  _security?: FormSecurityForGroup;\n\n  constructor() {\n    super(FORMS_SECURITY_USER_GROUP_WORKSPACE_CONTEXT.contextAlias);\n  }\n\n  observeSecurityItem() {\n    if (!this.workspaceContext) return;\n\n    this.observe(this.workspaceContext.data, (security) => {\n      if (!security) return;\n      this._security = security;\n    });\n  }\n\n  onPackagePermissionsChange(\n    e: UUIBooleanInputEvent,\n    permission: keyof PackagePermissionsSecurityBase,\n  ) {\n    const value = e.target.checked;\n    this.workspaceContext?.setUserGroupSecurityProperty(permission, value);\n\n    if (permission === \"viewEntries\" && !value) {\n      this.workspaceContext?.setUserGroupSecurityProperty(\"editEntries\", false);\n      this.workspaceContext?.setUserGroupSecurityProperty(\n        \"deleteEntries\",\n        false,\n      );\n    }\n\n    this.dispatchEvent(new CustomEvent(\"valueChange\"));\n    this.requestUpdate();\n  }\n\n  render() {\n    return html` ${this.renderToggles(this._security?.userGroupSecurity)}\n    ${this.renderStartFolders(this._security?.startFolderIds ?? [])}\n    ${this.renderSecurityTable(this._security?.formsSecurity ?? [])}`;\n  }\n}\n\nexport default UmbWorkspaceViewSecurityUserGroupPermissionsElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: UmbWorkspaceViewSecurityUserGroupPermissionsElement;\n  }\n}\n"],"names":["elementName","UmbWorkspaceViewSecurityUserGroupPermissionsElement","UmbWorkspaceViewSecurityPermissionsBaseElement","FORMS_SECURITY_USER_GROUP_WORKSPACE_CONTEXT","security","permission","value","_a","_b","_c","html","__decorateClass","state","customElement","UmbWorkspaceViewSecurityUserGroupPermissionsElement$1"],"mappings":";;;;;;;;AAaA,MAAMA,IAAc;AAGb,IAAMC,IAAN,cACGC,EAEV;AAAA,EAIE,cAAc;AACZ,UAAMC,EAA4C,YAAY;AAAA,EAAA;AAAA,EAGhE,sBAAsB;AACpB,IAAK,KAAK,oBAEV,KAAK,QAAQ,KAAK,iBAAiB,MAAM,CAACC,MAAa;AACrD,MAAKA,MACL,KAAK,YAAYA;AAAA,IAAA,CAClB;AAAA,EAAA;AAAA,EAGH,2BACE,GACAC,GACA;;AACA,UAAMC,IAAQ,EAAE,OAAO;AACvB,KAAAC,IAAA,KAAK,qBAAL,QAAAA,EAAuB,6BAA6BF,GAAYC,IAE5DD,MAAe,iBAAiB,CAACC,OACnCE,IAAA,KAAK,qBAAL,QAAAA,EAAuB,6BAA6B,eAAe,MACnEC,IAAA,KAAK,qBAAL,QAAAA,EAAuB;AAAA,MACrB;AAAA,MACA;AAAA,QAIJ,KAAK,cAAc,IAAI,YAAY,aAAa,CAAC,GACjD,KAAK,cAAA;AAAA,EAAc;AAAA,EAGrB,SAAS;;AACP,WAAOC,KAAQ,KAAK,eAAcH,IAAA,KAAK,cAAL,gBAAAA,EAAgB,iBAAiB,CAAC;AAAA,MAClE,KAAK,qBAAmBC,IAAA,KAAK,cAAL,gBAAAA,EAAgB,mBAAkB,CAAA,CAAE,CAAC;AAAA,MAC7D,KAAK,sBAAoBC,IAAA,KAAK,cAAL,gBAAAA,EAAgB,kBAAiB,CAAA,CAAE,CAAC;AAAA,EAAA;AAEnE;AAvCEE,EAAA;AAAA,EADCC,EAAA;AAAM,GAJIX,EAKX,WAAA,aAAA,CAAA;AALWA,IAANU,EAAA;AAAA,EADNE,EAAcb,CAAW;AAAA,GACbC,CAAA;AA8Cb,MAAAa,IAAeb;"}