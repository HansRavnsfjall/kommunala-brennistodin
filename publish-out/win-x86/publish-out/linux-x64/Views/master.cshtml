@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@{ Layout = null; }
<!doctype html>
<html lang="fo">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />
  <title>@(ViewBag.Title ?? Model?.Name ?? "Kommunala Brennistøðin – Endurnýtsla")</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Your CSS -->
  <link href="/css/custom.css" rel="stylesheet" />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@100..900&display=swap" rel="stylesheet">
  @RenderSection("Head", required: false)
</head>
<body>

  <!-- ===== Thin topbar (right side) ===== -->
  <div class="topbar">
    <div class="container">
      <div class="d-flex justify-content-end topbar-right">
        <a class="lang-pill" href="#">EN</a>
        <a href="#" aria-label="Search">
          <svg class="nav-icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4.2-4.2"/></svg>
        </a>
        <a href="#" aria-label="Login">
          <svg class="nav-icon" viewBox="0 0 24 24"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5z"/><path d="M3 22a9 9 0 0 1 18 0"/></svg>
        </a>
      </div>
    </div>
  </div>
@await Html.PartialAsync("~/Views/Partials/Shared/_MainNav.cshtml")


  <!-- ===== Page content goes here ===== -->
  <main id="main">
    @RenderBody()
  </main>

  <!-- ===== Footer ===== -->
  <footer>
    <div class="container">
      <div class="row logo-row">
        <div class="foot-brand col-12">
          <img src="~/assets/footer-logo.svg" alt="" />
        </div>
      </div>
      <div class="row gy-4">
        <div class="col-md-4">
          Kommunala Brennistøðin<br />
          Á Hjalla 5<br/>188 Hoyvík<br/>
          <a class="foot-link" href="mailto:torshavn@torshavn.fo">torshavn@torshavn.fo</a><br/>
          Tel. (+298) 30 20 40
        </div>
        <div class="col-6 col-md-4">
          <a class="foot-link d-block" href="#">Endurnýtslan á Hjalla</a>
          <a class="foot-link d-block" href="#">Endurnýtslan í Kollafirði</a>
          <a class="foot-link d-block" href="#">Endurnýtslan í Norðoy</a>
          <a class="foot-link d-block" href="#">Endurnýtslan í Hesti</a>
        </div>
        <div class="col-md-4 ms-auto">
          <div class="fw-800 mb-2">Fylg okkum</div>
          <div class="social social-icons d-flex gap-2">
            <a href="#" aria-label="Facebook">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 2h-3a4 4 0 0 0-4 4v3H8v4h3v9h4v-9h3l1-4h-4V6a1 1 0 0 1 1-1h3z"/></svg>
            </a>
            <a href="#" aria-label="Instagram">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="5"/><circle cx="12" cy="12" r="3"/><path d="M17.5 6.5h.01"/></svg>
            </a>
            <a href="#" aria-label="X">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18 2h3l-7.5 9.5L22 22h-5l-4.8-6.3L6 22H3l8-10.1L2 2h5l4.3 5.7L18 2z"/></svg>
            </a>
          </div>
        </div>
      </div>
      <div class="row gy-4 bottom-row align-items-center">
        <div class="col-md-4"><img src="~/assets/tk-logo.svg" alt="" /></div>
        <div class="col-md-4"><a href="">Dátuverndarkunning</a></div>
        <div class="col-md-4"><div class="copyright">© @DateTime.Now.Year Kommunala Brennistøðin</div></div>
      </div>
    </div>
  </footer>

  

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  @RenderSection("Scripts", required: false)









  @* === TEMP debug: list the blocks on your globalBlocksPage.modul === *@
@using Umbraco.Cms.Core.Models.Blocks
@inject Umbraco.Cms.Web.Common.UmbracoHelper Umbraco

@{
    // Your one-and-only global page KEY:
    var globalPageKey = Guid.Parse("409f2e13-404d-4040-a120-341581f55942");

    // Fetch the global page safely
    var globalPage = Umbraco.Content(globalPageKey);

    // Try to read the Block List (alias: modul)
    BlockListModel? list = null;
    try
    {
        list = globalPage?.Value<BlockListModel>("modul");
    }
    catch { /* ignore – we'll show a friendly message below */ }

    // Helper to get a human label from common heading fields
    string LabelFrom(IPublishedElement el)
    {
        string? Try(params string[] aliases)
            => aliases.FirstOrDefault(a => el.HasProperty(a))
               is string hit ? el.Value<string>(hit) : null;

        return Try("yvirskrift", "temayvrskrift", "title", "heading", "navn")
               ?? el.ContentType.Alias; // fallback to element alias
    }
}

<div style="padding:.5rem; background:#eef; border:1px solid #99c; margin:.5rem 0;">
  <strong>Global blocks quick dump</strong>
  <div>Page key: <code>@globalPageKey</code>, property: <code>modul</code></div>
</div>

@if (globalPage is null)
{
    <div style="padding:.5rem; background:#ffd0d0; border:1px solid #e0a0a0;">
        Could not load the global page by key <code>@globalPageKey</code>.
    </div>
}
else if (list is null)
{
    <div style="padding:.5rem; background:#ffd0d0; border:1px solid #e0a0a0;">
        Could not read Block List <code>modul</code> from <strong>@globalPage.ContentType.Alias</strong>.
    </div>
}
else if (!list.Any())
{
    <div style="padding:.5rem; background:#fff3cd; border:1px solid #ffe69c;">
        The Block List <code>modul</code> is empty on the global page.
    </div>
}
else
{
    <ul style="padding:.5rem 1rem; border:1px dashed #99c; margin:.25rem 0 1rem 0;">
        @foreach (var item in list)
        {
            var label = LabelFrom(item.Content);
            <li style="margin:.25rem 0;">
                @label — alias <strong>@item.Content.ContentType.Alias</strong> — key <code>@item.Content.Key</code>
            </li>
        }
    </ul>
}
@* === /TEMP debug === *@

</body>
</html>
