{"version":3,"file":"buttons.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/buttons/buttons.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2024 Lee Kelleher\r\n\r\nimport {\r\n\tclassMap,\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tifDefined,\r\n\tproperty,\r\n\trepeat,\r\n\tstate,\r\n\twhen,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { parseBoolean } from '../../utils/parse-boolean.function.js';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { ContentmentListItem, ContentmentDataListOption } from '../types.js';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\nimport type { UUIInterfaceLook } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('contentment-property-editor-ui-buttons')\r\nexport class ContentmentPropertyEditorUIButtonsElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t@property({ type: Array })\r\n\tpublic set value(value: Array<string> | string | undefined) {\r\n\t\tthis.#value = Array.isArray(value) ? value : value ? [value] : [];\r\n\t\tthis.#updateItems();\r\n\t}\r\n\tpublic get value(): Array<string> | undefined {\r\n\t\treturn this.#value;\r\n\t}\r\n\t#value?: Array<string> = [];\r\n\r\n\tpublic set config(config: UmbPropertyEditorUiElement['config']) {\r\n\t\tif (!config) return;\r\n\t\tthis._defaultIcon = config.getValueByAlias('defaultIcon');\r\n\t\tthis._enableMultiple = parseBoolean(config.getValueByAlias('enableMultiple'));\r\n\t\tthis._labelStyle = config.getValueByAlias('labelStyle') ?? 'both';\r\n\t\tthis._look = config.getValueByAlias('look') ?? 'secondary';\r\n\t\tthis._size = config.getValueByAlias('size') ?? 'm';\r\n\r\n\t\tconst items = config.getValueByAlias<Array<ContentmentListItem>>('items') ?? [];\r\n\t\tthis._items = items.map((item) => ({ ...item, selected: this.value?.includes(item.value) ?? false }));\r\n\r\n\t\tif (!this.value) {\r\n\t\t\tconst defaultValue = config.getValueByAlias('defaultValue') ?? [];\r\n\t\t\tthis.value = this._enableMultiple && Array.isArray(defaultValue) ? defaultValue : [defaultValue];\r\n\t\t}\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _defaultIcon?: string;\r\n\r\n\t@state()\r\n\tprivate _enableMultiple = false;\r\n\r\n\t@state()\r\n\tprivate _items: Array<ContentmentDataListOption> = [];\r\n\r\n\t@state()\r\n\tprivate _labelStyle: 'icon' | 'text' | 'both' = 'both';\r\n\r\n\t@state()\r\n\tprivate _look: UUIInterfaceLook = 'secondary';\r\n\r\n\t@state()\r\n\tprivate _size: 's' | 'm' | 'l' = 'm';\r\n\r\n\t#onClick(option: ContentmentDataListOption) {\r\n\t\toption.selected = !option.selected;\r\n\r\n\t\tconst values: Array<string> = [];\r\n\r\n\t\tthis._items.forEach((item) => {\r\n\t\t\tif (!this._enableMultiple) {\r\n\t\t\t\titem.selected = option.selected && item.value === option.value;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.selected) {\r\n\t\t\t\tvalues?.push(item.value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.value = values;\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t#updateItems() {\r\n\t\tif (this._items?.length) {\r\n\t\t\tthis._items.forEach((item) => {\r\n\t\t\t\titem.selected = this.#value?.includes(item.value) ?? false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._items?.length) {\r\n\t\t\treturn html`\r\n\t\t\t\t<contentment-info-box\r\n\t\t\t\t\tcompact\r\n\t\t\t\t\ttype=\"warning\"\r\n\t\t\t\t\ticon=\"icon-alert\"\r\n\t\t\t\t\theading=\"There are no items to display\"></contentment-info-box>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-button-group>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis._items,\r\n\t\t\t\t\t(item) => item.value,\r\n\t\t\t\t\t(item) => this.#renderItem(item)\r\n\t\t\t\t)}\r\n\t\t\t</uui-button-group>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: ContentmentDataListOption) {\r\n\t\tconst classes = {\r\n\t\t\tactive: item.selected,\r\n\t\t\tsmall: this._size === 's',\r\n\t\t\tmedium: this._size === 'm',\r\n\t\t\tlarge: this._size === 'l',\r\n\t\t};\r\n\t\tconst description = this._labelStyle === 'icon' ? [item.name, item.description].join(', ') : item.description;\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tclass=${classMap(classes)}\r\n\t\t\t\tlook=${this._look}\r\n\t\t\t\tlabel=${description ?? item.name}\r\n\t\t\t\ttitle=${ifDefined(description ?? undefined)}\r\n\t\t\t\t?disabled=${item.disabled}\r\n\t\t\t\t@click=${() => this.#onClick(item)}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\tthis._labelStyle !== 'text',\r\n\t\t\t\t\t\t() => html`<umb-icon .name=${item.icon ?? this._defaultIcon}></umb-icon>`\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t${when(this._labelStyle !== 'icon', () => html`<span>${this.localize.string(item.name)}</span>`)}\r\n\t\t\t\t</div>\r\n\t\t\t</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tuui-button-group {\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t}\r\n\t\t\tuui-button.small {\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\t\t\tuui-button.medium {\r\n\t\t\t\tfont-size: 1rem;\r\n\t\t\t}\r\n\t\t\tuui-button.large {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t}\r\n\t\t\tuui-button.active {\r\n\t\t\t\t--uui-button-background-color: var(--uui-menu-item-background-color-active, var(--uui-color-current, #f5c1bc));\r\n\t\t\t\t--uui-button-contrast: var(--uui-color-default-standalone, #1c233b);\r\n\t\t\t}\r\n\t\t\tuui-button.active:hover {\r\n\t\t\t\t--uui-button-background-color-hover: var(\r\n\t\t\t\t\t--uui-menu-item-background-color-active-hover,\r\n\t\t\t\t\tvar(--uui-color-current-emphasis, #f8d6d3)\r\n\t\t\t\t);\r\n\t\t\t\t--uui-button-contrast-hover: var(--uui-color-default-standalone, #1c233b);\r\n\t\t\t}\r\n\t\t\tuui-button > div {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: 0.3rem;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { ContentmentPropertyEditorUIButtonsElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-property-editor-ui-buttons': ContentmentPropertyEditorUIButtonsElement;\r\n\t}\r\n}\r\n"],"names":["_value","_ContentmentPropertyEditorUIButtonsElement_instances","onClick_fn","updateItems_fn","renderItem_fn","ContentmentPropertyEditorUIButtonsElement","UmbLitElement","__privateAdd","value","__privateSet","__privateMethod","__privateGet","config","parseBoolean","items","item","_a","defaultValue","html","repeat","option","values","UmbChangeEvent","classes","description","classMap","ifDefined","when","css","__decorateClass","property","state","customElement"],"mappings":"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"}