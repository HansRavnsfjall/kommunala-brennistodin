{"version":3,"file":"bytes.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/bytes/bytes.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2024 Lee Kelleher\r\n\r\nimport { customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\n\r\n@customElement('contentment-property-editor-ui-bytes')\r\nexport class ContentmentPropertyEditorUIBytesElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t@state()\r\n\tprivate _decimals = 0;\r\n\r\n\t@state()\r\n\tprivate _kilo = 1024;\r\n\r\n\t@property({ type: Number })\r\n\tpublic value: number = 0;\r\n\r\n\tpublic set config(config: UmbPropertyEditorUiElement['config']) {\r\n\t\tif (!config) return;\r\n\r\n\t\tconst decimals = config.getValueByAlias<{ from: number; to: number }>('decimals');\r\n\t\tthis._decimals = decimals?.from && decimals.from > 0 ? decimals.from : 2;\r\n\r\n\t\tconst kilo = Number(config.getValueByAlias('kilo'));\r\n\t\tthis._kilo = kilo > 0 ? kilo : 1024;\r\n\t}\r\n\r\n\t#formatBytes(bytes?: number): string {\r\n\t\tif (!bytes) return '0 Bytes';\r\n\r\n\t\tconst k = this._kilo || 1024;\r\n\t\tconst dm = this._decimals || 0;\r\n\t\tconst sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n\t\treturn Number.parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn this.#formatBytes(this.value);\r\n\t}\r\n}\r\n\r\nexport { ContentmentPropertyEditorUIBytesElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-property-editor-ui-bytes': ContentmentPropertyEditorUIBytesElement;\r\n\t}\r\n}\r\n"],"names":["_ContentmentPropertyEditorUIBytesElement_instances","formatBytes_fn","ContentmentPropertyEditorUIBytesElement","UmbLitElement","__privateAdd","config","decimals","kilo","__privateMethod","bytes","k","dm","sizes","i","__decorateClass","state","property","customElement"],"mappings":";;;;;;;;8OAAAA,GAAAC;AAQa,IAAAC,IAAN,cAAsDC,EAAoD;AAAA,EAA1G,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GAEN,KAAQ,YAAY,GAGpB,KAAQ,QAAQ,MAGhB,KAAO,QAAgB;AAAA,EAAA;AAAA,EAEvB,IAAW,OAAOK,GAA8C;AAC/D,QAAI,CAACA,EAAQ;AAEP,UAAAC,IAAWD,EAAO,gBAA8C,UAAU;AAChF,SAAK,YAAYC,KAAA,QAAAA,EAAU,QAAQA,EAAS,OAAO,IAAIA,EAAS,OAAO;AAEvE,UAAMC,IAAO,OAAOF,EAAO,gBAAgB,MAAM,CAAC;AAC7C,SAAA,QAAQE,IAAO,IAAIA,IAAO;AAAA,EAAA;AAAA,EAevB,SAAS;AACV,WAAAC,EAAA,MAAKR,GAALC,CAAA,EAAA,KAAA,MAAkB,KAAK,KAAA;AAAA,EAAA;AAEhC;AAnCOD,IAAA,oBAAA,QAAA;AAoBNC,IAAY,SAACQ,GAAwB;AAChC,MAAA,CAACA,EAAc,QAAA;AAEb,QAAAC,IAAI,KAAK,SAAS,MAClBC,IAAK,KAAK,aAAa,GACvBC,IAAQ,CAAC,SAAS,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,GAEhEC,IAAI,KAAK,MAAM,KAAK,IAAIJ,CAAK,IAAI,KAAK,IAAIC,CAAC,CAAC;AAElD,SAAO,OAAO,YAAYD,IAAQ,KAAK,IAAIC,GAAGG,CAAC,GAAG,QAAQF,CAAE,CAAC,IAAI,MAAMC,EAAMC,CAAC;AAC/E;AA5BQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKb,EAEJ,WAAA,aAAA,CAAA;AAGAY,EAAA;AAAA,EADPC,EAAM;AAAA,GAJKb,EAKJ,WAAA,SAAA,CAAA;AAGDY,EAAA;AAAA,EADNE,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAPdd,EAQL,WAAA,SAAA,CAAA;AARKA,IAANY,EAAA;AAAA,EADNG,EAAc,sCAAsC;AAAA,GACxCf,CAAA;"}