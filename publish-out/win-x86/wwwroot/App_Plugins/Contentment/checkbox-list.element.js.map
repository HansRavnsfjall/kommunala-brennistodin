{"version":3,"file":"checkbox-list.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/checkbox-list/checkbox-list.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2024 Lee Kelleher\r\n\r\nimport {\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tproperty,\r\n\trepeat,\r\n\tstate,\r\n\tunsafeHTML,\r\n\twhen,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { parseBoolean } from '../../utils/parse-boolean.function.js';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { ContentmentListItem } from '../types.js';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\n\r\ntype ContentmentDataListCheckboxOption = ContentmentListItem & { checked: boolean };\r\n\r\n@customElement('contentment-property-editor-ui-checkbox-list')\r\nexport class ContentmentPropertyEditorUICheckboxListElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t@property({ type: Array })\r\n\tpublic set value(value: Array<string> | undefined) {\r\n\t\tthis.#value = value ?? [];\r\n\t}\r\n\tpublic get value(): Array<string> | undefined {\r\n\t\treturn this.#value;\r\n\t}\r\n\t#value?: Array<string> = [];\r\n\r\n\tpublic set config(config: UmbPropertyEditorUiElement['config']) {\r\n\t\tif (!config) return;\r\n\r\n\t\tthis._checkAll = parseBoolean(config.getValueByAlias('checkAll'));\r\n\t\tthis._showDescriptions = parseBoolean(config.getValueByAlias('showDescriptions'));\r\n\t\tthis._showIcons = parseBoolean(config.getValueByAlias('showIcons'));\r\n\r\n\t\tconst items = config.getValueByAlias<Array<ContentmentListItem>>('items') ?? [];\r\n\t\tthis._items = items.map((item) => ({ ...item, checked: this.value?.includes(item.value) ?? false }));\r\n\r\n\t\tif (this._checkAll) {\r\n\t\t\tthis._toggleChecked = this._items.every((item) => item.checked);\r\n\t\t}\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _checkAll = false;\r\n\r\n\t@state()\r\n\tprivate _items: Array<ContentmentDataListCheckboxOption> = [];\r\n\r\n\t@state()\r\n\tprivate _showDescriptions = false;\r\n\r\n\t@state()\r\n\tprivate _showIcons = false;\r\n\r\n\t@state()\r\n\tprivate _toggleChecked = false;\r\n\r\n\t#onClick(item: ContentmentDataListCheckboxOption) {\r\n\t\titem.checked = !item.checked;\r\n\r\n\t\tthis._toggleChecked = this._items.every((item) => item.checked);\r\n\r\n\t\tconst values: Array<string> = [];\r\n\r\n\t\tthis._items.forEach((item) => {\r\n\t\t\tif (item.checked) {\r\n\t\t\t\tvalues?.push(item.value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.value = values;\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t#onToggle(event: CustomEvent & { target: HTMLInputElement }) {\r\n\t\tthis._toggleChecked = event.target.checked;\r\n\r\n\t\tconst values: Array<string> = [];\r\n\r\n\t\tthis._items.forEach((item) => {\r\n\t\t\titem.checked = this._toggleChecked;\r\n\t\t\tif (item.checked) {\r\n\t\t\t\tvalues.push(item.value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.value = values;\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._items?.length) {\r\n\t\t\treturn html`\r\n\t\t\t\t<contentment-info-box\r\n\t\t\t\t\tcompact\r\n\t\t\t\t\ttype=\"warning\"\r\n\t\t\t\t\ticon=\"icon-alert\"\r\n\t\t\t\t\theading=\"There are no items to display\"></contentment-info-box>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t${when(this._checkAll, () => this.#renderCheckAll())}\r\n\t\t\t<ul>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis._items,\r\n\t\t\t\t\t(item) => item.value,\r\n\t\t\t\t\t(item) => this.#renderItem(item)\r\n\t\t\t\t)}\r\n\t\t\t</ul>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderCheckAll() {\r\n\t\tconst label = !this._toggleChecked\r\n\t\t\t? this.localize.term('contentment_checkboxListCheckAll')\r\n\t\t\t: this.localize.term('contentment_checkboxListUncheckAll');\r\n\t\treturn html`\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<uui-checkbox label=${label} ?checked=${this._toggleChecked} @change=${this.#onToggle}></uui-checkbox>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: ContentmentDataListCheckboxOption) {\r\n\t\treturn html`\r\n\t\t\t<li>\r\n\t\t\t\t<uui-checkbox\r\n\t\t\t\t\tlabel=${item.name}\r\n\t\t\t\t\tvalue=${item.value}\r\n\t\t\t\t\t?checked=${item.checked}\r\n\t\t\t\t\t?disabled=${item.disabled}\r\n\t\t\t\t\t@change=${() => this.#onClick(item)}>\r\n\t\t\t\t\t<div class=\"outer\">\r\n\t\t\t\t\t\t${when(this._showIcons && item.icon, (icon) => html`<umb-icon name=${icon}></umb-icon>`)}\r\n\t\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t\t<span slot=\"label\">${this.localize.string(item.name)}</span>\r\n\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\tthis._showDescriptions && item.description,\r\n\t\t\t\t\t\t\t\t() => html`<span slot=\"description\">${unsafeHTML(item.description)}</span>`\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</uui-checkbox>\r\n\t\t\t</li>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tul {\r\n\t\t\t\tlist-style: none;\r\n\t\t\t\tpadding: 0;\r\n\t\t\t\tmargin: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.outer {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tgap: 0.5rem;\r\n\t\t\t}\r\n\r\n\t\t\tuui-form-layout-item {\r\n\t\t\t\tmargin-top: 10px;\r\n\t\t\t\tmargin-bottom: 0;\r\n\t\t\t}\r\n\r\n\t\t\tumb-icon {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { ContentmentPropertyEditorUICheckboxListElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-property-editor-ui-checkbox-list': ContentmentPropertyEditorUICheckboxListElement;\r\n\t}\r\n}\r\n"],"names":["_value","_ContentmentPropertyEditorUICheckboxListElement_instances","onClick_fn","onToggle_fn","renderCheckAll_fn","renderItem_fn","ContentmentPropertyEditorUICheckboxListElement","UmbLitElement","__privateAdd","value","__privateSet","__privateGet","config","parseBoolean","items","item","_a","html","when","__privateMethod","repeat","values","UmbChangeEvent","event","label","icon","unsafeHTML","css","__decorateClass","property","state","customElement"],"mappings":"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"}