{"version":3,"file":"dictionary-picker.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/dictionary-picker/dictionary-picker.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2024 Lee Kelleher\r\n\r\nimport { css, customElement, html, property, repeat, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbDictionaryPickerInputContext } from '@umbraco-cms/backoffice/dictionary';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\nimport type { UmbUniqueItemModel } from '@umbraco-cms/backoffice/models';\r\n\r\n@customElement('contentment-property-editor-ui-dictionary-picker')\r\nexport class ContentmentPropertyEditorUIDictionaryPickerElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t#pickerContext = new UmbDictionaryPickerInputContext(this);\r\n\r\n\t@state()\r\n\tprivate _items?: Array<UmbUniqueItemModel>;\r\n\r\n\t@property({ type: String })\r\n\tpublic set value(unique: string | undefined) {\r\n\t\tthis.#pickerContext?.setSelection(unique ? [unique] : []);\r\n\t}\r\n\tpublic get value(): string | undefined {\r\n\t\tconst selection = this.#pickerContext?.getSelection() ?? [];\r\n\t\treturn selection.length > 0 ? selection.join(',') : undefined;\r\n\t}\r\n\r\n\tpublic config?: UmbPropertyEditorUiElement['config'];\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.observe(this.#pickerContext.selection, (selection) => (this.value = selection.join(',')), '_observeSelection');\r\n\t\tthis.observe(this.#pickerContext.selectedItems, (selectedItems) => (this._items = selectedItems), '_observerItems');\r\n\t}\r\n\r\n\t#openPicker() {\r\n\t\tthis.#pickerContext?.openPicker();\r\n\t}\r\n\r\n\t#removeItem(item: UmbUniqueItemModel) {\r\n\t\tthis.#pickerContext?.requestRemoveItem(item.unique);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`${this.#renderItems()} ${this.#renderAddButton()}`;\r\n\t}\r\n\r\n\t#renderAddButton() {\r\n\t\tif (this.value) return;\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tid=\"btn-add\"\r\n\t\t\t\tlabel=${this.localize.term('general_choose')}\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t@click=${this.#openPicker}></uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItems() {\r\n\t\tif (!this._items) return;\r\n\t\treturn html`\r\n\t\t\t<uui-ref-list>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis._items,\r\n\t\t\t\t\t(item) => item.unique,\r\n\t\t\t\t\t(item) => this.#renderItem(item)\r\n\t\t\t\t)}\r\n\t\t\t</uui-ref-list>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: UmbUniqueItemModel) {\r\n\t\tif (!item.unique) return;\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node name=${item.name} id=${item.unique} ?standalone=${this._items?.length === 1}>\r\n\t\t\t\t<umb-icon slot=\"icon\" name=\"icon-book-alt\"></umb-icon>\r\n\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t<uui-button label=${this.localize.term('general_remove')} @click=${() => this.#removeItem(item)}></uui-button>\r\n\t\t\t\t</uui-action-bar>\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#btn-add {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { ContentmentPropertyEditorUIDictionaryPickerElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-property-editor-ui-dictionary-picker': ContentmentPropertyEditorUIDictionaryPickerElement;\r\n\t}\r\n}\r\n"],"names":["_pickerContext","_ContentmentPropertyEditorUIDictionaryPickerElement_instances","openPicker_fn","removeItem_fn","renderAddButton_fn","renderItems_fn","renderItem_fn","ContentmentPropertyEditorUIDictionaryPickerElement","UmbLitElement","__privateAdd","UmbDictionaryPickerInputContext","__privateGet","selection","selectedItems","unique","_a","html","__privateMethod","item","repeat","css","__decorateClass","state","property","customElement"],"mappings":";;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAUa,IAAAC,IAAN,cACEC,EAET;AAAA,EAiBC,cAAc;AACP,UAAA,GArBDC,EAAA,MAAAR,CAAA,GAIWQ,EAAA,MAAAT,GAAA,IAAIU,EAAgC,IAAI,CAAA,GAmBxD,KAAK,QAAQC,EAAA,MAAKX,CAAe,EAAA,WAAW,CAACY,MAAe,KAAK,QAAQA,EAAU,KAAK,GAAG,GAAI,mBAAmB,GAC7G,KAAA,QAAQD,QAAKX,CAAe,EAAA,eAAe,CAACa,MAAmB,KAAK,SAASA,GAAgB,gBAAgB;AAAA,EAAA;AAAA,EAdnH,IAAW,MAAMC,GAA4B;;AAC5C,KAAAC,IAAAJ,EAAA,MAAKX,OAAL,QAAAe,EAAqB,aAAaD,IAAS,CAACA,CAAM,IAAI;EAAE;AAAA,EAEzD,IAAW,QAA4B;;AACtC,UAAMF,MAAYG,IAAAJ,EAAA,MAAKX,CAAgB,MAArB,gBAAAe,EAAqB,mBAAkB,CAAC;AAC1D,WAAOH,EAAU,SAAS,IAAIA,EAAU,KAAK,GAAG,IAAI;AAAA,EAAA;AAAA,EAoB5C,SAAS;AACjB,WAAOI,IAAOC,EAAK,MAAAhB,GAAAI,CAAA,EAAL,UAAmB,IAAIY,EAAA,MAAKhB,MAAL,KAAuB,IAAA,CAAA;AAAA,EAAA;AA8C9D;AA9ECD,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AA2BNC,IAAW,WAAG;;AACb,GAAAa,IAAAJ,EAAA,MAAKX,OAAL,QAAAe,EAAqB;AACtB;AAEAZ,IAAW,SAACe,GAA0B;;AAChC,GAAAH,IAAAJ,EAAA,MAAAX,CAAA,MAAA,QAAAe,EAAgB,kBAAkBG,EAAK;AAC7C;AAMAd,IAAgB,WAAG;AAClB,MAAI,MAAK;AACF,WAAAY;AAAA;AAAA;AAAA,YAGG,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA;AAAA,aAEnCC,QAAKhB,GAAWC,CAAA,CAAA;AAAA;AAE5B;AAEAG,IAAY,WAAG;AACV,MAAC,KAAK;AACH,WAAAW;AAAA;AAAA,MAEHG;AAAA,MACD,KAAK;AAAA,MACL,CAACD,MAASA,EAAK;AAAA,MACf,CAACA,MAASD,EAAK,MAAAhB,GAAAK,CAAA,EAAL,KAAiB,MAAAY,CAAA;AAAA,IAC3B,CAAA;AAAA;AAAA;AAGJ;AAEAZ,IAAW,SAACY,GAA0B;;AACjC,MAACA,EAAK;AACH,WAAAF;AAAA,wBACeE,EAAK,IAAI,OAAOA,EAAK,MAAM,kBAAgBH,IAAA,KAAK,WAAL,gBAAAA,EAAa,YAAW,CAAC;AAAA;AAAA;AAAA,yBAGnE,KAAK,SAAS,KAAK,gBAAgB,CAAC,WAAW,MAAME,EAAA,MAAKhB,GAALE,CAAA,EAAA,KAAA,MAAiBe,CAAK,CAAA;AAAA;AAAA;AAAA;AAInG;AAzEYX,EA2EI,SAAS;AAAA,EACxBa;AAAA;AAAA;AAAA;AAAA;AAKD;AA1EQC,EAAA;AAAA,EADPC,EAAM;AAAA,GANKf,EAOJ,WAAA,UAAA,CAAA;AAGGc,EAAA;AAAA,EADVE,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GATdhB,EAUD,WAAA,SAAA,CAAA;AAVCA,IAANc,EAAA;AAAA,EADNG,EAAc,kDAAkD;AAAA,GACpDjB,CAAA;"}