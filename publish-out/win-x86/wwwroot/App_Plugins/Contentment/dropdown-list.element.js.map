{"version":3,"file":"dropdown-list.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/property-editor-ui/dropdown-list/dropdown-list.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2024 Lee Kelleher\r\n\r\nimport { parseBoolean } from '../../utils/parse-boolean.function.js';\r\nimport {\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tifDefined,\r\n\tproperty,\r\n\trepeat,\r\n\tstate,\r\n\tunsafeHTML,\r\n\twhen,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { ContentmentListItem } from '../types.js';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\nimport type { UUIComboboxElement } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('contentment-property-editor-ui-dropdown-list')\r\nexport class ContentmentPropertyEditorUIDropdownListElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t@property()\r\n\tpublic set value(value: Array<string> | string | undefined) {\r\n\t\tthis.#value = Array.isArray(value) === true ? value[0] : value ?? '';\r\n\t}\r\n\tpublic get value(): string | undefined {\r\n\t\treturn this.#value;\r\n\t}\r\n\t#value?: string = '';\r\n\r\n\tpublic set config(config: UmbPropertyEditorUiElement['config']) {\r\n\t\tif (!config) return;\r\n\t\tthis._items = config.getValueByAlias<Array<ContentmentListItem>>('items') ?? [];\r\n\t\tthis._showDescriptions = parseBoolean(config.getValueByAlias('showDescriptions'));\r\n\t\tthis._showIcons = parseBoolean(config.getValueByAlias('showIcons'));\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _items: Array<ContentmentListItem> = [];\r\n\r\n\t@state()\r\n\tprivate _showDescriptions = false;\r\n\r\n\t@state()\r\n\tprivate _showIcons = false;\r\n\r\n\t#onChange(event: CustomEvent & { target: UUIComboboxElement }) {\r\n\t\tif (event.target.nodeName !== 'UUI-COMBOBOX') return;\r\n\t\tthis.value = event.target.value as string;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._items?.length) {\r\n\t\t\treturn html`\r\n\t\t\t\t<contentment-info-box\r\n\t\t\t\t\tcompact\r\n\t\t\t\t\ttype=\"warning\"\r\n\t\t\t\t\ticon=\"icon-alert\"\r\n\t\t\t\t\theading=\"There are no items to display\"></contentment-info-box>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-combobox value=${ifDefined(this.value)} @change=${this.#onChange}>\r\n\t\t\t\t<uui-combobox-list>\r\n\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\tthis._items,\r\n\t\t\t\t\t\t(item) => item.value,\r\n\t\t\t\t\t\t(item) => this.#renderItem(item)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</uui-combobox-list>\r\n\t\t\t</uui-combobox>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: ContentmentListItem) {\r\n\t\treturn html`\r\n\t\t\t<uui-combobox-list-option\r\n\t\t\t\tdisplay-value=${this.localize.string(item.name)}\r\n\t\t\t\tvalue=${item.value}\r\n\t\t\t\t?disabled=${item.disabled}>\r\n\t\t\t\t<div class=\"outer\">\r\n\t\t\t\t\t${when(this._showIcons && item.icon, (_icon) => html`<umb-icon name=${_icon}></umb-icon>`)}\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\tthis._showDescriptions && item.description,\r\n\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t\t\t<span slot=\"label\">${this.localize.string(item.name)}</span>\r\n\t\t\t\t\t\t\t\t<span slot=\"description\">${unsafeHTML(item.description)}</span>\r\n\t\t\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t() => html`<span>${this.localize.string(item.name)}</span>`\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</uui-combobox-list-option>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tuui-combobox {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.outer {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tgap: 0.5rem;\r\n\t\t\t\talign-items: flex-start;\r\n\t\t\t}\r\n\r\n\t\t\tuui-combobox-list-option {\r\n\t\t\t\tpadding: 0.5rem;\r\n\t\t\t}\r\n\r\n\t\t\tuui-form-layout-item {\r\n\t\t\t\tmargin-top: 3px;\r\n\t\t\t\tmargin-bottom: 0;\r\n\t\t\t}\r\n\r\n\t\t\tumb-icon {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { ContentmentPropertyEditorUIDropdownListElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-property-editor-ui-dropdown-list': ContentmentPropertyEditorUIDropdownListElement;\r\n\t}\r\n}\r\n"],"names":["_value","_ContentmentPropertyEditorUIDropdownListElement_instances","onChange_fn","renderItem_fn","ContentmentPropertyEditorUIDropdownListElement","UmbLitElement","__privateAdd","value","__privateSet","__privateGet","config","parseBoolean","_a","html","ifDefined","__privateMethod","repeat","item","event","UmbChangeEvent","when","_icon","unsafeHTML","css","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAsBa,IAAAC,IAAN,cACEC,EAET;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAWYK,EAAA,MAAAN,GAAA,EAAA,GAUlB,KAAQ,SAAqC,CAAC,GAG9C,KAAQ,oBAAoB,IAG5B,KAAQ,aAAa;AAAA,EAAA;AAAA,EAtBrB,IAAW,MAAMO,GAA2C;AACtD,IAAAC,EAAA,MAAAR,GAAS,MAAM,QAAQO,CAAK,MAAM,KAAOA,EAAM,CAAC,IAAIA,KAAS,EAAA;AAAA,EAAA;AAAA,EAEnE,IAAW,QAA4B;AACtC,WAAOE,EAAK,MAAAT,CAAA;AAAA,EAAA;AAAA,EAIb,IAAW,OAAOU,GAA8C;AAC/D,IAAKA,MACL,KAAK,SAASA,EAAO,gBAA4C,OAAO,KAAK,CAAC,GAC9E,KAAK,oBAAoBC,EAAaD,EAAO,gBAAgB,kBAAkB,CAAC,GAChF,KAAK,aAAaC,EAAaD,EAAO,gBAAgB,WAAW,CAAC;AAAA,EAAA;AAAA,EAkB1D,SAAS;;AACb,YAACE,IAAA,KAAK,WAAL,QAAAA,EAAa,SAUXC;AAAA,yBACgBC,EAAU,KAAK,KAAK,CAAC,YAAYC,QAAKd,GAASC,CAAA,CAAA;AAAA;AAAA,OAEjEc;AAAA,MACD,KAAK;AAAA,MACL,CAACC,MAASA,EAAK;AAAA,MACf,CAACA,MAASF,EAAK,MAAAd,GAAAE,CAAA,EAAL,KAAiB,MAAAc,CAAA;AAAA,IAC3B,CAAA;AAAA;AAAA;AAAA,MAhBIJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBJ;AAwDN;AAlGCb,IAAA,oBAAA,QAAA;AAXMC,IAAA,oBAAA,QAAA;AA6BNC,IAAS,SAACgB,GAAqD;AAC1D,EAAAA,EAAM,OAAO,aAAa,mBACzB,KAAA,QAAQA,EAAM,OAAO,OACrB,KAAA,cAAc,IAAIC,GAAgB;AACxC;AA0BAhB,IAAW,SAACc,GAA2B;AAC/B,SAAAJ;AAAA;AAAA,oBAEW,KAAK,SAAS,OAAOI,EAAK,IAAI,CAAC;AAAA,YACvCA,EAAK,KAAK;AAAA,gBACNA,EAAK,QAAQ;AAAA;AAAA,OAEtBG,EAAK,KAAK,cAAcH,EAAK,MAAM,CAACI,MAAUR,mBAAsBQ,CAAK,cAAc,CAAC;AAAA,OACxFD;AAAA,IACD,KAAK,qBAAqBH,EAAK;AAAA,IAC/B,MAAMJ;AAAA;AAAA,6BAEiB,KAAK,SAAS,OAAOI,EAAK,IAAI,CAAC;AAAA,mCACzBK,EAAWL,EAAK,WAAW,CAAC;AAAA;AAAA;AAAA,IAGzD,MAAMJ,UAAa,KAAK,SAAS,OAAOI,EAAK,IAAI,CAAC;AAAA,EAClD,CAAA;AAAA;AAAA;AAAA;AAIL;AAhFYb,EAkFI,SAAS;AAAA,EACxBmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBD;AAvGWC,EAAA;AAAA,EADVC,EAAS;AAAA,GAJErB,EAKD,WAAA,SAAA,CAAA;AAgBHoB,EAAA;AAAA,EADPE,EAAM;AAAA,GApBKtB,EAqBJ,WAAA,UAAA,CAAA;AAGAoB,EAAA;AAAA,EADPE,EAAM;AAAA,GAvBKtB,EAwBJ,WAAA,qBAAA,CAAA;AAGAoB,EAAA;AAAA,EADPE,EAAM;AAAA,GA1BKtB,EA2BJ,WAAA,cAAA,CAAA;AA3BIA,IAANoB,EAAA;AAAA,EADNG,EAAc,8CAA8C;AAAA,GAChDvB,CAAA;"}