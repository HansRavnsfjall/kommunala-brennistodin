{"version":3,"file":"list.element.js","sources":["../../../../Umbraco.Community.Contentment.Client/src/extensions/display-mode/list/list.element.ts"],"sourcesContent":["// SPDX-License-Identifier: MPL-2.0\r\n// Copyright Â© 2025 Lee Kelleher\r\n\r\nimport { parseInt } from '../../../utils/index.js';\r\nimport { css, customElement, html, nothing, repeat, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { ContentmentDisplayModeElement } from '../display-mode-base.element.js';\r\nimport type { ContentmentListItem } from '../../../property-editor-ui/types.js';\r\nimport type { SortableEvent } from '../../../external/sortablejs/index.js';\r\n\r\n@customElement('contentment-display-mode-list')\r\nexport class ContentmentDisplayModeListElement extends ContentmentDisplayModeElement {\r\n\t#defaultIcon?: string;\r\n\r\n\t#maxItems = Infinity;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tthis.#defaultIcon = this.getConfigByAlias<string>('defaultIcon');\r\n\t\tthis.#maxItems = parseInt(this.getConfigByAlias('maxItems')) || Infinity;\r\n\t}\r\n\r\n\t#onAdd(event: Event) {\r\n\t\tevent.stopPropagation();\r\n\t\tthis.dispatchEvent(new CustomEvent('add', { bubbles: true, detail: { listType: 'list' } }));\r\n\t}\r\n\r\n\t#onEdit(event: Event, item: ContentmentListItem, index: number) {\r\n\t\tevent.stopPropagation();\r\n\t\tthis.dispatchEvent(new CustomEvent('edit', { bubbles: true, detail: { item, index } }));\r\n\t}\r\n\r\n\t#onRemove(event: Event, item: ContentmentListItem, index: number) {\r\n\t\tevent.stopPropagation();\r\n\t\tthis.dispatchEvent(new CustomEvent('remove', { bubbles: true, detail: { item, index } }));\r\n\t}\r\n\r\n\t#onSort(event: CustomEvent<SortableEvent>) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst { newIndex, oldIndex } = event.detail;\r\n\t\tthis.dispatchEvent(new CustomEvent('sort', { bubbles: true, detail: { newIndex, oldIndex } }));\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`${this.#renderItems()} ${this.#renderAddButton()}`;\r\n\t}\r\n\r\n\t#renderAddButton() {\r\n\t\tif (!this.allowAdd) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tid=\"btn-add\"\r\n\t\t\t\tlabel=${this.localize.term(this.addButtonLabelKey ?? 'general_choose')}\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t@click=${this.#onAdd}></uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItems() {\r\n\t\tif (!this.items) return;\r\n\t\treturn html`\r\n\t\t\t<contentment-sortable-list\r\n\t\t\t\tclass=\"uui-ref-list\"\r\n\t\t\t\titem-selector=\"uui-ref-node\"\r\n\t\t\t\t?disabled=${!this.allowSort}\r\n\t\t\t\t@sort-end=${this.#onSort}>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis.items,\r\n\t\t\t\t\t(item) => item.value,\r\n\t\t\t\t\t(item, index) => this.#renderItem(item, index)\r\n\t\t\t\t)}\r\n\t\t\t</contentment-sortable-list>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: ContentmentListItem, index: number) {\r\n\t\tif (!item) return;\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node\r\n\t\t\t\tname=${item.name}\r\n\t\t\t\tdetail=${item.description ?? ''}\r\n\t\t\t\t?standalone=${this.items?.length === 1 && this.#maxItems === 1}\r\n\t\t\t\t@open=${(event: Event) => this.#onEdit(event, item, index)}>\r\n\t\t\t\t${when(item.icon ?? this.#defaultIcon, (_icon) => html`<umb-icon slot=\"icon\" name=${_icon}></umb-icon>`)}\r\n\t\t\t\t${when(\r\n\t\t\t\t\tthis.allowEdit || this.allowRemove,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\tthis.allowEdit || this.canEdit(item, index),\r\n\t\t\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('general_edit')}\r\n\t\t\t\t\t\t\t\t\t\t@click=${(event: Event) => this.#onEdit(event, item, index)}></uui-button>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\tthis.allowRemove,\r\n\t\t\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('general_remove')}\r\n\t\t\t\t\t\t\t\t\t\t@click=${(event: Event) => this.#onRemove(event, item, index)}></uui-button>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</uui-action-bar>\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#btn-add {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { ContentmentDisplayModeListElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'contentment-display-mode-list': ContentmentDisplayModeListElement;\r\n\t}\r\n}\r\n"],"names":["_defaultIcon","_maxItems","_ContentmentDisplayModeListElement_instances","onAdd_fn","onEdit_fn","onRemove_fn","onSort_fn","renderAddButton_fn","renderItems_fn","renderItem_fn","ContentmentDisplayModeListElement","ContentmentDisplayModeElement","__privateAdd","__privateSet","parseInt","html","__privateMethod","event","item","index","newIndex","oldIndex","nothing","repeat","_a","__privateGet","when","_icon","css","__decorateClass","customElement"],"mappings":"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"}