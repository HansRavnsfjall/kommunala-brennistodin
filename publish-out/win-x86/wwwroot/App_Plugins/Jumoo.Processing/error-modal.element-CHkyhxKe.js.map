{"version":3,"file":"error-modal.element-CHkyhxKe.js","sources":["../../../jumoo-processing-assets/src/pipeline/modal/errors/error-modal.element.ts"],"sourcesContent":["import { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport {\r\n\tJUMOO_PROCESSING_ERROR_MODAL_ALIAS,\r\n\tJumooProcessingErrorModalData,\r\n\tJumooProcessingErrorModalResult,\r\n} from '@jumoo/processing';\r\nimport { css, customElement, html, when } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n@customElement(JUMOO_PROCESSING_ERROR_MODAL_ALIAS)\r\nexport class JumooProcessingErrorModal extends UmbModalBaseElement<\r\n\tJumooProcessingErrorModalData,\r\n\tJumooProcessingErrorModalResult\r\n> {\r\n\t#onClose() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\t#truncate(input: string, length: number, separator = '...'): string {\r\n\t\tif (input.length <= length) return input;\r\n\r\n\t\tconst separatorLength = separator.length;\r\n\t\tconst charsToShow = length - separatorLength;\r\n\r\n\t\treturn input.substring(0, charsToShow) + separator;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst headline = this.#truncate('Error: ' + this.data?.error.message, 75);\r\n\r\n\t\treturn html`<umb-body-layout .headline=${headline}>\r\n\t\t\t<uui-box .headline=${this.localize.term('jumooProcError_headline')}>\r\n\t\t\t\t<h2>${this.data?.error.message}</h2>\r\n\t\t\t\t<div class=\"more-box\">\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"jumooProcError_source\"></umb-localize>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"detail\">\r\n\t\t\t\t\t\t\t${this.data?.error.strategy} / ${this.data?.error.source}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"jumooProcError_action\"></umb-localize>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"detail\">${this.data?.error.action}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\"></div>\r\n\t\t\t\t\t\t<div class=\"detail\">\r\n\t\t\t\t\t\t\t${this.data?.error.step}\r\n\t\t\t\t\t\t\t${when(this.data?.error.subStep, () => html`(${this.data?.error.subStep})`)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"jumooProcError_page\"></umb-localize>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"detail\">${this.data?.error.page}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"jumooProcError_class\"></umb-localize>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"detail\">${this.data?.error.className}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"jumooProcError_method\"></umb-localize>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"detail\">${this.data?.error.methodName}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"more\">\r\n\t\t\t\t\t\t<div class=\"label\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"jumooProcError_stack\"></umb-localize>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"detail fixed\">${this.data?.error.stackTrace}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<div slot=\"actions\">\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\t@click=${this.#onClose}\r\n\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\tlook=\"default\"\r\n\t\t\t\t\t.label=${this.localize.term('general_close')}></uui-button>\r\n\t\t\t</div>\r\n\t\t</umb-body-layout>`;\r\n\t}\r\n\r\n\tstatic styles = css`\r\n\t\t.more {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 10px;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\r\n\t\th2 {\r\n\t\t\toverflow: auto;\r\n\t\t\tpadding: 5px;\r\n\t\t\tbackground-color: var(--uui-color-danger);\r\n\t\t\tcolor: var(--uui-color-default-contrast);\r\n\t\t}\r\n\r\n\t\t.label {\r\n\t\t\tfont-weight: bold;\r\n\t\t\tmin-width: 100px;\r\n\t\t\ttext-align: right;\r\n\t\t}\r\n\r\n\t\t.label::after {\r\n\t\t\tcontent: ' :';\r\n\t\t}\r\n\r\n\t\t.more .fixed {\r\n\t\t\toverflow: overlay;\r\n\t\t\tfont-family: monospace;\r\n\t\t}\r\n\t`;\r\n}\r\n\r\nexport default JumooProcessingErrorModal;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'jumoo-processing-error-modal': JumooProcessingErrorModal;\r\n\t}\r\n}\r\n"],"names":["_JumooProcessingErrorModal_instances","onClose_fn","truncate_fn","JumooProcessingErrorModal","UmbModalBaseElement","__privateAdd","headline","__privateMethod","html","when","input","length","separator","separatorLength","charsToShow","css","__decorateClass","customElement","JUMOO_PROCESSING_ERROR_MODAL_ALIAS","JumooProcessingErrorModal$1"],"mappings":";;;;;;;;;;;;8OAAAA,GAAAC,GAAAC;AASa,IAAAC,IAAN,cAAwCC,EAG7C;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA;AAAA,EAAA;AAAA,EAiBN,SAAS;AACF,UAAAM,IAAWC,QAAKP,GAALE,CAAA,EAAA,KAAA,MAAe,YAAY,KAAK,MAAM,MAAM,SAAS,EAAA;AAEtE,WAAOM,+BAAkCF,CAAQ;AAAA,wBAC3B,KAAK,SAAS,KAAK,yBAAyB,CAAC;AAAA,UAC3D,KAAK,MAAM,MAAM,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOzB,KAAK,MAAM,MAAM,QAAQ,MAAM,KAAK,MAAM,MAAM,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAOnC,KAAK,MAAM,MAAM,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,SAK1C,KAAK,MAAM,MAAM,IAAI;AAAA,SACrBG,EAAK,KAAK,MAAM,MAAM,SAAS,MAAMD,KAAQ,KAAK,MAAM,MAAM,OAAO,GAAG,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAOtD,KAAK,MAAM,MAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAMrB,KAAK,MAAM,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAM1B,KAAK,MAAM,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAMrB,KAAK,MAAM,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAO/CD,QAAKP,GAAQC,CAAA,CAAA;AAAA;AAAA;AAAA,cAGb,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA;AAAA;AAAA,EAGhD;AA+BD;AA/GOD,IAAA,oBAAA,QAAA;AAINC,IAAQ,WAAG;AACV,OAAK,cAAc;AACpB;AAEAC,IAAS,SAACQ,GAAeC,GAAgBC,IAAY,OAAe;AAC/D,MAAAF,EAAM,UAAUC,EAAe,QAAAD;AAEnC,QAAMG,IAAkBD,EAAU,QAC5BE,IAAcH,IAASE;AAE7B,SAAOH,EAAM,UAAU,GAAGI,CAAW,IAAIF;AAC1C;AAfYT,EAkFL,SAASY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAlFJZ,IAANa,EAAA;AAAA,EADNC,EAAcC,CAAkC;AAAA,GACpCf,CAAA;AAiHb,MAAAgB,IAAehB;"}