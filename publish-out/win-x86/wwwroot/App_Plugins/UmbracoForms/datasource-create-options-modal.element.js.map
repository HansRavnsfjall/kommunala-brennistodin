{"version":3,"file":"datasource-create-options-modal.element.js","sources":["../src/section/datasources/entity-actions/create/modal/datasource-create-options-modal.element.ts"],"sourcesContent":["import { FormsDataSourceTypeCollectionRepository } from \"../../../../provider-types/datasource-types/repository/collection/index.js\";\nimport { FORMS_DATASOURCE_ENTITY_TYPE } from \"../../../entities.js\";\nimport { html, customElement } from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbModalBaseElement } from \"@umbraco-cms/backoffice/modal\";\nimport type { DataSourceTypeWithSettings } from \"@umbraco-forms/generated\";\n\nconst elementName = \"forms-datasource-create-options-modal\";\n\n@customElement(elementName)\nexport class FormsDataSourceCreateOptionsModalElement extends UmbModalBaseElement {\n  #dataSourceTypes: Array<DataSourceTypeWithSettings> = [];\n\n  constructor() {\n    super();\n\n    this.#initialize();\n  }\n\n  async #initialize() {\n    const repository = new FormsDataSourceTypeCollectionRepository(this);\n    const { data } = await repository.requestCollection();\n    this.#dataSourceTypes = data?.items || [];\n    this.requestUpdate();\n  }\n\n  #onOpen(dataSourceType: DataSourceTypeWithSettings) {\n    window.history.pushState(\n      {},\n      \"\",\n      `section/forms/workspace/${FORMS_DATASOURCE_ENTITY_TYPE}/create/${dataSourceType.id}`,\n    );\n    this._submitModal();\n  }\n\n  render() {\n    return html`<umb-body-layout\n      headline=${this.localize.term(\"formDataSources_chooseDatasourceType\")}\n    >\n      <uui-box>\n        <uui-ref-list>\n          ${this.#dataSourceTypes.map(\n            (dataSourceType) =>\n              html`<umb-ref-item\n                .name=${dataSourceType.name}\n                .detail=${dataSourceType.description}\n                .icon=${dataSourceType.icon}\n                @open=${() => this.#onOpen(dataSourceType)}\n              ></umb-ref-item>`,\n          )}\n        </uui-ref-list>\n      </uui-box>\n      <uui-button\n        slot=\"actions\"\n        label=${this.localize.term(\"general_cancel\")}\n        @click=${this._rejectModal}\n      ></uui-button>\n    </umb-body-layout>`;\n  }\n}\n\nexport default FormsDataSourceCreateOptionsModalElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: FormsDataSourceCreateOptionsModalElement;\n  }\n}\n"],"names":["_dataSourceTypes","_FormsDataSourceCreateOptionsModalElement_instances","initialize_fn","onOpen_fn","elementName","FormsDataSourceCreateOptionsModalElement","UmbModalBaseElement","__privateAdd","__privateMethod","html","__privateGet","dataSourceType","repository","FormsDataSourceTypeCollectionRepository","data","__privateSet","FORMS_DATASOURCE_ENTITY_TYPE","__decorateClass","customElement","FormsDataSourceCreateOptionsModalElement$1"],"mappings":";;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAMA,MAAMC,IAAc;AAGb,IAAMC,IAAN,cAAuDC,EAAoB;AAAA,EAGhF,cAAc;AACZ,UAAA,GAJGC,EAAA,MAAAN,CAAA,GACLM,EAAA,MAAAP,GAAsD,EAAC,GAKrDQ,EAAA,MAAKP,GAAAC,CAAA,EAAL,KAAA,IAAA;AAAA,EAAA;AAAA,EAmBF,SAAS;AACP,WAAOO;AAAA,iBACM,KAAK,SAAS,KAAK,sCAAsC,CAAC;AAAA;AAAA;AAAA;AAAA,YAI/DC,QAAKV,CAAA,EAAiB;AAAA,MACtB,CAACW,MACCF;AAAA,wBACUE,EAAe,IAAI;AAAA,0BACjBA,EAAe,WAAW;AAAA,wBAC5BA,EAAe,IAAI;AAAA,wBACnB,MAAMH,EAAA,MAAKP,GAAAE,CAAA,EAAL,KAAA,MAAaQ,CAAA,CAAe;AAAA;AAAA,IAAA,CAE/C;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKK,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,iBACnC,KAAK,YAAY;AAAA;AAAA;AAAA,EAAA;AAIlC;AAhDEX,IAAA,oBAAA,QAAA;AADKC,IAAA,oBAAA,QAAA;AASCC,IAAW,iBAAG;AAClB,QAAMU,IAAa,IAAIC,EAAwC,IAAI,GAC7D,EAAE,MAAAC,EAAA,IAAS,MAAMF,EAAW,kBAAA;AAClC,EAAAG,EAAA,MAAKf,IAAmBc,KAAA,gBAAAA,EAAM,UAAS,CAAA,CAAC,GACxC,KAAK,cAAA;AACP;AAEAX,IAAO,SAACQ,GAA4C;AAClD,SAAO,QAAQ;AAAA,IACb,CAAA;AAAA,IACA;AAAA,IACA,2BAA2BK,CAA4B,WAAWL,EAAe,EAAE;AAAA,EAAA,GAErF,KAAK,aAAA;AACP;AAvBWN,IAANY,EAAA;AAAA,EADNC,EAAcd,CAAW;AAAA,GACbC,CAAA;AAmDb,MAAAc,IAAed;"}