{"version":3,"file":"date-picker-relative-property-editor.element.js","sources":["../src/property-editor/date-picker-relative/date-picker-relative-property-editor.element.ts"],"sourcesContent":["import {\n  html,\n  customElement,\n  state,\n  property,\n  nothing,\n  css,\n} from \"@umbraco-cms/backoffice/external/lit\";\nimport type { UmbPropertyEditorUiElement } from \"@umbraco-cms/backoffice/property-editor\";\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\nimport type { UmbInputDateElement } from \"@umbraco-cms/backoffice/components\";\nimport { UmbChangeEvent } from \"@umbraco-cms/backoffice/event\";\n\nconst elementName = \"forms-date-picker-relative-property-editor\";\n\ntype DatePickerRelativeType = \"None\" | \"Relative\" | \"Date\";\n\n@customElement(elementName)\nexport class FormsDatePickerRelativePropertyUiElement\n  extends UmbLitElement\n  implements UmbPropertyEditorUiElement\n{\n  /**\n   * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\n   * @type {boolean}\n   * @attr\n   * @default false\n   */\n  @property({ type: Boolean, reflect: true })\n  readonly = false;\n\n  @property()\n  value = \"\";\n\n  @state()\n  private _type: DatePickerRelativeType = \"None\";\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    // Set initial value\n    if (this.value !== \"\") {\n      // Use the global isNaN function to avoid parsing a date into a relative number\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this._type = !isNaN(this.value as any) ? \"Relative\" : \"Date\";\n    }\n  }\n\n  #onChangeType(e: InputEvent & { target: HTMLSelectElement }) {\n    const newType = e.target.value as DatePickerRelativeType;\n    if (newType === this._type) return;\n    this._type = newType;\n\n    switch (this._type) {\n      case \"Relative\":\n        // Set default value to 0\n        this.value = \"0\";\n        break;\n      case \"Date\":\n        // Set default value to today\n        this.value = new Date().toISOString().split(\"T\")[0];\n        break;\n      default:\n        this.value = \"\";\n        break;\n    }\n\n    this.dispatchEvent(new UmbChangeEvent());\n  }\n\n  #onChangeRelative(event: InputEvent & { target: HTMLInputElement }) {\n    const newValue = event.target.value;\n    if (newValue === this.value) return;\n    this.value = newValue;\n\n    this.dispatchEvent(new UmbChangeEvent());\n  }\n\n  #onChangeDate(event: CustomEvent & { target: UmbInputDateElement }) {\n    const newValue = event.target.value.toString();\n    if (newValue === this.value) return;\n    this.value = newValue;\n\n    this.dispatchEvent(new UmbChangeEvent());\n  }\n\n  render() {\n    return html`\n      <uui-select\n        .options=${[\n          {\n            name: this.localize.term(\"formPropertyEditors_datePickerTypeNone\"),\n            value: \"None\",\n            selected: this._type === \"None\",\n          },\n          {\n            name: this.localize.term(\n              \"formPropertyEditors_datePickerTypeRelative\",\n            ),\n            value: \"Relative\",\n            selected: this._type === \"Relative\",\n          },\n          {\n            name: this.localize.term(\"formPropertyEditors_datePickerTypeDate\"),\n            value: \"Date\",\n            selected: this._type === \"Date\",\n          },\n        ]}\n        @change=${this.#onChangeType}\n        ?readonly=${this.readonly}\n      >\n      </uui-select>\n      ${this._type === \"Relative\"\n        ? html`\n            <uui-input\n              type=\"number\"\n              .value=${this.value}\n              @change=${this.#onChangeRelative}\n              ?readonly=${this.readonly}\n            >\n            </uui-input>\n          `\n        : nothing}\n      ${this._type === \"Date\"\n        ? html` <umb-input-date\n            label=${this.localize.term(\"placeholders_enterdate\")}\n            .value=${this.value}\n            .type=\"date\"\n            @change=${this.#onChangeDate}\n            ?readonly=${this.readonly}\n          >\n          </umb-input-date>`\n        : nothing}\n    `;\n  }\n\n  static styles = [\n    css`\n      uui-select {\n        vertical-align: top;\n      }\n    `,\n  ];\n}\n\nexport default FormsDatePickerRelativePropertyUiElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: FormsDatePickerRelativePropertyUiElement;\n  }\n}\n"],"names":["_FormsDatePickerRelativePropertyUiElement_instances","onChangeType_fn","onChangeRelative_fn","onChangeDate_fn","elementName","FormsDatePickerRelativePropertyUiElement","UmbLitElement","__privateAdd","html","__privateMethod","nothing","e","newType","UmbChangeEvent","event","newValue","css","__decorateClass","property","state","customElement","FormsDatePickerRelativePropertyUiElement$1"],"mappings":";;;;;;;;;8OAAAA,GAAAC,GAAAC,GAAAC;AAaA,MAAMC,IAAc;AAKb,IAAMC,IAAN,cACGC,EAEV;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAP,CAAA,GAWL,KAAA,WAAW,IAGX,KAAA,QAAQ,IAGR,KAAQ,QAAgC;AAAA,EAAA;AAAA,EAExC,MAAM,oBAAoB;AACxB,UAAM,kBAAA,GAGF,KAAK,UAAU,OAIjB,KAAK,QAAS,MAAM,KAAK,KAAY,IAAiB,SAAb;AAAA,EAC3C;AAAA,EAyCF,SAAS;AACP,WAAOQ;AAAA;AAAA,mBAEQ;AAAA,MACT;AAAA,QACE,MAAM,KAAK,SAAS,KAAK,wCAAwC;AAAA,QACjE,OAAO;AAAA,QACP,UAAU,KAAK,UAAU;AAAA,MAAA;AAAA,MAE3B;AAAA,QACE,MAAM,KAAK,SAAS;AAAA,UAClB;AAAA,QAAA;AAAA,QAEF,OAAO;AAAA,QACP,UAAU,KAAK,UAAU;AAAA,MAAA;AAAA,MAE3B;AAAA,QACE,MAAM,KAAK,SAAS,KAAK,wCAAwC;AAAA,QACjE,OAAO;AAAA,QACP,UAAU,KAAK,UAAU;AAAA,MAAA;AAAA,IAC3B,CACD;AAAA,kBACSC,QAAKT,GAAAC,CAAA,CAAa;AAAA,oBAChB,KAAK,QAAQ;AAAA;AAAA;AAAA,QAGzB,KAAK,UAAU,aACbO;AAAA;AAAA;AAAA,uBAGa,KAAK,KAAK;AAAA,wBACTC,QAAKT,GAAAE,CAAA,CAAiB;AAAA,0BACpB,KAAK,QAAQ;AAAA;AAAA;AAAA,cAI7BQ,CAAO;AAAA,QACT,KAAK,UAAU,SACbF;AAAA,oBACU,KAAK,SAAS,KAAK,wBAAwB,CAAC;AAAA,qBAC3C,KAAK,KAAK;AAAA;AAAA,sBAETC,QAAKT,GAAAG,CAAA,CAAa;AAAA,wBAChB,KAAK,QAAQ;AAAA;AAAA,+BAG3BO,CAAO;AAAA;AAAA,EAAA;AAWjB;AA9HOV,IAAA,oBAAA,QAAA;AA+BLC,IAAa,SAACU,GAA+C;AAC3D,QAAMC,IAAUD,EAAE,OAAO;AACzB,MAAIC,MAAY,KAAK,OAGrB;AAAA,YAFA,KAAK,QAAQA,GAEL,KAAK,OAAA;AAAA,MACX,KAAK;AAEH,aAAK,QAAQ;AACb;AAAA,MACF,KAAK;AAEH,aAAK,6BAAY,KAAA,GAAO,cAAc,MAAM,GAAG,EAAE,CAAC;AAClD;AAAA,MACF;AACE,aAAK,QAAQ;AACb;AAAA,IAAA;AAGJ,SAAK,cAAc,IAAIC,GAAgB;AAAA;AACzC;AAEAX,IAAiB,SAACY,GAAkD;AAClE,QAAMC,IAAWD,EAAM,OAAO;AAC9B,EAAIC,MAAa,KAAK,UACtB,KAAK,QAAQA,GAEb,KAAK,cAAc,IAAIF,GAAgB;AACzC;AAEAV,IAAa,SAACW,GAAsD;AAClE,QAAMC,IAAWD,EAAM,OAAO,MAAM,SAAA;AACpC,EAAIC,MAAa,KAAK,UACtB,KAAK,QAAQA,GAEb,KAAK,cAAc,IAAIF,GAAgB;AACzC;AAnEWR,EAuHJ,SAAS;AAAA,EACdW;AAAA;AAAA;AAAA;AAAA;AAKF;AAlHAC,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,SAAS,SAAS,IAAM;AAAA,GAV/Bb,EAWX,WAAA,YAAA,CAAA;AAGAY,EAAA;AAAA,EADCC,EAAA;AAAS,GAbCb,EAcX,WAAA,SAAA,CAAA;AAGQY,EAAA;AAAA,EADPE,EAAA;AAAM,GAhBId,EAiBH,WAAA,SAAA,CAAA;AAjBGA,IAANY,EAAA;AAAA,EADNG,EAAchB,CAAW;AAAA,GACbC,CAAA;AAgIb,MAAAgB,IAAehB;"}