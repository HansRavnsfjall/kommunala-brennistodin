{"version":3,"file":"folder-delete-confirm-modal.element.js","sources":["../src/section/forms/entity-actions/delete-folder/modal/folder-delete-confirm-modal.element.ts"],"sourcesContent":["import { FormsFormFolderDetailRepository } from \"../../../repository/detail/index.js\";\nimport {\n  FORMS_FORM_FOLDER_ENTITY_TYPE,\n  FORMS_FORM_ROOT_ENTITY_TYPE,\n} from \"../../../entities.js\";\nimport type { FormsFolderDeleteConfirmModalData } from \"./index.js\";\nimport { html, customElement } from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbModalBaseElement } from \"@umbraco-cms/backoffice/modal\";\nimport type { UmbFolderModel } from \"@umbraco-cms/backoffice/tree\";\nimport { UMB_ACTION_EVENT_CONTEXT } from \"@umbraco-cms/backoffice/action\";\nimport { UmbRequestReloadChildrenOfEntityEvent } from \"@umbraco-cms/backoffice/entity-action\";\n\n@customElement(\"forms-folder-delete-confirm-modal\")\nexport class FormsFolderDeleteConfirmModalElement extends UmbModalBaseElement<FormsFolderDeleteConfirmModalData> {\n  #folderToDelete?: UmbFolderModel | null;\n  #folderIsEmpty?: boolean | null;\n\n  #folderDetailRepository = new FormsFormFolderDetailRepository(this);\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.data?.unique) return;\n\n    const folderToDeleteResponse =\n      await this.#folderDetailRepository.requestByUnique(this.data.unique);\n    this.#folderToDelete = folderToDeleteResponse.data;\n\n    const folderIsEmptyResponse: boolean =\n      await this.#folderDetailRepository.isEmpty(this.data.unique);\n    this.#folderIsEmpty = folderIsEmptyResponse;\n\n    this.requestUpdate();\n  }\n\n  async #deleteFolder(event: PointerEvent) {\n    event.stopPropagation();\n\n    if (this.data?.unique && this.#folderToDelete) {\n      await this.#folderDetailRepository.delete(this.data.unique);\n\n      // TODO: Review this - parentUnique isn't defined on UmbFolderModel but we do have it in the data.\n      const reloadEvent = new UmbRequestReloadChildrenOfEntityEvent({\n        entityType: this.#folderToDelete[\"parentUnique\"]\n          ? FORMS_FORM_FOLDER_ENTITY_TYPE\n          : FORMS_FORM_ROOT_ENTITY_TYPE,\n        unique: this.#folderToDelete[\"parentUnique\"],\n      });\n\n      const eventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\n      eventContext?.dispatchEvent(reloadEvent);\n    }\n\n    this._submitModal();\n  }\n\n  render() {\n    return html`\n      <umb-body-layout\n        headline=${this.localize.term(\"formDelete_folderDeleteModalHeadline\")}\n      >\n        <uui-box>\n          <p>\n            ${this.#folderIsEmpty\n              ? html`${this.localize.term(\n                  \"formDelete_folderDeleteModalHeadline\",\n                  this.#folderToDelete?.name,\n                )}`\n              : html`${this.localize.term(\"formDelete_folderNotEmptyMessage\")}`}\n          </p>\n        </uui-box>\n        <uui-button\n          slot=\"actions\"\n          id=\"cancel\"\n          label=${this.localize.term(\"general_cancel\")}\n          @click=\"${this._rejectModal}\"\n          >${this.localize.term(\"general_cancel\")}</uui-button\n        >\n        ${this.#folderIsEmpty\n          ? html`<uui-button\n              slot=\"actions\"\n              type=\"button\"\n              label=${this.localize.term(\"general_delete\")}\n              look=\"primary\"\n              color=\"danger\"\n              @click=${this.#deleteFolder}\n            ></uui-button>`\n          : html``}\n      </umb-body-layout>\n    `;\n  }\n}\n\nexport default FormsFolderDeleteConfirmModalElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"forms-folder-delete-confirm-modal\": FormsFolderDeleteConfirmModalElement;\n  }\n}\n"],"names":["_folderToDelete","_folderIsEmpty","_folderDetailRepository","_FormsFolderDeleteConfirmModalElement_instances","deleteFolder_fn","FormsFolderDeleteConfirmModalElement","UmbModalBaseElement","__privateAdd","FormsFormFolderDetailRepository","_a","folderToDeleteResponse","__privateGet","__privateSet","folderIsEmptyResponse","html","__privateMethod","event","reloadEvent","UmbRequestReloadChildrenOfEntityEvent","FORMS_FORM_FOLDER_ENTITY_TYPE","FORMS_FORM_ROOT_ENTITY_TYPE","eventContext","UMB_ACTION_EVENT_CONTEXT","__decorateClass","customElement","FormsFolderDeleteConfirmModalElement$1"],"mappings":";;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAaO,IAAMC,IAAN,cAAmDC,EAAuD;AAAA,EAA1G,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GACLI,EAAA,MAAAP,CAAA,GACAO,EAAA,MAAAN,CAAA,GAEAM,EAAA,MAAAL,GAA0B,IAAIM,EAAgC,IAAI,CAAA;AAAA,EAAA;AAAA,EAElE,MAAM,oBAAoB;;AAGxB,QAFA,MAAM,kBAAA,GAEF,GAACC,IAAA,KAAK,SAAL,QAAAA,EAAW,QAAQ;AAExB,UAAMC,IACJ,MAAMC,EAAA,MAAKT,GAAwB,gBAAgB,KAAK,KAAK,MAAM;AACrE,IAAAU,EAAA,MAAKZ,GAAkBU,EAAuB,IAAA;AAE9C,UAAMG,IACJ,MAAMF,EAAA,MAAKT,GAAwB,QAAQ,KAAK,KAAK,MAAM;AAC7D,IAAAU,EAAA,MAAKX,GAAiBY,CAAA,GAEtB,KAAK,cAAA;AAAA,EAAc;AAAA,EAwBrB,SAAS;;AACP,WAAOC;AAAA;AAAA,mBAEQ,KAAK,SAAS,KAAK,sCAAsC,CAAC;AAAA;AAAA;AAAA;AAAA,cAI/DH,EAAA,MAAKV,CAAA,IACHa,IAAO,KAAK,SAAS;AAAA,MACnB;AAAA,OACAL,IAAAE,QAAKX,CAAA,MAAL,gBAAAS,EAAsB;AAAA,IAAA,CACvB,KACDK,IAAO,KAAK,SAAS,KAAK,kCAAkC,CAAC,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAM7D,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,oBAClC,KAAK,YAAY;AAAA,aACxB,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA;AAAA,UAEvCH,QAAKV,CAAA,IACHa;AAAA;AAAA;AAAA,sBAGU,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA;AAAA;AAAA,uBAGnCC,QAAKZ,GAAAC,CAAA,CAAa;AAAA,8BAE7BU,GAAM;AAAA;AAAA;AAAA,EAAA;AAIlB;AA7EEd,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAJKC,IAAA,oBAAA,QAAA;AAsBCC,IAAa,eAACY,GAAqB;;AAGvC,MAFAA,EAAM,gBAAA,IAEFP,IAAA,KAAK,SAAL,QAAAA,EAAW,UAAUE,EAAA,MAAKX,CAAA,GAAiB;AAC7C,UAAMW,EAAA,MAAKT,CAAA,EAAwB,OAAO,KAAK,KAAK,MAAM;AAG1D,UAAMe,IAAc,IAAIC,EAAsC;AAAA,MAC5D,YAAYP,EAAA,MAAKX,CAAA,EAAgB,eAC7BmB,IACAC;AAAA,MACJ,QAAQT,EAAA,MAAKX,CAAA,EAAgB;AAAA,IAAc,CAC5C,GAEKqB,IAAe,MAAM,KAAK,WAAWC,CAAwB;AACnE,IAAAD,KAAA,QAAAA,EAAc,cAAcJ;AAAA,EAAW;AAGzC,OAAK,aAAA;AACP;AAzCWZ,IAANkB,EAAA;AAAA,EADNC,EAAc,mCAAmC;AAAA,GACrCnB,CAAA;AAgFb,MAAAoB,IAAepB;"}