{"version":3,"file":"prevaluesource-delete-confirm-modal.element.js","sources":["../src/section/prevaluesources/entity-actions/delete/modal/prevaluesource-delete-confirm-modal.element.ts"],"sourcesContent":["import { FormsPrevalueSourceDetailRepository } from \"../../../repository/index.js\";\nimport { FORMS_PREVALUESOURCE_ROOT_ENTITY_TYPE } from \"../../../entities.js\";\nimport type { FieldPreValueSource } from \"@umbraco-forms/generated\";\nimport type { FormsPrevalueSourceDeleteConfirmModalData } from \"./index.js\";\nimport { html, customElement } from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbModalBaseElement } from \"@umbraco-cms/backoffice/modal\";\nimport { UMB_ACTION_EVENT_CONTEXT } from \"@umbraco-cms/backoffice/action\";\nimport { UmbRequestReloadChildrenOfEntityEvent } from \"@umbraco-cms/backoffice/entity-action\";\n\n@customElement(\"forms-prevaluesource-delete-confirm-modal\")\nexport class FormsPrevalueSourceDeleteConfirmModalElement extends UmbModalBaseElement<FormsPrevalueSourceDeleteConfirmModalData> {\n  #formToDelete?: FieldPreValueSource | null;\n\n  #prevalueSourceDetailRepository = new FormsPrevalueSourceDetailRepository(\n    this,\n  );\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.data?.unique) return;\n\n    const formToDeleteResponse =\n      await this.#prevalueSourceDetailRepository.requestByUnique(\n        this.data.unique,\n      );\n    this.#formToDelete = formToDeleteResponse.data;\n\n    this.requestUpdate();\n  }\n\n  async #deletePrevalueSource(event: PointerEvent) {\n    event.stopPropagation();\n\n    if (this.data?.unique) {\n      await this.#prevalueSourceDetailRepository.delete(this.data.unique);\n\n      const eventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\n      const eventArgs = {\n        entityType: FORMS_PREVALUESOURCE_ROOT_ENTITY_TYPE,\n        unique: null,\n      };\n      const reloadEvent = new UmbRequestReloadChildrenOfEntityEvent(eventArgs);\n      eventContext?.dispatchEvent(reloadEvent);\n    }\n    this._submitModal();\n  }\n\n  render() {\n    return html`\n      <umb-body-layout\n        headline=${this.localize.term(\n          \"formPrevalueSources_deletePrevalueSource\",\n        )}\n      >\n        <uui-box>\n          <p>\n            ${this.localize.term(\n              \"formPrevalueSources_deleteConfirm\",\n              this.#formToDelete?.name,\n            )}\n          </p>\n        </uui-box>\n        <uui-button\n          slot=\"actions\"\n          id=\"cancel\"\n          label=${this.localize.term(\"general_cancel\")}\n          @click=\"${this._rejectModal}\"\n          >${this.localize.term(\"general_cancel\")}</uui-button\n        >\n        <uui-button\n          slot=\"actions\"\n          type=\"button\"\n          label=${this.localize.term(\"general_delete\")}\n          look=\"primary\"\n          color=\"danger\"\n          @click=${this.#deletePrevalueSource}\n        ></uui-button>\n      </umb-body-layout>\n    `;\n  }\n}\n\nexport default FormsPrevalueSourceDeleteConfirmModalElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"forms-prevaluesource-delete-confirm-modal\": FormsPrevalueSourceDeleteConfirmModalElement;\n  }\n}\n"],"names":["_formToDelete","_prevalueSourceDetailRepository","_FormsPrevalueSourceDeleteConfirmModalElement_instances","deletePrevalueSource_fn","FormsPrevalueSourceDeleteConfirmModalElement","UmbModalBaseElement","__privateAdd","FormsPrevalueSourceDetailRepository","_a","formToDeleteResponse","__privateGet","__privateSet","html","__privateMethod","event","eventContext","UMB_ACTION_EVENT_CONTEXT","eventArgs","FORMS_PREVALUESOURCE_ROOT_ENTITY_TYPE","reloadEvent","UmbRequestReloadChildrenOfEntityEvent","__decorateClass","customElement","FormsPrevalueSourceDeleteConfirmModalElement$1"],"mappings":";;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAUO,IAAMC,IAAN,cAA2DC,EAA+D;AAAA,EAA1H,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GACLI,EAAA,MAAAN,CAAA,GAEAM,EAAA,MAAAL,GAAkC,IAAIM;AAAA,MACpC;AAAA,IAAA,CACF;AAAA,EAAA;AAAA,EAEA,MAAM,oBAAoB;;AAGxB,QAFA,MAAM,kBAAA,GAEF,GAACC,IAAA,KAAK,SAAL,QAAAA,EAAW,QAAQ;AAExB,UAAMC,IACJ,MAAMC,EAAA,MAAKT,CAAA,EAAgC;AAAA,MACzC,KAAK,KAAK;AAAA,IAAA;AAEd,IAAAU,EAAA,MAAKX,GAAgBS,EAAqB,IAAA,GAE1C,KAAK,cAAA;AAAA,EAAc;AAAA,EAoBrB,SAAS;;AACP,WAAOG;AAAA;AAAA,mBAEQ,KAAK,SAAS;AAAA,MACvB;AAAA,IAAA,CACD;AAAA;AAAA;AAAA;AAAA,cAIK,KAAK,SAAS;AAAA,MACd;AAAA,OACAJ,IAAAE,QAAKV,CAAA,MAAL,gBAAAQ,EAAoB;AAAA,IAAA,CACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMK,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,oBAClC,KAAK,YAAY;AAAA,aACxB,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAK/B,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA;AAAA;AAAA,mBAGnCK,QAAKX,GAAAC,CAAA,CAAqB;AAAA;AAAA;AAAA;AAAA,EAAA;AAK7C;AAtEEH,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAHKC,IAAA,oBAAA,QAAA;AAqBCC,IAAqB,eAACW,GAAqB;;AAG/C,MAFAA,EAAM,gBAAA,IAEFN,IAAA,KAAK,SAAL,QAAAA,EAAW,QAAQ;AACrB,UAAME,EAAA,MAAKT,CAAA,EAAgC,OAAO,KAAK,KAAK,MAAM;AAElE,UAAMc,IAAe,MAAM,KAAK,WAAWC,CAAwB,GAC7DC,IAAY;AAAA,MAChB,YAAYC;AAAA,MACZ,QAAQ;AAAA,IAAA,GAEJC,IAAc,IAAIC,EAAsCH,CAAS;AACvE,IAAAF,KAAA,QAAAA,EAAc,cAAcI;AAAA,EAAW;AAEzC,OAAK,aAAA;AACP;AApCWf,IAANiB,EAAA;AAAA,EADNC,EAAc,2CAA2C;AAAA,GAC7ClB,CAAA;AAyEb,MAAAmB,IAAenB;"}