{"version":3,"file":"workspace-view-form-settings.element.js","sources":["../src/section/forms/workspace/views/settings/workspace-view-form-settings.element.ts"],"sourcesContent":["import { FORMS_FORM_WORKSPACE_CONTEXT } from \"../../form-workspace.context-token.js\";\nimport { UmbTextStyles } from \"@umbraco-cms/backoffice/style\";\nimport {\n  css,\n  html,\n  customElement,\n  state,\n  LitElement,\n  when,\n} from \"@umbraco-cms/backoffice/external/lit\";\nimport type { UmbWorkspaceViewElement } from \"@umbraco-cms/backoffice/workspace\";\nimport { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\nimport type { FormDesign } from \"@umbraco-forms/generated\";\nimport { FORMS_CONTEXT } from \"@umbraco-forms/context\";\n\nconst elementName = \"workspace-view-form-settings\";\n\n@customElement(elementName)\nexport class UmbWorkspaceViewFormSettingsElement\n  extends UmbElementMixin(LitElement)\n  implements UmbWorkspaceViewElement\n{\n  @state()\n  _form?: FormDesign;\n\n  #workspaceContext?: typeof FORMS_FORM_WORKSPACE_CONTEXT.TYPE;\n\n  #enableMultiPageFormSettings: boolean = false;\n\n  constructor() {\n    super();\n\n    this.consumeContext(FORMS_FORM_WORKSPACE_CONTEXT, (instance) => {\n      this.#workspaceContext = instance;\n      this.#observeForm();\n    });\n\n    this.consumeContext(FORMS_CONTEXT, (instance) => {\n      if (!instance) return;\n      this.observe(instance.config, (config) => {\n        if (config) {\n          this.#enableMultiPageFormSettings =\n            config?.enableMultiPageFormSettings;\n        }\n      });\n    });\n  }\n\n  #observeForm() {\n    if (!this.#workspaceContext) return;\n\n    this.observe(this.#workspaceContext.data, (form) => {\n      if (!form) return;\n      this._form = form;\n    });\n  }\n\n  render() {\n    return html`<uui-box>\n      <forms-settings-store-records></forms-settings-store-records>\n      <forms-settings-captions></forms-settings-captions>\n      <forms-settings-styling></forms-settings-styling>\n      <forms-settings-validation></forms-settings-validation>\n      <forms-settings-autocomplete></forms-settings-autocomplete>\n      ${when(\n        this.#enableMultiPageFormSettings,\n        () => html`<forms-settings-multi-page></forms-settings-multi-page>`,\n      )}\n      <forms-settings-moderation></forms-settings-moderation>\n      <forms-settings-fields-display\n        .formFields=${this.#workspaceContext?.getAllFields() ?? []}\n      ></forms-settings-fields-display>\n      ${when(\n        this._form?.storeRecordsLocally,\n        () =>\n          html`<forms-settings-data-retention></forms-settings-data-retention>`,\n      )}\n    </uui-box>`;\n  }\n\n  static styles = [\n    UmbTextStyles,\n    css`\n      :host {\n        display: block;\n        padding: var(--uui-size-layout-1);\n      }\n    `,\n  ];\n}\n\nexport default UmbWorkspaceViewFormSettingsElement;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [elementName]: UmbWorkspaceViewFormSettingsElement;\n  }\n}\n"],"names":["_workspaceContext","_enableMultiPageFormSettings","_UmbWorkspaceViewFormSettingsElement_instances","observeForm_fn","elementName","UmbWorkspaceViewFormSettingsElement","UmbElementMixin","LitElement","__privateAdd","FORMS_FORM_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","FORMS_CONTEXT","config","html","when","__privateGet","_a","_b","form","UmbTextStyles","css","__decorateClass","state","customElement","UmbWorkspaceViewFormSettingsElement$1"],"mappings":";;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAeA,MAAMC,IAAc;AAGb,IAAMC,IAAN,cACGC,EAAgBC,CAAU,EAEpC;AAAA,EAQE,cAAc;AACZ,UAAA,GAZGC,EAAA,MAAAN,CAAA,GAOLM,EAAA,MAAAR,CAAA,GAEAQ,EAAA,MAAAP,GAAwC,EAAA,GAKtC,KAAK,eAAeQ,GAA8B,CAACC,MAAa;AAC9D,MAAAC,EAAA,MAAKX,GAAoBU,CAAA,GACzBE,EAAA,MAAKV,GAAAC,CAAA,EAAL,KAAA,IAAA;AAAA,IAAA,CACD,GAED,KAAK,eAAeU,GAAe,CAACH,MAAa;AAC/C,MAAKA,KACL,KAAK,QAAQA,EAAS,QAAQ,CAACI,MAAW;AACxC,QAAIA,KACFH,EAAA,MAAKV,GACHa,KAAA,gBAAAA,EAAQ,2BAAA;AAAA,MACZ,CACD;AAAA,IAAA,CACF;AAAA,EAAA;AAAA,EAYH,SAAS;;AACP,WAAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMHC;AAAA,MACAC,EAAA,MAAKhB,CAAA;AAAA,MACL,MAAMc;AAAA,IAAA,CACP;AAAA;AAAA;AAAA,wBAGeG,IAAAD,EAAA,MAAKjB,CAAA,MAAL,gBAAAkB,EAAwB,mBAAkB,CAAA,CAAE;AAAA;AAAA,QAE1DF;AAAA,OACAG,IAAA,KAAK,UAAL,gBAAAA,EAAY;AAAA,MACZ,MACEJ;AAAA,IAAA,CACH;AAAA;AAAA,EAAA;AAaP;AAhEEf,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AATKC,IAAA,oBAAA,QAAA;AA8BLC,IAAY,WAAG;AACb,EAAKc,QAAKjB,CAAA,KAEV,KAAK,QAAQiB,EAAA,MAAKjB,CAAA,EAAkB,MAAM,CAACoB,MAAS;AAClD,IAAKA,MACL,KAAK,QAAQA;AAAA,EAAA,CACd;AACH;AArCWf,EA8DJ,SAAS;AAAA,EACdgB;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAMF;AAjEAC,EAAA;AAAA,EADCC,EAAA;AAAM,GAJInB,EAKX,WAAA,SAAA,CAAA;AALWA,IAANkB,EAAA;AAAA,EADNE,EAAcrB,CAAW;AAAA,GACbC,CAAA;AAyEb,MAAAqB,IAAerB;"}