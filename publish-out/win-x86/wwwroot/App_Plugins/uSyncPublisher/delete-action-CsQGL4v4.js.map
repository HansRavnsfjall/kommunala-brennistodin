{"version":3,"file":"delete-action-CsQGL4v4.js","sources":["../../../usync-publisher-assets/src/servers/workspace/server-item/actions/delete-action.ts"],"sourcesContent":["import { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport {\r\n\tUmbEntityActionArgs,\r\n\tUmbEntityActionBase,\r\n} from '@umbraco-cms/backoffice/entity-action';\r\nimport {\r\n\tUMB_CONFIRM_MODAL,\r\n\tUMB_MODAL_MANAGER_CONTEXT,\r\n} from '@umbraco-cms/backoffice/modal';\r\nimport { USYNC_PUBLISHER_SERVER_CONTEXT } from '../../../servers.context';\r\n\r\nexport class SyncPublisherServerDeleteAction extends UmbEntityActionBase<never> {\r\n\tconstructor(host: UmbControllerHost, args: UmbEntityActionArgs<never>) {\r\n\t\tsuper(host, args);\r\n\t}\r\n\r\n\tasync execute(): Promise<void> {\r\n\t\tif (this.args.unique == null) return;\r\n\r\n\t\tconst serverContext = await this.getContext(USYNC_PUBLISHER_SERVER_CONTEXT);\r\n\r\n\t\tif (!serverContext) return;\r\n\r\n\t\tconst server = await serverContext.getServer(this.args.unique);\r\n\t\tif (!server) return;\r\n\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tif (!modalManager) return;\r\n\r\n\t\tconst confirmContext = modalManager.open(this, UMB_CONFIRM_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\theadline: 'Delete server?',\r\n\t\t\t\tcontent: `Are you sure you want to delete the server [${server.name}]?`,\r\n\t\t\t\tconfirmLabel: 'Delete',\r\n\t\t\t\tcolor: 'danger',\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tawait confirmContext\r\n\t\t\t?.onSubmit()\r\n\t\t\t.then(async () => {\r\n\t\t\t\tawait serverContext.deleteServer(this.args.unique!);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\t// user pressed cancel.\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport default SyncPublisherServerDeleteAction;\r\n"],"names":["SyncPublisherServerDeleteAction","UmbEntityActionBase","host","args","serverContext","USYNC_PUBLISHER_SERVER_CONTEXT","server","modalManager","UMB_MODAL_MANAGER_CONTEXT","confirmContext","UMB_CONFIRM_MODAL"],"mappings":";;;AAWO,MAAMA,UAAwCC,EAA2B;AAAA,EAC/E,YAAYC,GAAyBC,GAAkC;AACtE,UAAMD,GAAMC,CAAI;AAAA,EAAA;AAAA,EAGjB,MAAM,UAAyB;AAC1B,QAAA,KAAK,KAAK,UAAU,KAAM;AAE9B,UAAMC,IAAgB,MAAM,KAAK,WAAWC,CAA8B;AAE1E,QAAI,CAACD,EAAe;AAEpB,UAAME,IAAS,MAAMF,EAAc,UAAU,KAAK,KAAK,MAAM;AAC7D,QAAI,CAACE,EAAQ;AAEb,UAAMC,IAAe,MAAM,KAAK,WAAWC,CAAyB;AACpE,QAAI,CAACD,EAAc;AAEnB,UAAME,IAAiBF,EAAa,KAAK,MAAMG,GAAmB;AAAA,MACjE,MAAM;AAAA,QACL,UAAU;AAAA,QACV,SAAS,+CAA+CJ,EAAO,IAAI;AAAA,QACnE,cAAc;AAAA,QACd,OAAO;AAAA,MAAA;AAAA,IACR,CACA;AAED,WAAMG,KAAA,gBAAAA,EACH,WACD,KAAK,YAAY;AACjB,YAAML,EAAc,aAAa,KAAK,KAAK,MAAO;AAAA,IAAA,GAElD,MAAM,MAAM;AAAA,IAAA;AAAA,EAEZ;AAEJ;"}