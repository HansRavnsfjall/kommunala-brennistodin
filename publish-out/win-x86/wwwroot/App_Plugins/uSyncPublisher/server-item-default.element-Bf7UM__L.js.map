{"version":3,"file":"server-item-default.element-Bf7UM__L.js","sources":["../../../usync-publisher-assets/src/servers/workspace/server-item/views/server-item-default.element.ts"],"sourcesContent":["import { UmbElementMixin } from '@umbraco-cms/backoffice/element-api';\r\nimport {\r\n\tLitElement,\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tstate,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport {\r\n\tSyncPublishServerView,\r\n\tSyncSendOptions,\r\n\tUSyncPublishServerStatus,\r\n} from '../../../../api';\r\nimport {\r\n\tSyncPublisherServerSharedContext,\r\n\tUSYNC_PUBLISHER_SERVER_SHARED_CONTEXT,\r\n} from '../../server-workspace-shared.context';\r\n\r\n@customElement('usync-publisher-server-default-view')\r\nexport class uSyncPublisherServerDefaultElement extends UmbElementMixin(LitElement) {\r\n\t#sharedContext?: SyncPublisherServerSharedContext;\r\n\r\n\t#checked: boolean = false;\r\n\r\n\t@state()\r\n\tlastKnownStatus?: USyncPublishServerStatus;\r\n\r\n\t@state()\r\n\tdata?: SyncPublishServerView;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(USYNC_PUBLISHER_SERVER_SHARED_CONTEXT, (_context) => {\r\n\t\t\tif (!_context) return;\r\n\r\n\t\t\tthis.#sharedContext = _context;\r\n\r\n\t\t\tthis.observe(_context.data, (_data) => {\r\n\t\t\t\tthis.data = _data;\r\n\r\n\t\t\t\tthis.#checkServer();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tasync #checkServer() {\r\n\t\tif (this.#checked) return this.lastKnownStatus;\r\n\t\tif (!this.#sharedContext || !this.data) return undefined;\r\n\r\n\t\tthis.#checked = true;\r\n\r\n\t\tconst result = await this.#sharedContext.checkServer(this.data.alias);\r\n\t\tthis.lastKnownStatus = result;\r\n\t}\r\n\r\n\t#onChange(e: Event) {\r\n\t\tconst element = e.target as HTMLInputElement;\r\n\t\tif (element) {\r\n\t\t\tthis.#sharedContext?.set({ [element.id]: element.value });\r\n\t\t}\r\n\t}\r\n\r\n\t#onUpdateAllowedServers(e: CustomEvent) {\r\n\t\tif (e.detail.allowedServers) {\r\n\t\t\tthis.#sharedContext?.set({ allowedServers: e.detail.allowedServers });\r\n\t\t}\r\n\t}\r\n\r\n\t#onSendUpdate(e: CustomEvent<SyncSendOptions>) {\r\n\t\tif (!e.detail) return;\r\n\t\tthis.#sharedContext?.set({ sendSettings: e.detail });\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout>\r\n\t\t\t\t<uui-box .headline=${this.localize.term('usyncpublish_serverInfo')}>\r\n\t\t\t\t\t<div slot=\"header-actions\">${this.renderStatus()}</div>\r\n\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t.label=${this.localize.term('usyncpublish_url')}\r\n\t\t\t\t\t\t.description=${this.localize.term('usyncpublish_urlDesc')}>\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\t\tlabel=\"url\"\r\n\t\t\t\t\t\t\t\tid=\"url\"\r\n\t\t\t\t\t\t\t\t.value=${this.data?.url}\r\n\t\t\t\t\t\t\t\t@input=${this.#onChange}></uui-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\r\n\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t.label=${this.localize.term('usyncpublish_message')}\r\n\t\t\t\t\t\t.description=${this.localize.term('usyncpublish_messageDesc')}>\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<uui-textarea\r\n\t\t\t\t\t\t\t\tlabel=\"message\"\r\n\t\t\t\t\t\t\t\trows=\"5\"\r\n\t\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t\t.value=${this.data?.description}\r\n\t\t\t\t\t\t\t\t@input=${this.#onChange}></uui-textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\r\n\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t.label=${this.localize.term('usyncpublish_connected')}\r\n\t\t\t\t\t\t.description=${this.localize.term('usyncpublish_connectedDesc')}>\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<usync-publisher-connected-servers\r\n\t\t\t\t\t\t\t\t.allowedServers=${this.data?.allowedServers}\r\n\t\t\t\t\t\t\t\t@update-allowed-servers=${this\r\n\t\t\t\t\t\t\t\t\t.#onUpdateAllowedServers}></usync-publisher-connected-servers>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t<uui-box .headline=${this.localize.term('usyncpublish_syncSettings')}>\r\n\t\t\t\t\t<umb-localize key=\"usyncpublish_syncSettingsDesc\"></umb-localize>\r\n\r\n\t\t\t\t\t<usync-publisher-server-sync-settings\r\n\t\t\t\t\t\t.settings=${this.data?.sendSettings}\r\n\t\t\t\t\t\t@usync-publisher-server-update-sync=${this\r\n\t\t\t\t\t\t\t.#onSendUpdate}></usync-publisher-server-sync-settings>\r\n\t\t\t\t</uui-box>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\trenderStatus() {\r\n\t\treturn html`<usync-publisher-server-status\r\n\t\t\t.status=${this.lastKnownStatus}\r\n\t\t\t.showStatus=${true}></usync-publisher-server-status>`;\r\n\t}\r\n\r\n\tstatic styles = css`\r\n\t\tuui-box {\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\r\n\t\tuui-input {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t`;\r\n}\r\n\r\nexport default uSyncPublisherServerDefaultElement;\r\n"],"names":["_sharedContext","_checked","_uSyncPublisherServerDefaultElement_instances","checkServer_fn","onChange_fn","onUpdateAllowedServers_fn","onSendUpdate_fn","uSyncPublisherServerDefaultElement","UmbElementMixin","LitElement","__privateAdd","USYNC_PUBLISHER_SERVER_SHARED_CONTEXT","_context","__privateSet","_data","__privateMethod","html","_a","_b","_c","_d","__privateGet","result","element","css","__decorateClass","state","customElement","uSyncPublisherServerDefaultElement$1"],"mappings":"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"}