{"version":3,"file":"server-item-workspace.element-CmGuGO4g.js","sources":["../../../usync-publisher-assets/src/servers/workspace/server-item/server-item-workspace-editor.element.ts","../../../usync-publisher-assets/src/servers/workspace/server-item/server-item-workspace.element.ts"],"sourcesContent":["import {\r\n\tLitElement,\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tifDefined,\r\n\tstate,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { SyncPublishServerView } from '../../../api';\r\nimport { UUIInputElement, UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport {\r\n\tUMB_MODAL_MANAGER_CONTEXT,\r\n\tUmbModalManagerContext,\r\n} from '@umbraco-cms/backoffice/modal';\r\nimport { UmbElementMixin } from '@umbraco-cms/backoffice/element-api';\r\nimport {\r\n\tSyncPublisherServerSharedContext,\r\n\tUSYNC_PUBLISHER_SERVER_SHARED_CONTEXT,\r\n} from '../server-workspace-shared.context';\r\nimport { UMB_ICON_PICKER_MODAL } from '@umbraco-cms/backoffice/icon';\r\n\r\n@customElement('usync-publisher-server-editor-workspace')\r\nexport class uSyncPublisherServerWorkspaceEdtirorElement extends UmbElementMixin(\r\n\tLitElement,\r\n) {\r\n\tsharedContext?: SyncPublisherServerSharedContext;\r\n\t#modalContext?: UmbModalManagerContext;\r\n\r\n\t@state()\r\n\tdata: SyncPublishServerView | undefined;\r\n\r\n\t@state()\r\n\t_aliasLocked = true;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n\t\t\tthis.#modalContext = instance;\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(USYNC_PUBLISHER_SERVER_SHARED_CONTEXT, (_instance) => {\r\n\t\t\tif (!_instance) return;\r\n\r\n\t\t\tthis.sharedContext = _instance;\r\n\r\n\t\t\tthis.observe(_instance.data, (_data) => {\r\n\t\t\t\tthis.data = _data;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t#onIconClick() {\r\n\t\tconst [alias, color] = this.data?.icon?.replace('color-', '')?.split(' ') ?? [];\r\n\r\n\t\tconst modalContext = this.#modalContext?.open(this, UMB_ICON_PICKER_MODAL, {\r\n\t\t\tvalue: { icon: alias, color: color },\r\n\t\t});\r\n\r\n\t\tmodalContext?.onSubmit().then((saved) => {\r\n\t\t\tif (saved) {\r\n\t\t\t\tthis.sharedContext?.setIcon(saved);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t#onNameInput(event: UUIInputEvent) {\r\n\t\tif (event instanceof UUIInputEvent) {\r\n\t\t\tconst target = event.composedPath()[0] as UUIInputElement;\r\n\r\n\t\t\tif (typeof target?.value === 'string') {\r\n\t\t\t\tthis.sharedContext?.setName(target.value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t#onAliasChange(event: UUIInputEvent) {\r\n\t\tif (event instanceof UUIInputEvent) {\r\n\t\t\tconst target = event.composedPath()[0] as UUIInputElement;\r\n\r\n\t\t\tif (typeof target?.value === 'string') {\r\n\t\t\t\tthis.sharedContext?.set({ alias: target.value });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// stop the name also chaning (we are nested inside the name input.)\r\n\t\tevent.stopPropagation();\r\n\t}\r\n\r\n\t#onToggleAliasLock() {\r\n\t\tthis._aliasLocked = !this._aliasLocked;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn this.data === undefined\r\n\t\t\t? html`<uui-loader-circle></uui-loader-circle>`\r\n\t\t\t: this.renderServer();\r\n\t}\r\n\r\n\trenderServer() {\r\n\t\treturn html`\r\n\t\t\t<umb-workspace-editor>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<uui-button id=\"icon\" @click=${this.#onIconClick} label=\"icon\" compact>\r\n\t\t\t\t\t\t<umb-icon name=\"${ifDefined(this.data?.icon)}\"></umb-icon>\r\n\t\t\t\t\t</uui-button>\r\n\r\n\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\tplaceholder=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t\t.value=${this.data?.name ?? ''}\r\n\t\t\t\t\t\t@input=\"${this.#onNameInput}\"\r\n\t\t\t\t\t\tlabel=\"Name\">\r\n\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\tname=\"alias\"\r\n\t\t\t\t\t\t\tslot=\"append\"\r\n\t\t\t\t\t\t\tlabel=\"alias\"\r\n\t\t\t\t\t\t\t@input=${this.#onAliasChange}\r\n\t\t\t\t\t\t\t.value=${this.data?.alias ?? ''}\r\n\t\t\t\t\t\t\t.disabled=${this._aliasLocked}>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t@click=${this.#onToggleAliasLock}\r\n\t\t\t\t\t\t\t\t@keydown=${() => ''}\r\n\t\t\t\t\t\t\t\tid=\"alias-lock\"\r\n\t\t\t\t\t\t\t\tslot=\"prepend\">\r\n\t\t\t\t\t\t\t\t<uui-icon\r\n\t\t\t\t\t\t\t\t\tname=${this._aliasLocked ? 'icon-lock' : 'icon-unlocked'}></uui-icon>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</uui-input>\r\n\t\t\t\t\t</uui-input>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic styles = [\r\n\t\tcss`\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#name {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#icon {\r\n\t\t\t\tfont-size: calc(var(--uui-size-layout-3) / 2);\r\n\t\t\t\tmargin-right: var(--uui-size-space-2);\r\n\t\t\t\tmargin-left: calc(var(--uui-size-space-4) * -1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n","import { customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { SyncPublisherServerWorkspaceContext } from './server-workspace.context';\r\nimport { UmbRoute } from '@umbraco-cms/backoffice/router';\r\nimport { uSyncPublisherServerWorkspaceEdtirorElement } from './server-item-workspace-editor.element';\r\n\r\n@customElement('usync-publisher-server-item-workspace')\r\nexport class uSyncPublisherServerItemWorkspaceElement extends UmbLitElement {\r\n\t#context = new SyncPublisherServerWorkspaceContext(this);\r\n\t#createElement = () => new uSyncPublisherServerWorkspaceEdtirorElement();\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\t@state()\r\n\t_routes: UmbRoute[] = [\r\n\t\t{\r\n\t\t\tpath: 'edit/:unique',\r\n\t\t\tcomponent: this.#createElement,\r\n\t\t\tsetup: (_component, info) => {\r\n\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\tthis.#context.load(unique);\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\trender() {\r\n\t\treturn html`<umb-router-slot .routes=${this._routes}></umb-router-slot>`;\r\n\t}\r\n}\r\n\r\nexport default uSyncPublisherServerItemWorkspaceElement;\r\n"],"names":["_modalContext","_uSyncPublisherServerWorkspaceEdtirorElement_instances","onIconClick_fn","onNameInput_fn","onAliasChange_fn","onToggleAliasLock_fn","uSyncPublisherServerWorkspaceEdtirorElement","UmbElementMixin","LitElement","__privateAdd","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","USYNC_PUBLISHER_SERVER_SHARED_CONTEXT","_instance","_data","html","__privateMethod","ifDefined","_a","_b","_c","alias","color","modalContext","__privateGet","UMB_ICON_PICKER_MODAL","saved","event","UUIInputEvent","target","css","__decorateClass","state","customElement","_context","_createElement","uSyncPublisherServerItemWorkspaceElement","UmbLitElement","SyncPublisherServerWorkspaceContext","_component","info","unique","uSyncPublisherServerItemWorkspaceElement$1"],"mappings":";;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAsBO,IAAMC,IAAN,cAA0DC;AAAA,EAChEC;AACD,EAAE;AAAA,EAUD,cAAc;AACP,UAAA,GAbDC,EAAA,MAAAR,CAAA,GAINQ,EAAA,MAAAT,CAAA,GAMe,KAAA,eAAA,IAKT,KAAA,eAAeU,GAA2B,CAACC,MAAa;AAC5D,MAAAC,EAAA,MAAKZ,GAAgBW,CAAA;AAAA,IAAA,CACrB,GAEI,KAAA,eAAeE,GAAuC,CAACC,MAAc;AACzE,MAAKA,MAEL,KAAK,gBAAgBA,GAErB,KAAK,QAAQA,EAAU,MAAM,CAACC,MAAU;AACvC,aAAK,OAAOA;AAAA,MAAA,CACZ;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EA4CF,SAAS;AACR,WAAO,KAAK,SAAS,SAClBC,6CACA,KAAK,aAAa;AAAA,EAAA;AAAA,EAGtB,eAAe;;AACP,WAAAA;AAAA;AAAA;AAAA,oCAG2BC,QAAKhB,GAAYC,CAAA,CAAA;AAAA,wBAC7BgB,GAAUC,IAAA,KAAK,SAAL,gBAAAA,EAAW,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,oBAK9B,KAAK,SAAS,KAAK,wBAAwB,CAAC;AAAA,iBACjDC,IAAA,KAAK,SAAL,gBAAAA,EAAW,SAAQ,EAAE;AAAA,gBACpBH,QAAKhB,GAAYE,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMjBc,QAAKhB,GAAcG,CAAA,CAAA;AAAA,kBACnBiB,IAAA,KAAK,SAAL,gBAAAA,EAAW,UAAS,EAAE;AAAA,mBACnB,KAAK,YAAY;AAAA;AAAA,iBAEnBJ,QAAKhB,GAAkBI,CAAA,CAAA;AAAA,mBACrB,MAAM,EAAE;AAAA;AAAA;AAAA;AAAA,gBAIX,KAAK,eAAe,cAAc,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AA8BjE;AAlICL,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AA8BNC,IAAY,WAAG;;AACd,QAAM,CAACoB,GAAOC,CAAK,MAAIF,KAAAD,KAAAD,IAAA,KAAK,SAAL,gBAAAA,EAAW,SAAX,gBAAAC,EAAiB,QAAQ,UAAU,QAAnC,gBAAAC,EAAwC,MAAM,SAAQ,CAAC,GAExEG,KAAeC,IAAAA,EAAA,MAAKzB,CAAe,MAApByB,gBAAAA,EAAoB,KAAK,MAAMC,GAAuB;AAAA,IAC1E,OAAO,EAAE,MAAMJ,GAAO,OAAAC,EAAa;AAAA,EAAA;AAGpC,EAAAC,KAAA,QAAAA,EAAc,WAAW,KAAK,CAACG,MAAU;;AACxC,IAAIA,OACER,IAAA,KAAA,kBAAA,QAAAA,EAAe,QAAQQ;AAAA,EAC7B;AAEF;AAEAxB,IAAY,SAACyB,GAAsB;;AAClC,MAAIA,aAAiBC,GAAe;AACnC,UAAMC,IAASF,EAAM,aAAa,EAAE,CAAC;AAEjC,IAAA,QAAOE,KAAA,gBAAAA,EAAQ,UAAU,cACvBX,IAAA,KAAA,kBAAA,QAAAA,EAAe,QAAQW,EAAO;AAAA,EACpC;AAEF;AAEA1B,IAAc,SAACwB,GAAsB;;AACpC,MAAIA,aAAiBC,GAAe;AACnC,UAAMC,IAASF,EAAM,aAAa,EAAE,CAAC;AAEjC,IAAA,QAAOE,KAAA,gBAAAA,EAAQ,UAAU,cAC5BX,IAAA,KAAK,kBAAL,QAAAA,EAAoB,IAAI,EAAE,OAAOW,EAAO;EACzC;AAID,EAAAF,EAAM,gBAAgB;AACvB;AAEAvB,IAAkB,WAAG;AACf,OAAA,eAAe,CAAC,KAAK;AAC3B;AArEYC,EAiHL,SAAS;AAAA,EACfyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBD;AA9HAC,EAAA;AAAA,EADCC,EAAM;AAAA,GANK3B,EAOZ,WAAA,QAAA,CAAA;AAGA0B,EAAA;AAAA,EADCC,EAAM;AAAA,GATK3B,EAUZ,WAAA,gBAAA,CAAA;AAVYA,IAAN0B,EAAA;AAAA,EADNE,EAAc,yCAAyC;AAAA,GAC3C5B,CAAA;;;;;;;uQCtBb6B,GAAAC;AAOa,IAAAC,IAAN,cAAuDC,EAAc;AAAA,EAI3E,cAAc;AACP,UAAA,GAJI7B,EAAA,MAAA0B,GAAA,IAAII,EAAoC,IAAI,CAAA,GACtC9B,EAAA,MAAA2B,GAAA,MAAM,IAAI9B,EAA4C,CAAA,GAOjD,KAAA,UAAA;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWmB,EAAK,MAAAW,CAAA;AAAA,QAChB,OAAO,CAACI,GAAYC,MAAS;AACtB,gBAAAC,IAASD,EAAK,MAAM,OAAO;AAC5B,UAAAhB,EAAA,MAAAU,CAAA,EAAS,KAAKO,CAAM;AAAA,QAAA;AAAA,MAC1B;AAAA,IAEF;AAAA,EAAA;AAAA,EAEA,SAAS;AACD,WAAA1B,6BAAgC,KAAK,OAAO;AAAA,EAAA;AAErD;AAtBCmB,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AAOAJ,EAAA;AAAA,EADCC,EAAM;AAAA,GARKI,EASZ,WAAA,WAAA,CAAA;AATYA,IAANL,EAAA;AAAA,EADNE,EAAc,uCAAuC;AAAA,GACzCG,CAAA;AAyBb,MAAAM,KAAeN;"}