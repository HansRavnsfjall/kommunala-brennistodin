{"version":3,"file":"server-root-workspace.element-Dgqcyowx.js","sources":["../../../usync-publisher-assets/src/servers/modals/generate-key.modal-token.ts","../../../usync-publisher-assets/src/servers/workspace/server-root/server-root-workspace.element.ts"],"sourcesContent":["import { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\nimport { USYNC_PUBLISHER_GENERATE_KEY_MODAL_ALIAS } from '../_constants';\r\n\r\nexport type SyncPublisherGenerateKeyData = {};\r\n\r\nexport type SyncPublisherGenerateKeyValie = {};\r\n\r\nexport const USYNC_PUBLISHER_GENERATE_KEY_MODAL = new UmbModalToken<\r\n\tSyncPublisherGenerateKeyData,\r\n\tSyncPublisherGenerateKeyValie\r\n>(USYNC_PUBLISHER_GENERATE_KEY_MODAL_ALIAS, {\r\n\tmodal: {\r\n\t\ttype: 'dialog',\r\n\t\tsize: 'small',\r\n\t},\r\n});\r\n","import { css, customElement, html } from '@umbraco-cms/backoffice/external/lit';\r\nimport SyncPublisherServerRootWorkspaceContext from './server-root-workspace.context';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { USYNC_PUBLISHER_SERVER_SHARED_CONTEXT } from '../server-workspace-shared.context';\r\nimport { USYNC_PUBLISHER_GENERATE_KEY_MODAL } from '../../modals/generate-key.modal-token';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\n\r\n@customElement('usync-publisher-server-root-workspace')\r\nexport class uSyncPublisherServerRootWorkspaceElement extends UmbLitElement {\r\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t// @ts-ignore\r\n\t// eslint-disable-next-line no-unused-private-class-members\r\n\t#context = new SyncPublisherServerRootWorkspaceContext(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(USYNC_PUBLISHER_SERVER_SHARED_CONTEXT, async (context) => {\r\n\t\t\tif (!context) return;\r\n\r\n\t\t\tthis.observe(context.hasKeys, async (value) => {\r\n\t\t\t\tif (value === false) {\r\n\t\t\t\t\twindow.setTimeout(async () => {\r\n\t\t\t\t\t\tawait this.#openGenerateKeyModal();\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tasync #openGenerateKeyModal() {\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tif (!modalManager) return;\r\n\r\n\t\tconst generateModalContext = modalManager.open(\r\n\t\t\tthis,\r\n\t\t\tUSYNC_PUBLISHER_GENERATE_KEY_MODAL,\r\n\t\t\t{ data: {} },\r\n\t\t);\r\n\r\n\t\tconst data = await generateModalContext.onSubmit().catch(() => {\r\n\t\t\treturn;\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn html`<umb-workspace-editor>\r\n\t\t\t<div slot=\"header\" class=\"header\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<strong>uSync.Publisher</strong><br /><em\r\n\t\t\t\t\t\t>Push and pull things between servers.</em\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</umb-workspace-editor>`;\r\n\t}\r\n\r\n\tstatic styles = css`\r\n\t\t.header {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 10px;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\tumb-icon {\r\n\t\t\tfont-size: var(--uui-type-h4-size);\r\n\t\t}\r\n\t`;\r\n}\r\n\r\nexport default uSyncPublisherServerRootWorkspaceElement;\r\n"],"names":["USYNC_PUBLISHER_GENERATE_KEY_MODAL","UmbModalToken","USYNC_PUBLISHER_GENERATE_KEY_MODAL_ALIAS","_context","_uSyncPublisherServerRootWorkspaceElement_instances","openGenerateKeyModal_fn","uSyncPublisherServerRootWorkspaceElement","UmbLitElement","__privateAdd","SyncPublisherServerRootWorkspaceContext","USYNC_PUBLISHER_SERVER_SHARED_CONTEXT","context","value","__privateMethod","html","modalManager","UMB_MODAL_MANAGER_CONTEXT","css","__decorateClass","customElement","uSyncPublisherServerRootWorkspaceElement$1"],"mappings":";;;;AAOa,MAAAA,IAAqC,IAAIC,EAGpDC,GAA0C;AAAA,EAC3C,OAAO;AAAA,IACN,MAAM;AAAA,IACN,MAAM;AAAA,EAAA;AAER,CAAC;;;;;;;8OCfDC,GAAAC,GAAAC;AAQa,IAAAC,IAAN,cAAuDC,EAAc;AAAA,EAM3E,cAAc;AACP,UAAA,GAPDC,EAAA,MAAAJ,CAAA,GAIKI,EAAA,MAAAL,GAAA,IAAIM,EAAwC,IAAI,CAAA,GAKrD,KAAA,eAAeC,GAAuC,OAAOC,MAAY;AAC7E,MAAKA,KAEL,KAAK,QAAQA,EAAQ,SAAS,OAAOC,MAAU;AAC9C,QAAIA,MAAU,MACb,OAAO,WAAW,YAAY;AAC7B,gBAAMC,QAAKT,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,WACJ,GAAI;AAAA,MACR,CACA;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAoBF,SAAS;AACD,WAAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AAsBT;AA1DCX,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAsBAC,IAAqB,iBAAG;AAC7B,QAAMU,IAAe,MAAM,KAAK,WAAWC,CAAyB;AACpE,SAAKD,IAQQ,MANgBA,EAAa;AAAA,IACzC;AAAA,IACAf;AAAA,IACA,EAAE,MAAM,CAAG,EAAA;AAAA,EACZ,EAEwC,SAAS,EAAE,MAAM,MAAM;AAAA,EAC9D,CACA,IAVkB;AAapB;AArCYM,EAmDL,SAASW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnDJX,IAANY,EAAA;AAAA,EADNC,EAAc,uCAAuC;AAAA,GACzCb,CAAA;AAgEb,MAAAc,IAAed;"}