{"version":3,"file":"settings.context-DF4xXEoj.js","sources":["../../../usync-publisher-assets/src/settings/settings.source.ts","../../../usync-publisher-assets/src/settings/settings.repository.ts","../../../usync-publisher-assets/src/settings/settings.context.ts"],"sourcesContent":["import { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\nimport { ServerSyncRequest, SettingsService, USyncPublishSettingsView } from '../api';\r\n\r\nexport class SyncPublisherSettingsSource {\r\n\treadonly #host: UmbControllerHost;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\tasync getSettings() {\r\n\t\treturn await tryExecute(this.#host, SettingsService.getSettings());\r\n\t}\r\n\r\n\tasync getUserGroups() {\r\n\t\treturn await tryExecute(this.#host, SettingsService.getUserGroups());\r\n\t}\r\n\r\n\tasync reloadSettings() {\r\n\t\treturn await tryExecute(this.#host, SettingsService.reloadSettings());\r\n\t}\r\n\r\n\tasync saveSettings(settings: USyncPublishSettingsView) {\r\n\t\treturn await tryExecute(this.#host, SettingsService.saveSettings({ body: settings }));\r\n\t}\r\n\r\n\tasync syncSettings(request: ServerSyncRequest) {\r\n\t\treturn await tryExecute(this.#host, SettingsService.syncSettings({ body: request }));\r\n\t}\r\n}\r\n","import { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { SyncPublisherSettingsSource } from './settings.source';\r\nimport { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { ServerSyncRequest, USyncPublishSettingsView } from '../api';\r\n\r\nexport class SyncPublisherSettingsRepository extends UmbControllerBase {\r\n\treadonly #settingsSource: SyncPublisherSettingsSource;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\t\tthis.#settingsSource = new SyncPublisherSettingsSource(this);\r\n\t}\r\n\r\n\tasync getSettings() {\r\n\t\treturn (await this.#settingsSource.getSettings()).data;\r\n\t}\r\n\r\n\tasync getUserGroups() {\r\n\t\treturn (await this.#settingsSource.getUserGroups()).data;\r\n\t}\r\n\r\n\tasync reloadSettings() {\r\n\t\treturn (await this.#settingsSource.reloadSettings()).data;\r\n\t}\r\n\r\n\tasync saveSettings(settings: USyncPublishSettingsView) {\r\n\t\treturn (await this.#settingsSource.saveSettings(settings)).data;\r\n\t}\r\n\r\n\tasync syncSettings(request: ServerSyncRequest) {\r\n\t\treturn (await this.#settingsSource.syncSettings(request)).data;\r\n\t}\r\n}\r\n","import { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { SyncPublisherSettingsRepository } from './settings.repository';\r\nimport { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\nimport { UmbObjectState } from '@umbraco-cms/backoffice/observable-api';\r\nimport { USyncPublishSettingsView } from '../api';\r\n\r\nexport class SyncPublisherSettingsContext extends UmbControllerBase {\r\n\treadonly #repository: SyncPublisherSettingsRepository;\r\n\r\n\t#settings = new UmbObjectState<USyncPublishSettingsView | undefined>(undefined);\r\n\tpublic readonly settings = this.#settings.asObservable();\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\r\n\t\tthis.#repository = new SyncPublisherSettingsRepository(this);\r\n\t\tthis.provideContext(USYNC_PUBLISHER_SETTINGS_CONTEXT, this);\r\n\t}\r\n\r\n\tpublic async getSettings(): Promise<USyncPublishSettingsView | undefined> {\r\n\t\tconst settings = await this.#repository.getSettings();\r\n\t\tif (!settings) return;\r\n\r\n\t\tthis.#settings.setValue(settings);\r\n\t\treturn settings;\r\n\t}\r\n}\r\n\r\nexport default SyncPublisherSettingsContext;\r\n\r\nexport const USYNC_PUBLISHER_SETTINGS_CONTEXT =\r\n\tnew UmbContextToken<SyncPublisherSettingsContext>('uSyncPublisherSettingsContext');\r\n"],"names":["SyncPublisherSettingsSource","host","__privateAdd","_host","__privateSet","tryExecute","__privateGet","SettingsService","settings","request","SyncPublisherSettingsRepository","UmbControllerBase","_settingsSource","SyncPublisherSettingsContext","_repository","_settings","UmbObjectState","USYNC_PUBLISHER_SETTINGS_CONTEXT","UmbContextToken"],"mappings":";;;;;;;;;;;AAIO,MAAMA,EAA4B;AAAA,EAGxC,YAAYC,GAAyB;AAF5B,IAAAC,EAAA,MAAAC;AAGR,IAAAC,EAAA,MAAKD,GAAQF;AAAA,EAAA;AAAA,EAGd,MAAM,cAAc;AACnB,WAAO,MAAMI,EAAWC,EAAA,MAAKH,IAAOI,EAAgB,aAAa;AAAA,EAAA;AAAA,EAGlE,MAAM,gBAAgB;AACrB,WAAO,MAAMF,EAAWC,EAAA,MAAKH,IAAOI,EAAgB,eAAe;AAAA,EAAA;AAAA,EAGpE,MAAM,iBAAiB;AACtB,WAAO,MAAMF,EAAWC,EAAA,MAAKH,IAAOI,EAAgB,gBAAgB;AAAA,EAAA;AAAA,EAGrE,MAAM,aAAaC,GAAoC;AAC/C,WAAA,MAAMH,EAAWC,EAAA,MAAKH,IAAOI,EAAgB,aAAa,EAAE,MAAMC,EAAS,CAAC,CAAC;AAAA,EAAA;AAAA,EAGrF,MAAM,aAAaC,GAA4B;AACvC,WAAA,MAAMJ,EAAWC,EAAA,MAAKH,IAAOI,EAAgB,aAAa,EAAE,MAAME,EAAQ,CAAC,CAAC;AAAA,EAAA;AAErF;AAzBUN,IAAA;;ACAH,MAAMO,UAAwCC,EAAkB;AAAA,EAGtE,YAAYV,GAAyB;AACpC,UAAMA,CAAI;AAHF,IAAAC,EAAA,MAAAU;AAIH,IAAAR,EAAA,MAAAQ,GAAkB,IAAIZ,EAA4B,IAAI;AAAA,EAAA;AAAA,EAG5D,MAAM,cAAc;AACnB,YAAQ,MAAMM,EAAA,MAAKM,GAAgB,YAAe,GAAA;AAAA,EAAA;AAAA,EAGnD,MAAM,gBAAgB;AACrB,YAAQ,MAAMN,EAAA,MAAKM,GAAgB,cAAiB,GAAA;AAAA,EAAA;AAAA,EAGrD,MAAM,iBAAiB;AACtB,YAAQ,MAAMN,EAAA,MAAKM,GAAgB,eAAkB,GAAA;AAAA,EAAA;AAAA,EAGtD,MAAM,aAAaJ,GAAoC;AACtD,YAAQ,MAAMF,EAAA,MAAKM,GAAgB,aAAaJ,CAAQ,GAAG;AAAA,EAAA;AAAA,EAG5D,MAAM,aAAaC,GAA4B;AAC9C,YAAQ,MAAMH,EAAA,MAAKM,GAAgB,aAAaH,CAAO,GAAG;AAAA,EAAA;AAE5D;AA1BUG,IAAA;;ACCH,MAAMC,UAAqCF,EAAkB;AAAA,EAMnE,YAAYV,GAAyB;AACpC,UAAMA,CAAI;AANF,IAAAC,EAAA,MAAAY;AAET,IAAAZ,EAAA,MAAAa;AAAY,IAAAX,EAAA,MAAAW,GAAA,IAAIC,EAAqD,MAAS,IAC9D,KAAA,WAAWV,EAAA,MAAKS,GAAU,aAAa,GAKjDX,EAAA,MAAAU,GAAc,IAAIJ,EAAgC,IAAI,IACtD,KAAA,eAAeO,GAAkC,IAAI;AAAA,EAAA;AAAA,EAG3D,MAAa,cAA6D;AACzE,UAAMT,IAAW,MAAMF,EAAA,MAAKQ,GAAY,YAAY;AACpD,QAAKN;AAEA,aAAAF,EAAA,MAAAS,GAAU,SAASP,CAAQ,GACzBA;AAAA,EAAA;AAET;AAnBUM,IAAA,eAETC,IAAA;AAqBY,MAAAE,IACZ,IAAIC,EAA8C,+BAA+B;"}