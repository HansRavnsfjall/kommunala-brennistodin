{"version":3,"file":"block-workspace-view-edit-tab.element-BH25ClZn.js","sources":["../../../src/packages/block/block/workspace/views/edit/block-workspace-view-edit-property.element.ts","../../../src/packages/block/block/workspace/views/edit/block-workspace-view-edit-properties.element.ts","../../../src/packages/block/block/workspace/views/edit/block-workspace-view-edit-tab.element.ts"],"sourcesContent":["import type UmbBlockElementManager from '../../block-element-manager.js';\r\nimport { html, customElement, property, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UmbPropertyTypeModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbDataPathPropertyValueQuery } from '@umbraco-cms/backoffice/validation';\r\nimport { UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\n\r\n@customElement('umb-block-workspace-view-edit-property')\r\nexport class UmbBlockWorkspaceViewEditPropertyElement extends UmbLitElement {\r\n\t//\r\n\t@property({ attribute: false })\r\n\tvariantId?: UmbVariantId;\r\n\r\n\t@property({ attribute: false })\r\n\tproperty?: UmbPropertyTypeModel;\r\n\r\n\t@state()\r\n\tprivate _dataPath?: string;\r\n\r\n\t@state()\r\n\tprivate _writeable?: boolean;\r\n\r\n\t@property({ attribute: false })\r\n\townerContext?: UmbBlockElementManager;\r\n\r\n\toverride willUpdate(changedProperties: Map<string, any>) {\r\n\t\tsuper.willUpdate(changedProperties);\r\n\t\tif (changedProperties.has('type') || changedProperties.has('variantId') || changedProperties.has('ownerContext')) {\r\n\t\t\tif (this.variantId && this.property && this.ownerContext) {\r\n\t\t\t\tconst propertyVariantId = new UmbVariantId(\r\n\t\t\t\t\tthis.property.variesByCulture ? this.variantId.culture : null,\r\n\t\t\t\t\tthis.property.variesBySegment ? this.variantId.segment : null,\r\n\t\t\t\t);\r\n\t\t\t\tthis._dataPath = `$.values[${UmbDataPathPropertyValueQuery({\r\n\t\t\t\t\talias: this.property.alias,\r\n\t\t\t\t\tculture: propertyVariantId.culture,\r\n\t\t\t\t\tsegment: propertyVariantId.segment,\r\n\t\t\t\t})}].value`;\r\n\r\n\t\t\t\tthis.observe(\r\n\t\t\t\t\tthis.ownerContext.propertyWriteGuard.isPermittedForVariantAndProperty(\r\n\t\t\t\t\t\tpropertyVariantId,\r\n\t\t\t\t\t\tthis.property,\r\n\t\t\t\t\t\tthis.variantId,\r\n\t\t\t\t\t),\r\n\t\t\t\t\t(write) => {\r\n\t\t\t\t\t\tthis._writeable = write;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'observeView',\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._dataPath || this._writeable === undefined) return nothing;\r\n\r\n\t\treturn html`<umb-property-type-based-property\r\n\t\t\tdata-path=${this._dataPath}\r\n\t\t\t.property=${this.property}\r\n\t\t\t?readonly=${!this._writeable}></umb-property-type-based-property>`;\r\n\t}\r\n}\r\n\r\nexport default UmbBlockWorkspaceViewEditPropertyElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-workspace-view-edit-property': UmbBlockWorkspaceViewEditPropertyElement;\r\n\t}\r\n}\r\n","import type { UmbBlockWorkspaceElementManagerNames } from '../../block-workspace.context.js';\r\nimport type UmbBlockElementManager from '../../block-element-manager.js';\r\nimport { UMB_BLOCK_WORKSPACE_CONTEXT } from '../../block-workspace.context-token.js';\r\nimport { css, html, customElement, property, state, repeat, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbContentTypeModel, UmbPropertyTypeModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbContentTypePropertyStructureHelper } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\n\r\nimport './block-workspace-view-edit-property.element.js';\r\n\r\n@customElement('umb-block-workspace-view-edit-properties')\r\nexport class UmbBlockWorkspaceViewEditPropertiesElement extends UmbLitElement {\r\n\t#managerName?: UmbBlockWorkspaceElementManagerNames;\r\n\t#workspaceContext?: typeof UMB_BLOCK_WORKSPACE_CONTEXT.TYPE;\r\n\t#propertyStructureHelper = new UmbContentTypePropertyStructureHelper<UmbContentTypeModel>(this);\r\n\t#properties?: Array<UmbPropertyTypeModel>;\r\n\t#visiblePropertiesUniques: Array<string> = [];\r\n\r\n\t@property({ attribute: false })\r\n\tpublic get managerName(): UmbBlockWorkspaceElementManagerNames | undefined {\r\n\t\treturn this.#managerName;\r\n\t}\r\n\tpublic set managerName(value: UmbBlockWorkspaceElementManagerNames | undefined) {\r\n\t\tthis.#managerName = value;\r\n\t\tthis.#setStructureManager();\r\n\t}\r\n\r\n\t@property({ type: String, attribute: 'container-name', reflect: false })\r\n\tpublic get containerId(): string | null | undefined {\r\n\t\treturn this.#propertyStructureHelper.getContainerId();\r\n\t}\r\n\tpublic set containerId(value: string | null | undefined) {\r\n\t\tthis.#propertyStructureHelper.setContainerId(value);\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _dataOwner?: UmbBlockElementManager;\r\n\r\n\t@state()\r\n\tprivate _workspaceVariantId?: UmbVariantId;\r\n\r\n\t@state()\r\n\tprivate _visibleProperties?: Array<UmbPropertyTypeModel>;\r\n\r\n\t@state()\r\n\tprivate _ownerEntityType?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_BLOCK_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#workspaceContext = workspaceContext;\r\n\t\t\tthis._ownerEntityType = this.#workspaceContext?.getEntityType();\r\n\t\t\tthis.observe(\r\n\t\t\t\tworkspaceContext?.variantId,\r\n\t\t\t\t(variantId) => {\r\n\t\t\t\t\tthis._workspaceVariantId = variantId;\r\n\t\t\t\t\tthis.#processPropertyStructure();\r\n\t\t\t\t},\r\n\t\t\t\t'observeVariantId',\r\n\t\t\t);\r\n\t\t\tthis.#setStructureManager();\r\n\t\t});\r\n\t}\r\n\r\n\t#setStructureManager() {\r\n\t\tif (!this.#workspaceContext || !this.#managerName) return;\r\n\r\n\t\tthis._dataOwner = this.#workspaceContext[this.#managerName];\r\n\t\tconst structureManager = this._dataOwner.structure;\r\n\r\n\t\tthis.#propertyStructureHelper.setStructureManager(structureManager);\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyStructureHelper.propertyStructure,\r\n\t\t\t(properties) => {\r\n\t\t\t\tthis.#properties = properties;\r\n\t\t\t\tthis.#processPropertyStructure();\r\n\t\t\t},\r\n\t\t\t'observePropertyStructure',\r\n\t\t);\r\n\t}\r\n\r\n\t#processPropertyStructure() {\r\n\t\tif (!this._dataOwner || !this.#properties || !this.#propertyStructureHelper || !this._workspaceVariantId) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst propertyViewGuard = this._dataOwner.propertyViewGuard;\r\n\r\n\t\tthis.#properties.forEach((property) => {\r\n\t\t\tconst propertyVariantId = new UmbVariantId(\r\n\t\t\t\tproperty.variesByCulture ? this._workspaceVariantId!.culture : null,\r\n\t\t\t\tproperty.variesBySegment ? this._workspaceVariantId!.segment : null,\r\n\t\t\t);\r\n\t\t\tthis.observe(\r\n\t\t\t\tpropertyViewGuard.isPermittedForVariantAndProperty(propertyVariantId, property, this._workspaceVariantId!),\r\n\t\t\t\t(permitted) => {\r\n\t\t\t\t\tif (permitted) {\r\n\t\t\t\t\t\tthis.#visiblePropertiesUniques.push(property.unique);\r\n\t\t\t\t\t\tthis.#calculateVisibleProperties();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst index = this.#visiblePropertiesUniques.indexOf(property.unique);\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tthis.#visiblePropertiesUniques.splice(index, 1);\r\n\t\t\t\t\t\t\tthis.#calculateVisibleProperties();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t`propertyViewGuard-permittedForVariantAndProperty-${property.unique}`,\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#calculateVisibleProperties() {\r\n\t\tthis._visibleProperties = this.#properties!.filter((property) =>\r\n\t\t\tthis.#visiblePropertiesUniques.includes(property.unique),\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn this._workspaceVariantId && this._visibleProperties\r\n\t\t\t? repeat(\r\n\t\t\t\t\tthis._visibleProperties,\r\n\t\t\t\t\t(property) => property.alias,\r\n\t\t\t\t\t(property) =>\r\n\t\t\t\t\t\thtml`<umb-block-workspace-view-edit-property\r\n\t\t\t\t\t\t\tclass=\"property\"\r\n\t\t\t\t\t\t\t.ownerContext=${this._dataOwner}\r\n\t\t\t\t\t\t\t.ownerEntityType=${this._ownerEntityType}\r\n\t\t\t\t\t\t\t.variantId=${this._workspaceVariantId}\r\n\t\t\t\t\t\t\t.property=${property}></umb-block-workspace-view-edit-property>`,\r\n\t\t\t\t)\r\n\t\t\t: nothing;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t.property {\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-divider);\r\n\t\t\t}\r\n\t\t\t.property:last-child {\r\n\t\t\t\tborder-bottom: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbBlockWorkspaceViewEditPropertiesElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-workspace-view-edit-properties': UmbBlockWorkspaceViewEditPropertiesElement;\r\n\t}\r\n}\r\n","import { UMB_BLOCK_WORKSPACE_CONTEXT } from '../../block-workspace.context-token.js';\r\nimport { css, html, customElement, property, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbContentTypeModel, UmbPropertyTypeContainerMergedModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbContentTypeContainerStructureHelper } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\nimport './block-workspace-view-edit-properties.element.js';\r\n// eslint-disable-next-line import/order\r\nimport type { UmbBlockWorkspaceElementManagerNames } from '../../block-workspace.context.js';\r\n\r\n@customElement('umb-block-workspace-view-edit-tab')\r\nexport class UmbBlockWorkspaceViewEditTabElement extends UmbLitElement {\r\n\t@property({ attribute: false })\r\n\tpublic get managerName(): UmbBlockWorkspaceElementManagerNames | undefined {\r\n\t\treturn this.#managerName;\r\n\t}\r\n\tpublic set managerName(value: UmbBlockWorkspaceElementManagerNames | undefined) {\r\n\t\tthis.#managerName = value;\r\n\t\tthis.#setStructureManager();\r\n\t}\r\n\t#managerName?: UmbBlockWorkspaceElementManagerNames;\r\n\t#blockWorkspace?: typeof UMB_BLOCK_WORKSPACE_CONTEXT.TYPE;\r\n\t#groupStructureHelper = new UmbContentTypeContainerStructureHelper<UmbContentTypeModel>(this);\r\n\r\n\t@property({ type: String })\r\n\tpublic get containerId(): string | null | undefined {\r\n\t\treturn this._containerId;\r\n\t}\r\n\tpublic set containerId(value: string | null | undefined) {\r\n\t\tthis._containerId = value;\r\n\t\tthis.#groupStructureHelper.setContainerId(value);\r\n\t}\r\n\t@state()\r\n\tprivate _containerId?: string | null;\r\n\r\n\t/**\r\n\t * If true, the group box will be hidden, if we are to only represents one group.\r\n\t * This is used by Inline Editing Mode of Block List Editor.\r\n\t */\r\n\t@property({ type: Boolean, reflect: false })\r\n\thideSingleGroup = false;\r\n\r\n\t@state()\r\n\tprivate _groups: Array<UmbPropertyTypeContainerMergedModel> = [];\r\n\r\n\t@state()\r\n\tprivate _hasProperties = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_BLOCK_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#blockWorkspace = workspaceContext;\r\n\t\t\tthis.#setStructureManager();\r\n\t\t});\r\n\t}\r\n\r\n\t#setStructureManager() {\r\n\t\tif (!this.#blockWorkspace || !this.#managerName) return;\r\n\t\tthis.#groupStructureHelper.setStructureManager(this.#blockWorkspace[this.#managerName].structure);\r\n\t\tthis.observe(\r\n\t\t\tthis.#groupStructureHelper.childContainers,\r\n\t\t\t(groups) => {\r\n\t\t\t\tthis._groups = groups;\r\n\t\t\t},\r\n\t\t\t'observeGroups',\r\n\t\t);\r\n\t\tthis.observe(\r\n\t\t\tthis.#groupStructureHelper.hasProperties,\r\n\t\t\t(hasProperties) => {\r\n\t\t\t\tthis._hasProperties = hasProperties;\r\n\t\t\t},\r\n\t\t\t'observeHasProperties',\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this._hasProperties\r\n\t\t\t\t? html`<uui-box>\r\n\t\t\t\t\t\t<umb-block-workspace-view-edit-properties\r\n\t\t\t\t\t\t\t.managerName=${this.#managerName}\r\n\t\t\t\t\t\t\tdata-mark=\"property-group:root\"\r\n\t\t\t\t\t\t\t.containerId=${this._containerId}></umb-block-workspace-view-edit-properties>\r\n\t\t\t\t\t</uui-box>`\r\n\t\t\t\t: ''}\r\n\t\t\t${this.hideSingleGroup && this._groups.length === 1\r\n\t\t\t\t? this.renderGroup(this._groups[0])\r\n\t\t\t\t: repeat(\r\n\t\t\t\t\t\tthis._groups,\r\n\t\t\t\t\t\t(group) => group.key,\r\n\t\t\t\t\t\t(group) => html` <uui-box .headline=${group.name}>${this.renderGroup(group)}</uui-box>`,\r\n\t\t\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\trenderGroup(group: UmbPropertyTypeContainerMergedModel) {\r\n\t\treturn html`\r\n\t\t\t<umb-block-workspace-view-edit-properties\r\n\t\t\t\t.managerName=${this.#managerName}\r\n\t\t\t\tdata-mark=\"property-group:${group.name}\"\r\n\t\t\t\t.containerId=${group.ids[0]}></umb-block-workspace-view-edit-properties>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0 var(--uui-size-space-5);\r\n\t\t\t}\r\n\t\t\tuui-box:not(:first-child) {\r\n\t\t\t\tmargin-top: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbBlockWorkspaceViewEditTabElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-workspace-view-edit-tab': UmbBlockWorkspaceViewEditTabElement;\r\n\t}\r\n}\r\n"],"names":["UmbBlockWorkspaceViewEditPropertyElement","UmbLitElement","changedProperties","propertyVariantId","UmbVariantId","UmbDataPathPropertyValueQuery","write","nothing","html","__decorateClass","property","state","customElement","_managerName","_workspaceContext","_propertyStructureHelper","_properties","_visiblePropertiesUniques","_UmbBlockWorkspaceViewEditPropertiesElement_instances","setStructureManager_fn","processPropertyStructure_fn","calculateVisibleProperties_fn","UmbBlockWorkspaceViewEditPropertiesElement","__privateAdd","UmbContentTypePropertyStructureHelper","UMB_BLOCK_WORKSPACE_CONTEXT","workspaceContext","__privateSet","__privateGet","variantId","__privateMethod","value","repeat","structureManager","properties","propertyViewGuard","permitted","index","UmbTextStyles","css","_blockWorkspace","_groupStructureHelper","_UmbBlockWorkspaceViewEditTabElement_instances","UmbBlockWorkspaceViewEditTabElement","UmbContentTypeContainerStructureHelper","group","groups","hasProperties","UmbBlockWorkspaceViewEditTabElement$1"],"mappings":"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"}