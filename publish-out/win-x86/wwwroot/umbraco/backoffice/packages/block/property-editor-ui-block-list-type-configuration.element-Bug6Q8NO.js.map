{"version":3,"file":"property-editor-ui-block-list-type-configuration.element-Bug6Q8NO.js","sources":["../../../src/packages/block/block-list/property-editors/block-list-type-configuration/property-editor-ui-block-list-type-configuration.element.ts"],"sourcesContent":["import { UMB_BLOCK_LIST_TYPE } from '../../constants.js';\r\nimport type { UmbBlockTypeBaseModel, UmbInputBlockTypeElement } from '@umbraco-cms/backoffice/block-type';\r\nimport type {\r\n\tUmbPropertyEditorUiElement,\r\n\tUmbPropertyEditorConfigCollection,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { html, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n// TODO: This is across packages, how should we go about getting just a single element from another package? like here we just need the `umb-input-block-type` element.\r\nimport '@umbraco-cms/backoffice/block-type';\r\n\r\n/**\r\n * @element umb-property-editor-ui-block-list-type-configuration\r\n */\r\n@customElement('umb-property-editor-ui-block-list-type-configuration')\r\nexport class UmbPropertyEditorUIBlockListBlockConfigurationElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t#blockTypeWorkspaceModalRegistration?: UmbModalRouteRegistrationController<\r\n\t\ttypeof UMB_WORKSPACE_MODAL.DATA,\r\n\t\ttypeof UMB_WORKSPACE_MODAL.VALUE\r\n\t>;\r\n\r\n\t@property({ attribute: false })\r\n\tvalue: UmbBlockTypeBaseModel[] = [];\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic config?: UmbPropertyEditorConfigCollection;\r\n\r\n\t@state()\r\n\tprivate _workspacePath?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.#blockTypeWorkspaceModalRegistration?.destroy();\r\n\r\n\t\tthis.#blockTypeWorkspaceModalRegistration = new UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addAdditionalPath(UMB_BLOCK_LIST_TYPE)\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_BLOCK_LIST_TYPE, preset: {} }, modal: { size: 'large' } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tconst newpath = routeBuilder({});\r\n\t\t\t\tthis._workspacePath = newpath;\r\n\t\t\t});\r\n\t}\r\n\r\n\t#onCreate(e: CustomEvent) {\r\n\t\tconst selectedElementType = e.detail.contentElementTypeKey;\r\n\t\tif (selectedElementType) {\r\n\t\t\tthis.#blockTypeWorkspaceModalRegistration?.open({}, 'create/' + selectedElementType + '/null');\r\n\t\t}\r\n\t}\r\n\r\n\t#onChange(e: CustomEvent) {\r\n\t\te.stopPropagation();\r\n\t\tthis.value = (e.target as UmbInputBlockTypeElement).value;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<umb-input-block-type\r\n\t\t\t.value=${this.value}\r\n\t\t\t.workspacePath=${this._workspacePath}\r\n\t\t\t@create=${this.#onCreate}\r\n\t\t\t@delete=${this.#onChange}\r\n\t\t\t@change=${this.#onChange}></umb-input-block-type>`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIBlockListBlockConfigurationElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-block-list-type-configuration': UmbPropertyEditorUIBlockListBlockConfigurationElement;\r\n\t}\r\n}\r\n"],"names":["_blockTypeWorkspaceModalRegistration","_UmbPropertyEditorUIBlockListBlockConfigurationElement_instances","onCreate_fn","onChange_fn","UmbPropertyEditorUIBlockListBlockConfigurationElement","UmbLitElement","__privateAdd","__privateGet","__privateSet","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_BLOCK_LIST_TYPE","routeBuilder","newpath","html","__privateMethod","e","selectedElementType","UmbChangeEvent","__decorateClass","property","state","customElement","UmbPropertyEditorUIBlockListBlockConfigurationElement$1"],"mappings":";;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AAmBO,IAAMC,IAAN,cACEC,EAET;AAAA,EAeC,cAAc;AACb,UAAA,GAnBKC,EAAA,MAAAL,CAAA,GAINK,EAAA,MAAAN,CAAA,GAMA,KAAA,QAAiC,CAAA,GAUhCO,EAAA,MAAKP,IAAsC,QAAA,GAE3CQ,EAAA,MAAKR,GAAuC,IAAIS,EAAoC,MAAMC,CAAmB,EAC3G,kBAAkBC,CAAmB,EACrC,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYA,GAAqB,QAAQ,CAAA,EAAC,GAAK,OAAO,EAAE,MAAM,UAAQ,EACvF,EACA,oBAAoB,CAACC,MAAiB;AACtC,YAAMC,IAAUD,EAAa,EAAE;AAC/B,WAAK,iBAAiBC;AAAA,IACvB,CAAC,CAAA;AAAA,EACH;AAAA,EAeS,SAAS;AACjB,WAAOC;AAAA,YACG,KAAK,KAAK;AAAA,oBACF,KAAK,cAAc;AAAA,aAC1BC,QAAKd,GAAAC,CAAA,CAAS;AAAA,aACda,QAAKd,GAAAE,CAAA,CAAS;AAAA,aACdY,QAAKd,GAAAE,CAAA,CAAS;AAAA,EAC1B;AACD;AAlDCH,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAiCNC,IAAS,SAACc,GAAgB;AACzB,QAAMC,IAAsBD,EAAE,OAAO;AACrC,EAAIC,KACHV,EAAA,MAAKP,IAAsC,KAAK,CAAA,GAAI,YAAYiB,IAAsB,OAAO;AAE/F;AAEAd,IAAS,SAACa,GAAgB;AACzB,EAAAA,EAAE,gBAAA,GACF,KAAK,QAASA,EAAE,OAAoC,OACpD,KAAK,cAAc,IAAIE,GAAgB;AACxC;AAlCAC,EAAA;AAAA,EADCC,EAAS,EAAE,WAAW,GAAA,CAAO;AAAA,GATlBhB,EAUZ,WAAA,SAAA,CAAA;AAGOe,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,QAAQ,WAAW,IAAO;AAAA,GAZhChB,EAaL,WAAA,UAAA,CAAA;AAGCe,EAAA;AAAA,EADPE,EAAA;AAAM,GAfKjB,EAgBJ,WAAA,kBAAA,CAAA;AAhBIA,IAANe,EAAA;AAAA,EADNG,EAAc,sDAAsD;AAAA,GACxDlB,CAAA;AAwDb,MAAAmB,IAAenB;"}