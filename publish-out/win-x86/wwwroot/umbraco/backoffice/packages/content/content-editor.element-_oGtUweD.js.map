{"version":3,"file":"content-editor.element-_oGtUweD.js","sources":["../../../src/packages/content/content/workspace/views/edit/content-editor-properties.element.ts","../../../src/packages/content/content/workspace/views/edit/content-editor-tab.element.ts","../../../src/packages/content/content/workspace/views/edit/content-editor.element.ts"],"sourcesContent":["import { UMB_CONTENT_WORKSPACE_CONTEXT } from '../../content-workspace.context-token.js';\r\nimport { css, html, customElement, property, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type {\r\n\tUmbContentTypeModel,\r\n\tUmbContentTypeStructureManager,\r\n\tUmbPropertyTypeModel,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbContentTypePropertyStructureHelper } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-content-workspace-view-edit-properties')\r\nexport class UmbContentWorkspaceViewEditPropertiesElement extends UmbLitElement {\r\n\t#propertyStructureHelper = new UmbContentTypePropertyStructureHelper<UmbContentTypeModel>(this);\r\n\r\n\t@property({ type: String, attribute: 'container-id', reflect: false })\r\n\tpublic get containerId(): string | null | undefined {\r\n\t\treturn this.#propertyStructureHelper.getContainerId();\r\n\t}\r\n\tpublic set containerId(value: string | null | undefined) {\r\n\t\tthis.#propertyStructureHelper.setContainerId(value);\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _properties: Array<string> = [];\r\n\r\n\t@state()\r\n\tprivate _visibleProperties?: Array<UmbPropertyTypeModel>;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_CONTENT_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#propertyStructureHelper.setStructureManager(\r\n\t\t\t\t// Assuming its the same content model type that we are working with here... [NL]\r\n\t\t\t\tworkspaceContext?.structure as unknown as UmbContentTypeStructureManager<UmbContentTypeModel>,\r\n\t\t\t);\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#propertyStructureHelper.propertyAliases,\r\n\t\t\t\t(properties) => {\r\n\t\t\t\t\tthis._properties = properties;\r\n\t\t\t\t},\r\n\t\t\t\t'observePropertyStructure',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn repeat(\r\n\t\t\tthis._properties,\r\n\t\t\t(property) => property,\r\n\t\t\t(property) =>\r\n\t\t\t\thtml`<umb-content-workspace-property class=\"property\" alias=${property}></umb-content-workspace-property>`,\r\n\t\t);\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t.property {\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-divider);\r\n\t\t\t}\r\n\t\t\t.property:last-child {\r\n\t\t\t\tborder-bottom: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbContentWorkspaceViewEditPropertiesElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-content-workspace-view-edit-properties': UmbContentWorkspaceViewEditPropertiesElement;\r\n\t}\r\n}\r\n","import { css, html, customElement, property, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type {\r\n\tUmbContentTypeModel,\r\n\tUmbContentTypeStructureManager,\r\n\tUmbPropertyTypeContainerMergedModel,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport {\r\n\tUmbContentTypeContainerStructureHelper,\r\n\tUMB_PROPERTY_STRUCTURE_WORKSPACE_CONTEXT,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport './content-editor-properties.element.js';\r\n\r\n@customElement('umb-content-workspace-view-edit-tab')\r\nexport class UmbContentWorkspaceViewEditTabElement extends UmbLitElement {\r\n\t@property({ type: String })\r\n\tpublic get containerId(): string | null | undefined {\r\n\t\treturn this._containerId;\r\n\t}\r\n\tpublic set containerId(value: string | null | undefined) {\r\n\t\tthis._containerId = value;\r\n\t\tthis.#groupStructureHelper.setContainerId(value);\r\n\t}\r\n\t@state()\r\n\tprivate _containerId?: string | null;\r\n\r\n\t#groupStructureHelper = new UmbContentTypeContainerStructureHelper<UmbContentTypeModel>(this);\r\n\r\n\t@state()\r\n\tprivate _groups: Array<UmbPropertyTypeContainerMergedModel> = [];\r\n\r\n\t@state()\r\n\tprivate _hasProperties = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_STRUCTURE_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#groupStructureHelper.setStructureManager(\r\n\t\t\t\t// Assuming its the same content model type that we are working with here... [NL]\r\n\t\t\t\tworkspaceContext?.structure as unknown as UmbContentTypeStructureManager<UmbContentTypeModel>,\r\n\t\t\t);\r\n\t\t});\r\n\t\tthis.observe(this.#groupStructureHelper.childContainers, (groups) => {\r\n\t\t\tthis._groups = groups;\r\n\t\t});\r\n\t\tthis.observe(this.#groupStructureHelper.hasProperties, (hasProperties) => {\r\n\t\t\tthis._hasProperties = hasProperties;\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this._hasProperties\r\n\t\t\t\t? html`\r\n\t\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t\t<umb-content-workspace-view-edit-properties\r\n\t\t\t\t\t\t\t\tdata-mark=\"property-group:root\"\r\n\t\t\t\t\t\t\t\t.containerId=${this._containerId}></umb-content-workspace-view-edit-properties>\r\n\t\t\t\t\t\t</uui-box>\r\n\t\t\t\t\t`\r\n\t\t\t\t: ''}\r\n\t\t\t${repeat(\r\n\t\t\t\tthis._groups,\r\n\t\t\t\t(group) => group.key,\r\n\t\t\t\t(group) =>\r\n\t\t\t\t\thtml`<uui-box .headline=${this.localize.string(group.name) ?? ''}>\r\n\t\t\t\t\t\t<umb-content-workspace-view-edit-properties\r\n\t\t\t\t\t\t\tdata-mark=\"property-group:${group.name}\"\r\n\t\t\t\t\t\t\t.containerId=${group.ids[0]}></umb-content-workspace-view-edit-properties>\r\n\t\t\t\t\t</uui-box>`,\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0 var(--uui-size-space-5);\r\n\t\t\t}\r\n\t\t\tuui-box:not(:first-child) {\r\n\t\t\t\tmargin-top: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbContentWorkspaceViewEditTabElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-content-workspace-view-edit-tab': UmbContentWorkspaceViewEditTabElement;\r\n\t}\r\n}\r\n","import type { UmbContentWorkspaceViewEditTabElement } from './content-editor-tab.element.js';\r\nimport { css, html, customElement, state, repeat, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { encodeFolderName } from '@umbraco-cms/backoffice/router';\r\nimport {\r\n\tUmbContentTypeContainerStructureHelper,\r\n\tUMB_PROPERTY_STRUCTURE_WORKSPACE_CONTEXT,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UMB_VIEW_CONTEXT, UmbViewController } from '@umbraco-cms/backoffice/view';\r\nimport type {\r\n\tPageComponent,\r\n\tUmbRoute,\r\n\tUmbRouterSlotChangeEvent,\r\n\tUmbRouterSlotInitEvent,\r\n} from '@umbraco-cms/backoffice/router';\r\nimport type {\r\n\tUmbContentTypeModel,\r\n\tUmbContentTypeStructureManager,\r\n\tUmbPropertyTypeContainerMergedModel,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport type { UmbVariantHint } from '@umbraco-cms/backoffice/hint';\r\nimport type { UmbWorkspaceViewElement } from '@umbraco-cms/backoffice/workspace';\r\n\r\nimport './content-editor-tab.element.js';\r\n\r\n@customElement('umb-content-workspace-view-edit')\r\nexport class UmbContentWorkspaceViewEditElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t/*\r\n\t// root properties is a possible feature with Bellissima, but as it is new its not fully implemented yet [NL]\r\n\t@state()\r\n\tprivate _hasRootProperties = false;\r\n  */\r\n\t#viewContext?: typeof UMB_VIEW_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _loaded = false;\r\n\r\n\t@state()\r\n\tprivate _hasRootGroups = false;\r\n\r\n\t@state()\r\n\tprivate _routes: UmbRoute[] = [];\r\n\r\n\t@state()\r\n\tprivate _tabs?: Array<UmbPropertyTypeContainerMergedModel>;\r\n\r\n\t@state()\r\n\tprivate _routerPath?: string;\r\n\r\n\t@state()\r\n\tprivate _activePath = '';\r\n\r\n\t@state()\r\n\tprivate _hintMap: Map<string | null, UmbVariantHint> = new Map();\r\n\r\n\t#tabViewContexts: Array<UmbViewController> = [];\r\n\r\n\t#structureManager?: UmbContentTypeStructureManager<UmbContentTypeModel>;\r\n\r\n\tprivate _tabsStructureHelper = new UmbContentTypeContainerStructureHelper<UmbContentTypeModel>(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_VIEW_CONTEXT, (context) => {\r\n\t\t\tthis.#viewContext = context;\r\n\t\t\tthis.#tabViewContexts.forEach((view) => {\r\n\t\t\t\tview.inheritFrom(this.#viewContext);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis._tabsStructureHelper.setIsRoot(true);\r\n\t\tthis._tabsStructureHelper.setContainerChildType('Tab');\r\n\t\tthis.observe(\r\n\t\t\tthis._tabsStructureHelper.childContainers,\r\n\t\t\t(tabs) => {\r\n\t\t\t\tthis._tabs = tabs;\r\n\t\t\t\tthis.#createRoutes();\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\t// _hasRootProperties can be gotten via _tabsStructureHelper.hasProperties. But we do not support root properties currently.\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_STRUCTURE_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#structureManager = workspaceContext?.structure;\r\n\t\t\tthis._tabsStructureHelper.setStructureManager(workspaceContext?.structure);\r\n\t\t\tthis.#observeRootGroups();\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#structureManager?.contentTypeLoaded,\r\n\t\t\t\t(loaded) => {\r\n\t\t\t\t\tthis._loaded = loaded ?? false;\r\n\t\t\t\t},\r\n\t\t\t\t'observeContentTypeLoaded',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tasync #observeRootGroups() {\r\n\t\tif (!this.#structureManager) return;\r\n\r\n\t\tthis.observe(\r\n\t\t\tawait this.#structureManager.hasRootContainers('Group'),\r\n\t\t\t(hasRootGroups) => {\r\n\t\t\t\tthis._hasRootGroups = hasRootGroups;\r\n\t\t\t\tthis.#createRoutes();\r\n\t\t\t},\r\n\t\t\t'_observeGroups',\r\n\t\t);\r\n\t}\r\n\r\n\t#createRoutes() {\r\n\t\tif (!this._tabs || !this.#structureManager) return;\r\n\t\tconst routes: UmbRoute[] = [];\r\n\r\n\t\tif (this._hasRootGroups) {\r\n\t\t\troutes.push({\r\n\t\t\t\tpath: 'root',\r\n\t\t\t\tcomponent: () => import('./content-editor-tab.element.js'),\r\n\t\t\t\tsetup: (component) => {\r\n\t\t\t\t\t(component as UmbContentWorkspaceViewEditTabElement).containerId = null;\r\n\t\t\t\t\tthis.#provideViewContext(null, component);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tthis.#createViewContext(null, '#general_generic');\r\n\t\t}\r\n\r\n\t\tif (this._tabs.length > 0) {\r\n\t\t\tthis._tabs?.forEach((tab) => {\r\n\t\t\t\tconst tabName = tab.name ?? '';\r\n\t\t\t\tconst path = `tab/${encodeFolderName(tabName)}`;\r\n\t\t\t\troutes.push({\r\n\t\t\t\t\tpath,\r\n\t\t\t\t\tcomponent: () => import('./content-editor-tab.element.js'),\r\n\t\t\t\t\tsetup: (component) => {\r\n\t\t\t\t\t\t(component as UmbContentWorkspaceViewEditTabElement).containerId = tab.ownerId ?? tab.ids[0];\r\n\t\t\t\t\t\tthis.#provideViewContext(path, component);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tthis.#createViewContext(path, tabName);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (routes.length !== 0) {\r\n\t\t\troutes.push({\r\n\t\t\t\t...routes[0],\r\n\t\t\t\tunique: routes[0].path,\r\n\t\t\t\tpath: '',\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\troutes.push({\r\n\t\t\tpath: `**`,\r\n\t\t\tcomponent: async () => (await import('@umbraco-cms/backoffice/router')).UmbRouteNotFoundElement,\r\n\t\t});\r\n\r\n\t\tthis._routes = routes;\r\n\t}\r\n\r\n\t#createViewContext(viewAlias: string | null, tabName: string) {\r\n\t\tif (!this.#tabViewContexts.find((context) => context.viewAlias === viewAlias)) {\r\n\t\t\tconst view = new UmbViewController(this, viewAlias);\r\n\t\t\tthis.#tabViewContexts.push(view);\r\n\r\n\t\t\tif (viewAlias === null) {\r\n\t\t\t\t// for the root tab, we need to filter hints, so in this case we do accept everything that is not in a tab: [NL]\r\n\t\t\t\tview.hints.setPathFilter((paths) => paths[0].includes('tab/') === false);\r\n\t\t\t}\r\n\r\n\t\t\tview.setTitle(tabName);\r\n\t\t\tview.inheritFrom(this.#viewContext);\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tview.firstHintOfVariant,\r\n\t\t\t\t(hint) => {\r\n\t\t\t\t\tif (hint) {\r\n\t\t\t\t\t\tthis._hintMap.set(viewAlias, hint);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._hintMap.delete(viewAlias);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.requestUpdate('_hintMap');\r\n\t\t\t\t},\r\n\t\t\t\t'umbObserveState_' + viewAlias,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t#currentProvidedView?: UmbViewController;\r\n\r\n\t#provideViewContext(viewAlias: string | null, component: PageComponent) {\r\n\t\tconst view = this.#tabViewContexts.find((context) => context.viewAlias === viewAlias);\r\n\t\tif (this.#currentProvidedView === view) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#currentProvidedView?.unprovide();\r\n\t\tif (!view) {\r\n\t\t\tthrow new Error(`View context with alias ${viewAlias} not found`);\r\n\t\t}\r\n\t\tthis.#currentProvidedView = view;\r\n\t\t// ViewAlias null is only for the root tab, therefor we can implement this hack.\r\n\t\tif (viewAlias === null) {\r\n\t\t\t// Specific hack for the Generic tab to only show its name if there are other tabs.\r\n\t\t\tview.setTitle(this._tabs && this._tabs?.length > 0 ? '#general_generic' : undefined);\r\n\t\t}\r\n\t\tview.provideAt(component as any);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._loaded || !this._routes || this._routes.length === 0 || !this._tabs) {\r\n\t\t\treturn html`<umb-view-loader></umb-view-loader>`;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout header-fit-height>\r\n\t\t\t\t${this._routerPath && (this._tabs.length > 1 || (this._tabs.length === 1 && this._hasRootGroups))\r\n\t\t\t\t\t? html` <uui-tab-group slot=\"header\">\r\n\t\t\t\t\t\t\t${this._hasRootGroups && this._tabs.length > 0 ? this.#renderTab(null, '#general_generic') : nothing}\r\n\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\tthis._tabs,\r\n\t\t\t\t\t\t\t\t(tab) => tab.name,\r\n\t\t\t\t\t\t\t\t(tab, index) => {\r\n\t\t\t\t\t\t\t\t\tconst path = 'tab/' + encodeFolderName(tab.name || '');\r\n\t\t\t\t\t\t\t\t\treturn this.#renderTab(path, tab.name, index);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</uui-tab-group>`\r\n\t\t\t\t\t: nothing}\r\n\r\n\t\t\t\t<umb-router-slot\r\n\t\t\t\t\tinherit-addendum\r\n\t\t\t\t\t.routes=${this._routes}\r\n\t\t\t\t\t@init=${(event: UmbRouterSlotInitEvent) => {\r\n\t\t\t\t\t\tthis._routerPath = event.target.absoluteRouterPath;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t@change=${(event: UmbRouterSlotChangeEvent) => {\r\n\t\t\t\t\t\tthis._activePath = event.target.absoluteActiveViewPath || '';\r\n\t\t\t\t\t}}>\r\n\t\t\t\t</umb-router-slot>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderTab(path: string | null, name: string, index = 0) {\r\n\t\tconst hint = this._hintMap.get(path);\r\n\t\tconst fullPath = this._routerPath + '/' + (path ? path : 'root');\r\n\t\tconst active =\r\n\t\t\tfullPath === this._activePath ||\r\n\t\t\t(!this._hasRootGroups && index === 0 && this._routerPath + '/' === this._activePath) ||\r\n\t\t\t(this._hasRootGroups && index === 0 && path === null && this._routerPath + '/' === this._activePath);\r\n\t\treturn html`<uui-tab\r\n\t\t\tlabel=${this.localize.string(name ?? '#general_unnamed')}\r\n\t\t\t.active=${active}\r\n\t\t\thref=${fullPath}\r\n\t\t\tdata-mark=\"content-tab:${path ?? 'root'}\"\r\n\t\t\t>${hint && !active\r\n\t\t\t\t? html`<umb-badge slot=\"extra\" .color=${hint.color ?? 'default'} ?attention=${hint.color === 'invalid'}\r\n\t\t\t\t\t\t>${hint.text}</umb-badge\r\n\t\t\t\t\t>`\r\n\t\t\t\t: nothing}</uui-tab\r\n\t\t>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\t--uui-tab-background: var(--uui-color-surface);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbContentWorkspaceViewEditElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-content-workspace-view-edit': UmbContentWorkspaceViewEditElement;\r\n\t}\r\n}\r\n"],"names":["_propertyStructureHelper","UmbContentWorkspaceViewEditPropertiesElement","UmbLitElement","__privateAdd","UmbContentTypePropertyStructureHelper","UMB_CONTENT_WORKSPACE_CONTEXT","workspaceContext","__privateGet","properties","value","repeat","property","html","UmbTextStyles","css","__decorateClass","state","customElement","_groupStructureHelper","UmbContentWorkspaceViewEditTabElement","UmbContentTypeContainerStructureHelper","UMB_PROPERTY_STRUCTURE_WORKSPACE_CONTEXT","groups","hasProperties","group","UmbContentWorkspaceViewEditTabElement$1","_viewContext","_tabViewContexts","_structureManager","_UmbContentWorkspaceViewEditElement_instances","observeRootGroups_fn","createRoutes_fn","createViewContext_fn","_currentProvidedView","provideViewContext_fn","renderTab_fn","UmbContentWorkspaceViewEditElement","UMB_VIEW_CONTEXT","context","__privateSet","view","tabs","__privateMethod","loaded","nothing","tab","index","path","encodeFolderName","event","hasRootGroups","routes","contentEditorTab_element","component","tabName","viewAlias","UmbViewController","paths","hint","name","fullPath","active","UmbContentWorkspaceViewEditElement$1"],"mappings":"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"}