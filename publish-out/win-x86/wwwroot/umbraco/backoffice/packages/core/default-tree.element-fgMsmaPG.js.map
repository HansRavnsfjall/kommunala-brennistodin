{"version":3,"file":"default-tree.element-fgMsmaPG.js","sources":["../../../src/packages/core/tree/default/default-tree.element.ts"],"sourcesContent":["import type {\r\n\tUmbTreeItemModel,\r\n\tUmbTreeItemModelBase,\r\n\tUmbTreeRootModel,\r\n\tUmbTreeSelectionConfiguration,\r\n\tUmbTreeStartNode,\r\n} from '../types.js';\r\nimport type { UmbTreeExpansionModel } from '../expansion-manager/types.js';\r\nimport type { UmbDefaultTreeContext } from './default-tree.context.js';\r\nimport { css, customElement, html, nothing, property, repeat, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { PropertyValueMap } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n@customElement('umb-default-tree')\r\nexport class UmbDefaultTreeElement extends UmbLitElement {\r\n\tprivate _selectionConfiguration: UmbTreeSelectionConfiguration = {\r\n\t\tmultiple: false,\r\n\t\tselectable: true,\r\n\t\tselection: [],\r\n\t};\r\n\r\n\tprivate _api: UmbDefaultTreeContext<UmbTreeItemModel, UmbTreeRootModel> | undefined;\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic get api(): UmbDefaultTreeContext<UmbTreeItemModel, UmbTreeRootModel> | undefined {\r\n\t\treturn this._api;\r\n\t}\r\n\tpublic set api(value: UmbDefaultTreeContext<UmbTreeItemModel, UmbTreeRootModel> | undefined) {\r\n\t\tthis._api = value;\r\n\t\tthis.#observeData();\r\n\t}\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tselectionConfiguration: UmbTreeSelectionConfiguration = this._selectionConfiguration;\r\n\r\n\t@property({ type: Boolean, attribute: false })\r\n\thideTreeItemActions: boolean = false;\r\n\r\n\t@property({ type: Boolean, attribute: false })\r\n\thideTreeRoot: boolean = false;\r\n\r\n\t@property({ type: Boolean, attribute: false })\r\n\texpandTreeRoot: boolean = false;\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tstartNode?: UmbTreeStartNode;\r\n\r\n\t@property({ type: Boolean, attribute: false })\r\n\tfoldersOnly?: boolean = false;\r\n\r\n\t@property({ attribute: false })\r\n\tselectableFilter: (item: UmbTreeItemModelBase) => boolean = () => true;\r\n\r\n\t@property({ attribute: false })\r\n\tfilter: (item: UmbTreeItemModelBase) => boolean = () => true;\r\n\r\n\t@property({ attribute: false })\r\n\texpansion: UmbTreeExpansionModel = [];\r\n\r\n\t@state()\r\n\tprivate _rootItems: UmbTreeItemModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _treeRoot?: UmbTreeRootModel;\r\n\r\n\t@state()\r\n\tprivate _currentPage = 1;\r\n\r\n\t@state()\r\n\tprivate _totalPages = 1;\r\n\r\n\t#observeData() {\r\n\t\tthis.observe(this._api?.treeRoot, (treeRoot) => (this._treeRoot = treeRoot));\r\n\t\tthis.observe(this._api?.rootItems, (rootItems) => (this._rootItems = rootItems ?? []));\r\n\t\tthis.observe(this._api?.pagination.currentPage, (value) => (this._currentPage = value ?? 1));\r\n\t\tthis.observe(this._api?.pagination.totalPages, (value) => (this._totalPages = value ?? 1));\r\n\t}\r\n\r\n\tprotected override async updated(\r\n\t\t_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>,\r\n\t): Promise<void> {\r\n\t\tsuper.updated(_changedProperties);\r\n\t\tif (this._api === undefined) return;\r\n\r\n\t\tif (_changedProperties.has('selectionConfiguration')) {\r\n\t\t\tthis._selectionConfiguration = this.selectionConfiguration;\r\n\r\n\t\t\tthis._api!.selection.setMultiple(this._selectionConfiguration.multiple ?? false);\r\n\t\t\tthis._api!.selection.setSelectable(this._selectionConfiguration.selectable ?? true);\r\n\t\t\tthis._api!.selection.setSelection(this._selectionConfiguration.selection ?? []);\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('startNode')) {\r\n\t\t\tthis._api!.setStartNode(this.startNode);\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('hideTreeRoot')) {\r\n\t\t\tthis._api!.setHideTreeRoot(this.hideTreeRoot);\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('expandTreeRoot')) {\r\n\t\t\tthis._api!.setExpandTreeRoot(this.expandTreeRoot);\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('foldersOnly')) {\r\n\t\t\tthis._api!.setFoldersOnly(this.foldersOnly ?? false);\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('selectableFilter')) {\r\n\t\t\tthis._api!.selectableFilter = this.selectableFilter;\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('filter')) {\r\n\t\t\tthis._api!.filter = this.filter;\r\n\t\t}\r\n\r\n\t\tif (_changedProperties.has('expansion')) {\r\n\t\t\tthis._api!.setExpansion(this.expansion);\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelection() {\r\n\t\treturn this._api?.selection.getSelection();\r\n\t}\r\n\r\n\tgetExpansion() {\r\n\t\treturn this._api?.expansion.getExpansion();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html` ${this.#renderTreeRoot()} ${this.#renderRootItems()}`;\r\n\t}\r\n\r\n\t#renderTreeRoot() {\r\n\t\tif (this.hideTreeRoot || this._treeRoot === undefined) return nothing;\r\n\t\treturn html`\r\n\t\t\t<umb-tree-item\r\n\t\t\t\t.entityType=${this._treeRoot.entityType}\r\n\t\t\t\t.props=${{ hideActions: this.hideTreeItemActions, item: this._treeRoot }}></umb-tree-item>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderRootItems() {\r\n\t\t// only show the root items directly if the tree root is hidden\r\n\t\tif (this.hideTreeRoot === true) {\r\n\t\t\treturn html`\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis._rootItems,\r\n\t\t\t\t\t(item, index) => item.name + '___' + index,\r\n\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t<umb-tree-item\r\n\t\t\t\t\t\t\t.entityType=${item.entityType}\r\n\t\t\t\t\t\t\t.props=${{ hideActions: this.hideTreeItemActions, item }}></umb-tree-item>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t\t${this.#renderPaging()}\r\n\t\t\t`;\r\n\t\t} else {\r\n\t\t\treturn nothing;\r\n\t\t}\r\n\t}\r\n\r\n\t#onLoadMoreClick = (event: any) => {\r\n\t\tevent.stopPropagation();\r\n\t\tconst next = (this._currentPage = this._currentPage + 1);\r\n\t\tthis._api?.pagination.setCurrentPageNumber(next);\r\n\t};\r\n\r\n\t#renderPaging() {\r\n\t\tif (this._totalPages <= 1 || this._currentPage === this._totalPages) {\r\n\t\t\treturn nothing;\r\n\t\t}\r\n\r\n\t\treturn html` <umb-tree-load-more-button @click=${this.#onLoadMoreClick}></umb-tree-load-more-button> `;\r\n\t}\r\n\r\n\tstatic override styles = css`\r\n\t\t#load-more {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t`;\r\n}\r\n\r\nexport default UmbDefaultTreeElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-default-tree': UmbDefaultTreeElement;\r\n\t}\r\n}\r\n"],"names":["_UmbDefaultTreeElement_instances","observeData_fn","renderTreeRoot_fn","renderRootItems_fn","_onLoadMoreClick","renderPaging_fn","UmbDefaultTreeElement","UmbLitElement","__privateAdd","event","next","value","__privateMethod","_changedProperties","html","treeRoot","rootItems","nothing","repeat","item","index","__privateGet","css","__decorateClass","property","state","customElement","UmbDefaultTreeElement$1"],"mappings":"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"}