{"version":3,"file":"icon-picker-modal.element-HOn83zQK.js","sources":["../../../src/packages/core/icon-registry/icon-picker-modal/icon-picker-modal.element.ts"],"sourcesContent":["import type { UmbIconDefinition } from '../types.js';\r\nimport { UMB_ICON_REGISTRY_CONTEXT } from '../icon-registry.context-token.js';\r\nimport type { UmbIconPickerModalData, UmbIconPickerModalValue } from './icon-picker-modal.token.js';\r\nimport {\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tifDefined,\r\n\tnothing,\r\n\tquery,\r\n\trepeat,\r\n\tstate,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { extractUmbColorVariable, umbracoColors } from '@umbraco-cms/backoffice/resources';\r\nimport { umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UUIColorSwatchesEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('umb-icon-picker-modal')\r\nexport class UmbIconPickerModalElement extends UmbModalBaseElement<UmbIconPickerModalData, UmbIconPickerModalValue> {\r\n\t#icons?: Array<UmbIconDefinition>;\r\n\r\n\t@query('#search')\r\n\tprivate _searchInput?: HTMLInputElement;\r\n\r\n\t@state()\r\n\tprivate _iconsFiltered?: Array<UmbIconDefinition>;\r\n\r\n\t@state()\r\n\tprivate _colorList = umbracoColors.filter((color) => !color.legacy);\r\n\r\n\t@state()\r\n\tprivate _isSearching = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_ICON_REGISTRY_CONTEXT, (context) => {\r\n\t\t\tthis.observe(context?.approvedIcons, (icons) => {\r\n\t\t\t\tthis.#icons = icons;\r\n\t\t\t\tthis.#filterIcons();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t#filterIcons() {\r\n\t\tif (!this.#icons) return;\r\n\t\tconst value = this._searchInput?.value;\r\n\t\tif (value) {\r\n\t\t\tthis._isSearching = value.length > 0;\r\n\t\t\tthis._iconsFiltered = this.#icons.filter((icon) => icon.name.toLowerCase().includes(value.toLowerCase()));\r\n\t\t} else {\r\n\t\t\tthis._isSearching = false;\r\n\t\t\tthis._iconsFiltered = this.#icons;\r\n\t\t}\r\n\t}\r\n\r\n\t#changeIcon(e: InputEvent | KeyboardEvent, iconName: string) {\r\n\t\tconst isActivate = e.type === 'click' || (e.type === 'keyup' && (e as KeyboardEvent).key === 'Enter');\r\n\t\tif (!isActivate) return;\r\n\r\n\t\tif (this.data?.showEmptyOption) {\r\n\t\t\tconst nextIcon = this.value.icon === iconName ? '' : iconName;\r\n\t\t\tthis.modalContext?.updateValue({ icon: nextIcon });\r\n\t\t} else {\r\n\t\t\tthis.modalContext?.updateValue({ icon: iconName });\r\n\t\t}\r\n\t}\r\n\r\n\t#onColorChange(e: UUIColorSwatchesEvent) {\r\n\t\tconst colorAlias = e.target.value;\r\n\t\tthis.modalContext?.updateValue({ color: colorAlias });\r\n\t}\r\n\r\n\t#clearIcon = () => {\r\n\t\tthis.modalContext?.updateValue({ icon: '' });\r\n\t};\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('defaultdialogs_selectIcon')}>\r\n\t\t\t\t<div id=\"container\">\r\n\t\t\t\t\t${this.renderSearch()}\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<uui-color-swatches\r\n\t\t\t\t\t\tvalue=${ifDefined(this.value.color)}\r\n\t\t\t\t\t\tlabel=${this.localize.term('defaultdialogs_colorSwitcher')}\r\n\t\t\t\t\t\t@change=${this.#onColorChange}>\r\n\t\t\t\t\t\t${\r\n\t\t\t\t\t\t\t// TODO: Missing localization for the color aliases. [NL]\r\n\t\t\t\t\t\t\tthis._colorList.map(\r\n\t\t\t\t\t\t\t\t(color) => html`\r\n\t\t\t\t\t\t\t\t\t<uui-color-swatch\r\n\t\t\t\t\t\t\t\t\t\tlabel=${color.alias}\r\n\t\t\t\t\t\t\t\t\t\ttitle=${color.alias}\r\n\t\t\t\t\t\t\t\t\t\tvalue=${color.alias}\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"--uui-swatch-color: var(${color.varName})\">\r\n\t\t\t\t\t\t\t\t\t</uui-color-swatch>\r\n\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</uui-color-swatches>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<uui-scroll-container id=\"icons\">\r\n\t\t\t\t\t\t${this.data?.showEmptyOption && !this._isSearching\r\n\t\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tclass=${!this.value.icon ? 'selected' : ''}\r\n\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('defaultdialogs_noIcon')}\r\n\t\t\t\t\t\t\t\t\t\ttitle=${this.localize.term('defaultdialogs_noIcon')}\r\n\t\t\t\t\t\t\t\t\t\t@click=${this.#clearIcon}\r\n\t\t\t\t\t\t\t\t\t\t@keyup=${(e: KeyboardEvent) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter' || e.key === ' ') this.#clearIcon();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<uui-icon style=\"opacity:.35\" name=${ifDefined(this.data?.placeholder)}></uui-icon>\r\n\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t: nothing}\r\n\t\t\t\t\t\t${this.renderIcons()}</uui-scroll-container\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}\r\n\t\t\t\t\t@click=${this._rejectModal}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\t@click=${this._submitModal}\r\n\t\t\t\t\tlabel=${this.localize.term('general_submit')}></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\trenderSearch() {\r\n\t\treturn html`\r\n\t\t\t<uui-input\r\n\t\t\t\ttype=\"search\"\r\n\t\t\t\tplaceholder=${this.localize.term('placeholders_filter')}\r\n\t\t\t\tlabel=${this.localize.term('placeholders_filter')}\r\n\t\t\t\tid=\"search\"\r\n\t\t\t\t@keyup=${this.#filterIcons}\r\n\t\t\t\t${umbFocus()}>\r\n\t\t\t\t<uui-icon name=\"search\" slot=\"prepend\" id=\"search_icon\"></uui-icon>\r\n\t\t\t</uui-input>\r\n\t\t`;\r\n\t}\r\n\r\n\trenderIcons() {\r\n\t\treturn this._iconsFiltered\r\n\t\t\t? repeat(\r\n\t\t\t\t\tthis._iconsFiltered,\r\n\t\t\t\t\t(icon) => icon.name,\r\n\t\t\t\t\t(icon) => html`\r\n\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\tlabel=${icon.name}\r\n\t\t\t\t\t\t\ttitle=${icon.name}\r\n\t\t\t\t\t\t\tclass=${icon.name === this.value.icon ? 'selected' : ''}\r\n\t\t\t\t\t\t\t@click=${(e: InputEvent) => this.#changeIcon(e, icon.name)}\r\n\t\t\t\t\t\t\t@keyup=${(e: KeyboardEvent) => this.#changeIcon(e, icon.name)}>\r\n\t\t\t\t\t\t\t<uui-icon\r\n\t\t\t\t\t\t\t\tstyle=\"--uui-icon-color: var(${extractUmbColorVariable(this.value.color ?? 'text')})\"\r\n\t\t\t\t\t\t\t\tname=${icon.name}></uui-icon>\r\n\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)\r\n\t\t\t: nothing;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t#container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tbox-shadow: var(--uui-shadow-depth-1, 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24));\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tpadding: var(--uui-size-space-5);\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\t\t\t#container hr {\r\n\t\t\t\theight: 1px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground-color: var(--uui-color-divider);\r\n\t\t\t\tmargin: 20px 0;\r\n\t\t\t}\r\n\r\n\t\t\t#search {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\t\t\t#search_icon {\r\n\t\t\t\tpadding-left: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t#icons {\r\n\t\t\t\tline-height: 0;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgrid-template-columns: repeat(auto-fit, minmax(40px, calc((100% / 12) - 10px)));\r\n\t\t\t\tgrid-auto-rows: min-content;\r\n\t\t\t\tgap: 10px;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\talign-items: flex-start;\r\n\t\t\t\toverflow-y: scroll;\r\n\t\t\t\tmax-height: 100%;\r\n\t\t\t\tmin-height: 0;\r\n\t\t\t\tpadding: 2px;\r\n\t\t\t}\r\n\r\n\t\t\t#icons uui-button {\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: 16px; /* specific for icons */\r\n\t\t\t}\r\n\t\t\t#icons uui-button:focus-visible,\r\n\t\t\t#icons uui-button:hover,\r\n\t\t\t#icons uui-button.selected {\r\n\t\t\t\toutline: 2px solid var(--uui-color-selected);\r\n\t\t\t}\r\n\r\n\t\t\tuui-button[slot='actions'] {\r\n\t\t\t\tmargin-left: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\tuui-color-swatches {\r\n\t\t\t\tmargin: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbIconPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-icon-picker-modal': UmbIconPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_icons","_UmbIconPickerModalElement_instances","filterIcons_fn","changeIcon_fn","onColorChange_fn","_clearIcon","UmbIconPickerModalElement","UmbModalBaseElement","__privateAdd","umbracoColors","color","UMB_ICON_REGISTRY_CONTEXT","context","icons","__privateSet","__privateMethod","html","ifDefined","__privateGet","nothing","umbFocus","repeat","icon","e","extractUmbColorVariable","value","iconName","nextIcon","colorAlias","UmbTextStyles","css","__decorateClass","query","state","customElement","UmbIconPickerModalElement$1"],"mappings":"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"}