{"version":3,"file":"interaction-memory.context-CoQHsAWq.js","sources":["../../../src/packages/core/interaction-memory/interaction-memory.context.token.ts","../../../src/packages/core/interaction-memory/event/interaction-memories-change.event.ts","../../../src/packages/core/interaction-memory/interaction-memory.manager.ts","../../../src/packages/core/interaction-memory/interaction-memory.context.ts"],"sourcesContent":["import type { UmbInteractionMemoryContext } from './interaction-memory.context.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const UMB_INTERACTION_MEMORY_CONTEXT = new UmbContextToken<UmbInteractionMemoryContext>(\r\n\t'UmbInteractionMemoryContext',\r\n);\r\n","export class UmbInteractionMemoriesChangeEvent extends Event {\r\n\tpublic static readonly TYPE = 'interaction-memories-change';\r\n\r\n\tpublic constructor() {\r\n\t\t// mimics the native change event\r\n\t\tsuper(UmbInteractionMemoriesChangeEvent.TYPE, { bubbles: true, composed: false, cancelable: false });\r\n\t}\r\n}\r\n","import type { UmbInteractionMemoryModel } from './types.js';\r\nimport { UmbArrayState } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { Observable } from '@umbraco-cms/backoffice/observable-api';\r\n\r\n/**\r\n * A manager for handling interaction memory items.\r\n * @exports\r\n * @class UmbInteractionMemoryManager\r\n * @augments {UmbControllerBase}\r\n */\r\nexport class UmbInteractionMemoryManager extends UmbControllerBase {\r\n\t#memories = new UmbArrayState<UmbInteractionMemoryModel>([], (x) => x.unique);\r\n\t/** Observable for all memory items. */\r\n\tmemories = this.#memories.asObservable();\r\n\r\n\t/**\r\n\t * Observable for a specific memory item by its unique identifier.\r\n\t * @param {string} unique - The unique identifier of the memory item.\r\n\t * @returns {(Observable<UmbInteractionMemoryModel | undefined>)} An observable that emits the memory item or undefined if not found.\r\n\t * @memberof UmbInteractionMemoryManager\r\n\t */\r\n\tmemory(unique: string): Observable<UmbInteractionMemoryModel | undefined> {\r\n\t\treturn this.#memories.asObservablePart((items) => items.find((item) => item.unique === unique));\r\n\t}\r\n\r\n\t/**\r\n\t * Get a specific memory item by its unique identifier.\r\n\t * @param {string} unique - The unique identifier of the memory item.\r\n\t * @returns {(UmbInteractionMemoryModel | undefined)} The memory item or undefined if not found.\r\n\t * @memberof UmbInteractionMemoryManager\r\n\t */\r\n\tgetMemory(unique: string): UmbInteractionMemoryModel | undefined {\r\n\t\treturn this.#memories.getValue().find((item) => item.unique === unique);\r\n\t}\r\n\r\n\t/**\r\n\t * Add or update a memory item.\r\n\t * @param {UmbInteractionMemoryModel} memory - The memory item to add or update.\r\n\t * @memberof UmbInteractionMemoryManager\r\n\t */\r\n\tsetMemory(memory: UmbInteractionMemoryModel) {\r\n\t\tthis.#memories.appendOne(memory);\r\n\t}\r\n\r\n\t/**\r\n\t * Delete a memory item by its unique identifier.\r\n\t * @param {string} unique - The unique identifier of the memory item.\r\n\t * @memberof UmbInteractionMemoryManager\r\n\t */\r\n\tdeleteMemory(unique: string) {\r\n\t\tthis.#memories.removeOne(unique);\r\n\t}\r\n\r\n\t/**\r\n\t * Get all memory items from the manager.\r\n\t * @returns {Array<UmbInteractionMemoryModel>} An array of all memory items.\r\n\t * @memberof UmbInteractionMemoryManager\r\n\t */\r\n\tgetAllMemories(): Array<UmbInteractionMemoryModel> {\r\n\t\treturn this.#memories.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Clear all memory items from the manager.\r\n\t * @memberof UmbInteractionMemoryManager\r\n\t */\r\n\tclear() {\r\n\t\tthis.#memories.clear();\r\n\t}\r\n}\r\n","import { UMB_INTERACTION_MEMORY_CONTEXT } from './interaction-memory.context.token.js';\r\nimport { UmbInteractionMemoryManager } from './interaction-memory.manager.js';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbInteractionMemoryContext extends UmbContextBase {\r\n\tpublic readonly memory = new UmbInteractionMemoryManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_INTERACTION_MEMORY_CONTEXT);\r\n\t}\r\n}\r\n"],"names":["UMB_INTERACTION_MEMORY_CONTEXT","UmbContextToken","UmbInteractionMemoriesChangeEvent","UmbInteractionMemoryManager","UmbControllerBase","#memories","UmbArrayState","x","unique","items","item","memory","UmbInteractionMemoryContext","UmbContextBase","host"],"mappings":";;;AAGO,MAAMA,IAAiC,IAAIC;AAAA,EACjD;AACD;ACLO,MAAMC,UAA0C,MAAM;AAAA,EAC5D,OAAA;AAAA,SAAuB,OAAO;AAAA,EAAA;AAAA,EAEvB,cAAc;AAEpB,UAAMA,EAAkC,MAAM,EAAE,SAAS,IAAM,UAAU,IAAO,YAAY,IAAO;AAAA,EACpG;AACD;ACIO,MAAMC,UAAoCC,EAAkB;AAAA,EAA5D,cAAA;AAAA,UAAA,GAAA,SAAA,GACN,KAAAC,KAAY,IAAIC,EAAyC,CAAA,GAAI,CAACC,MAAMA,EAAE,MAAM,GAE5E,KAAA,WAAW,KAAKF,GAAU,aAAA;AAAA,EAAa;AAAA,EAFvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUA,OAAOG,GAAmE;AACzE,WAAO,KAAKH,GAAU,iBAAiB,CAACI,MAAUA,EAAM,KAAK,CAACC,MAASA,EAAK,WAAWF,CAAM,CAAC;AAAA,EAC/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,UAAUA,GAAuD;AAChE,WAAO,KAAKH,GAAU,WAAW,KAAK,CAACK,MAASA,EAAK,WAAWF,CAAM;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,UAAUG,GAAmC;AAC5C,SAAKN,GAAU,UAAUM,CAAM;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,aAAaH,GAAgB;AAC5B,SAAKH,GAAU,UAAUG,CAAM;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,iBAAmD;AAClD,WAAO,KAAKH,GAAU,SAAA;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,QAAQ;AACP,SAAKA,GAAU,MAAA;AAAA,EAChB;AACD;ACjEO,MAAMO,UAAoCC,EAAe;AAAA,EAG/D,YAAYC,GAAyB;AACpC,UAAMA,GAAMd,CAA8B,GAH3C,KAAgB,SAAS,IAAIG,EAA4B,IAAI;AAAA,EAI7D;AACD;"}