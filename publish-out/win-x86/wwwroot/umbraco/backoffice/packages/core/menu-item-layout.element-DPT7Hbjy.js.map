{"version":3,"file":"menu-item-layout.element-DPT7Hbjy.js","sources":["../../../src/packages/core/menu/components/menu/menu.context.token.ts","../../../src/packages/core/menu/components/menu-item/expansion/menu-item-expansion.manager.ts","../../../src/packages/core/menu/components/menu-item/menu-item.context.token.ts","../../../src/packages/core/menu/components/menu-item/menu-item.context.ts","../../../src/packages/core/menu/components/menu/menu.context.ts","../../../src/packages/core/menu/components/menu-item/menu-item-default.element.ts","../../../src/packages/core/menu/components/menu/menu.element.ts","../../../src/packages/core/menu/components/menu-item-layout/menu-item-layout.element.ts"],"sourcesContent":["import type { UmbDefaultMenuContext } from './menu.context.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const UMB_MENU_CONTEXT = new UmbContextToken<UmbDefaultMenuContext>('UmbMenuContext');\r\n","import type { UmbMenuItemExpansionEntryModel } from '../../menu/types.js';\r\nimport { UMB_MENU_CONTEXT } from '../../menu/constants.js';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport {\r\n\tcreateObservablePart,\r\n\ttype UmbObserverController,\r\n\ttype Observable,\r\n} from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbEntityExpansionManager, type UmbEntityExpansionModel } from '@umbraco-cms/backoffice/utils';\r\n\r\n/**\r\n * Manages the expansion state of a menu item\r\n * @exports\r\n * @class UmbMenuItemExpansionManager\r\n * @augments {UmbControllerBase}\r\n */\r\nexport class UmbMenuItemExpansionManager extends UmbControllerBase {\r\n\t#manager = new UmbEntityExpansionManager<UmbMenuItemExpansionEntryModel>(this);\r\n\tpublic readonly expansion = this.#manager.expansion;\r\n\r\n\t#menuItemAlias?: string;\r\n\t#menuContext?: typeof UMB_MENU_CONTEXT.TYPE;\r\n\t#observerController?: UmbObserverController;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\r\n\t\tthis.consumeContext(UMB_MENU_CONTEXT, (menuContext) => {\r\n\t\t\tthis.#menuContext = menuContext;\r\n\t\t\tthis.#observeMenuExpansion();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeMenuExpansion() {\r\n\t\tif (!this.#menuContext || !this.#menuItemAlias) {\r\n\t\t\tthis.#observerController?.destroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.#observerController = this.observe(\r\n\t\t\tcreateObservablePart(\r\n\t\t\t\tthis.#menuContext.expansion.expansion,\r\n\t\t\t\t(items: Array<UmbMenuItemExpansionEntryModel>) =>\r\n\t\t\t\t\titems?.filter((item) => item.menuItemAlias === this.#menuItemAlias) || [],\r\n\t\t\t),\r\n\t\t\t(itemsForMenuItem) => {\r\n\t\t\t\tthis.#manager.setExpansion(itemsForMenuItem);\r\n\t\t\t},\r\n\t\t\t'observeMenuExpension',\r\n\t\t);\r\n\t}\r\n\r\n\tsetMenuItemAlias(alias: string | undefined): void {\r\n\t\tthis.#menuItemAlias = alias;\r\n\t\tthis.#observeMenuExpansion();\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if an entry is expanded\r\n\t * @param {UmbMenuItemExpansionEntryModel} entry The entry to check\r\n\t * @returns {Observable<boolean>} True if the entry is expanded\r\n\t * @memberof UmbSectionSidebarMenuSectionExpansionManager\r\n\t */\r\n\tisExpanded(entry: UmbMenuItemExpansionEntryModel): Observable<boolean> {\r\n\t\treturn this.#manager.isExpanded(entry);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the expansion state\r\n\t * @param {UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel> | undefined} expansion The expansion state\r\n\t * @memberof UmbSectionSidebarMenuSectionExpansionManager\r\n\t * @returns {void}\r\n\t */\r\n\tsetExpansion(expansion: UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel>): void {\r\n\t\tthis.#manager.setExpansion(expansion);\r\n\t\tthis.#menuContext?.expansion.setExpansion(expansion);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the expansion state\r\n\t * @memberof UmbSectionSidebarMenuSectionExpansionManager\r\n\t * @returns {UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel>} The expansion state\r\n\t */\r\n\tgetExpansion(): UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel> {\r\n\t\treturn this.#manager.getExpansion();\r\n\t}\r\n\r\n\t/**\r\n\t * Opens a menu item\r\n\t * @param {UmbMenuItemExpansionEntryModel} entry The item to open\r\n\t * @memberof UmbSectionSidebarMenuSectionExpansionManager\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tpublic async expandItem(entry: UmbMenuItemExpansionEntryModel): Promise<void> {\r\n\t\tthis.#manager.expandItem(entry);\r\n\t\tthis.#menuContext?.expansion.expandItem(entry);\r\n\t}\r\n\r\n\t/**\r\n\t * Expands multiple entities\r\n\t * @param {UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel>} entries The entities to open\r\n\t * @memberof UmbEntityExpansionManager\r\n\t * @returns {void}\r\n\t */\r\n\tpublic expandItems(entries: UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel>): void {\r\n\t\tthis.#manager.expandItems(entries);\r\n\t\tthis.#menuContext?.expansion.expandItems(entries);\r\n\t}\r\n\r\n\t/**\r\n\t * Closes a menu item\r\n\t * @param {UmbMenuItemExpansionEntryModel} entry The item to close\r\n\t * @memberof UmbSectionSidebarMenuSectionExpansionManager\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tpublic async collapseItem(entry: UmbMenuItemExpansionEntryModel): Promise<void> {\r\n\t\tthis.#manager.collapseItem(entry);\r\n\t\tthis.#menuContext?.expansion.collapseItem(entry);\r\n\t}\r\n\r\n\t/**\r\n\t * Closes all menu items\r\n\t * @memberof UmbSectionSidebarMenuSectionExpansionManager\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tpublic async collapseAll(): Promise<void> {\r\n\t\tconst localEntries = this.#manager.getExpansion();\r\n\t\tthis.#manager.collapseAll();\r\n\t\tthis.#menuContext?.expansion.collapseItems(localEntries);\r\n\t}\r\n}\r\n","import type { UmbDefaultMenuItemContext } from './menu-item.context.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const UMB_MENU_ITEM_CONTEXT = new UmbContextToken<UmbDefaultMenuItemContext>('UmbMenuItemContext');\r\n","import type { ManifestMenuItem } from '../../types.js';\r\nimport { UmbMenuItemExpansionManager } from './expansion/menu-item-expansion.manager.js';\r\nimport { UMB_MENU_ITEM_CONTEXT } from './menu-item.context.token.js';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbDefaultMenuItemContext extends UmbContextBase {\r\n\tpublic readonly expansion = new UmbMenuItemExpansionManager(this);\r\n\r\n\t#manifest?: ManifestMenuItem | undefined;\r\n\tpublic get manifest(): ManifestMenuItem | undefined {\r\n\t\treturn this.#manifest;\r\n\t}\r\n\tpublic set manifest(value: ManifestMenuItem | undefined) {\r\n\t\tthis.#manifest = value;\r\n\t\tthis.expansion.setMenuItemAlias(value?.alias);\r\n\t}\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_MENU_ITEM_CONTEXT);\r\n\t}\r\n}\r\n","import { UMB_MENU_CONTEXT } from './menu.context.token.js';\r\nimport type { UmbMenuItemExpansionEntryModel } from './types.js';\r\nimport { UmbEntityExpansionManager } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbDefaultMenuContext extends UmbContextBase {\r\n\tpublic readonly expansion = new UmbEntityExpansionManager<UmbMenuItemExpansionEntryModel>(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_MENU_CONTEXT);\r\n\t}\r\n}\r\n","import type { UmbMenuItemElement } from './menu-item-element.interface.js';\r\nimport type { ManifestMenuItem } from './menu-item.extension.js';\r\nimport { customElement, html, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_SECTION_CONTEXT } from '@umbraco-cms/backoffice/section';\r\n\r\n@customElement('umb-menu-item-default')\r\nexport class UmbMenuItemDefaultElement extends UmbLitElement implements UmbMenuItemElement {\r\n\t#pathname?: string;\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tprivate _manifest!: ManifestMenuItem;\r\n\tpublic get manifest(): ManifestMenuItem {\r\n\t\treturn this._manifest;\r\n\t}\r\n\tpublic set manifest(value: ManifestMenuItem) {\r\n\t\tthis._manifest = value;\r\n\t\tthis.#constructHref();\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _href?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_SECTION_CONTEXT, (sectionContext) => {\r\n\t\t\tthis.observe(\r\n\t\t\t\tsectionContext?.pathname,\r\n\t\t\t\t(pathname) => {\r\n\t\t\t\t\tthis.#pathname = pathname;\r\n\t\t\t\t\tthis.#constructHref();\r\n\t\t\t\t},\r\n\t\t\t\t'observePathname',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#constructHref() {\r\n\t\tif (!this.#pathname || !this.manifest) return;\r\n\t\tthis._href = `section/${this.#pathname}/workspace/${this.manifest.meta.entityType}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-menu-item-layout\r\n\t\t\t\t.href=${this._href}\r\n\t\t\t\t.iconName=${this.manifest.meta.icon ?? ''}\r\n\t\t\t\t.label=${this.localize.string(this.manifest.meta.label ?? this.manifest.name)}\r\n\t\t\t\t.entityType=${this.manifest.meta.entityType}>\r\n\t\t\t</umb-menu-item-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-menu-item-default': UmbMenuItemDefaultElement;\r\n\t}\r\n}\r\n","import type { ManifestMenu } from '../../menu.extension.js';\r\nimport { UmbDefaultMenuItemContext } from '../menu-item/menu-item.context.js';\r\nimport type { ManifestMenuItem } from '../menu-item/types.js';\r\nimport { UmbDefaultMenuContext } from './menu.context.js';\r\nimport type { UmbMenuItemExpansionEntryModel } from './types.js';\r\nimport { html, customElement, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbEntityExpansionModel } from '@umbraco-cms/backoffice/utils';\r\n\r\nimport '../menu-item/menu-item-default.element.js';\r\n\r\n@customElement('umb-menu')\r\nexport class UmbMenuElement extends UmbLitElement {\r\n\t@property({ attribute: false })\r\n\tmanifest?: ManifestMenu;\r\n\r\n\tpublic get expansion(): UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel> {\r\n\t\treturn this.#context.expansion.getExpansion();\r\n\t}\r\n\tpublic set expansion(value: UmbEntityExpansionModel<UmbMenuItemExpansionEntryModel>) {\r\n\t\tthis.#context.expansion.setExpansion(value);\r\n\t}\r\n\r\n\t#context = new UmbDefaultMenuContext(this);\r\n\r\n\toverride render() {\r\n\t\t//TODO: We should probably have resolved the MENU ITEM CONTEXT not by providing it not as an API, currently this work cause menu items does not have APIs as of their manifest. But if they do this, this would be a problem. [NL]\r\n\t\treturn html`\r\n\t\t\t<umb-extension-with-api-slot\r\n\t\t\t\ttype=\"menuItem\"\r\n\t\t\t\tdefault-element=\"umb-menu-item-default\"\r\n\t\t\t\t.defaultApi=${UmbDefaultMenuItemContext}\r\n\t\t\t\t.filter=${(items: ManifestMenuItem) => items.meta.menus.includes(this.manifest!.alias)}>\r\n\t\t\t</umb-extension-with-api-slot>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbMenuElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-menu': UmbMenuElement;\r\n\t}\r\n}\r\n","import { customElement, html, ifDefined, property, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { ensureSlash } from '@umbraco-cms/backoffice/router';\r\nimport { debounce } from '@umbraco-cms/backoffice/utils';\r\n\r\n/**\r\n * @element umb-menu-item-layout\r\n * @description\r\n * A menu item layout to render he backoffice menu item look.\r\n * This supports nested menu items, and if a `entityType` is provided, it will render the entity actions for it.\r\n */\r\n@customElement('umb-menu-item-layout')\r\nexport class UmbMenuItemLayoutElement extends UmbLitElement {\r\n\t@property({ type: String, attribute: 'entity-type' })\r\n\tpublic entityType?: string;\r\n\r\n\t/**\r\n\t * The icon name for the icon to show in this menu item.\r\n\t */\r\n\t@property({ type: String, attribute: 'icon-name' })\r\n\tpublic iconName = '';\r\n\r\n\t/**\r\n\t * The label for this menu item.\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic label = '';\r\n\r\n\t/**\r\n\t * Declare if this item has children, this will show the expand symbol.\r\n\t */\r\n\t@property({ type: Boolean, attribute: 'has-children' })\r\n\tpublic hasChildren = false;\r\n\r\n\t/**\r\n\t * Define a href for this menu item.\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic href?: string;\r\n\r\n\t/**\r\n\t * Set an anchor tag target, only used when using href.\r\n\t * @type {string}\r\n\t * @attr\r\n\t * @default undefined\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic target?: '_blank' | '_parent' | '_self' | '_top';\r\n\r\n\t@state()\r\n\tprivate _isActive = false;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\twindow.addEventListener('navigationend', this.#debouncedCheckIsActive);\r\n\t}\r\n\r\n\t#debouncedCheckIsActive = debounce(() => this.#checkIsActive(), 100);\r\n\r\n\t#checkIsActive() {\r\n\t\tif (!this.href) {\r\n\t\t\tthis._isActive = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t/* Check if the current location includes the href of this menu item\r\n\t\tWe ensure that the paths ends with a slash to avoid collisions with paths like /path-1 and /path-1-2 where /path is in both.\r\n\t\tInstead we compare /path-1/ with /path-1-2/ which wont collide.*/\r\n\t\tconst location = ensureSlash(window.location.pathname);\r\n\t\tconst compareHref = ensureSlash(this.href);\r\n\t\tthis._isActive = location.includes(compareHref);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-menu-item\r\n\t\t\t\tlabel=${this.label}\r\n\t\t\t\thref=${ifDefined(this.href)}\r\n\t\t\t\ttarget=${ifDefined(this.href && this.target ? this.target : undefined)}\r\n\t\t\t\t.caretLabel=${this.localize.term('visuallyHiddenTexts_expandChildItems') + ' ' + this.label}\r\n\t\t\t\t?active=${this._isActive}\r\n\t\t\t\t?has-children=${this.hasChildren}>\r\n\t\t\t\t<umb-icon slot=\"icon\" name=${this.iconName}></umb-icon>\r\n\t\t\t\t${when(\r\n\t\t\t\t\tthis.entityType,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<umb-entity-actions-bundle\r\n\t\t\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\t\t\t.entityType=${this.entityType}\r\n\t\t\t\t\t\t\t.unique=${null}\r\n\t\t\t\t\t\t\t.label=${this.label}></umb-entity-actions-bundle>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t\t<slot></slot>\r\n\t\t\t</uui-menu-item>\r\n\t\t`;\r\n\t}\r\n\r\n\toverride disconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\twindow.removeEventListener('navigationend', this.#debouncedCheckIsActive);\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-menu-item-layout': UmbMenuItemLayoutElement;\r\n\t}\r\n}\r\n"],"names":["UMB_MENU_CONTEXT","UmbContextToken","UmbMenuItemExpansionManager","UmbControllerBase","host","#manager","UmbEntityExpansionManager","menuContext","#menuContext","#observeMenuExpansion","#menuItemAlias","#observerController","createObservablePart","items","item","itemsForMenuItem","alias","entry","expansion","entries","localEntries","UMB_MENU_ITEM_CONTEXT","UmbDefaultMenuItemContext","UmbContextBase","#manifest","value","UmbDefaultMenuContext","_pathname","_UmbMenuItemDefaultElement_instances","constructHref_fn","UmbMenuItemDefaultElement","UmbLitElement","__privateAdd","UMB_SECTION_CONTEXT","sectionContext","pathname","__privateSet","__privateMethod","html","__privateGet","__decorateClass","property","state","customElement","_context","UmbMenuElement","_debouncedCheckIsActive","_UmbMenuItemLayoutElement_instances","checkIsActive_fn","UmbMenuItemLayoutElement","debounce","ifDefined","when","location","ensureSlash","compareHref"],"mappings":"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"}