{"version":3,"file":"restore-from-recycle-bin.action-wPNxL7Dj.js","sources":["../../../src/packages/core/recycle-bin/entity-action/restore-from-recycle-bin/restore-from-recycle-bin.action.ts"],"sourcesContent":["import { UMB_RESTORE_FROM_RECYCLE_BIN_MODAL } from './modal/restore-from-recycle-bin-modal.token.js';\r\nimport type { MetaEntityActionRestoreFromRecycleBinKind } from './types.js';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport {\r\n\tUmbEntityActionBase,\r\n\tUmbRequestReloadChildrenOfEntityEvent,\r\n\tUmbRequestReloadStructureForEntityEvent,\r\n} from '@umbraco-cms/backoffice/entity-action';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\n\r\n/**\r\n * Entity action for restoring an item from the recycle bin.\r\n * @class UmbRestoreFromRecycleBinEntityAction\r\n * @augments {UmbEntityActionBase<MetaEntityActionRestoreFromRecycleBinKind>}\r\n */\r\nexport class UmbRestoreFromRecycleBinEntityAction extends UmbEntityActionBase<MetaEntityActionRestoreFromRecycleBinKind> {\r\n\t/**\r\n\t * Executes the action.\r\n\t * @memberof UmbRestoreFromRecycleBinEntityAction\r\n\t */\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Cannot restore an item without a unique identifier.');\r\n\r\n\t\tconst { destination } = await umbOpenModal(this, UMB_RESTORE_FROM_RECYCLE_BIN_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tunique: this.args.unique,\r\n\t\t\t\tentityType: this.args.entityType,\r\n\t\t\t\trecycleBinRepositoryAlias: this.args.meta.recycleBinRepositoryAlias,\r\n\t\t\t\titemRepositoryAlias: this.args.meta.itemRepositoryAlias,\r\n\t\t\t\tpickerModal: this.args.meta.pickerModal,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tif (!destination) throw new Error('Cannot reload the structure without a destination.');\r\n\r\n\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tif (!actionEventContext) {\r\n\t\t\tthrow new Error('Event context not found.');\r\n\t\t}\r\n\r\n\t\tconst sourceEvent = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(sourceEvent);\r\n\r\n\t\tconst destinationEvent = new UmbRequestReloadChildrenOfEntityEvent({\r\n\t\t\tunique: destination.unique,\r\n\t\t\tentityType: destination.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(destinationEvent);\r\n\t}\r\n}\r\n\r\nexport { UmbRestoreFromRecycleBinEntityAction as api };\r\n"],"names":["UmbRestoreFromRecycleBinEntityAction","UmbEntityActionBase","destination","umbOpenModal","UMB_RESTORE_FROM_RECYCLE_BIN_MODAL","actionEventContext","UMB_ACTION_EVENT_CONTEXT","sourceEvent","UmbRequestReloadStructureForEntityEvent","destinationEvent","UmbRequestReloadChildrenOfEntityEvent"],"mappings":";;;;AAeO,MAAMA,UAA6CC,EAA+D;AAAA;AAAA;AAAA;AAAA;AAAA,EAKxH,MAAe,UAAU;AACxB,QAAI,CAAC,KAAK,KAAK,OAAQ,OAAM,IAAI,MAAM,qDAAqD;AAE5F,UAAM,EAAE,aAAAC,EAAA,IAAgB,MAAMC,EAAa,MAAMC,GAAoC;AAAA,MACpF,MAAM;AAAA,QACL,QAAQ,KAAK,KAAK;AAAA,QAClB,YAAY,KAAK,KAAK;AAAA,QACtB,2BAA2B,KAAK,KAAK,KAAK;AAAA,QAC1C,qBAAqB,KAAK,KAAK,KAAK;AAAA,QACpC,aAAa,KAAK,KAAK,KAAK;AAAA,MAAA;AAAA,IAC7B,CACA;AAED,QAAI,CAACF,EAAa,OAAM,IAAI,MAAM,oDAAoD;AAEtF,UAAMG,IAAqB,MAAM,KAAK,WAAWC,CAAwB;AACzE,QAAI,CAACD;AACJ,YAAM,IAAI,MAAM,0BAA0B;AAG3C,UAAME,IAAc,IAAIC,EAAwC;AAAA,MAC/D,QAAQ,KAAK,KAAK;AAAA,MAClB,YAAY,KAAK,KAAK;AAAA,IAAA,CACtB;AAED,IAAAH,EAAmB,cAAcE,CAAW;AAE5C,UAAME,IAAmB,IAAIC,EAAsC;AAAA,MAClE,QAAQR,EAAY;AAAA,MACpB,YAAYA,EAAY;AAAA,IAAA,CACxB;AAED,IAAAG,EAAmB,cAAcI,CAAgB;AAAA,EAClD;AACD;"}