{"version":3,"file":"section-picker-modal.element-CWp9mISy.js","sources":["../../../src/packages/core/section/section-picker-modal/section-picker-modal.element.ts"],"sourcesContent":["import type { ManifestSection } from '../extensions/index.js';\r\nimport type { UmbSectionPickerModalData, UmbSectionPickerModalValue } from './section-picker-modal.token.js';\r\nimport { html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbSelectionManager } from '@umbraco-cms/backoffice/utils';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\n\r\n@customElement('umb-section-picker-modal')\r\nexport class UmbSectionPickerModalElement extends UmbModalBaseElement<\r\n\tUmbSectionPickerModalData,\r\n\tUmbSectionPickerModalValue\r\n> {\r\n\t@state()\r\n\tprivate _sections: Array<ManifestSection> = [];\r\n\r\n\t@state()\r\n\tprivate _selectable = false;\r\n\r\n\t#selectionManager = new UmbSelectionManager(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.#selectionManager.setSelectable(true);\r\n\t\tthis.observe(this.#selectionManager.selectable, (selectable) => (this._selectable = selectable), null);\r\n\r\n\t\tthis.observe(\r\n\t\t\tumbExtensionsRegistry.byType('section'),\r\n\t\t\t(sections: Array<ManifestSection>) => (this._sections = sections),\r\n\t\t\tnull,\r\n\t\t);\r\n\t}\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis.#selectionManager.setMultiple(this.data?.multiple ?? false);\r\n\t\tthis.#selectionManager.setSelection(this.value?.selection ?? []);\r\n\t}\r\n\r\n\t#submit() {\r\n\t\tthis.value = { selection: this.#selectionManager.getSelection() };\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Select sections\">\r\n\t\t\t\t<uui-box>\r\n\t\t\t\t\t${this._sections.map(\r\n\t\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\t\tlabel=${this.localize.string(item.meta.label)}\r\n\t\t\t\t\t\t\t\t?selectable=${this._selectable}\r\n\t\t\t\t\t\t\t\t?selected=${this.#selectionManager.isSelected(item.alias)}\r\n\t\t\t\t\t\t\t\t@selected=${() => this.#selectionManager.select(item.alias)}\r\n\t\t\t\t\t\t\t\t@deselected=${() => this.#selectionManager.deselect(item.alias)}></uui-menu-item>\r\n\t\t\t\t\t\t`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</uui-box>\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button label=\"Close\" @click=${this._rejectModal}></uui-button>\r\n\t\t\t\t\t<uui-button label=\"Submit\" look=\"primary\" color=\"positive\" @click=${this.#submit}></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbSectionPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-section-picker-modal': UmbSectionPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_selectionManager","_UmbSectionPickerModalElement_instances","submit_fn","UmbSectionPickerModalElement","UmbModalBaseElement","__privateAdd","UmbSelectionManager","__privateGet","selectable","umbExtensionsRegistry","sections","html","item","__privateMethod","__decorateClass","state","customElement","UmbSectionPickerModalElement$1"],"mappings":";;;;;;;;;;+TAAAA,GAAAC,GAAAC;AAQO,IAAMC,IAAN,cAA2CC,EAGhD;AAAA,EASD,cAAc;AACb,UAAA,GAbKC,EAAA,MAAAJ,CAAA,GAKN,KAAQ,YAAoC,CAAA,GAG5C,KAAQ,cAAc,IAEtBI,EAAA,MAAAL,GAAoB,IAAIM,EAAoB,IAAI,CAAA,GAI/CC,EAAA,MAAKP,CAAA,EAAkB,cAAc,EAAI,GACzC,KAAK,QAAQO,QAAKP,CAAA,EAAkB,YAAY,CAACQ,MAAgB,KAAK,cAAcA,GAAa,IAAI,GAErG,KAAK;AAAA,MACJC,EAAsB,OAAO,SAAS;AAAA,MACtC,CAACC,MAAsC,KAAK,YAAYA;AAAA,MACxD;AAAA,IAAA;AAAA,EAEF;AAAA,EAES,oBAA0B;AAClC,UAAM,kBAAA,GACNH,EAAA,MAAKP,CAAA,EAAkB,YAAY,KAAK,MAAM,YAAY,EAAK,GAC/DO,EAAA,MAAKP,GAAkB,aAAa,KAAK,OAAO,aAAa,EAAE;AAAA,EAChE;AAAA,EAOS,SAAS;AACjB,WAAOW;AAAA;AAAA;AAAA,OAGF,KAAK,UAAU;AAAA,MAChB,CAACC,MAASD;AAAA;AAAA,gBAEA,KAAK,SAAS,OAAOC,EAAK,KAAK,KAAK,CAAC;AAAA,sBAC/B,KAAK,WAAW;AAAA,oBAClBL,EAAA,MAAKP,CAAA,EAAkB,WAAWY,EAAK,KAAK,CAAC;AAAA,oBAC7C,MAAML,EAAA,MAAKP,CAAA,EAAkB,OAAOY,EAAK,KAAK,CAAC;AAAA,sBAC7C,MAAML,EAAA,MAAKP,CAAA,EAAkB,SAASY,EAAK,KAAK,CAAC;AAAA;AAAA,IAAA,CAEjE;AAAA;AAAA;AAAA,wCAGkC,KAAK,YAAY;AAAA,yEACgBC,QAAKZ,GAAAC,CAAA,CAAO;AAAA;AAAA;AAAA;AAAA,EAIpF;AACD;AA/CCF,IAAA,oBAAA,QAAA;AAVMC,IAAA,oBAAA,QAAA;AA8BNC,IAAO,WAAG;AACT,OAAK,QAAQ,EAAE,WAAWK,EAAA,MAAKP,CAAA,EAAkB,eAAa,GAC9D,KAAK,aAAA;AACN;AA5BQc,EAAA;AAAA,EADPC,EAAA;AAAM,GAJKZ,EAKJ,WAAA,aAAA,CAAA;AAGAW,EAAA;AAAA,EADPC,EAAA;AAAM,GAPKZ,EAQJ,WAAA,eAAA,CAAA;AARIA,IAANW,EAAA;AAAA,EADNE,EAAc,0BAA0B;AAAA,GAC5Bb,CAAA;AA2Db,MAAAc,IAAed;"}