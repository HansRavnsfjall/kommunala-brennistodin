{"version":3,"file":"index.js","sources":["../../../../src/packages/core/section/section-picker-modal/section-picker-modal.token.ts","../../../../src/packages/core/section/paths.ts","../../../../src/packages/core/section/components/input-section/input-section.context.ts","../../../../src/packages/core/section/components/input-section/input-section.element.ts","../../../../src/packages/core/section/components/ref-section/ref-section.element.ts","../../../../src/packages/core/section/section.context.ts","../../../../src/packages/core/section/default/default-section.context.ts","../../../../src/packages/core/section/default/default-section.element.ts","../../../../src/packages/core/section/section-main/section-main.element.ts","../../../../src/packages/core/section/section-sidebar/section-sidebar.context.ts","../../../../src/packages/core/section/section-sidebar/section-sidebar.element.ts","../../../../src/packages/core/section/section-sidebar-context-menu/section-sidebar-context-menu.element.ts"],"sourcesContent":["import { UmbModalToken } from '../../modal/token/modal-token.js';\r\n\r\nexport interface UmbSectionPickerModalData {\r\n\tmultiple: boolean;\r\n\tselection: Array<string | null>;\r\n}\r\n\r\nexport interface UmbSectionPickerModalValue {\r\n\tselection: Array<string | null>;\r\n}\r\n\r\nexport const UMB_SECTION_PICKER_MODAL = new UmbModalToken<UmbSectionPickerModalData, UmbSectionPickerModalValue>(\r\n\t'Umb.Modal.SectionPicker',\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import { UmbPathPattern } from '../router/path-pattern.class.js';\r\n\r\nexport const UMB_SECTION_PATH_PATTERN = new UmbPathPattern<{ sectionName: string }>('section/:sectionName');\r\n","import type { UmbSectionItemModel } from '../../repository/types.js';\r\nimport { UMB_SECTION_PICKER_MODAL } from '../../section-picker-modal/section-picker-modal.token.js';\r\nimport { UMB_SECTION_ITEM_REPOSITORY_ALIAS } from '../../constants.js';\r\nimport { UmbPickerInputContext } from '@umbraco-cms/backoffice/picker-input';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbSectionPickerInputContext extends UmbPickerInputContext<UmbSectionItemModel> {\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_SECTION_ITEM_REPOSITORY_ALIAS, UMB_SECTION_PICKER_MODAL);\r\n\t}\r\n}\r\n","import type { UmbSectionItemModel } from '../../types.js';\r\nimport { UmbSectionPickerInputContext } from './input-section.context.js';\r\nimport { css, html, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { splitStringToArray } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\n\r\n@customElement('umb-input-section')\r\nexport class UmbInputSectionElement extends UmbFormControlMixin<string | undefined, typeof UmbLitElement>(\r\n\tUmbLitElement,\r\n) {\r\n\t/**\r\n\t * This is a minimum amount of selected items in this input.\r\n\t * @type {number}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: Number })\r\n\tpublic set min(value: number) {\r\n\t\tthis.#pickerContext.min = value;\r\n\t}\r\n\tpublic get min(): number {\r\n\t\treturn this.#pickerContext.min;\r\n\t}\r\n\r\n\t/**\r\n\t * Min validation message.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: String, attribute: 'min-message' })\r\n\tminMessage = 'This field need more items';\r\n\r\n\t/**\r\n\t * This is a maximum amount of selected items in this input.\r\n\t * @type {number}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: Number })\r\n\tpublic set max(value: number) {\r\n\t\tthis.#pickerContext.max = value;\r\n\t}\r\n\tpublic get max(): number {\r\n\t\treturn this.#pickerContext.max;\r\n\t}\r\n\r\n\t/**\r\n\t * Max validation message.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: String, attribute: 'min-message' })\r\n\tmaxMessage = 'This field exceeds the allowed amount of items';\r\n\r\n\tpublic set selection(uniques: Array<string>) {\r\n\t\tthis.#pickerContext.setSelection(uniques);\r\n\t}\r\n\tpublic get selection(): Array<string> {\r\n\t\treturn this.#pickerContext.getSelection();\r\n\t}\r\n\r\n\t@property({ type: String })\r\n\tpublic override set value(selectionString: string | undefined) {\r\n\t\tthis.selection = splitStringToArray(selectionString);\r\n\t}\r\n\tpublic override get value(): string | undefined {\r\n\t\treturn this.selection.length > 0 ? this.selection.join(',') : undefined;\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _items?: Array<UmbSectionItemModel>;\r\n\r\n\t#pickerContext = new UmbSectionPickerInputContext(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'rangeUnderflow',\r\n\t\t\t() => this.minMessage,\r\n\t\t\t() => !!this.min && this.#pickerContext.getSelection().length < this.min,\r\n\t\t);\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'rangeOverflow',\r\n\t\t\t() => this.maxMessage,\r\n\t\t\t() => !!this.max && this.#pickerContext.getSelection().length > this.max,\r\n\t\t);\r\n\r\n\t\tthis.observe(this.#pickerContext.selection, (selection) => (this.value = selection.join(',')));\r\n\t\tthis.observe(this.#pickerContext.selectedItems, (selectedItems) => (this._items = selectedItems));\r\n\t}\r\n\r\n\tprotected override getFormElement() {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-ref-list>${this._items?.map((item) => this._renderItem(item))}</uui-ref-list>\r\n\t\t\t<uui-button\r\n\t\t\t\tid=\"btn-add\"\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t@click=${() => this.#pickerContext.openPicker()}\r\n\t\t\t\tlabel=${this.localize.term('general_choose')}></uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate _renderItem(item: UmbSectionItemModel) {\r\n\t\tif (!item.unique) return;\r\n\t\treturn html` <umb-ref-section .item=${item}>\r\n\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t<uui-button @click=${() => this.#pickerContext.requestRemoveItem(item.unique)} label=\"Remove ${item.name}\"\r\n\t\t\t\t\t>Remove</uui-button\r\n\t\t\t\t>\r\n\t\t\t</uui-action-bar>\r\n\t\t</umb-ref-section>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#btn-add {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInputSectionElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-section': UmbInputSectionElement;\r\n\t}\r\n}\r\n","import type { UmbSectionItemModel } from '../../repository/types.js';\r\nimport { UUIRefElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { html, customElement, css, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbElementMixin } from '@umbraco-cms/backoffice/element-api';\r\n\r\n@customElement('umb-ref-section')\r\nexport class UmbRefSectionElement extends UmbElementMixin(UUIRefElement) {\r\n\t@property({ type: Object, attribute: false })\r\n\titem?: UmbSectionItemModel;\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"info\">\r\n\t\t\t\t<div id=\"name\">${this.item?.meta.label ? this.localize.string(this.item.meta.label) : this.item?.name}</div>\r\n\t\t\t</div>\r\n\t\t\t<slot></slot>\r\n\t\t\t<slot name=\"actions\" id=\"actions-container\"></slot>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\t...UUIRefElement.styles,\r\n\t\tcss`\r\n\t\t\t#name {\r\n\t\t\t\tfont-weight: 700;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-ref-section': UmbRefSectionElement;\r\n\t}\r\n}\r\n","import type { ManifestSection } from './extensions/section.extension.js';\r\nimport { UMB_SECTION_CONTEXT } from './section.context.token.js';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { UmbExtensionsApiInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbStringState } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbViewContext } from '@umbraco-cms/backoffice/view';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbSectionContext extends UmbContextBase {\r\n\t#manifestAlias = new UmbStringState<string | undefined>(undefined);\r\n\t#manifestPathname = new UmbStringState<string | undefined>(undefined);\r\n\t#manifestLabel = new UmbStringState<string | undefined>(undefined);\r\n\tpublic readonly alias = this.#manifestAlias.asObservable();\r\n\tpublic readonly pathname = this.#manifestPathname.asObservable();\r\n\tpublic readonly label = this.#manifestLabel.asObservable();\r\n\r\n\t#viewContext = new UmbViewContext(this, null);\r\n\t#sectionContextExtensionController?: UmbExtensionsApiInitializer<any>;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_SECTION_CONTEXT);\r\n\r\n\t\tthis.#createSectionContextExtensions();\r\n\t}\r\n\r\n\tpublic setManifest(manifest?: ManifestSection) {\r\n\t\tthis.#manifestAlias.setValue(manifest?.alias);\r\n\t\tthis.#manifestPathname.setValue(manifest?.meta?.pathname);\r\n\t\tconst sectionLabel = manifest ? manifest.meta?.label || manifest.name : undefined;\r\n\t\tthis.#manifestLabel.setValue(sectionLabel);\r\n\t\tthis.#viewContext.setTitle(sectionLabel);\r\n\t}\r\n\r\n\tgetPathname() {\r\n\t\treturn this.#manifestPathname.getValue();\r\n\t}\r\n\r\n\t#createSectionContextExtensions() {\r\n\t\tif (this.#sectionContextExtensionController) {\r\n\t\t\tthis.#sectionContextExtensionController.destroy();\r\n\t\t}\r\n\r\n\t\tthis.#sectionContextExtensionController = new UmbExtensionsApiInitializer(\r\n\t\t\tthis,\r\n\t\t\tumbExtensionsRegistry,\r\n\t\t\t'sectionContext',\r\n\t\t\t[],\r\n\t\t\tundefined,\r\n\t\t);\r\n\t}\r\n}\r\n","import { UmbSectionContext } from '../section.context.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbDefaultSectionContext extends UmbSectionContext {\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\t}\r\n}\r\n","import type { ManifestSectionRoute } from '../extensions/section-route.extension.js';\r\nimport type { UmbSectionMainViewElement } from '../section-main-views/section-main-views.element.js';\r\nimport type { ManifestSection, UmbSectionElement } from '../types.js';\r\nimport { UmbDefaultSectionContext } from './default-section.context.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, nothing, customElement, property, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport type { IRoute, IRoutingInfo, PageComponent, UmbRoute } from '@umbraco-cms/backoffice/router';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbExtensionElementInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport {\r\n\tUmbExtensionsElementInitializer,\r\n\tUmbExtensionsManifestInitializer,\r\n\tcreateExtensionApi,\r\n\tcreateExtensionElement,\r\n} from '@umbraco-cms/backoffice/extension-api';\r\nimport { aliasToPath } from '@umbraco-cms/backoffice/utils';\r\nimport { UMB_MARK_ATTRIBUTE_NAME } from '@umbraco-cms/backoffice/const';\r\n\r\n/**\r\n * @class UmbBaseSectionElement\r\n * @description - Element hosting sections and section navigation.\r\n */\r\n@customElement('umb-section-default')\r\nexport class UmbDefaultSectionElement extends UmbLitElement implements UmbSectionElement {\r\n\tprivate _manifest?: ManifestSection | undefined;\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic get manifest(): ManifestSection | undefined {\r\n\t\treturn this._manifest;\r\n\t}\r\n\tpublic set manifest(value: ManifestSection | undefined) {\r\n\t\tconst oldValue = this._manifest;\r\n\t\tif (oldValue === value) return;\r\n\t\tthis._manifest = value;\r\n\t\tthis.#api.setManifest(value);\r\n\t\tthis.requestUpdate('manifest', oldValue);\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _routes?: Array<UmbRoute>;\r\n\r\n\t@state()\r\n\tprivate _sidebarApps?: Array<UmbExtensionElementInitializer<any>>;\r\n\r\n\t@state()\r\n\tprivate _splitPanelPosition = '300px';\r\n\r\n\t// TODO: v17: Move this to a manifest api. It will have to wait for a major as it will be a breaking change.\r\n\t#api = new UmbDefaultSectionContext(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tnew UmbExtensionsElementInitializer(this, umbExtensionsRegistry, 'sectionSidebarApp', null, (sidebarApps) => {\r\n\t\t\tconst oldValue = this._sidebarApps;\r\n\t\t\tsidebarApps.forEach((sidebarApp) => {\r\n\t\t\t\tsidebarApp.component?.setAttribute(UMB_MARK_ATTRIBUTE_NAME, 'section-sidebar:' + sidebarApp.manifest.alias);\r\n\t\t\t});\r\n\t\t\tthis._sidebarApps = sidebarApps;\r\n\t\t\tthis.requestUpdate('_sidebarApps', oldValue);\r\n\t\t});\r\n\r\n\t\tthis.#observeRoutes();\r\n\r\n\t\tconst splitPanelPosition = localStorage.getItem('umb-split-panel-position');\r\n\t\tif (splitPanelPosition) {\r\n\t\t\tthis._splitPanelPosition = splitPanelPosition;\r\n\t\t}\r\n\t}\r\n\r\n\t#observeRoutes(): void {\r\n\t\tnew UmbExtensionsManifestInitializer<ManifestSectionRoute, 'sectionRoute', ManifestSectionRoute>(\r\n\t\t\tthis,\r\n\t\t\tumbExtensionsRegistry,\r\n\t\t\t'sectionRoute',\r\n\t\t\tnull,\r\n\t\t\tasync (sectionRouteExtensions) => {\r\n\t\t\t\t// TODO: we only support extensions with an element prop\r\n\t\t\t\tconst extensionsWithElement = sectionRouteExtensions.filter((extension) => extension.manifest.element);\r\n\t\t\t\tconst extensionsWithoutElement = sectionRouteExtensions.filter((extension) => !extension.manifest.element);\r\n\t\t\t\tif (extensionsWithoutElement.length > 0) {\r\n\t\t\t\t\tthrow new Error('sectionRoute extensions must have an element');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst routes: Array<IRoute> = await Promise.all(\r\n\t\t\t\t\textensionsWithElement.map(async (extensionController) => {\r\n\t\t\t\t\t\tconst api = await createExtensionApi(this, extensionController.manifest);\r\n\r\n\t\t\t\t\t\tif (api) {\r\n\t\t\t\t\t\t\t(api as any).manifest = extensionController.manifest;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tpath:\r\n\t\t\t\t\t\t\t\tapi?.getPath?.() ||\r\n\t\t\t\t\t\t\t\textensionController.manifest.meta?.path ||\r\n\t\t\t\t\t\t\t\taliasToPath(extensionController.manifest.alias),\r\n\t\t\t\t\t\t\tcomponent: () => createExtensionElement(extensionController.manifest),\r\n\t\t\t\t\t\t\tsetup: (element: PageComponent, info: IRoutingInfo) => {\r\n\t\t\t\t\t\t\t\tapi?.setup?.(element, info);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.#createRoutes(routes);\r\n\t\t\t},\r\n\t\t\t'umbRouteExtensionApisInitializer',\r\n\t\t);\r\n\t}\r\n\r\n\t#createRoutes(routes: Array<IRoute>) {\r\n\t\tthis._routes = [\r\n\t\t\t...routes,\r\n\t\t\t{\r\n\t\t\t\tpath: '**',\r\n\t\t\t\tcomponent: () => import('../section-main-views/section-main-views.element.js'),\r\n\t\t\t\tsetup: (element) => {\r\n\t\t\t\t\t(element as UmbSectionMainViewElement).sectionAlias = this.manifest?.alias;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t];\r\n\t}\r\n\r\n\t#onSplitPanelChange(event: CustomEvent) {\r\n\t\tconst position = event.detail.position;\r\n\t\tlocalStorage.setItem('umb-split-panel-position', position.toString());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-split-panel\r\n\t\t\t\tlock=\"start\"\r\n\t\t\t\tsnap=\"300px\"\r\n\t\t\t\t@position-changed=${this.#onSplitPanelChange}\r\n\t\t\t\t.position=${this._splitPanelPosition}>\r\n\t\t\t\t${this._sidebarApps && this._sidebarApps.length > 0\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<!-- TODO: these extensions should be combined into one type: sectionSidebarApp with a \"subtype\" -->\r\n\t\t\t\t\t\t\t<umb-section-sidebar slot=\"start\">\r\n\t\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\t\tthis._sidebarApps,\r\n\t\t\t\t\t\t\t\t\t(app) => app.alias,\r\n\t\t\t\t\t\t\t\t\t(app) => app.component,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</umb-section-sidebar>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t: nothing}\r\n\t\t\t\t<umb-section-main slot=\"end\">\r\n\t\t\t\t\t${this._routes && this._routes.length > 0\r\n\t\t\t\t\t\t? html`<umb-router-slot id=\"router-slot\" .routes=${this._routes}></umb-router-slot>`\r\n\t\t\t\t\t\t: nothing}\r\n\t\t\t\t\t<slot></slot>\r\n\t\t\t\t</umb-section-main>\r\n\t\t\t</umb-split-panel>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\tumb-split-panel {\r\n\t\t\t\t--umb-split-panel-start-min-width: 200px;\r\n\t\t\t\t--umb-split-panel-start-max-width: 400px;\r\n\t\t\t\t--umb-split-panel-end-min-width: 600px;\r\n\t\t\t\t--umb-split-panel-slot-overflow: visible;\r\n\t\t\t}\r\n\t\t\t@media only screen and (min-width: 800px) {\r\n\t\t\t\tumb-split-panel {\r\n\t\t\t\t\t--umb-split-panel-initial-position: 300px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbDefaultSectionElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-section-default': UmbDefaultSectionElement;\r\n\t}\r\n}\r\n\r\n/**\r\n *\r\n * @deprecated Since 16. Use UmbDefaultSectionElement instead. UmbSectionDefaultElement will be removed in v18.\r\n */\r\nexport { UmbDefaultSectionElement as UmbSectionDefaultElement };\r\n","import { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-section-main')\r\nexport class UmbSectionMainElement extends UmbLitElement {\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<main>\r\n\t\t\t\t<slot></slot>\r\n\t\t\t</main>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tmin-width: 0;\r\n\t\t\t}\r\n\r\n\t\t\tmain {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-section-main': UmbSectionMainElement;\r\n\t}\r\n}\r\n","import type { UmbOpenContextMenuArgs } from './types.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbStringState, UmbBooleanState } from '@umbraco-cms/backoffice/observable-api';\r\n\r\nexport class UmbSectionSidebarContext extends UmbContextBase {\r\n\t#contextMenuIsOpen = new UmbBooleanState(false);\r\n\tcontextMenuIsOpen = this.#contextMenuIsOpen.asObservable();\r\n\r\n\t#entityType = new UmbStringState<undefined>(undefined);\r\n\tentityType = this.#entityType.asObservable();\r\n\r\n\t#unique = new UmbStringState<null | undefined>(undefined);\r\n\tunique = this.#unique.asObservable();\r\n\r\n\t#headline = new UmbStringState<undefined>(undefined);\r\n\theadline = this.#headline.asObservable();\r\n\r\n\t#contextElement: Element | undefined = undefined;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_SECTION_SIDEBAR_CONTEXT);\r\n\t}\r\n\r\n\ttoggleContextMenu(host: Element, args: UmbOpenContextMenuArgs) {\r\n\t\tthis.openContextMenu(host, args);\r\n\t}\r\n\r\n\t// TODO: we wont get notified about tree item name changes because we don't have a subscription\r\n\t// we need to figure out how we best can handle this when we only know the entity and unique id\r\n\topenContextMenu(host: Element, args: UmbOpenContextMenuArgs) {\r\n\t\tthis.#entityType.setValue(args.entityType);\r\n\t\tthis.#unique.setValue(args.unique);\r\n\t\tthis.#headline.setValue(args.headline);\r\n\t\tthis.#contextMenuIsOpen.setValue(true);\r\n\t\tthis.#contextElement = host;\r\n\t}\r\n\r\n\tcloseContextMenu() {\r\n\t\tthis.#contextMenuIsOpen.setValue(false);\r\n\t\tthis.#entityType.setValue(undefined);\r\n\t\tthis.#unique.setValue(undefined);\r\n\t\tthis.#headline.setValue(undefined);\r\n\t\tthis.#contextElement = undefined;\r\n\t}\r\n\r\n\tgetContextElement() {\r\n\t\treturn this.#contextElement;\r\n\t}\r\n}\r\n\r\nexport const UMB_SECTION_SIDEBAR_CONTEXT = new UmbContextToken<UmbSectionSidebarContext>('UmbSectionSidebarContext');\r\n","import { UmbSectionSidebarContext } from './section-sidebar.context.js';\r\nimport { UMB_MARK_ATTRIBUTE_NAME } from '@umbraco-cms/backoffice/const';\r\nimport { css, html, customElement, type PropertyValueMap } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-section-sidebar')\r\nexport class UmbSectionSidebarElement extends UmbLitElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tnew UmbSectionSidebarContext(this);\r\n\t}\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.setAttribute(UMB_MARK_ATTRIBUTE_NAME, 'section-sidebar');\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-section-sidebar-context-menu>\r\n\t\t\t\t<uui-scroll-container id=\"scroll-container\">\r\n\t\t\t\t\t<slot></slot>\r\n\t\t\t\t</uui-scroll-container>\r\n\t\t\t</umb-section-sidebar-context-menu>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tflex: 0 0 var(--umb-section-sidebar-width);\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tborder-right: 1px solid var(--uui-color-border);\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tz-index: 10;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\r\n\t\t\t#scroll-container {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-section-sidebar': UmbSectionSidebarElement;\r\n\t}\r\n}\r\n","import type { UmbSectionSidebarContext } from '../section-sidebar/index.js';\r\nimport { UMB_SECTION_SIDEBAR_CONTEXT } from '../section-sidebar/index.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, nothing, customElement, state, ref } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { observeMultiple } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbContextProxyController } from '@umbraco-cms/backoffice/context-proxy';\r\n\r\n@customElement('umb-section-sidebar-context-menu')\r\nexport class UmbSectionSidebarContextMenuElement extends UmbLitElement {\r\n\t#sectionSidebarContext?: UmbSectionSidebarContext;\r\n\r\n\t@state()\r\n\tprivate _isOpen = false;\r\n\r\n\t@state()\r\n\tprivate _entityType?: string;\r\n\r\n\t@state()\r\n\tprivate _unique?: string | null;\r\n\r\n\t@state()\r\n\tprivate _headline?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_SECTION_SIDEBAR_CONTEXT, (instance) => {\r\n\t\t\tthis.#sectionSidebarContext = instance;\r\n\t\t\tthis.#observeEntityModel();\r\n\r\n\t\t\tif (this.#sectionSidebarContext) {\r\n\t\t\t\t// make prettier not break the lines on the next 4 lines:\r\n\t\t\t\t// prettier-ignore\r\n\t\t\t\tthis.observe( this.#sectionSidebarContext.contextMenuIsOpen, (value) => (this._isOpen = value), '_observeContextMenuIsOpen');\r\n\t\t\t\t// prettier-ignore\r\n\t\t\t\tthis.observe(this.#sectionSidebarContext.headline, (value) => (this._headline = value), '_observeHeadline');\r\n\t\t\t} else {\r\n\t\t\t\tthis.removeUmbControllerByAlias('_observeContextMenuIsOpen');\r\n\t\t\t\tthis.removeUmbControllerByAlias('_observeHeadline');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t#observeEntityModel() {\r\n\t\tif (!this.#sectionSidebarContext) {\r\n\t\t\tthis.removeUmbControllerByAlias('_observeEntityModel');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.observe(\r\n\t\t\tobserveMultiple([this.#sectionSidebarContext.unique, this.#sectionSidebarContext.entityType]),\r\n\t\t\t(values) => {\r\n\t\t\t\tthis._unique = values[0];\r\n\t\t\t\tthis._entityType = values[1];\r\n\t\t\t},\r\n\t\t\t'_observeEntityModel',\r\n\t\t);\r\n\t}\r\n\r\n\t#closeContextMenu() {\r\n\t\tthis.#sectionSidebarContext?.closeContextMenu();\r\n\t}\r\n\r\n\t#onActionExecuted(event: CustomEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tthis.#closeContextMenu();\r\n\t}\r\n\r\n\t#setupProxy(target: EventTarget | undefined) {\r\n\t\tnew UmbContextProxyController(this, target, () =>\r\n\t\t\tthis.#sectionSidebarContext?.getContextElement(),\r\n\t\t).setIgnoreContextAliases([UMB_SECTION_SIDEBAR_CONTEXT.contextAlias]);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this.#renderBackdrop()}\r\n\t\t\t<div id=\"relative-wrapper\">\r\n\t\t\t\t<slot></slot>\r\n\t\t\t\t${this.#renderModal()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderBackdrop() {\r\n\t\t// TODO: add keyboard support (close on escape)\r\n\r\n\t\treturn this._isOpen ? html`<div id=\"backdrop\" @click=${this.#closeContextMenu}></div>` : nothing;\r\n\t}\r\n\r\n\t#renderModal() {\r\n\t\treturn this._isOpen && this._unique !== undefined && this._entityType\r\n\t\t\t? html`<uui-scroll-container id=\"action-modal\" ${ref(this.#setupProxy)}>\r\n\t\t\t\t\t${this._headline ? html`<h3>${this.localize.string(this._headline)}</h3>` : nothing}\r\n\t\t\t\t\t<umb-entity-action-list\r\n\t\t\t\t\t\t@action-executed=${this.#onActionExecuted}\r\n\t\t\t\t\t\t.entityType=${this._entityType}\r\n\t\t\t\t\t\t.unique=${this._unique}></umb-entity-action-list>\r\n\t\t\t\t</uui-scroll-container>`\r\n\t\t\t: nothing;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t}\r\n\t\t\t#backdrop {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tinset: 0px;\r\n\t\t\t\tbackground-color: black;\r\n\t\t\t\topacity: 0.5;\r\n\t\t\t\twidth: 100vw;\r\n\t\t\t\theight: 100vh;\r\n\t\t\t\tz-index: -1;\r\n\t\t\t}\r\n\t\t\t#relative-wrapper {\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t\t#action-modal {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tright: calc(var(--umb-section-sidebar-width) * -1);\r\n\t\t\t\twidth: var(--umb-section-sidebar-width);\r\n\t\t\t\tborder: none;\r\n\t\t\t\tborder-left: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-right: 1px solid var(--uui-color-border);\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t}\r\n\r\n\t\t\t#action-modal h3 {\r\n\t\t\t\tpadding: var(--uui-size-4) var(--uui-size-8);\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tmin-height: var(--umb-header-layout-height);\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\t\t\t#action-modal umb-entity-action-list {\r\n\t\t\t\t--uui-menu-item-flat-structure: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-section-sidebar-context-menu': UmbSectionSidebarContextMenuElement;\r\n\t}\r\n}\r\n"],"names":["UMB_SECTION_PICKER_MODAL","UmbModalToken","UMB_SECTION_PATH_PATTERN","UmbPathPattern","UmbSectionPickerInputContext","UmbPickerInputContext","host","UMB_SECTION_ITEM_REPOSITORY_ALIAS","_pickerContext","UmbInputSectionElement","UmbFormControlMixin","UmbLitElement","__privateAdd","__privateGet","selection","selectedItems","value","uniques","selectionString","splitStringToArray","html","item","css","__decorateClass","property","state","customElement","UmbRefSectionElement","UmbElementMixin","UUIRefElement","UmbSectionContext","UmbContextBase","UMB_SECTION_CONTEXT","#manifestAlias","UmbStringState","#manifestPathname","#manifestLabel","#viewContext","UmbViewContext","#createSectionContextExtensions","#sectionContextExtensionController","manifest","sectionLabel","UmbExtensionsApiInitializer","umbExtensionsRegistry","UmbDefaultSectionContext","_api","_UmbDefaultSectionElement_instances","observeRoutes_fn","createRoutes_fn","onSplitPanelChange_fn","UmbDefaultSectionElement","UmbExtensionsElementInitializer","sidebarApps","oldValue","sidebarApp","UMB_MARK_ATTRIBUTE_NAME","__privateMethod","splitPanelPosition","repeat","app","nothing","UmbExtensionsManifestInitializer","sectionRouteExtensions","extensionsWithElement","extension","routes","extensionController","api","createExtensionApi","aliasToPath","createExtensionElement","element","info","event","position","UmbTextStyles","UmbSectionMainElement","UmbSectionSidebarContext","UMB_SECTION_SIDEBAR_CONTEXT","#contextMenuIsOpen","UmbBooleanState","#entityType","#unique","#headline","#contextElement","args","UmbContextToken","UmbSectionSidebarElement","_changedProperties","_sectionSidebarContext","_UmbSectionSidebarContextMenuElement_instances","observeEntityModel_fn","closeContextMenu_fn","onActionExecuted_fn","setupProxy_fn","renderBackdrop_fn","renderModal_fn","UmbSectionSidebarContextMenuElement","instance","__privateSet","observeMultiple","values","target","UmbContextProxyController","ref"],"mappings":"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"}