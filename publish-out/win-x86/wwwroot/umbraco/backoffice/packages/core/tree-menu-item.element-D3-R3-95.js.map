{"version":3,"file":"tree-menu-item.element-D3-R3-95.js","sources":["../../../src/packages/core/tree/tree-menu-item/tree-menu-item.element.ts"],"sourcesContent":["import type { ManifestMenuItemTreeKind } from './types.js';\r\nimport { html, nothing, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_MENU_ITEM_CONTEXT, type UmbMenuItemElement } from '@umbraco-cms/backoffice/menu';\r\nimport {\r\n\tUmbExpansionEntryCollapsedEvent,\r\n\tUmbExpansionEntryExpandedEvent,\r\n\ttype UmbEntityExpansionModel,\r\n} from '@umbraco-cms/backoffice/utils';\r\n\r\n@customElement('umb-menu-item-tree-default')\r\nexport class UmbMenuItemTreeDefaultElement extends UmbLitElement implements UmbMenuItemElement {\r\n\t@property({ type: Object })\r\n\tmanifest?: ManifestMenuItemTreeKind;\r\n\r\n\t@state()\r\n\tprivate _menuItemExpansion: UmbEntityExpansionModel = [];\r\n\r\n\t#menuItemContext?: typeof UMB_MENU_ITEM_CONTEXT.TYPE;\r\n\t#muteStateUpdate = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_MENU_ITEM_CONTEXT, (context) => {\r\n\t\t\tthis.#menuItemContext = context;\r\n\t\t\tthis.#observeExpansion();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeExpansion() {\r\n\t\tthis.observe(this.#menuItemContext?.expansion.expansion, (items) => {\r\n\t\t\tif (this.#muteStateUpdate) return;\r\n\t\t\tthis._menuItemExpansion = items || [];\r\n\t\t});\r\n\t}\r\n\r\n\t#onExpansionChange(event: UmbExpansionEntryExpandedEvent | UmbExpansionEntryCollapsedEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst eventEntry = event.entry;\r\n\r\n\t\tif (!eventEntry) {\r\n\t\t\tthrow new Error('Entry is required to toggle expansion.');\r\n\t\t}\r\n\r\n\t\tif (!this.manifest) {\r\n\t\t\tthrow new Error('Manifest is required to toggle expansion.');\r\n\t\t}\r\n\r\n\t\tif (event.type === UmbExpansionEntryExpandedEvent.TYPE) {\r\n\t\t\tthis.#muteStateUpdate = true;\r\n\t\t\tthis.#menuItemContext?.expansion.expandItem({ ...eventEntry, menuItemAlias: this.manifest.alias });\r\n\t\t\tthis.#muteStateUpdate = false;\r\n\t\t} else if (event.type === UmbExpansionEntryCollapsedEvent.TYPE) {\r\n\t\t\tthis.#muteStateUpdate = true;\r\n\t\t\tthis.#menuItemContext?.expansion.collapseItem({ ...eventEntry, menuItemAlias: this.manifest.alias });\r\n\t\t\tthis.#muteStateUpdate = false;\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn this.manifest\r\n\t\t\t? html`\r\n\t\t\t\t\t<umb-tree\r\n\t\t\t\t\t\talias=${this.manifest?.meta.treeAlias}\r\n\t\t\t\t\t\t.props=${{\r\n\t\t\t\t\t\t\thideTreeRoot: this.manifest?.meta.hideTreeRoot === true,\r\n\t\t\t\t\t\t\tselectionConfiguration: {\r\n\t\t\t\t\t\t\t\tselectable: false,\r\n\t\t\t\t\t\t\t\tmultiple: false,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\texpansion: this._menuItemExpansion,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t@expansion-entry-expanded=${this.#onExpansionChange}\r\n\t\t\t\t\t\t@expansion-entry-collapsed=${this.#onExpansionChange}></umb-tree>\r\n\t\t\t\t`\r\n\t\t\t: nothing;\r\n\t}\r\n}\r\n\r\nexport default UmbMenuItemTreeDefaultElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-menu-item-tree-default': UmbMenuItemTreeDefaultElement;\r\n\t}\r\n}\r\n"],"names":["_menuItemContext","_muteStateUpdate","_UmbMenuItemTreeDefaultElement_instances","observeExpansion_fn","onExpansionChange_fn","UmbMenuItemTreeDefaultElement","UmbLitElement","__privateAdd","UMB_MENU_ITEM_CONTEXT","context","__privateSet","__privateMethod","html","nothing","__privateGet","items","event","eventEntry","UmbExpansionEntryExpandedEvent","UmbExpansionEntryCollapsedEvent","__decorateClass","property","state","customElement","UmbMenuItemTreeDefaultElement$1"],"mappings":";;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAWO,IAAMC,IAAN,cAA4CC,EAA4C;AAAA,EAU9F,cAAc;AACb,UAAA,GAXKC,EAAA,MAAAL,CAAA,GAKN,KAAQ,qBAA8C,CAAA,GAEtDK,EAAA,MAAAP,CAAA,GACAO,EAAA,MAAAN,GAAmB,EAAA,GAKlB,KAAK,eAAeO,GAAuB,CAACC,MAAY;AACvD,MAAAC,EAAA,MAAKV,GAAmBS,CAAA,GACxBE,EAAA,MAAKT,GAAAC,CAAA,EAAL,KAAA,IAAA;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EAgCS,SAAS;AACjB,WAAO,KAAK,WACTS;AAAA;AAAA,cAES,KAAK,UAAU,KAAK,SAAS;AAAA,eAC5B;AAAA,MACR,cAAc,KAAK,UAAU,KAAK,iBAAiB;AAAA,MACnD,wBAAwB;AAAA,QACvB,YAAY;AAAA,QACZ,UAAU;AAAA,MAAA;AAAA,MAEX,WAAW,KAAK;AAAA,IAAA,CAChB;AAAA,kCAC2BD,QAAKT,GAAAE,CAAA,CAAkB;AAAA,mCACtBO,QAAKT,GAAAE,CAAA,CAAkB;AAAA,QAErDS;AAAA,EACJ;AACD;AA5DCb,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AARMC,IAAA,oBAAA,QAAA;AAmBNC,IAAiB,WAAG;AACnB,OAAK,QAAQW,EAAA,MAAKd,CAAA,GAAkB,UAAU,WAAW,CAACe,MAAU;AACnE,IAAID,QAAKb,CAAA,MACT,KAAK,qBAAqBc,KAAS,CAAA;AAAA,EACpC,CAAC;AACF;AAEAX,IAAkB,SAACY,GAAyE;AAC3F,EAAAA,EAAM,gBAAA;AACN,QAAMC,IAAaD,EAAM;AAEzB,MAAI,CAACC;AACJ,UAAM,IAAI,MAAM,wCAAwC;AAGzD,MAAI,CAAC,KAAK;AACT,UAAM,IAAI,MAAM,2CAA2C;AAG5D,EAAID,EAAM,SAASE,EAA+B,QACjDR,EAAA,MAAKT,GAAmB,EAAA,GACxBa,EAAA,MAAKd,CAAA,GAAkB,UAAU,WAAW,EAAE,GAAGiB,GAAY,eAAe,KAAK,SAAS,MAAA,CAAO,GACjGP,EAAA,MAAKT,GAAmB,EAAA,KACde,EAAM,SAASG,EAAgC,SACzDT,EAAA,MAAKT,GAAmB,EAAA,GACxBa,EAAA,MAAKd,CAAA,GAAkB,UAAU,aAAa,EAAE,GAAGiB,GAAY,eAAe,KAAK,SAAS,MAAA,CAAO,GACnGP,EAAA,MAAKT,GAAmB,EAAA;AAE1B;AA7CAmB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAA,CAAQ;AAAA,GADdhB,EAEZ,WAAA,YAAA,CAAA;AAGQe,EAAA;AAAA,EADPE,EAAA;AAAM,GAJKjB,EAKJ,WAAA,sBAAA,CAAA;AALIA,IAANe,EAAA;AAAA,EADNG,EAAc,4BAA4B;AAAA,GAC9BlB,CAAA;AAqEb,MAAAmB,IAAenB;"}