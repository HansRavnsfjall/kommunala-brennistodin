{"version":3,"file":"index.js","sources":["../../../../src/packages/core/tree/components/tree-load-more-button.element.ts","../../../../src/packages/core/tree/data/tree-server-data-source-base.ts","../../../../src/packages/core/tree/data/tree-repository-base.ts","../../../../src/packages/core/tree/data/unique-tree-store.ts","../../../../src/packages/core/tree/folder/workspace/folder-workspace-editor.element.ts","../../../../src/packages/core/tree/tree-item/tree-item.element.ts","../../../../src/packages/core/tree/tree.element.ts"],"sourcesContent":["import { css, customElement, html } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-tree-load-more-button')\r\nexport class UmbTreeLoadMoreButtonElement extends UmbLitElement {\r\n\toverride render() {\r\n\t\treturn html`<uui-button\r\n\t\t\tdata-mark=\"tree:load-more\"\r\n\t\t\tid=\"load-more\"\r\n\t\t\tlook=\"secondary\"\r\n\t\t\t.label=${this.localize.term('actions_loadMore')}></uui-button>`;\r\n\t}\r\n\r\n\tstatic override readonly styles = css`\r\n\t\t:host {\r\n\t\t\tposition: relative;\r\n\t\t\tdisplay: block;\r\n\t\t\tpadding-left: var(--uui-size-space-3);\r\n\t\t\tmargin-right: var(--uui-size-space-2);\r\n\t\t\tmargin-bottom: var(--uui-size-layout-2);\r\n\t\t\tmargin-left: calc(var(--uui-menu-item-indent, 0) * var(--uui-size-4));\r\n\t\t}\r\n\t\tuui-button {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: var(--uui-size---uui-size-layout-3);\r\n\t\t\t--uui-box-border-radius: calc(var(--uui-border-radius) * 2);\r\n\t\t}\r\n\t`;\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tree-load-more-button': UmbTreeLoadMoreButtonElement;\r\n\t}\r\n}\r\n","import type { UmbTreeItemModelBase, UmbTreeItemModel } from '../types.js';\r\nimport type { UmbTreeDataSource } from './tree-data-source.interface.js';\r\nimport type {\r\n\tUmbTreeAncestorsOfRequestArgs,\r\n\tUmbTreeChildrenOfRequestArgs,\r\n\tUmbTreeRootItemsRequestArgs,\r\n} from './types.js';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbDataSourceResponse, UmbPagedModel } from '@umbraco-cms/backoffice/repository';\r\n\r\nexport interface UmbTreeServerDataSourceBaseArgs<\r\n\tServerTreeItemType extends { hasChildren: boolean },\r\n\tClientTreeItemType extends UmbTreeItemModelBase,\r\n\tTreeRootItemsRequestArgsType extends UmbTreeRootItemsRequestArgs = UmbTreeRootItemsRequestArgs,\r\n\tTreeChildrenOfRequestArgsType extends UmbTreeChildrenOfRequestArgs = UmbTreeChildrenOfRequestArgs,\r\n\tTreeAncestorsOfRequestArgsType extends UmbTreeAncestorsOfRequestArgs = UmbTreeAncestorsOfRequestArgs,\r\n> {\r\n\tgetRootItems: (\r\n\t\targs: TreeRootItemsRequestArgsType,\r\n\t) => Promise<UmbDataSourceResponse<UmbPagedModel<ServerTreeItemType>>>;\r\n\tgetChildrenOf: (\r\n\t\targs: TreeChildrenOfRequestArgsType,\r\n\t) => Promise<UmbDataSourceResponse<UmbPagedModel<ServerTreeItemType>>>;\r\n\tgetAncestorsOf: (args: TreeAncestorsOfRequestArgsType) => Promise<UmbDataSourceResponse<Array<ServerTreeItemType>>>;\r\n\tmapper: (item: ServerTreeItemType) => ClientTreeItemType;\r\n}\r\n\r\n/**\r\n * A data source for a tree that fetches data from the server\r\n * @class UmbTreeServerDataSourceBase\r\n * @implements {UmbTreeDataSource}\r\n */\r\nexport abstract class UmbTreeServerDataSourceBase<\r\n\tServerTreeItemType extends { hasChildren: boolean },\r\n\tClientTreeItemType extends UmbTreeItemModel,\r\n\tTreeRootItemsRequestArgsType extends UmbTreeRootItemsRequestArgs = UmbTreeRootItemsRequestArgs,\r\n\tTreeChildrenOfRequestArgsType extends UmbTreeChildrenOfRequestArgs = UmbTreeChildrenOfRequestArgs,\r\n\tTreeAncestorsOfRequestArgsType extends UmbTreeAncestorsOfRequestArgs = UmbTreeAncestorsOfRequestArgs,\r\n> implements\r\n\t\tUmbTreeDataSource<\r\n\t\t\tClientTreeItemType,\r\n\t\t\tTreeRootItemsRequestArgsType,\r\n\t\t\tTreeChildrenOfRequestArgsType,\r\n\t\t\tTreeAncestorsOfRequestArgsType\r\n\t\t>\r\n{\r\n\t#host;\r\n\t#getRootItems;\r\n\t#getChildrenOf;\r\n\t#getAncestorsOf;\r\n\t#mapper;\r\n\r\n\t/**\r\n\t * Creates an instance of UmbTreeServerDataSourceBase.\r\n\t * @param {UmbControllerHost} host - The controller host for this controller to be appended to\r\n\t * @param args\r\n\t * @memberof UmbTreeServerDataSourceBase\r\n\t */\r\n\tconstructor(\r\n\t\thost: UmbControllerHost,\r\n\t\targs: UmbTreeServerDataSourceBaseArgs<\r\n\t\t\tServerTreeItemType,\r\n\t\t\tClientTreeItemType,\r\n\t\t\tTreeRootItemsRequestArgsType,\r\n\t\t\tTreeChildrenOfRequestArgsType,\r\n\t\t\tTreeAncestorsOfRequestArgsType\r\n\t\t>,\r\n\t) {\r\n\t\tthis.#host = host;\r\n\t\tthis.#getRootItems = args.getRootItems;\r\n\t\tthis.#getChildrenOf = args.getChildrenOf;\r\n\t\tthis.#getAncestorsOf = args.getAncestorsOf;\r\n\t\tthis.#mapper = args.mapper;\r\n\t}\r\n\r\n\t/**\r\n\t * Fetches the root items for the tree from the server\r\n\t * @param {UmbTreeRootItemsRequestArgs} args\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeServerDataSourceBase\r\n\t */\r\n\tasync getRootItems(args: TreeRootItemsRequestArgsType) {\r\n\t\tconst { data, error } = await tryExecute(this.#host, this.#getRootItems(args));\r\n\r\n\t\tif (data) {\r\n\t\t\tconst items = data?.items.map((item) => this.#mapper(item));\r\n\t\t\treturn { data: { total: data.total, items } };\r\n\t\t}\r\n\r\n\t\treturn { error };\r\n\t}\r\n\r\n\t/**\r\n\t * Fetches the children of a given parent unique from the server\r\n\t * @param {UmbTreeChildrenOfRequestArgs} args\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeServerDataSourceBase\r\n\t */\r\n\tasync getChildrenOf(args: TreeChildrenOfRequestArgsType) {\r\n\t\tif (args.parent.unique === undefined) throw new Error('Parent unique is missing');\r\n\r\n\t\tconst { data, error } = await tryExecute(this.#host, this.#getChildrenOf(args));\r\n\r\n\t\tif (data) {\r\n\t\t\tconst items = data?.items.map((item: ServerTreeItemType) => this.#mapper(item));\r\n\t\t\treturn { data: { total: data.total, items } };\r\n\t\t}\r\n\r\n\t\treturn { error };\r\n\t}\r\n\r\n\t/**\r\n\t * Fetches the ancestors of a given item from the server\r\n\t * @param {UmbTreeAncestorsOfRequestArgs} args\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeServerDataSourceBase\r\n\t */\r\n\tasync getAncestorsOf(args: TreeAncestorsOfRequestArgsType) {\r\n\t\tif (!args.treeItem.entityType) throw new Error('Parent unique is missing');\r\n\r\n\t\tconst { data, error } = await tryExecute(this.#host, this.#getAncestorsOf(args));\r\n\r\n\t\tif (data) {\r\n\t\t\tconst items = data?.map((item: ServerTreeItemType) => this.#mapper(item));\r\n\t\t\treturn { data: items };\r\n\t\t}\r\n\r\n\t\treturn { error };\r\n\t}\r\n}\r\n","import type { UmbTreeItemModel, UmbTreeRootModel } from '../types.js';\r\nimport type { UmbTreeStore } from './tree-store.interface.js';\r\nimport type { UmbTreeRepository } from './tree-repository.interface.js';\r\nimport type { UmbTreeDataSource, UmbTreeDataSourceConstructor } from './tree-data-source.interface.js';\r\nimport type {\r\n\tUmbTreeAncestorsOfRequestArgs,\r\n\tUmbTreeChildrenOfRequestArgs,\r\n\tUmbTreeRootItemsRequestArgs,\r\n} from './types.js';\r\nimport { UmbRepositoryBase, type UmbRepositoryResponse } from '@umbraco-cms/backoffice/repository';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbApi } from '@umbraco-cms/backoffice/extension-api';\r\nimport type { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\nimport { of } from '@umbraco-cms/backoffice/external/rxjs';\r\nimport { UmbDeprecation } from '@umbraco-cms/backoffice/utils';\r\n\r\n/**\r\n * Base class for a tree repository.\r\n * @abstract\r\n * @class UmbTreeRepositoryBase\r\n * @augments {UmbRepositoryBase}\r\n * @implements {UmbTreeRepository}\r\n * @implements {UmbApi}\r\n * @template TreeItemType\r\n * @template TreeRootType\r\n */\r\nexport abstract class UmbTreeRepositoryBase<\r\n\t\tTreeItemType extends UmbTreeItemModel,\r\n\t\tTreeRootType extends UmbTreeRootModel,\r\n\t\tTreeRootItemsRequestArgsType extends UmbTreeRootItemsRequestArgs = UmbTreeRootItemsRequestArgs,\r\n\t\tTreeChildrenOfRequestArgsType extends UmbTreeChildrenOfRequestArgs = UmbTreeChildrenOfRequestArgs,\r\n\t\tTreeAncestorsOfRequestArgsType extends UmbTreeAncestorsOfRequestArgs = UmbTreeAncestorsOfRequestArgs,\r\n\t>\r\n\textends UmbRepositoryBase\r\n\timplements\r\n\t\tUmbTreeRepository<\r\n\t\t\tTreeItemType,\r\n\t\t\tTreeRootType,\r\n\t\t\tTreeRootItemsRequestArgsType,\r\n\t\t\tTreeChildrenOfRequestArgsType,\r\n\t\t\tTreeAncestorsOfRequestArgsType\r\n\t\t>,\r\n\t\tUmbApi\r\n{\r\n\tprotected _init: Promise<unknown>;\r\n\tprotected _treeStore?: UmbTreeStore<TreeItemType>;\r\n\tprotected _treeSource: UmbTreeDataSource<TreeItemType>;\r\n\r\n\t/**\r\n\t * Creates an instance of UmbTreeRepositoryBase.\r\n\t * @param {UmbControllerHost} host - The controller host for this controller to be appended to\r\n\t * @param {UmbTreeDataSourceConstructor<TreeItemType>} treeSourceConstructor - The constructor for the tree data source\r\n\t * @param {(string | UmbContextToken<any, any> | undefined)} treeStoreContextAlias - The context alias for the tree store, if any\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t */\r\n\tconstructor(\r\n\t\thost: UmbControllerHost,\r\n\t\ttreeSourceConstructor: UmbTreeDataSourceConstructor<TreeItemType>,\r\n\t\ttreeStoreContextAlias?: string | UmbContextToken<any, any>,\r\n\t) {\r\n\t\tsuper(host);\r\n\t\tthis._treeSource = new treeSourceConstructor(this);\r\n\r\n\t\tif (treeStoreContextAlias) {\r\n\t\t\tif (false === treeStoreContextAlias.toString().startsWith('Umb')) {\r\n\t\t\t\tnew UmbDeprecation({\r\n\t\t\t\t\tdeprecated: `TreeRepository \"${this.constructor.name}\" is using a tree store context with alias \"${treeStoreContextAlias.toString()}\".`,\r\n\t\t\t\t\tremoveInVersion: '18.0.0',\r\n\t\t\t\t\tsolution:\r\n\t\t\t\t\t\t'You do not need to supply a tree store context alias, as the tree repository will be queried each time it is needed.',\r\n\t\t\t\t}).warn();\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: Remember to remove this in Umbraco 18, as the tree store will not be available in the repository anymore.\r\n\t\t\tthis._init = this.consumeContext(treeStoreContextAlias, (instance) => {\r\n\t\t\t\tthis._treeStore = instance;\r\n\t\t\t})\r\n\t\t\t\t.asPromise({ preventTimeout: true })\r\n\t\t\t\t// Ignore the error, we can assume that the flow was stopped (asPromise failed), but it does not mean that the consumption was not successful.\r\n\t\t\t\t.catch(() => undefined);\r\n\t\t} else {\r\n\t\t\tthis._init = Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Request the tree root item\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t */\r\n\tabstract requestTreeRoot(): Promise<UmbRepositoryResponse<TreeRootType>>;\r\n\r\n\t/**\r\n\t * Requests root items of a tree\r\n\t * @param args\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t */\r\n\tasync requestTreeRootItems(args: TreeRootItemsRequestArgsType) {\r\n\t\tawait this._init;\r\n\r\n\t\tconst { data, error } = await this._treeSource.getRootItems(args);\r\n\r\n\t\tif (!this._treeStore) {\r\n\t\t\t// If the tree store is not available, then we most likely are in a destructed setting.\r\n\t\t\treturn {\r\n\t\t\t\tdata,\r\n\t\t\t\terror,\r\n\t\t\t\t// Return an observable that does not emit any items, since the store is not available\r\n\t\t\t\tasObservable: () => undefined,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._treeStore.appendItems(data.items);\r\n\t\t}\r\n\r\n\t\treturn { data, error, asObservable: () => this._treeStore?.rootItems };\r\n\t}\r\n\r\n\t/**\r\n\t * Requests tree items of a given parent\r\n\t * @param {(string | null)} parentUnique\r\n\t * @param args\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t */\r\n\tasync requestTreeItemsOf(args: TreeChildrenOfRequestArgsType) {\r\n\t\tif (!args.parent) throw new Error('Parent is missing');\r\n\t\tif (args.parent.unique === undefined) throw new Error('Parent unique is missing');\r\n\t\tif (args.parent.entityType === null) throw new Error('Parent entity type is missing');\r\n\t\tawait this._init;\r\n\r\n\t\tconst { data, error } = await this._treeSource.getChildrenOf(args);\r\n\r\n\t\tif (!this._treeStore) {\r\n\t\t\t// If the tree store is not available, then we most likely are in a destructed setting.\r\n\t\t\treturn {\r\n\t\t\t\tdata,\r\n\t\t\t\terror,\r\n\t\t\t\t// Return an observable that does not emit any items, since the store is not available\r\n\t\t\t\tasObservable: () => undefined,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._treeStore.appendItems(data.items);\r\n\t\t}\r\n\r\n\t\treturn { data, error, asObservable: () => this._treeStore?.childrenOf(args.parent.unique) };\r\n\t}\r\n\r\n\t/**\r\n\t * Requests ancestors of a given item\r\n\t * @param {UmbTreeAncestorsOfRequestArgs} args\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t */\r\n\tasync requestTreeItemAncestors(args: TreeAncestorsOfRequestArgsType) {\r\n\t\tif (args.treeItem.unique === undefined) throw new Error('Descendant unique is missing');\r\n\t\tawait this._init;\r\n\r\n\t\tconst { data, error } = await this._treeSource.getAncestorsOf(args);\r\n\r\n\t\t// TODO: implement observable for ancestor items in the store\r\n\t\t// TODO: Fix the type of error, it should be UmbApiError, but currently it is any.\r\n\t\treturn { data, error: error as any };\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a promise with an observable of tree root items\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t * @deprecated Use `requestTreeRootItems` instead. This method requires the tree store to be available, which is not always the case. It will be removed in Umbraco 18.\r\n\t */\r\n\tasync rootTreeItems() {\r\n\t\tawait this._init;\r\n\r\n\t\treturn this._treeStore?.rootItems ?? of([]);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a promise with an observable of children items of a given parent\r\n\t * @param {(string | null)} parentUnique\r\n\t * @returns {*}\r\n\t * @memberof UmbTreeRepositoryBase\r\n\t * @deprecated Use `requestTreeItemsOf` instead. This method requires the tree store to be available, which is not always the case. It will be removed in Umbraco 18.\r\n\t */\r\n\tasync treeItemsOf(parentUnique: string | null) {\r\n\t\tif (parentUnique === undefined) throw new Error('Parent unique is missing');\r\n\t\tawait this._init;\r\n\r\n\t\treturn this._treeStore?.childrenOf(parentUnique) ?? of([]);\r\n\t}\r\n}\r\n","import type { UmbTreeItemModel } from '../types.js';\r\nimport type { UmbTreeStore } from './tree-store.interface.js';\r\nimport { UmbStoreBase } from '@umbraco-cms/backoffice/store';\r\nimport { UmbArrayState } from '@umbraco-cms/backoffice/observable-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\n// TODO: remove Unique from name when we have switched to uniques\r\n/**\r\n * @class UmbUniqueTreeStore\r\n * @augments {UmbStoreBase}\r\n * @description - Entity Tree Store\r\n */\r\nexport class UmbUniqueTreeStore extends UmbStoreBase<UmbTreeItemModel> implements UmbTreeStore<UmbTreeItemModel> {\r\n\tconstructor(host: UmbControllerHost, storeAlias: string) {\r\n\t\tsuper(host, storeAlias, new UmbArrayState<UmbTreeItemModel>([], (x) => x.unique));\r\n\t}\r\n\r\n\t/**\r\n\t * An observable to observe the root items\r\n\t * @memberof UmbUniqueTreeStore\r\n\t */\r\n\trootItems = this._data.asObservablePart((items) => items.filter((item) => item.parent.unique === null));\r\n\r\n\t/**\r\n\t * Returns an observable to observe the children of a given parent\r\n\t * @param {(string | null)} parentUnique\r\n\t * @returns {*}\r\n\t * @memberof UmbUniqueTreeStore\r\n\t */\r\n\tchildrenOf(parentUnique: string | null) {\r\n\t\treturn this._data.asObservablePart((items) => items.filter((item) => item.parent.unique === parentUnique));\r\n\t}\r\n}\r\n","import { html, customElement, css } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n@customElement('umb-folder-workspace-editor')\r\nexport class UmbFolderWorkspaceEditorElement extends UmbLitElement {\r\n\toverride render() {\r\n\t\treturn html`<umb-workspace-editor>\r\n\t\t\t<umb-icon id=\"icon\" slot=\"header\" name=\"icon-folder\"></umb-icon>\r\n\t\t\t<umb-workspace-header-name-editable slot=\"header\"></umb-workspace-header-name-editable>\r\n\t\t</umb-workspace-editor>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#icon {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tfont-size: var(--uui-size-6);\r\n\t\t\t\tmargin-right: var(--uui-size-space-4);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t['umb-folder-workspace-editor']: UmbFolderWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import type { ManifestTreeItem } from '../extensions/types.js';\r\nimport { customElement, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport {\r\n\tUmbExtensionElementAndApiSlotElementBase,\r\n\tumbExtensionsRegistry,\r\n} from '@umbraco-cms/backoffice/extension-registry';\r\nimport { createObservablePart } from '@umbraco-cms/backoffice/observable-api';\r\n\r\n@customElement('umb-tree-item')\r\nexport class UmbTreeItemElement extends UmbExtensionElementAndApiSlotElementBase<ManifestTreeItem> {\r\n\t@property({ type: String, reflect: true })\r\n\tget entityType() {\r\n\t\treturn this.#entityType;\r\n\t}\r\n\tset entityType(newVal) {\r\n\t\tthis.#entityType = newVal;\r\n\t\tthis.#observeEntityType();\r\n\t}\r\n\t#entityType?: string;\r\n\r\n\t#observeEntityType() {\r\n\t\tif (!this.#entityType) return;\r\n\r\n\t\tconst filterByEntityType = (manifest: ManifestTreeItem) => {\r\n\t\t\tif (!this.#entityType) return false;\r\n\t\t\treturn manifest.forEntityTypes.includes(this.#entityType);\r\n\t\t};\r\n\r\n\t\tthis.observe(\r\n\t\t\t// TODO: what should we do if there are multiple tree items for an entity type?\r\n\t\t\t// This method gets all extensions based on a type, then filters them based on the entity type. and then we get the alias of the first one [NL]\r\n\t\t\tcreateObservablePart(\r\n\t\t\t\tumbExtensionsRegistry.byTypeAndFilter(this.getExtensionType(), filterByEntityType),\r\n\t\t\t\t(x) => x[0]?.alias,\r\n\t\t\t),\r\n\t\t\t(alias) => {\r\n\t\t\t\tthis.alias = alias;\r\n\t\t\t},\r\n\t\t\t'umbObserveAlias',\r\n\t\t);\r\n\t}\r\n\r\n\tgetExtensionType() {\r\n\t\treturn 'treeItem';\r\n\t}\r\n\r\n\tgetDefaultElementName() {\r\n\t\treturn 'umb-default-tree-item';\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tree-item': UmbTreeItemElement;\r\n\t}\r\n}\r\n","import type { ManifestTree } from './extensions/types.js';\r\nimport { customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbExtensionElementAndApiSlotElementBase } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n@customElement('umb-tree')\r\nexport class UmbTreeElement extends UmbExtensionElementAndApiSlotElementBase<ManifestTree> {\r\n\tgetExtensionType() {\r\n\t\treturn 'tree';\r\n\t}\r\n\r\n\tgetDefaultElementName() {\r\n\t\treturn 'umb-default-tree';\r\n\t}\r\n\r\n\tgetSelection() {\r\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t// @ts-ignore\r\n\t\t// TODO: make base interface for a tree element\r\n\t\treturn this._element?.getSelection?.() ?? [];\r\n\t}\r\n\r\n\tgetExpansion() {\r\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t// @ts-ignore\r\n\t\t// TODO: make base interface for a tree element\r\n\t\treturn this._element?.getExpansion?.() ?? [];\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tree': UmbTreeElement;\r\n\t}\r\n}\r\n"],"names":["UmbTreeLoadMoreButtonElement","UmbLitElement","html","css","__decorateClass","customElement","UmbTreeServerDataSourceBase","#host","#getRootItems","#getChildrenOf","#getAncestorsOf","#mapper","host","args","data","error","tryExecute","items","item","UmbTreeRepositoryBase","UmbRepositoryBase","treeSourceConstructor","treeStoreContextAlias","UmbDeprecation","instance","of","parentUnique","UmbUniqueTreeStore","UmbStoreBase","storeAlias","UmbArrayState","x","UmbFolderWorkspaceEditorElement","UmbTextStyles","_entityType","_UmbTreeItemElement_instances","observeEntityType_fn","UmbTreeItemElement","UmbExtensionElementAndApiSlotElementBase","__privateAdd","__privateGet","newVal","__privateSet","__privateMethod","filterByEntityType","manifest","createObservablePart","umbExtensionsRegistry","alias","property","UmbTreeElement"],"mappings":"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"}