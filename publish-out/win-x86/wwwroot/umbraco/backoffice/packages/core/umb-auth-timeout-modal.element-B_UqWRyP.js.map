{"version":3,"file":"umb-auth-timeout-modal.element-B_UqWRyP.js","sources":["../../../src/packages/core/auth/modals/umb-auth-timeout-modal.element.ts"],"sourcesContent":["import type { UmbModalAuthTimeoutConfig } from './umb-auth-timeout-modal.token.js';\r\nimport { css, customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n@customElement('umb-auth-timeout-modal')\r\nexport class UmbAuthTimeoutModalElement extends UmbModalBaseElement<UmbModalAuthTimeoutConfig, never> {\r\n\t@state()\r\n\tprivate _remainingTimeInSeconds = 60;\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n\t#interval?: any;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis.#startCountdown();\r\n\t}\r\n\r\n\toverride disconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tif (this.#interval) {\r\n\t\t\tclearInterval(this.#interval);\r\n\t\t}\r\n\t}\r\n\r\n\t#startCountdown() {\r\n\t\tthis._remainingTimeInSeconds = this.data?.remainingTimeInSeconds ?? 60;\r\n\t\tthis.#interval = setInterval(() => {\r\n\t\t\tif (this._remainingTimeInSeconds > 0) {\r\n\t\t\t\tthis._remainingTimeInSeconds--;\r\n\t\t\t} else {\r\n\t\t\t\tclearInterval(this.#interval);\r\n\t\t\t\tthis.#handleLogout();\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\t#handleLogout() {\r\n\t\tthis.data?.onLogout?.();\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#handleConfirm() {\r\n\t\tthis.data?.onContinue?.();\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-dialog-layout class=\"uui-text\" .headline=${this.localize.term('timeout_warningHeadline')}>\r\n\t\t\t\t<umb-localize key=\"timeout_warningText\" .args=${[this._remainingTimeInSeconds]}>\r\n\t\t\t\t\tYour session is about to expire and you will be logged out in\r\n\t\t\t\t\t<strong>${this._remainingTimeInSeconds} seconds</strong>.\r\n\t\t\t\t</umb-localize>\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\tlabel=${this.localize.term('timeout_warningLogoutAction')}\r\n\t\t\t\t\t@click=${this.#handleLogout}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"confirm\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tlabel=${this.localize.term('timeout_warningContinueAction')}\r\n\t\t\t\t\t@click=${this.#handleConfirm}\r\n\t\t\t\t\t${umbFocus()}></uui-button>\r\n\t\t\t</uui-dialog-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-dialog-layout {\r\n\t\t\t\tmax-inline-size: 60ch;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbAuthTimeoutModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-auth-timeout-modal': UmbAuthTimeoutModalElement;\r\n\t}\r\n}\r\n"],"names":["_interval","_UmbAuthTimeoutModalElement_instances","startCountdown_fn","handleLogout_fn","handleConfirm_fn","UmbAuthTimeoutModalElement","UmbModalBaseElement","__privateAdd","__privateMethod","__privateGet","html","umbFocus","__privateSet","UmbTextStyles","css","__decorateClass","state","customElement","UmbAuthTimeoutModalElement$1"],"mappings":";;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAOO,IAAMC,IAAN,cAAyCC,EAAsD;AAAA,EAA/F,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAN,CAAA,GAEN,KAAQ,0BAA0B,IAGlCM,EAAA,MAAAP,CAAA;AAAA,EAAA;AAAA,EAES,oBAAoB;AAC5B,UAAM,kBAAA,GACNQ,EAAA,MAAKP,GAAAC,CAAA,EAAL,KAAA,IAAA;AAAA,EACD;AAAA,EAES,uBAAuB;AAC/B,UAAM,qBAAA,GACFO,QAAKT,CAAA,KACR,cAAcS,QAAKT,CAAA,CAAS;AAAA,EAE9B;AAAA,EAwBS,SAAS;AACjB,WAAOU;AAAA,mDAC0C,KAAK,SAAS,KAAK,yBAAyB,CAAC;AAAA,oDAC5C,CAAC,KAAK,uBAAuB,CAAC;AAAA;AAAA,eAEnE,KAAK,uBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAM9B,KAAK,SAAS,KAAK,6BAA6B,CAAC;AAAA,cAChDF,QAAKP,GAAAE,CAAA,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAMnB,KAAK,SAAS,KAAK,+BAA+B,CAAC;AAAA,cAClDK,QAAKP,GAAAG,CAAA,CAAc;AAAA,OAC1BO,GAAU;AAAA;AAAA;AAAA,EAGhB;AAUD;AArECX,IAAA,oBAAA,QAAA;AALMC,IAAA,oBAAA,QAAA;AAmBNC,IAAe,WAAG;AACjB,OAAK,0BAA0B,KAAK,MAAM,0BAA0B,IACpEU,EAAA,MAAKZ,GAAY,YAAY,MAAM;AAClC,IAAI,KAAK,0BAA0B,IAClC,KAAK,6BAEL,cAAcS,QAAKT,CAAA,CAAS,GAC5BQ,EAAA,MAAKP,GAAAE,CAAA,EAAL,KAAA,IAAA;AAAA,EAEF,GAAG,GAAI,CAAA;AACR;AAEAA,IAAa,WAAG;AACf,OAAK,MAAM,WAAA,GACX,KAAK,cAAc,OAAA;AACpB;AAEAC,IAAc,WAAG;AAChB,OAAK,MAAM,aAAA,GACX,KAAK,cAAc,OAAA;AACpB;AAvCYC,EAkEa,SAAS;AAAA,EACjCQ;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AAvEQC,EAAA;AAAA,EADPC,EAAA;AAAM,GADKX,EAEJ,WAAA,2BAAA,CAAA;AAFIA,IAANU,EAAA;AAAA,EADNE,EAAc,wBAAwB;AAAA,GAC1BZ,CAAA;AA4Eb,MAAAa,IAAeb;"}