{"version":3,"file":"unsupported-property.element-B5lv0dQj.js","sources":["../../../src/packages/core/property/components/property-layout/property-layout.element.ts","../../../src/packages/core/property/property-dataset/property-dataset-context.token.ts","../../../src/packages/core/property/property-dataset/nameable-property-dataset-context.token.ts","../../../src/packages/core/property/property-dataset/property-dataset-base-context.ts","../../../src/packages/core/property/property-dataset/property-dataset.element.ts","../../../src/packages/core/property/components/property/property.context.ts","../../../src/packages/core/property/components/property/property.element.ts","../../../src/packages/core/property/components/unsupported-property/unsupported-property.element.ts"],"sourcesContent":["import { css, customElement, html, property, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\nimport '@umbraco-cms/backoffice/ufm';\r\n\r\n/**\r\n *  @element umb-property-layout\r\n *  @description - Element for displaying a property in an workspace.\r\n *  @slot editor - Slot for rendering the Property Editor\r\n *  @slot description - Slot for rendering things below the label.\r\n *  @slot action-menu - Slot for rendering the Property Action Menu\r\n */\r\n@customElement('umb-property-layout')\r\nexport class UmbPropertyLayoutElement extends UmbLitElement {\r\n\t/**\r\n\t * Alias. The technical name of the property.\r\n\t * @type {string}\r\n\t * @attr\r\n\t * @default ''\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic alias = '';\r\n\r\n\t/**\r\n\t * Label. Name of the property.\r\n\t * @type {string}\r\n\t * @attr\r\n\t * @default ''\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic label = '';\r\n\r\n\t/**\r\n\t * Orientation: Horizontal is the default where label goes left and editor right.\r\n\t * Vertical is where label goes above the editor.\r\n\t * @enum ['horizontal', 'vertical']\r\n\t * @attr\r\n\t * @default ''\r\n\t */\r\n\t@property({ type: String, reflect: true })\r\n\tpublic orientation: 'horizontal' | 'vertical' = 'horizontal';\r\n\r\n\t/**\r\n\t * Description: render a description underneath the label.\r\n\t * @type {string}\r\n\t * @attr\r\n\t * @default ''\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic description = '';\r\n\r\n\t/**\r\n\t * @description Make the property appear invalid.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default undefined\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\tpublic invalid?: boolean;\r\n\r\n\t/**\r\n\t * @description Display a mandatory indicator.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\tpublic mandatory?: boolean;\r\n\r\n\toverride render() {\r\n\t\t// TODO: Only show alias on label if user has access to DocumentType within settings:\r\n\t\treturn html`\r\n\t\t\t<div id=\"headerColumn\">\r\n\t\t\t\t<uui-label id=\"label\" title=${this.alias} ?required=${this.mandatory}>\r\n\t\t\t\t\t${this.localize.string(this.label)}\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\tthis.invalid,\r\n\t\t\t\t\t\t() => html`<div id=\"invalid-badge\"><uui-badge color=\"invalid\" attention>!</uui-badge></div>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</uui-label>\r\n\t\t\t\t<slot name=\"action-menu\"></slot>\r\n\t\t\t\t${this.#renderDescription()}\r\n\t\t\t\t<slot name=\"description\"></slot>\r\n\t\t\t</div>\r\n\t\t\t<div id=\"editorColumn\">\r\n\t\t\t\t<umb-form-validation-message>\r\n\t\t\t\t\t<slot name=\"editor\"></slot>\r\n\t\t\t\t</umb-form-validation-message>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDescription() {\r\n\t\tif (!this.description) return;\r\n\t\tconst ufmValue = { alias: this.alias, label: this.label, description: this.description };\r\n\t\treturn html`<umb-ufm-render id=\"description\" .markdown=${this.description} .value=${ufmValue}></umb-ufm-render>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgrid-template-columns: 200px minmax(0, 1fr);\r\n\t\t\t\tcolumn-gap: var(--uui-size-layout-2);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-divider);\r\n\t\t\t\tpadding: var(--uui-size-layout-1) 0;\r\n\t\t\t}\r\n\r\n\t\t\t:host(:last-of-type) {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t:host > div {\r\n\t\t\t\tgrid-column: span 2;\r\n\t\t\t}\r\n\t\t\t/*@container (width > 600px) {*/\r\n\t\t\t:host(:not([orientation='vertical'])) > div {\r\n\t\t\t\tgrid-column: span 1;\r\n\t\t\t}\r\n\t\t\t/*}*/\r\n\r\n\t\t\t#headerColumn {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\theight: min-content;\r\n\t\t\t\ttop: var(--umb-property-layout-header-top);\r\n\t\t\t}\r\n\t\t\t/*@container (width > 600px) {*/\r\n\t\t\t:host(:not([orientation='vertical'])) #headerColumn {\r\n\t\t\t\tposition: sticky;\r\n\t\t\t\ttop: var(--umb-property-layout-header-top, calc(var(--uui-size-space-2) * -1));\r\n\t\t\t}\r\n\t\t\t/*}*/\r\n\r\n\t\t\t:host {\r\n\t\t\t\t/* TODO: Temp solution to not get a yellow asterisk when invalid. */\r\n\t\t\t\t--umb-temp-uui-color-invalid: var(--uui-color-invalid);\r\n\t\t\t}\r\n\r\n\t\t\t#label {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tword-break: break-word;\r\n\t\t\t\t/* TODO: Temp solution to not get a yellow asterisk when invalid. */\r\n\t\t\t\t--uui-color-invalid: var(--uui-color-danger);\r\n\t\t\t}\r\n\t\t\t#invalid-badge {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\twidth: 18px;\r\n\t\t\t\theight: 1em;\r\n\t\t\t\tmargin-right: 6px;\r\n\t\t\t}\r\n\t\t\tuui-badge {\r\n\t\t\t\t//height: var(--uui-color-invalid);\r\n\t\t\t\tbackground-color: var(--umb-temp-uui-color-invalid);\r\n\t\t\t\tcolor: var(--uui-color-invalid-contrast);\r\n\t\t\t}\r\n\r\n\t\t\t#description {\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\r\n\t\t\t#editorColumn {\r\n\t\t\t\tmargin-top: var(--uui-size-space-3);\r\n\t\t\t}\r\n\t\t\t/*@container (width > 600px) {*/\r\n\t\t\t:host(:not([orientation='vertical'])) #editorColumn {\r\n\t\t\t\tmargin-top: 0;\r\n\t\t\t}\r\n\t\t\t/*}*/\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-layout': UmbPropertyLayoutElement;\r\n\t}\r\n}\r\n","import type { UmbPropertyDatasetContext } from './property-dataset-context.interface.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const UMB_PROPERTY_DATASET_CONTEXT = new UmbContextToken<UmbPropertyDatasetContext>('UmbPropertyDatasetContext');\r\n","import type { UmbPropertyDatasetContext } from './property-dataset-context.interface.js';\r\nimport type { UmbNameablePropertyDatasetContext } from './nameable-property-dataset-context.interface.js';\r\nimport { UMB_PROPERTY_DATASET_CONTEXT } from './property-dataset-context.token.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const isNameablePropertyDatasetContext = (\r\n\tcontext: UmbPropertyDatasetContext,\r\n): context is UmbNameablePropertyDatasetContext => 'setName' in context;\r\n\r\nexport const UMB_NAMEABLE_PROPERTY_DATASET_CONTEXT = new UmbContextToken<\r\n\tUmbPropertyDatasetContext,\r\n\tUmbNameablePropertyDatasetContext\r\n>(UMB_PROPERTY_DATASET_CONTEXT.toString(), undefined, isNameablePropertyDatasetContext);\r\n","import type { UmbPropertyValueData } from '../types/property-value-data.type.js';\r\nimport { UMB_PROPERTY_DATASET_CONTEXT } from './property-dataset-context.token.js';\r\nimport type { UmbPropertyDatasetContext } from './property-dataset-context.interface.js';\r\nimport type { UmbNameablePropertyDatasetContext } from './nameable-property-dataset-context.interface.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { UmbArrayState, UmbBooleanState, UmbStringState } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbVariantContext, UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\n\r\n/**\r\n * A base property dataset context implementation.\r\n * @class UmbPropertyDatasetContextBase\r\n * @augments {UmbContextBase}\r\n */\r\nexport class UmbPropertyDatasetContextBase\r\n\textends UmbContextBase\r\n\timplements UmbPropertyDatasetContext, UmbNameablePropertyDatasetContext\r\n{\r\n\t#name = new UmbStringState(undefined);\r\n\tname = this.#name.asObservable();\r\n\r\n\t#properties = new UmbArrayState<UmbPropertyValueData>([], (x) => x.alias);\r\n\tpublic readonly properties = this.#properties.asObservable();\r\n\t/**\r\n\t * @deprecated - use `properties` instead.\r\n\t */\r\n\treadonly values = this.properties;\r\n\r\n\tprivate _entityType!: string;\r\n\tprivate _unique!: string;\r\n\r\n\t#readOnly = new UmbBooleanState(false);\r\n\tpublic readOnly = this.#readOnly.asObservable();\r\n\r\n\t#variantId: UmbVariantId = UmbVariantId.CreateInvariant();\r\n\t#variantContext = new UmbVariantContext(this).inherit();\r\n\r\n\tgetEntityType() {\r\n\t\treturn this._entityType;\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this._unique;\r\n\t}\r\n\r\n\tgetName() {\r\n\t\treturn this.#name.getValue();\r\n\t}\r\n\r\n\tsetName(name: string | undefined) {\r\n\t\tthis.#name.setValue(name);\r\n\t}\r\n\r\n\tgetVariantId() {\r\n\t\treturn this.#variantId;\r\n\t}\r\n\t// variant id for a specific property?\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\t// The controller alias, is a very generic name cause we want only one of these for this controller host.\r\n\t\tsuper(host, UMB_PROPERTY_DATASET_CONTEXT);\r\n\t\tthis.#variantContext.setVariantId(this.getVariantId());\r\n\t}\r\n\r\n\t/**\r\n\t * @function propertyValueByAlias\r\n\t * @param {string} propertyAlias - the alias to observe\r\n\t * @returns {Promise<Observable<ReturnType | undefined> | undefined>} - an Observable for the value of this property.\r\n\t */\r\n\tasync propertyValueByAlias<ReturnType = unknown>(propertyAlias: string) {\r\n\t\treturn this.#properties.asObservablePart((values) => {\r\n\t\t\tconst valueObj = values.find((x) => x.alias === propertyAlias);\r\n\t\t\treturn valueObj ? (valueObj.value as ReturnType) : undefined;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @function setPropertyValue\r\n\t * @param {string} alias - The alias to set this value for\r\n\t * @param {PromiseLike<unknown>} value - value can be a promise resolving into the actual value or the raw value it self.\r\n\t * @description Set the value of this property.\r\n\t */\r\n\tsetPropertyValue(alias: string, value: unknown) {\r\n\t\tthis.#properties.appendOne({ alias, value });\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated Use `getProperties`\r\n\t * @returns {Array<UmbPropertyValueData>} - Array of properties as objects with alias and value properties.\r\n\t */\r\n\tgetValues() {\r\n\t\treturn this.#properties.getValue();\r\n\t}\r\n\t/**\r\n\t * @param {Array<UmbPropertyValueData>} properties - Properties array with alias and value properties.\r\n\t * @deprecated Use `setProperties`\r\n\t */\r\n\tsetValues(properties: Array<UmbPropertyValueData>) {\r\n\t\tthis.#properties.setValue(properties);\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {Array<UmbPropertyValueData>} - Array of properties as objects with alias and value properties.\r\n\t */\r\n\tasync getProperties() {\r\n\t\treturn this.#properties.getValue();\r\n\t}\r\n\t/**\r\n\t * @param {Array<UmbPropertyValueData>} properties - Properties array with alias and value properties.\r\n\t */\r\n\tsetProperties(properties: Array<UmbPropertyValueData>) {\r\n\t\tthis.#properties.setValue(properties);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the read-only state of the current variant culture.\r\n\t * @returns {*}  {boolean}\r\n\t */\r\n\tgetReadOnly(): boolean {\r\n\t\treturn this.#readOnly.getValue();\r\n\t}\r\n}\r\n","import type { UmbPropertyValueData } from '../types/property-value-data.type.js';\r\nimport { UmbPropertyDatasetContextBase } from './property-dataset-base-context.js';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { customElement, html, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n/**\r\n *  @element umb-property-dataset\r\n *  @description - Element for hosting a property dataset. This is needed for umb-property to work.\r\n *  @slot default - Slot for rendering content within.\r\n */\r\n@customElement('umb-property-dataset')\r\nexport class UmbPropertyDatasetElement extends UmbLitElement {\r\n\t// Determine wether state change should fire an event when the value is changed.\r\n\t#allowChangeEvent = false;\r\n\r\n\tpublic readonly context: UmbPropertyDatasetContextBase;\r\n\r\n\t@property({ attribute: false })\r\n\t/**\r\n\t * The value of the dataset.\r\n\t * @returns {Array<UmbPropertyValueData>} - The value of the dataset\r\n\t * @example\r\n\t * ```ts\r\n\t * const dataSet = [\r\n\t * \t{\r\n\t * \t\talias: 'testAlias',\r\n\t * \t\tvalue: 'value as a string',\r\n\t * \t},\r\n\t *  {\r\n\t * \t\talias: 'anotherAlias',\r\n\t * \t\tvalue: 123,\r\n\t * \t}\r\n\t * ]\r\n\t *\r\n\t * html`\r\n\t * <umb-property-dataset .value=\"${dataSet}\">\r\n\t * \t<umb-property\r\n\t * \t\tlabel=\"My label for this property\"\r\n\t * \t\tdescription=\"The description to show on the property\"\r\n\t * \t\talias=\"testAlias\"\r\n\t * \t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.TextBox\"\r\n\t * \t\t.config=${...}>\r\n\t * \t</umb-property>\r\n\t * </umb-property-dataset>\r\n\t * `\r\n\t * ```\r\n\t */\r\n\tpublic set value(value: Array<UmbPropertyValueData>) {\r\n\t\tthis.#allowChangeEvent = false;\r\n\t\tthis.context.setValues(value);\r\n\t\t// Above might not trigger a observer callback (if no change), so set the allow change event to true:\r\n\t\tthis.#allowChangeEvent = true;\r\n\t}\r\n\tpublic get value(): Array<UmbPropertyValueData> {\r\n\t\treturn this.context.getValues();\r\n\t}\r\n\r\n\t@property({ attribute: false })\r\n\t/**\r\n\t * The name of the dataset, this name varies depending on the use-case. But this is either\r\n\t * @property name\r\n\t * @type {string}\r\n\t * @returns {string}\r\n\t * @example\r\n\t * ```ts\r\n\t * html`\r\n\t * <umb-property-dataset name=\"My variant name\">\r\n\t * \t...\r\n\t * </umb-property-dataset>\r\n\t * `\r\n\t */\r\n\tpublic set name(value: string | undefined) {\r\n\t\tthis.#allowChangeEvent = false;\r\n\t\tthis.context.setName(value);\r\n\t\t// Above might not trigger a observer callback (if no change), so set the allow change event to true:\r\n\t\tthis.#allowChangeEvent = true;\r\n\t}\r\n\tpublic get name(): string | undefined {\r\n\t\treturn this.context.getName();\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\t// Prevent any child events escaping this element.\r\n\t\tthis.addEventListener('change', (e) => {\r\n\t\t\tif (e.target !== this) {\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.context = new UmbPropertyDatasetContextBase(this);\r\n\t\t// prevent the first change event from firing:\r\n\t\tthis.#allowChangeEvent = false;\r\n\t\tthis.observe(this.context.name, this.#observerCallback);\r\n\t\t// prevent the first change event from firing:\r\n\t\tthis.#allowChangeEvent = false;\r\n\t\tthis.observe(this.context.properties, this.#observerCallback);\r\n\t}\r\n\r\n\t#observerCallback = () => {\r\n\t\tif (this.#allowChangeEvent) {\r\n\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t} else {\r\n\t\t\t// Set allow change event to true.\r\n\t\t\tthis.#allowChangeEvent = true;\r\n\t\t}\r\n\t};\r\n\r\n\toverride render() {\r\n\t\treturn html`<slot></slot>`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyDatasetElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-dataset': UmbPropertyDatasetElement;\r\n\t}\r\n}\r\n","import { UMB_PROPERTY_DATASET_CONTEXT } from '../../property-dataset/index.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport {\r\n\tUmbArrayState,\r\n\tUmbBasicState,\r\n\tUmbClassState,\r\n\tUmbDeepState,\r\n\tUmbObjectState,\r\n\tUmbStringState,\r\n} from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\nimport type { UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\nimport type {\r\n\tManifestPropertyEditorUi,\r\n\tUmbPropertyEditorConfigProperty,\r\n\tUmbPropertyEditorUiElement,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { UmbPropertyEditorConfigCollection } from '@umbraco-cms/backoffice/property-editor';\r\nimport type {\r\n\tUmbPropertyTypeAppearanceModel,\r\n\tUmbPropertyTypeValidationModel,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbReadOnlyStateManager } from '@umbraco-cms/backoffice/utils';\r\n\r\nexport class UmbPropertyContext<ValueType = any> extends UmbContextBase {\r\n\t#alias = new UmbStringState(undefined);\r\n\tpublic readonly alias = this.#alias.asObservable();\r\n\r\n\t#label = new UmbStringState(undefined);\r\n\tpublic readonly label = this.#label.asObservable();\r\n\r\n\t#description = new UmbStringState(undefined);\r\n\tpublic readonly description = this.#description.asObservable();\r\n\r\n\t#appearance = new UmbObjectState<UmbPropertyTypeAppearanceModel | undefined>(undefined);\r\n\tpublic readonly appearance = this.#appearance.asObservable();\r\n\r\n\t#value = new UmbDeepState<ValueType | undefined>(undefined);\r\n\tpublic readonly value = this.#value.asObservable();\r\n\r\n\t#configValues = new UmbArrayState<UmbPropertyEditorConfigProperty>([], (x) => x.alias);\r\n\tpublic readonly configValues = this.#configValues.asObservable();\r\n\r\n\t#config = new UmbClassState<UmbPropertyEditorConfigCollection | undefined>(undefined);\r\n\tpublic readonly config = this.#config.asObservable();\r\n\r\n\t#validation = new UmbObjectState<UmbPropertyTypeValidationModel | undefined>(undefined);\r\n\tpublic readonly validation = this.#validation.asObservable();\r\n\r\n\tpublic readonly validationMandatory = this.#validation.asObservablePart((x) => x?.mandatory);\r\n\tpublic readonly validationMandatoryMessage = this.#validation.asObservablePart((x) => x?.mandatoryMessage);\r\n\r\n\t#dataPath = new UmbStringState(undefined);\r\n\tpublic readonly dataPath = this.#dataPath.asObservable();\r\n\r\n\t#editor = new UmbBasicState<UmbPropertyEditorUiElement | undefined>(undefined);\r\n\tpublic readonly editor = this.#editor.asObservable();\r\n\r\n\t#editorManifest = new UmbBasicState<ManifestPropertyEditorUi | undefined>(undefined);\r\n\tpublic readonly editorManifest = this.#editorManifest.asObservable();\r\n\r\n\tpublic readonly readOnlyState = new UmbReadOnlyStateManager(this);\r\n\tpublic readonly isReadOnly = this.readOnlyState.isReadOnly;\r\n\r\n\t/**\r\n\t * Set the property editor UI element for this property.\r\n\t * @param {UmbPropertyEditorUiElement | undefined} editorElement The property editor UI element\r\n\t */\r\n\tsetEditor(editorElement: UmbPropertyEditorUiElement | undefined) {\r\n\t\tthis.#editor.setValue(editorElement ?? undefined);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the property editor UI element for this property.\r\n\t * @returns {UmbPropertyEditorUiElement | undefined} The property editor UI element\r\n\t */\r\n\tgetEditor(): UmbPropertyEditorUiElement | undefined {\r\n\t\treturn this.#editor.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the property editor manifest for this property.\r\n\t * @param {ManifestPropertyEditorUi | undefined} manifest The property editor manifest\r\n\t */\r\n\tsetEditorManifest(manifest: ManifestPropertyEditorUi | undefined) {\r\n\t\tthis.#editorManifest.setValue(manifest ?? undefined);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the property editor manifest for this property.\r\n\t * @returns {UmbPropertyEditorUiElement | undefined} The property editor manifest\r\n\t */\r\n\tgetEditorManifest(): ManifestPropertyEditorUi | undefined {\r\n\t\treturn this.#editorManifest.getValue();\r\n\t}\r\n\r\n\t// property variant ID:\r\n\t#variantId = new UmbClassState<UmbVariantId | undefined>(undefined);\r\n\tpublic readonly variantId = this.#variantId.asObservable();\r\n\r\n\t#variantDifference = new UmbStringState(undefined);\r\n\tpublic readonly variantDifference = this.#variantDifference.asObservable();\r\n\r\n\t#datasetContext?: typeof UMB_PROPERTY_DATASET_CONTEXT.TYPE;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_PROPERTY_CONTEXT);\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_DATASET_CONTEXT, (context) => {\r\n\t\t\tthis.#datasetContext = context;\r\n\t\t\tthis.setVariantId(context?.getVariantId?.());\r\n\t\t\tthis._generateVariantDifferenceString();\r\n\t\t\tthis._observeProperty();\r\n\t\t});\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.alias,\r\n\t\t\t() => {\r\n\t\t\t\tthis._observeProperty();\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.configValues,\r\n\t\t\t(configValues) => {\r\n\t\t\t\tthis.#config.setValue(configValues ? new UmbPropertyEditorConfigCollection(configValues) : undefined);\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.variantId,\r\n\t\t\t() => {\r\n\t\t\t\tthis._generateVariantDifferenceString();\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\t}\r\n\r\n\tprivate async _observeProperty(): Promise<void> {\r\n\t\tconst alias = this.#alias.getValue();\r\n\t\tif (!this.#datasetContext || !alias) return;\r\n\r\n\t\tthis.observe(\r\n\t\t\tawait this.#datasetContext.propertyVariantId?.(alias),\r\n\t\t\t(variantId) => {\r\n\t\t\t\tthis.#variantId.setValue(variantId);\r\n\t\t\t},\r\n\t\t\t'observeVariantId',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tawait this.#datasetContext.propertyValueByAlias<ValueType>(alias),\r\n\t\t\t(value) => {\r\n\t\t\t\tthis.#value.setValue(value);\r\n\t\t\t},\r\n\t\t\t'observeValue',\r\n\t\t);\r\n\r\n\t\tthis.observe(this.#datasetContext.readOnly, (value) => {\r\n\t\t\tconst unique = 'UMB_DATASET';\r\n\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.readOnlyState.addState({\r\n\t\t\t\t\tunique,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.readOnlyState.removeState(unique);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _generateVariantDifferenceString() {\r\n\t\tif (!this.#datasetContext) return;\r\n\t\tconst contextVariantId = this.#datasetContext.getVariantId?.() ?? undefined;\r\n\t\tconst propertyVariantId = this.#variantId.getValue();\r\n\r\n\t\tlet shareMessage;\r\n\t\tif (contextVariantId && propertyVariantId) {\r\n\t\t\t// If on a Segment viewing a segment-shared property:\r\n\t\t\t// TODO: Do not use the content variant id, but know wether the property is configured to vary by segment.\r\n\t\t\t// Because we can view a default segment, then we do not know if the property is shared or not. [NL]\r\n\t\t\tif (contextVariantId.segment !== null && propertyVariantId.segment === null) {\r\n\t\t\t\tif (contextVariantId.culture !== null) {\r\n\t\t\t\t\tshareMessage = 'content_sharedAcrossCultures';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshareMessage = 'content_sharedAcrossSegments';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// TODO: Do not use the content variant id, but know wether the property is configured to vary by culture. (this is first a problem when we introduce the invariant-variant)\r\n\t\t\tif (contextVariantId.culture !== null && propertyVariantId.culture === null) {\r\n\t\t\t\tshareMessage = 'content_shared';\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.#variantDifference.setValue(shareMessage);\r\n\t}\r\n\r\n\t/**\r\n\t * Set the alias of this property.\r\n\t * @param {string | undefined} alias - The alias of the property\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setAlias(alias: string | undefined): void {\r\n\t\tthis.#alias.setValue(alias);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the alias of this property.\r\n\t * @returns {*}  {(string | undefined)}\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getAlias(): string | undefined {\r\n\t\treturn this.#alias.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the label of this property.\r\n\t * @param {(string | undefined)} label - The label of the property\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setLabel(label: string | undefined): void {\r\n\t\tthis.#label.setValue(label);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the label of this property.\r\n\t * @returns {(string | undefined)} - the label\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getLabel(): string | undefined {\r\n\t\treturn this.#label.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the description of this property.\r\n\t * @param {(string | undefined)} description\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setDescription(description: string | undefined): void {\r\n\t\tthis.#description.setValue(description);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the description of this property.\r\n\t * @returns {*}  {(string | undefined)}\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getDescription(): string | undefined {\r\n\t\treturn this.#description.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the appearance of this property.\r\n\t * @param {UmbPropertyTypeAppearanceModel | undefined} appearance - the appearance properties of this property\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setAppearance(appearance: UmbPropertyTypeAppearanceModel | undefined): void {\r\n\t\tthis.#appearance.setValue(appearance);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the appearance of this property.\r\n\t * @returns {UmbPropertyTypeAppearanceModel | undefined}- the appearance properties of this property\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getAppearance(): UmbPropertyTypeAppearanceModel | undefined {\r\n\t\treturn this.#appearance.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the value of this property.\r\n\t * @param {unknown} value - the whole value to be set\r\n\t */\r\n\tpublic setValue(value: ValueType | undefined): void {\r\n\t\tconst alias = this.#alias.getValue();\r\n\t\tif (!this.#datasetContext || !alias) return;\r\n\t\tthis.#datasetContext?.setPropertyValue(alias, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the current value of this property.\r\n\t * Notice this is not reactive, you should us the `value` observable for that.\r\n\t * @returns {unknown} - the current value of this property\r\n\t */\r\n\tpublic getValue(): ValueType | undefined {\r\n\t\treturn this.#value.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the config of this property.\r\n\t * @param {Array<UmbPropertyEditorConfigProperty> | undefined} config - Array of configurations for this property\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setConfig(config: Array<UmbPropertyEditorConfigProperty> | undefined): void {\r\n\t\tthis.#configValues.setValue(config ?? []);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the config of this property.\r\n\t * @returns {Array<UmbPropertyEditorConfigProperty> | undefined} - Array of configurations for this property\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getConfig(): Array<UmbPropertyEditorConfigProperty> | undefined {\r\n\t\treturn this.#configValues.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the variant ID of this property.\r\n\t * @param {UmbVariantId | undefined} variantId - The property Variant ID, not necessary the same as the Property Dataset Context VariantId.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setVariantId(variantId: UmbVariantId | undefined): void {\r\n\t\tthis.#variantId.setValue(variantId);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the variant ID of this property.\r\n\t * @returns {UmbVariantId | undefined} - The property Variant ID, not necessary the same as the Property Dataset Context VariantId.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getVariantId(): UmbVariantId | undefined {\r\n\t\treturn this.#variantId.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Set the validation of this property.\r\n\t * @param {UmbPropertyTypeValidationModel | undefined} validation - Object holding the Validation Properties.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic setValidation(validation: UmbPropertyTypeValidationModel | undefined): void {\r\n\t\tthis.#validation.setValue(validation);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the validation of this property.\r\n\t * @returns {UmbPropertyTypeValidationModel | undefined} - Object holding the Validation Properties.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getValidation(): UmbPropertyTypeValidationModel | undefined {\r\n\t\treturn this.#validation.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Get the read only state of this property\r\n\t * @returns {boolean} - If property is in read-only mode.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic getIsReadOnly(): boolean {\r\n\t\treturn this.readOnlyState.getIsReadOnly();\r\n\t}\r\n\r\n\tpublic setDataPath(dataPath: string | undefined): void {\r\n\t\tthis.#dataPath.setValue(dataPath);\r\n\t}\r\n\r\n\tpublic getDataPath(): string | undefined {\r\n\t\treturn this.#dataPath.getValue();\r\n\t}\r\n\r\n\t/**\r\n\t * Reset the value of this property.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic resetValue(): void {\r\n\t\tthis.setValue(undefined); // TODO: We should get the value from the server aka. the value from the persisted data. (Most workspaces holds this data, via dataset) [NL]\r\n\t}\r\n\r\n\t/**\r\n\t * Clear the value of this property.\r\n\t * @memberof UmbPropertyContext\r\n\t */\r\n\tpublic clearValue(): void {\r\n\t\tthis.setValue(undefined); // TODO: We should get the default value from Property Editor maybe even later the DocumentType, as that would hold the default value for the property. (Get it via the dataset) [NL]\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tsuper.destroy();\r\n\t\tthis.#alias.destroy();\r\n\t\tthis.#label.destroy();\r\n\t\tthis.#description.destroy();\r\n\t\tthis.#appearance.destroy();\r\n\t\tthis.#configValues.destroy();\r\n\t\tthis.#value.destroy();\r\n\t\tthis.#config.destroy();\r\n\t\tthis.#datasetContext = undefined;\r\n\t}\r\n}\r\n\r\nexport const UMB_PROPERTY_CONTEXT = new UmbContextToken<UmbPropertyContext>('UmbPropertyContext');\r\n","import { UmbPropertyContext } from './property.context.js';\r\nimport { css, customElement, html, property, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { createExtensionElement, UmbExtensionsApiInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport {\r\n\tUmbBindServerValidationToFormControl,\r\n\tUmbFormControlValidator,\r\n\tUmbObserveValidationStateController,\r\n} from '@umbraco-cms/backoffice/validation';\r\nimport {\r\n\ttype ManifestPropertyEditorUi,\r\n\ttype UmbPropertyEditorConfigCollection,\r\n\ttype UmbPropertyEditorConfig,\r\n\tUMB_MISSING_PROPERTY_EDITOR_UI_UI_ALIAS,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport type {\r\n\tUmbPropertyTypeAppearanceModel,\r\n\tUmbPropertyTypeValidationModel,\r\n} from '@umbraco-cms/backoffice/content-type';\r\nimport type { UmbObserverController } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UMB_MARK_ATTRIBUTE_NAME } from '@umbraco-cms/backoffice/const';\r\nimport { UmbRoutePathAddendumContext } from '@umbraco-cms/backoffice/router';\r\n\r\n/**\r\n *  @element umb-property\r\n *  @description Component for displaying a property with editor from extension registry.\r\n *\tThe Element will render a Property Editor based on the Property Editor UI alias passed to the element.\r\n *  This will also render all Property Actions related to the Property Editor UI Alias.\r\n */\r\n@customElement('umb-property')\r\nexport class UmbPropertyElement extends UmbLitElement {\r\n\t/**\r\n\t * Label. Name of the property\r\n\t * @type {string}\r\n\t * @default\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic set label(label: string | undefined) {\r\n\t\tthis.#propertyContext.setLabel(label);\r\n\t}\r\n\tpublic get label() {\r\n\t\treturn this.#propertyContext.getLabel();\r\n\t}\r\n\r\n\t/**\r\n\t * Description: render a description underneath the label.\r\n\t * @type {string}\r\n\t * @default\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic set description(description: string | undefined) {\r\n\t\tthis.#propertyContext.setDescription(description);\r\n\t}\r\n\tpublic get description() {\r\n\t\treturn this.#propertyContext.getDescription();\r\n\t}\r\n\r\n\t/**\r\n\t * Appearance: Appearance settings for the property.\r\n\t */\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic set appearance(appearance: UmbPropertyTypeAppearanceModel | undefined) {\r\n\t\tthis.#propertyContext.setAppearance(appearance);\r\n\t}\r\n\tpublic get appearance() {\r\n\t\treturn this.#propertyContext.getAppearance();\r\n\t}\r\n\r\n\t/**\r\n\t * Alias\r\n\t * @public\r\n\t * @type {string}\r\n\t * @default\r\n\t */\r\n\t@property({ type: String })\r\n\tpublic set alias(alias: string) {\r\n\t\tthis.setAttribute(UMB_MARK_ATTRIBUTE_NAME, 'property:' + alias);\r\n\t\tthis.#propertyContext.setAlias(alias);\r\n\t}\r\n\tpublic get alias() {\r\n\t\treturn this.#propertyContext.getAlias() ?? '';\r\n\t}\r\n\r\n\t/**\r\n\t * Property Editor UI Alias. Render the Property Editor UI registered for this alias.\r\n\t * @public\r\n\t * @type {string}\r\n\t * @default\r\n\t */\r\n\t@property({ type: String, attribute: 'property-editor-ui-alias' })\r\n\tpublic set propertyEditorUiAlias(value: string | undefined) {\r\n\t\tthis._propertyEditorUiAlias = value;\r\n\t\tthis._observePropertyEditorUI();\r\n\t}\r\n\tpublic get propertyEditorUiAlias(): string {\r\n\t\treturn this._propertyEditorUiAlias ?? '';\r\n\t}\r\n\tprivate _propertyEditorUiAlias?: string;\r\n\r\n\t/**\r\n\t * Config. Configuration to pass to the Property Editor UI. This is also the configuration data stored on the Data Type.\r\n\t * @public\r\n\t * @type {string}\r\n\t * @default\r\n\t */\r\n\t@property({ type: Array, attribute: false })\r\n\tpublic set config(value: UmbPropertyEditorConfig | undefined) {\r\n\t\tthis.#propertyContext.setConfig(value);\r\n\t}\r\n\tpublic get config(): UmbPropertyEditorConfig | undefined {\r\n\t\treturn this.#propertyContext.getConfig();\r\n\t}\r\n\r\n\t/**\r\n\t * Validation: Validation settings for the property.\r\n\t */\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic set validation(validation: UmbPropertyTypeValidationModel | undefined) {\r\n\t\tthis.#propertyContext.setValidation(validation);\r\n\t}\r\n\tpublic get validation() {\r\n\t\treturn this.#propertyContext.getValidation();\r\n\t}\r\n\r\n\t/**\r\n\t * DataPath, declare the path to the value of the data that this property represents.\r\n\t * @public\r\n\t * @type {string}\r\n\t * @default\r\n\t */\r\n\t@property({ type: String, attribute: 'data-path' })\r\n\tpublic set dataPath(dataPath: string | undefined) {\r\n\t\tthis.#propertyContext.setDataPath(dataPath);\r\n\t\tnew UmbObserveValidationStateController(this, dataPath, (invalid) => {\r\n\t\t\tthis._invalid = invalid;\r\n\t\t});\r\n\t}\r\n\tpublic get dataPath(): string | undefined {\r\n\t\treturn this.#propertyContext.getDataPath();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the property to readonly, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @default false\r\n\t */\r\n\tprivate _readonly: boolean = false;\r\n\t@property({ type: Boolean, reflect: true })\r\n\tpublic set readonly(value: boolean) {\r\n\t\tthis._readonly = value;\r\n\r\n\t\tconst unique = 'UMB_ELEMENT';\r\n\r\n\t\tif (this._readonly) {\r\n\t\t\tthis.#propertyContext.readOnlyState.addState({\r\n\t\t\t\tunique,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.#propertyContext.readOnlyState.removeState(unique);\r\n\t\t}\r\n\t}\r\n\tpublic get readonly(): boolean {\r\n\t\treturn this._readonly;\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _variantDifferenceTerm?: string;\r\n\r\n\t@state()\r\n\tprivate _element?: ManifestPropertyEditorUi['ELEMENT_TYPE'];\r\n\r\n\t@state()\r\n\tprivate _invalid?: boolean;\r\n\r\n\t@state()\r\n\tprivate _alias?: string;\r\n\r\n\t@state()\r\n\tprivate _label?: string;\r\n\r\n\t@state()\r\n\tprivate _description?: string;\r\n\r\n\t@state()\r\n\tprivate _orientation: 'horizontal' | 'vertical' = 'horizontal';\r\n\r\n\t@state()\r\n\tprivate _mandatory?: boolean;\r\n\r\n\t@state()\r\n\tprivate _supportsReadOnly: boolean = false;\r\n\r\n\t@state()\r\n\tprivate _isReadOnly = false;\r\n\r\n\t#propertyContext = new UmbPropertyContext(this);\r\n\t#pathAddendum = new UmbRoutePathAddendumContext(this);\r\n\r\n\t#controlValidator?: UmbFormControlValidator;\r\n\t#validationMessageBinder?: UmbBindServerValidationToFormControl;\r\n\t#valueObserver?: UmbObserverController<unknown>;\r\n\t#configObserver?: UmbObserverController<UmbPropertyEditorConfigCollection | undefined>;\r\n\t#validationMessageObserver?: UmbObserverController<string | undefined>;\r\n\t#extensionsController?: UmbExtensionsApiInitializer<any>;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.alias,\r\n\t\t\t(alias) => {\r\n\t\t\t\tthis._alias = alias;\r\n\t\t\t\tthis.#pathAddendum.setAddendum(alias);\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.label,\r\n\t\t\t(label) => {\r\n\t\t\t\tthis._label = label;\r\n\t\t\t\tif (this._element) {\r\n\t\t\t\t\tthis._element.name = label;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.description,\r\n\t\t\t(description) => {\r\n\t\t\t\tthis._description = description;\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.variantDifference,\r\n\t\t\t(variantDifference) => {\r\n\t\t\t\tthis._variantDifferenceTerm = variantDifference;\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.appearance,\r\n\t\t\t(appearance) => {\r\n\t\t\t\tthis._orientation = appearance?.labelOnTop ? 'vertical' : 'horizontal';\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.validationMandatory,\r\n\t\t\t(mandatory) => {\r\n\t\t\t\tthis._mandatory = mandatory;\r\n\t\t\t\tif (this._element) {\r\n\t\t\t\t\tthis._element.mandatory = mandatory;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyContext.isReadOnly,\r\n\t\t\t(value) => {\r\n\t\t\t\tthis._isReadOnly = value;\r\n\t\t\t\tif (this._element) {\r\n\t\t\t\t\tthis._element.readonly = value;\r\n\t\t\t\t\tthis._element.toggleAttribute('readonly', value);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnull,\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _onPropertyEditorChange = (e: CustomEvent): void => {\r\n\t\tconst target = e.composedPath()[0] as any;\r\n\t\tif (this._element !== target) {\r\n\t\t\tconsole.error(\r\n\t\t\t\t\"Property Editor received a Change Event who's target is not the Property Editor Element. Do not make bubble and composed change events.\",\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//this.value = target.value; // Sets value in context.\r\n\t\tthis.#propertyContext.setValue(target.value);\r\n\t\te.stopPropagation();\r\n\t};\r\n\r\n\tprivate _observePropertyEditorUI(): void {\r\n\t\tif (this._propertyEditorUiAlias) {\r\n\t\t\tthis.observe(\r\n\t\t\t\tumbExtensionsRegistry.byTypeAndAlias('propertyEditorUi', this._propertyEditorUiAlias),\r\n\t\t\t\t(manifest) => {\r\n\t\t\t\t\tif (!manifest && this._propertyEditorUiAlias !== UMB_MISSING_PROPERTY_EDITOR_UI_UI_ALIAS) {\r\n\t\t\t\t\t\tthis._propertyEditorUiAlias = UMB_MISSING_PROPERTY_EDITOR_UI_UI_ALIAS;\r\n\t\t\t\t\t\tthis._observePropertyEditorUI();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._gotEditorUI(manifest);\r\n\t\t\t\t},\r\n\t\t\t\t'_observePropertyEditorUI',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async _gotEditorUI(manifest?: ManifestPropertyEditorUi | null): Promise<void> {\r\n\t\tthis.#extensionsController?.destroy();\r\n\t\tthis.#propertyContext.setEditor(undefined);\r\n\t\tthis.#propertyContext.setEditorManifest(manifest ?? undefined);\r\n\r\n\t\tif (!manifest) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst el = await createExtensionElement(manifest);\r\n\t\tthis._supportsReadOnly = manifest.meta.supportsReadOnly || false;\r\n\r\n\t\tif (el) {\r\n\t\t\tconst oldElement = this._element;\r\n\r\n\t\t\t// cleanup:\r\n\t\t\tthis.#valueObserver?.destroy();\r\n\t\t\tthis.#configObserver?.destroy();\r\n\t\t\tthis.#validationMessageObserver?.destroy();\r\n\t\t\tthis.#controlValidator?.destroy();\r\n\t\t\toldElement?.removeEventListener('change', this._onPropertyEditorChange as any as EventListener);\r\n\t\t\toldElement?.removeEventListener('property-value-change', this._onPropertyEditorChange as any as EventListener);\r\n\t\t\toldElement?.destroy?.();\r\n\r\n\t\t\tthis._element = el as ManifestPropertyEditorUi['ELEMENT_TYPE'];\r\n\r\n\t\t\tthis.#propertyContext.setEditor(this._element);\r\n\r\n\t\t\tif (this._element) {\r\n\t\t\t\tthis._element.addEventListener('change', this._onPropertyEditorChange as any as EventListener);\r\n\t\t\t\tthis._element.addEventListener('property-value-change', this._onPropertyEditorChange as any as EventListener);\r\n\t\t\t\t// No need to observe mandatory or label, as we already do so and set it on the _element if present: [NL]\r\n\t\t\t\tthis._element.manifest = manifest;\r\n\t\t\t\tthis._element.mandatory = this._mandatory;\r\n\t\t\t\tthis._element.name = this._label;\r\n\r\n\t\t\t\t// No need for a controller alias, as the clean is handled via the observer prop:\r\n\t\t\t\tthis.#valueObserver = this.observe(\r\n\t\t\t\t\tthis.#propertyContext.value,\r\n\t\t\t\t\t(value) => {\r\n\t\t\t\t\t\t// Set the value on the element:\r\n\t\t\t\t\t\tthis._element!.value = value;\r\n\t\t\t\t\t\tif (this.#validationMessageBinder) {\r\n\t\t\t\t\t\t\tthis.#validationMessageBinder.value = value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnull,\r\n\t\t\t\t);\r\n\t\t\t\tthis.#configObserver = this.observe(\r\n\t\t\t\t\tthis.#propertyContext.config,\r\n\t\t\t\t\t(config) => {\r\n\t\t\t\t\t\tif (config) {\r\n\t\t\t\t\t\t\tthis._element!.config = config;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnull,\r\n\t\t\t\t);\r\n\t\t\t\tthis.#validationMessageObserver = this.observe(\r\n\t\t\t\t\tthis.#propertyContext.validationMandatoryMessage,\r\n\t\t\t\t\t(mandatoryMessage) => {\r\n\t\t\t\t\t\tif (mandatoryMessage) {\r\n\t\t\t\t\t\t\tthis._element!.mandatoryMessage = mandatoryMessage ?? undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnull,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ('checkValidity' in this._element) {\r\n\t\t\t\t\tconst dataPath = this.dataPath;\r\n\t\t\t\t\tthis.#controlValidator = new UmbFormControlValidator(this, this._element as any, dataPath);\r\n\t\t\t\t\t// We trust blindly that the dataPath will be present at this stage and not arrive later than this moment. [NL]\r\n\t\t\t\t\tif (dataPath) {\r\n\t\t\t\t\t\tthis.#validationMessageBinder = new UmbBindServerValidationToFormControl(\r\n\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\tthis._element as any,\r\n\t\t\t\t\t\t\tdataPath,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.#validationMessageBinder.value = this.#propertyContext.getValue();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._element.readonly = this._isReadOnly;\r\n\t\t\t\tthis._element.toggleAttribute('readonly', this._isReadOnly);\r\n\r\n\t\t\t\tthis.#createController(manifest);\r\n\t\t\t}\r\n\r\n\t\t\tthis.requestUpdate('element', oldElement);\r\n\t\t}\r\n\t}\r\n\r\n\t#createController(propertyEditorUiManifest: ManifestPropertyEditorUi): void {\r\n\t\tif (this.#extensionsController) {\r\n\t\t\tthis.#extensionsController.destroy();\r\n\t\t}\r\n\r\n\t\tthis.#extensionsController = new UmbExtensionsApiInitializer(\r\n\t\t\tthis,\r\n\t\t\tumbExtensionsRegistry,\r\n\t\t\t'propertyContext',\r\n\t\t\t[],\r\n\t\t\t(manifest) => manifest.forPropertyEditorUis.includes(propertyEditorUiManifest.alias),\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tid=\"layout\"\r\n\t\t\t\t.alias=${this._alias ?? ''}\r\n\t\t\t\t.label=${this._label ?? ''}\r\n\t\t\t\t.description=${this._description ?? ''}\r\n\t\t\t\t.orientation=${this._orientation ?? 'horizontal'}\r\n\t\t\t\t?mandatory=${this._mandatory}\r\n\t\t\t\t?invalid=${this._invalid}>\r\n\t\t\t\t${this.#renderPropertyActionMenu()}\r\n\t\t\t\t${this._variantDifferenceTerm\r\n\t\t\t\t\t? html`<div id=\"variant-info\" slot=\"description\">\r\n\t\t\t\t\t\t\t<uui-tag look=\"secondary\">${this.localize.term(this._variantDifferenceTerm)}</uui-tag>\r\n\t\t\t\t\t\t</div> `\r\n\t\t\t\t\t: ''}\r\n\t\t\t\t${this.#renderPropertyEditor()}\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderPropertyActionMenu() {\r\n\t\tif (!this._propertyEditorUiAlias) return nothing;\r\n\t\treturn html`\r\n\t\t\t<umb-property-action-menu\r\n\t\t\t\tslot=\"action-menu\"\r\n\t\t\t\tid=\"action-menu\"\r\n\t\t\t\t.propertyEditorUiAlias=${this._propertyEditorUiAlias}>\r\n\t\t\t</umb-property-action-menu>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderPropertyEditor() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"editor\" slot=\"editor\">\r\n\t\t\t\t${this._isReadOnly && this._supportsReadOnly === false ? html`<div id=\"overlay\"></div>` : nothing}\r\n\t\t\t\t${this._element}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\r\n\t\t\t#action-menu {\r\n\t\t\t\topacity: 0;\r\n\t\t\t\ttransition: opacity 90ms;\r\n\t\t\t}\r\n\r\n\t\t\t#layout:focus-within #action-menu,\r\n\t\t\t#layout:hover #action-menu,\r\n\t\t\t#action-menu[open] {\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#variant-info {\r\n\t\t\t\topacity: 0;\r\n\t\t\t\ttransition: opacity 90ms;\r\n\t\t\t\tmargin-top: var(--uui-size-space-2);\r\n\t\t\t\tmargin-left: calc(var(--uui-size-space-1) * -1);\r\n\t\t\t}\r\n\r\n\t\t\t#layout:focus-within #variant-info,\r\n\t\t\t#layout:hover #variant-info {\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#editor {\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t#overlay {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tright: 0;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\tbackground-color: white;\r\n\t\t\t\topacity: 0.5;\r\n\t\t\t\tz-index: 1000;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property': UmbPropertyElement;\r\n\t}\r\n}\r\n","import { css, customElement, html, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n/**\r\n *  @description Component for displaying an unsupported property\r\n */\r\n\r\n@customElement('umb-unsupported-property')\r\nexport class UmbUnsupportedPropertyElement extends UmbLitElement {\r\n\t@property({ type: String })\r\n\tpublic alias = '';\r\n\r\n\t@property({ type: String })\r\n\tpublic schema = '';\r\n\r\n\toverride render() {\r\n\t\treturn html`<div id=\"not-supported\">\r\n\t\t\t<umb-localize key=\"blockEditor_propertyEditorNotSupported\" .args=${[this.alias, this.schema]}></umb-localize>\r\n\t\t</div>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding: var(--uui-size-layout-1) 0;\r\n\t\t\t}\r\n\r\n\t\t\t#not-supported {\r\n\t\t\t\tbackground-color: var(--uui-color-danger);\r\n\t\t\t\tcolor: var(--uui-color-surface);\r\n\t\t\t\tpadding: var(--uui-size-space-4);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-unsupported-property': UmbUnsupportedPropertyElement;\r\n\t}\r\n}\r\n"],"names":["_UmbPropertyLayoutElement_instances","renderDescription_fn","UmbPropertyLayoutElement","UmbLitElement","__privateAdd","html","when","__privateMethod","ufmValue","UmbTextStyles","css","__decorateClass","property","customElement","UMB_PROPERTY_DATASET_CONTEXT","UmbContextToken","isNameablePropertyDatasetContext","context","UMB_NAMEABLE_PROPERTY_DATASET_CONTEXT","UmbPropertyDatasetContextBase","UmbContextBase","host","#name","UmbStringState","#properties","UmbArrayState","x","#readOnly","UmbBooleanState","#variantId","UmbVariantId","#variantContext","UmbVariantContext","name","propertyAlias","values","valueObj","alias","value","properties","_allowChangeEvent","_observerCallback","UmbPropertyDatasetElement","__privateGet","UmbChangeEvent","__privateSet","e","UmbPropertyContext","UMB_PROPERTY_CONTEXT","#alias","#label","#description","#appearance","UmbObjectState","#value","UmbDeepState","#configValues","#config","UmbClassState","#validation","#dataPath","#editor","UmbBasicState","#editorManifest","UmbReadOnlyStateManager","#variantDifference","#datasetContext","configValues","UmbPropertyEditorConfigCollection","editorElement","manifest","variantId","unique","contextVariantId","propertyVariantId","shareMessage","label","description","appearance","config","validation","dataPath","_propertyContext","_pathAddendum","_controlValidator","_validationMessageBinder","_valueObserver","_configObserver","_validationMessageObserver","_extensionsController","_UmbPropertyElement_instances","createController_fn","renderPropertyActionMenu_fn","renderPropertyEditor_fn","UmbPropertyElement","UmbRoutePathAddendumContext","target","variantDifference","mandatory","UMB_MARK_ATTRIBUTE_NAME","UmbObserveValidationStateController","invalid","umbExtensionsRegistry","UMB_MISSING_PROPERTY_EDITOR_UI_UI_ALIAS","el","createExtensionElement","oldElement","mandatoryMessage","UmbFormControlValidator","UmbBindServerValidationToFormControl","propertyEditorUiManifest","UmbExtensionsApiInitializer","nothing","state","UmbUnsupportedPropertyElement"],"mappings":"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"}