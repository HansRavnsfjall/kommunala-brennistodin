{"version":3,"file":"workspace-menu-breadcrumb.element-C7EVdFUf.js","sources":["../../../src/packages/core/workspace/components/workspace-breadcrumb/workspace-menu-breadcrumb/workspace-menu-breadcrumb.element.ts"],"sourcesContent":["import { UMB_WORKSPACE_CONTEXT } from '../../../workspace.context-token.js';\r\nimport { css, customElement, html, ifDefined, map, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT } from '@umbraco-cms/backoffice/menu';\r\nimport { UMB_SECTION_CONTEXT } from '@umbraco-cms/backoffice/section';\r\nimport type { UmbMenuStructureWorkspaceContext, UmbStructureItemModel } from '@umbraco-cms/backoffice/menu';\r\n\r\n@customElement('umb-workspace-breadcrumb')\r\nexport class UmbWorkspaceBreadcrumbElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _name: string = '';\r\n\r\n\t@state()\r\n\tprivate _structure: UmbStructureItemModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _isNew: boolean = false;\r\n\r\n\t// TODO: figure out the correct context type\r\n\t#workspaceContext?: any;\r\n\t#sectionContext?: typeof UMB_SECTION_CONTEXT.TYPE;\r\n\t#structureContext?: typeof UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_SECTION_CONTEXT, (instance) => {\r\n\t\t\tthis.#sectionContext = instance;\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance as any;\r\n\t\t\tthis.#observeIsNew();\r\n\t\t\tthis.#observeStructure();\r\n\t\t\tthis.#observeName();\r\n\t\t});\r\n\r\n\t\tthis.consumeContext<UmbMenuStructureWorkspaceContext>(UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#structureContext = instance;\r\n\t\t\tthis.#observeStructure();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeIsNew() {\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext?.isNew,\r\n\t\t\t(value) => {\r\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis._isNew = value || false;\r\n\t\t\t},\r\n\t\t\t'breadcrumbWorkspaceIsNewObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#observeName() {\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext?.name,\r\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t\t// @ts-ignore\r\n\t\t\t(value) => (this._name = value || ''),\r\n\t\t\t'breadcrumbWorkspaceNameObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#observeStructure() {\r\n\t\tif (!this.#structureContext || !this.#workspaceContext) return;\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#structureContext.structure,\r\n\t\t\t(value) => {\r\n\t\t\t\tthis._structure = value;\r\n\t\t\t},\r\n\t\t\t'menuStructureObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#getHref(structureItem: UmbStructureItemModel) {\r\n\t\tif (structureItem.isFolder) return undefined;\r\n\r\n\t\tlet href = `section/${this.#sectionContext?.getPathname()}`;\r\n\t\tif (structureItem.unique) {\r\n\t\t\thref += `/workspace/${structureItem.entityType}/edit/${structureItem.unique}`;\r\n\t\t}\r\n\r\n\t\treturn href;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst structure = this._isNew ? this._structure : this._structure.slice(0, -1);\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-breadcrumbs>\r\n\t\t\t\t${map(\r\n\t\t\t\t\tstructure,\r\n\t\t\t\t\t(structureItem) =>\r\n\t\t\t\t\t\thtml`<uui-breadcrumb-item href=${ifDefined(this.#getHref(structureItem))}\r\n\t\t\t\t\t\t\t>${this.localize.string(structureItem.name)}</uui-breadcrumb-item\r\n\t\t\t\t\t\t>`,\r\n\t\t\t\t)}\r\n\t\t\t\t<uui-breadcrumb-item last-item>${this._name}</uui-breadcrumb-item>\r\n\t\t\t</uui-breadcrumbs>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tmargin-left: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbWorkspaceBreadcrumbElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-workspace-breadcrumb': UmbWorkspaceBreadcrumbElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_sectionContext","_structureContext","_UmbWorkspaceBreadcrumbElement_instances","observeIsNew_fn","observeName_fn","observeStructure_fn","getHref_fn","UmbWorkspaceBreadcrumbElement","UmbLitElement","__privateAdd","UMB_SECTION_CONTEXT","instance","__privateSet","UMB_WORKSPACE_CONTEXT","__privateMethod","UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT","structure","html","map","structureItem","ifDefined","__privateGet","value","href","UmbTextStyles","css","__decorateClass","state","customElement","UmbWorkspaceBreadcrumbElement$1"],"mappings":"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"}