{"version":3,"file":"workspace.element-tg2OuAH5.js","sources":["../../../src/packages/core/workspace/workspace.element.ts"],"sourcesContent":["import type { ManifestWorkspace } from './extensions/types.js';\r\nimport { customElement, property, type PropertyValueMap, state, html } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport {\r\n\tUmbExtensionsApiInitializer,\r\n\tUmbExtensionsElementAndApiInitializer,\r\n\ttype UmbApiConstructorArgumentsMethodType,\r\n} from '@umbraco-cms/backoffice/extension-api';\r\nimport { UMB_MARK_ATTRIBUTE_NAME } from '@umbraco-cms/backoffice/const';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\nconst apiArgsCreator: UmbApiConstructorArgumentsMethodType<unknown> = (manifest: unknown) => {\r\n\treturn [{ manifest }];\r\n};\r\n\r\n@customElement('umb-workspace')\r\nexport class UmbWorkspaceElement extends UmbLitElement {\r\n\t#extensionsController?: UmbExtensionsElementAndApiInitializer<any>;\r\n\t#entityType?: string;\r\n\r\n\t@state()\r\n\tprivate _component?: HTMLElement;\r\n\r\n\t@property({ type: String, attribute: 'entity-type' })\r\n\tpublic get entityType(): string | undefined {\r\n\t\treturn this.#entityType;\r\n\t}\r\n\tpublic set entityType(value: string) {\r\n\t\tif (value === this.#entityType || !value) return;\r\n\t\tthis.#entityType = value;\r\n\t\tthis.#createController(value);\r\n\t}\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.setAttribute(UMB_MARK_ATTRIBUTE_NAME, 'workspace');\r\n\t}\r\n\r\n\t#createController(entityType: string) {\r\n\t\tif (this.#extensionsController) {\r\n\t\t\tthis.#extensionsController.destroy();\r\n\t\t}\r\n\t\tthis.#extensionsController = new UmbExtensionsElementAndApiInitializer(\r\n\t\t\tthis,\r\n\t\t\tumbExtensionsRegistry,\r\n\t\t\t'workspace',\r\n\t\t\tapiArgsCreator,\r\n\t\t\t(manifest: ManifestWorkspace) => manifest.meta.entityType === entityType,\r\n\t\t\t(extensionControllers) => {\r\n\t\t\t\tthis._component = extensionControllers[0]?.component;\r\n\t\t\t\tconst api = extensionControllers[0]?.api;\r\n\t\t\t\tif (api) {\r\n\t\t\t\t\t// We create the additional workspace contexts with the Workspace API as its host, to ensure they can use the same Context-Alias with different API-Aliases and still be reached cause they will then be provided at the same host. [NL]\r\n\t\t\t\t\tnew UmbExtensionsApiInitializer(api, umbExtensionsRegistry, 'workspaceContext', [api]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tundefined, // We can leave the alias to undefined, as we destroy this our selfs.\r\n\t\t\tundefined,\r\n\t\t\t() => import('./kinds/default/default-workspace.context.js'),\r\n\t\t\t{ single: true },\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn this._component ?? html`<umb-view-loader></umb-view-loader>`;\r\n\t}\r\n}\r\n\r\nexport { UmbWorkspaceElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-workspace': UmbWorkspaceElement;\r\n\t}\r\n}\r\n"],"names":["_extensionsController","_entityType","_UmbWorkspaceElement_instances","createController_fn","apiArgsCreator","manifest","UmbWorkspaceElement","UmbLitElement","__privateAdd","__privateGet","value","__privateSet","__privateMethod","_changedProperties","UMB_MARK_ATTRIBUTE_NAME","html","entityType","UmbExtensionsElementAndApiInitializer","umbExtensionsRegistry","extensionControllers","api","UmbExtensionsApiInitializer","__decorateClass","state","property","customElement"],"mappings":";;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAWA,MAAMC,IAAgE,CAACC,MAC/D,CAAC,EAAE,UAAAA,GAAU;AAId,IAAMC,IAAN,cAAkCC,EAAc;AAAA,EAAhD,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAN,CAAA,GACNM,EAAA,MAAAR,CAAA,GACAQ,EAAA,MAAAP,CAAA;AAAA,EAAA;AAAA,EAMA,IAAW,aAAiC;AAC3C,WAAOQ,EAAA,MAAKR,CAAA;AAAA,EACb;AAAA,EACA,IAAW,WAAWS,GAAe;AACpC,IAAIA,MAAUD,EAAA,MAAKR,CAAA,KAAe,CAACS,MACnCC,EAAA,MAAKV,GAAcS,CAAA,GACnBE,EAAA,MAAKV,MAAL,KAAA,MAAuBQ,CAAA;AAAA,EACxB;AAAA,EAEmB,aAAaG,GAA6E;AAC5G,UAAM,aAAaA,CAAkB,GACrC,KAAK,aAAaC,GAAyB,WAAW;AAAA,EACvD;AAAA,EA2BS,SAAS;AACjB,WAAO,KAAK,cAAcC;AAAA,EAC3B;AACD;AAjDCf,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AAFMC,IAAA,oBAAA,QAAA;AAsBNC,IAAiB,SAACa,GAAoB;AACrC,EAAIP,QAAKT,CAAA,KACRS,EAAA,MAAKT,GAAsB,QAAA,GAE5BW,EAAA,MAAKX,GAAwB,IAAIiB;AAAA,IAChC;AAAA,IACAC;AAAA,IACA;AAAA,IACAd;AAAA,IACA,CAACC,MAAgCA,EAAS,KAAK,eAAeW;AAAA,IAC9D,CAACG,MAAyB;AACzB,WAAK,aAAaA,EAAqB,CAAC,GAAG;AAC3C,YAAMC,IAAMD,EAAqB,CAAC,GAAG;AACrC,MAAIC,KAEH,IAAIC,EAA4BD,GAAKF,GAAuB,oBAAoB,CAACE,CAAG,CAAC;AAAA,IAEvF;AAAA,IACA;AAAA;AAAA,IACA;AAAA,IACA,MAAM,OAAO,yCAA8C;AAAA,IAC3D,EAAE,QAAQ,GAAA;AAAA,EAAK,CAChB;AACD;AAxCQE,EAAA;AAAA,EADPC,EAAA;AAAM,GAJKjB,EAKJ,WAAA,cAAA,CAAA;AAGGgB,EAAA;AAAA,EADVE,EAAS,EAAE,MAAM,QAAQ,WAAW,eAAe;AAAA,GAPxClB,EAQD,WAAA,cAAA,CAAA;AARCA,IAANgB,EAAA;AAAA,EADNG,EAAc,eAAe;AAAA,GACjBnB,CAAA;"}