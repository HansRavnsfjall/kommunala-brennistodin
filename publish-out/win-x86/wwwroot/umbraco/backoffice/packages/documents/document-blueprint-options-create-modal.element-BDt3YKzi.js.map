{"version":3,"file":"document-blueprint-options-create-modal.element-BDt3YKzi.js","sources":["../../../src/packages/documents/document-blueprints/entity-actions/create/modal/document-blueprint-options-create-modal.element.ts"],"sourcesContent":["import {\r\n\tUMB_DOCUMENT_BLUEPRINT_FOLDER_REPOSITORY_ALIAS,\r\n\tUmbDocumentBlueprintFolderRepository,\r\n} from '../../../tree/index.js';\r\nimport type {\r\n\tUmbDocumentBlueprintOptionsCreateModalData,\r\n\tUmbDocumentBlueprintOptionsCreateModalValue,\r\n} from './constants.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { html, customElement, css, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { type UmbSelectedEvent, UmbSelectionChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbCreateFolderEntityAction, type UmbTreeElement } from '@umbraco-cms/backoffice/tree';\r\n\r\n@customElement('umb-document-blueprint-options-create-modal')\r\nexport class UmbDocumentBlueprintOptionsCreateModalElement extends UmbModalBaseElement<\r\n\tUmbDocumentBlueprintOptionsCreateModalData,\r\n\tUmbDocumentBlueprintOptionsCreateModalValue\r\n> {\r\n\t@state()\r\n\tprivate _parentName?: string;\r\n\r\n\t#createFolderAction?: UmbCreateFolderEntityAction;\r\n\r\n\t#folderRepository = new UmbDocumentBlueprintFolderRepository(this);\r\n\r\n\toverride async connectedCallback(): Promise<void> {\r\n\t\tsuper.connectedCallback();\r\n\t\tif (!this.data?.parent) throw new Error('A parent is required to create a folder');\r\n\r\n\t\tif (this.data.parent.unique) {\r\n\t\t\tconst { data: parent } = await this.#folderRepository.requestByUnique(this.data.parent.unique.toString());\r\n\t\t\tthis._parentName = parent?.name ?? this.localize.term('general_unknown');\r\n\t\t} else {\r\n\t\t\tthis._parentName = this.localize.term('treeHeaders_contentBlueprints');\r\n\t\t}\r\n\r\n\t\t// TODO: render the info from this instance in the list of actions\r\n\t\tthis.#createFolderAction = new UmbCreateFolderEntityAction(this, {\r\n\t\t\tunique: this.data.parent.unique,\r\n\t\t\tentityType: this.data.parent.entityType,\r\n\t\t\tmeta: {\r\n\t\t\t\ticon: 'icon-folder',\r\n\t\t\t\tlabel: this.localize.term('create_newFolder'),\r\n\t\t\t\tfolderRepositoryAlias: UMB_DOCUMENT_BLUEPRINT_FOLDER_REPOSITORY_ALIAS,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onCreateFolderClick(event: PointerEvent) {\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tthis.#createFolderAction\r\n\t\t\t?.execute()\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis._submitModal();\r\n\t\t\t})\r\n\t\t\t.catch(() => {});\r\n\t}\r\n\r\n\t#onSelected(event: UmbSelectedEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst element = event.target as UmbTreeElement;\r\n\t\tthis.value = { documentTypeUnique: element.getSelection()[0] };\r\n\t\tthis.modalContext?.dispatchEvent(new UmbSelectionChangeEvent());\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('actions_createblueprint')}>\r\n\t\t\t\t<uui-box headline=${this.localize.term('blueprints_createBlueprintFolderUnder', this._parentName)}>\r\n\t\t\t\t\t<uui-menu-item @click=${this.#onCreateFolderClick} label=${this.localize.term('create_newFolder') + '...'}>\r\n\t\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-folder\"></uui-icon>\r\n\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t</uui-box>\r\n\t\t\t\t<uui-box headline=${this.localize.term('blueprints_createBlueprintItemUnder', this._parentName)}>\r\n\t\t\t\t\t<umb-localize key=\"create_createContentBlueprint\">\r\n\t\t\t\t\t\tSelect the Document Type you want to make a Document Blueprint for\r\n\t\t\t\t\t</umb-localize>\r\n\t\t\t\t\t<umb-tree\r\n\t\t\t\t\t\talias=\"Umb.Tree.DocumentType\"\r\n\t\t\t\t\t\t.props=${{\r\n\t\t\t\t\t\t\thideTreeRoot: true,\r\n\t\t\t\t\t\t\tselectableFilter: (item: any) => item.isElement == false,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t@selected=${this.#onSelected}></umb-tree>\r\n\t\t\t\t</uui-box>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"cancel\"\r\n\t\t\t\t\tlabel=${this.localize.term('buttons_confirmActionCancel')}\r\n\t\t\t\t\t@click=\"${this._rejectModal}\"></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-box:first-child {\r\n\t\t\t\tmargin-bottom: var(--uui-size-6);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDocumentBlueprintOptionsCreateModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-blueprint-create-options-modal': UmbDocumentBlueprintOptionsCreateModalElement;\r\n\t}\r\n}\r\n"],"names":["_createFolderAction","_folderRepository","_UmbDocumentBlueprintOptionsCreateModalElement_instances","onCreateFolderClick_fn","onSelected_fn","UmbDocumentBlueprintOptionsCreateModalElement","UmbModalBaseElement","__privateAdd","UmbDocumentBlueprintFolderRepository","parent","__privateGet","__privateSet","UmbCreateFolderEntityAction","UMB_DOCUMENT_BLUEPRINT_FOLDER_REPOSITORY_ALIAS","html","__privateMethod","item","event","element","UmbSelectionChangeEvent","UmbTextStyles","css","__decorateClass","state","customElement","UmbDocumentBlueprintOptionsCreateModalElement$1"],"mappings":";;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAeO,IAAMC,IAAN,cAA4DC,EAGjE;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAONK,EAAA,MAAAP,CAAA,GAEAO,EAAA,MAAAN,GAAoB,IAAIO,EAAqC,IAAI,CAAA;AAAA,EAAA;AAAA,EAEjE,MAAe,oBAAmC;AAEjD,QADA,MAAM,kBAAA,GACF,CAAC,KAAK,MAAM,OAAQ,OAAM,IAAI,MAAM,yCAAyC;AAEjF,QAAI,KAAK,KAAK,OAAO,QAAQ;AAC5B,YAAM,EAAE,MAAMC,EAAA,IAAW,MAAMC,EAAA,MAAKT,CAAA,EAAkB,gBAAgB,KAAK,KAAK,OAAO,OAAO,UAAU;AACxG,WAAK,cAAcQ,GAAQ,QAAQ,KAAK,SAAS,KAAK,iBAAiB;AAAA,IACxE;AACC,WAAK,cAAc,KAAK,SAAS,KAAK,+BAA+B;AAItE,IAAAE,EAAA,MAAKX,GAAsB,IAAIY,EAA4B,MAAM;AAAA,MAChE,QAAQ,KAAK,KAAK,OAAO;AAAA,MACzB,YAAY,KAAK,KAAK,OAAO;AAAA,MAC7B,MAAM;AAAA,QACL,MAAM;AAAA,QACN,OAAO,KAAK,SAAS,KAAK,kBAAkB;AAAA,QAC5C,uBAAuBC;AAAA,MAAA;AAAA,IACxB,CACA,CAAA;AAAA,EACF;AAAA,EAqBS,SAAS;AACjB,WAAOC;AAAA,+BACsB,KAAK,SAAS,KAAK,yBAAyB,CAAC;AAAA,wBACpD,KAAK,SAAS,KAAK,yCAAyC,KAAK,WAAW,CAAC;AAAA,6BACxEC,EAAA,MAAKb,KAAoB,UAAU,KAAK,SAAS,KAAK,kBAAkB,IAAI,KAAK;AAAA;AAAA;AAAA;AAAA,wBAItF,KAAK,SAAS,KAAK,uCAAuC,KAAK,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAMpF;AAAA,MACR,cAAc;AAAA,MACd,kBAAkB,CAACc,MAAcA,EAAK,aAAa;AAAA,IAAA,CACnD;AAAA,kBACWD,QAAKb,GAAAE,CAAA,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA,aAKrB,KAAK,SAAS,KAAK,6BAA6B,CAAC;AAAA,eAC/C,KAAK,YAAY;AAAA;AAAA;AAAA,EAG/B;AAUD;AAnFCJ,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AATMC,IAAA,oBAAA,QAAA;AAkCAC,IAAoB,eAACc,GAAqB;AAC/C,EAAAA,EAAM,gBAAA,GAENP,EAAA,MAAKV,CAAA,GACF,QAAA,EACD,KAAK,MAAM;AACX,SAAK,aAAA;AAAA,EACN,CAAC,EACA,MAAM,MAAM;AAAA,EAAC,CAAC;AACjB;AAEAI,IAAW,SAACa,GAAyB;AACpC,EAAAA,EAAM,gBAAA;AACN,QAAMC,IAAUD,EAAM;AACtB,OAAK,QAAQ,EAAE,oBAAoBC,EAAQ,aAAA,EAAe,CAAC,EAAA,GAC3D,KAAK,cAAc,cAAc,IAAIC,EAAA,CAAyB,GAC9D,KAAK,aAAA;AACN;AAnDYd,EAkFI,SAAS;AAAA,EACxBe;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AApFQC,EAAA;AAAA,EADPC,EAAA;AAAM,GAJKlB,EAKJ,WAAA,eAAA,CAAA;AALIA,IAANiB,EAAA;AAAA,EADNE,EAAc,6CAA6C;AAAA,GAC/CnB,CAAA;AA4Fb,MAAAoB,IAAepB;"}