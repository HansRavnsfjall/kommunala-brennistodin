{"version":3,"file":"document-links-workspace-info-app.element-DLOLbfHr.js","sources":["../../../src/packages/documents/documents/url/info-app/document-links-workspace-info-app.element.ts"],"sourcesContent":["import { UmbDocumentUrlRepository } from '../repository/index.js';\r\nimport type { UmbDocumentVariantOptionModel } from '../../types.js';\r\nimport { UMB_DOCUMENT_WORKSPACE_CONTEXT } from '../../workspace/constants.js';\r\nimport type { UmbDocumentUrlModel } from '../repository/types.js';\r\nimport { UmbDocumentUrlsDataResolver } from '../document-urls-data-resolver.js';\r\nimport {\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tifDefined,\r\n\tnothing,\r\n\trepeat,\r\n\tstate,\r\n\twhen,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbEntityActionEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { observeMultiple } from '@umbraco-cms/backoffice/observable-api';\r\nimport { DocumentVariantStateModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { debounce } from '@umbraco-cms/backoffice/utils';\r\nimport { UMB_PROPERTY_DATASET_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type { UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\n\r\ninterface UmbDocumentInfoViewLink {\r\n\tculture: string | null;\r\n\turl: string | null | undefined;\r\n\tstate: DocumentVariantStateModel | null | undefined;\r\n}\r\n\r\n@customElement('umb-document-links-workspace-info-app')\r\nexport class UmbDocumentLinksWorkspaceInfoAppElement extends UmbLitElement {\r\n\t#documentUrlRepository = new UmbDocumentUrlRepository(this);\r\n\r\n\t@state()\r\n\tprivate _isNew = false;\r\n\r\n\t@state()\r\n\tprivate _unique?: string;\r\n\r\n\t@state()\r\n\tprivate _variantOptions?: Array<UmbDocumentVariantOptionModel>;\r\n\r\n\t@state()\r\n\tprivate _loading = false;\r\n\r\n\t@state()\r\n\tprivate _links: Array<UmbDocumentInfoViewLink> = [];\r\n\r\n\t#urls: Array<UmbDocumentUrlModel> = [];\r\n\r\n\t#documentWorkspaceContext?: typeof UMB_DOCUMENT_WORKSPACE_CONTEXT.TYPE;\r\n\t#eventContext?: typeof UMB_ACTION_EVENT_CONTEXT.TYPE;\r\n\t#propertyDataSetVariantId?: UmbVariantId;\r\n\r\n\t#documentUrlsDataResolver? = new UmbDocumentUrlsDataResolver(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_ACTION_EVENT_CONTEXT, (context) => {\r\n\t\t\tthis.#eventContext = context;\r\n\r\n\t\t\tthis.#eventContext?.removeEventListener(\r\n\t\t\t\tUmbRequestReloadStructureForEntityEvent.TYPE,\r\n\t\t\t\tthis.#onReloadRequest as unknown as EventListener,\r\n\t\t\t);\r\n\r\n\t\t\tthis.#eventContext?.addEventListener(\r\n\t\t\t\tUmbRequestReloadStructureForEntityEvent.TYPE,\r\n\t\t\t\tthis.#onReloadRequest as unknown as EventListener,\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_DOCUMENT_WORKSPACE_CONTEXT, (context) => {\r\n\t\t\tthis.#documentWorkspaceContext = context;\r\n\t\t\tif (context) {\r\n\t\t\t\tthis.observe(\r\n\t\t\t\t\tobserveMultiple([context.isNew, context.unique]),\r\n\t\t\t\t\t([isNew, unique]) => {\r\n\t\t\t\t\t\tif (!unique) return;\r\n\t\t\t\t\t\tthis._isNew = isNew === true;\r\n\r\n\t\t\t\t\t\tif (unique !== this._unique) {\r\n\t\t\t\t\t\t\tthis._unique = unique;\r\n\t\t\t\t\t\t\tthis.#requestUrls();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'observeWorkspaceState',\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis.removeUmbControllerByAlias('observeWorkspaceState');\r\n\t\t\t}\r\n\r\n\t\t\tthis.observe(context?.variantOptions, (variantOptions) => {\r\n\t\t\t\tthis._variantOptions = variantOptions;\r\n\t\t\t\tthis.#setLinks();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_DATASET_CONTEXT, (context) => {\r\n\t\t\tthis.#propertyDataSetVariantId = context?.getVariantId();\r\n\t\t\tthis.#setLinks();\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#documentUrlsDataResolver?.urls, (urls) => {\r\n\t\t\tthis.#urls = urls ?? [];\r\n\t\t\tthis.#setLinks();\r\n\t\t});\r\n\t}\r\n\r\n\t#setLinks() {\r\n\t\tconst links: Array<UmbDocumentInfoViewLink> = this.#urls.map((url) => {\r\n\t\t\tconst culture = url.culture;\r\n\t\t\tconst state = this._variantOptions?.find((variantOption) => variantOption.culture === culture)?.variant?.state;\r\n\t\t\treturn {\r\n\t\t\t\tculture,\r\n\t\t\t\turl: url.url,\r\n\t\t\t\tstate,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tthis._links = links;\r\n\t}\r\n\r\n\t#getTargetUrl(url: string | undefined) {\r\n\t\tif (!url || url.length === 0) {\r\n\t\t\treturn url;\r\n\t\t}\r\n\r\n\t\tif (url.includes('.') && !url.includes('//')) {\r\n\t\t\treturn '//' + url;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t}\r\n\r\n\tasync #requestUrls() {\r\n\t\tif (this._isNew) return;\r\n\t\tif (!this._unique) return;\r\n\r\n\t\tthis._loading = true;\r\n\t\tthis.#documentUrlsDataResolver?.setData([]);\r\n\r\n\t\tconst { data } = await this.#documentUrlRepository.requestItems([this._unique]);\r\n\r\n\t\tif (data?.length) {\r\n\t\t\tthis.#documentUrlsDataResolver?.setData(data[0].urls);\r\n\t\t}\r\n\r\n\t\tthis._loading = false;\r\n\t}\r\n\r\n\t#getStateLocalizationKey(state: DocumentVariantStateModel | null | undefined): string {\r\n\t\tswitch (state) {\r\n\t\t\tcase null:\r\n\t\t\tcase undefined:\r\n\t\t\tcase DocumentVariantStateModel.NOT_CREATED:\r\n\t\t\t\treturn 'content_notCreated';\r\n\t\t\tcase DocumentVariantStateModel.DRAFT:\r\n\t\t\t\treturn 'content_itemNotPublished';\r\n\t\t\tcase DocumentVariantStateModel.PUBLISHED:\r\n\t\t\t\treturn 'content_routeErrorCannotRoute';\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'content_parentNotPublishedAnomaly';\r\n\t\t}\r\n\t}\r\n\r\n\t#debounceRequestUrls = debounce(() => this.#requestUrls(), 50);\r\n\r\n\t#onReloadRequest = (event: UmbEntityActionEvent) => {\r\n\t\t// TODO: Introduce \"Published Event\". We only need to update the url when the document is published.\r\n\t\tif (event.getUnique() !== this.#documentWorkspaceContext?.getUnique()) return;\r\n\t\tif (event.getEntityType() !== this.#documentWorkspaceContext.getEntityType()) return;\r\n\t\tthis.#debounceRequestUrls();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-workspace-info-app-layout headline=\"#general_links\">\r\n\t\t\t\t${when(\r\n\t\t\t\t\tthis._loading,\r\n\t\t\t\t\t() => this.#renderLoading(),\r\n\t\t\t\t\t() => this.#renderContent(),\r\n\t\t\t\t)}\r\n\t\t\t</umb-workspace-info-app-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLoading() {\r\n\t\treturn html`<div id=\"loader-container\"><uui-loader></uui-loader></div>`;\r\n\t}\r\n\r\n\t#renderContent() {\r\n\t\treturn html`\r\n\t\t\t${when(\r\n\t\t\t\tthis._isNew,\r\n\t\t\t\t() => this.#renderNotCreated(),\r\n\t\t\t\t() => (this._links.length === 0 ? this.#renderNoLinks() : this.#renderLinks()),\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderNotCreated() {\r\n\t\treturn html`${this.#renderEmptyLink(null, null)}`;\r\n\t}\r\n\r\n\t#renderLinks() {\r\n\t\treturn html`\r\n\t\t\t${repeat(\r\n\t\t\t\tthis._links,\r\n\t\t\t\t(link) => link.url,\r\n\t\t\t\t(link) => this.#renderLink(link),\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLink(link: UmbDocumentInfoViewLink) {\r\n\t\tif (!link.url) {\r\n\t\t\treturn this.#renderEmptyLink(link.culture, link.state);\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<a class=\"link-item\" href=${ifDefined(this.#getTargetUrl(link.url))} target=\"_blank\">\r\n\t\t\t\t<span>\r\n\t\t\t\t\t${this.#renderLinkCulture(link.culture)}\r\n\t\t\t\t\t<span>${link.url}</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<uui-icon name=\"icon-out\"></uui-icon>\r\n\t\t\t</a>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderNoLinks() {\r\n\t\treturn html` ${this._variantOptions\r\n\t\t\t?.filter((variantOption) => variantOption.culture === this.#propertyDataSetVariantId?.culture)\r\n\t\t\t.map((variantOption) => this.#renderEmptyLink(variantOption.culture, variantOption.variant?.state))}`;\r\n\t}\r\n\r\n\t#renderEmptyLink(culture: string | null, state: DocumentVariantStateModel | null | undefined) {\r\n\t\treturn html`<div class=\"link-item\">\r\n\t\t\t<span>\r\n\t\t\t\t${this.#renderLinkCulture(culture)}\r\n\t\t\t\t<em><umb-localize key=${this.#getStateLocalizationKey(state)}></umb-localize></em>\r\n\t\t\t</span>\r\n\t\t</div>`;\r\n\t}\r\n\r\n\t#renderLinkCulture(culture: string | null) {\r\n\t\tif (!culture) return nothing;\r\n\t\tif (this._links.length === 1) return nothing;\r\n\t\tconst allLinksHaveSameCulture = this._links?.every((link) => link.culture === culture);\r\n\t\tif (allLinksHaveSameCulture) return nothing;\r\n\t\treturn html`<span class=\"culture\">${culture}</span>`;\r\n\t}\r\n\r\n\toverride disconnectedCallback(): void {\r\n\t\tsuper.disconnectedCallback();\r\n\r\n\t\tthis.#eventContext?.removeEventListener(\r\n\t\t\tUmbRequestReloadStructureForEntityEvent.TYPE,\r\n\t\t\tthis.#onReloadRequest as unknown as EventListener,\r\n\t\t);\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#loader-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t.link-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-6);\r\n\t\t\t\tpadding: var(--uui-size-space-4) var(--uui-size-space-5);\r\n\r\n\t\t\t\t&:is(a) {\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\tcolor: inherit;\r\n\t\t\t\t\ttext-decoration: none;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&:is(a):hover {\r\n\t\t\t\t\tbackground: var(--uui-color-divider);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t& > span {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tgap: var(--uui-size-6);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.culture {\r\n\t\t\t\t\tcolor: var(--uui-color-divider-emphasis);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDocumentLinksWorkspaceInfoAppElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-links-workspace-info-app': UmbDocumentLinksWorkspaceInfoAppElement;\r\n\t}\r\n}\r\n"],"names":["_documentUrlRepository","_urls","_documentWorkspaceContext","_eventContext","_propertyDataSetVariantId","_documentUrlsDataResolver","_UmbDocumentLinksWorkspaceInfoAppElement_instances","setLinks_fn","getTargetUrl_fn","requestUrls_fn","getStateLocalizationKey_fn","_debounceRequestUrls","_onReloadRequest","renderLoading_fn","renderContent_fn","renderNotCreated_fn","renderLinks_fn","renderLink_fn","renderNoLinks_fn","renderEmptyLink_fn","renderLinkCulture_fn","UmbDocumentLinksWorkspaceInfoAppElement","UmbLitElement","__privateAdd","UmbDocumentUrlRepository","UmbDocumentUrlsDataResolver","debounce","__privateMethod","event","__privateGet","UMB_ACTION_EVENT_CONTEXT","context","__privateSet","UmbRequestReloadStructureForEntityEvent","UMB_DOCUMENT_WORKSPACE_CONTEXT","observeMultiple","isNew","unique","variantOptions","UMB_PROPERTY_DATASET_CONTEXT","urls","html","when","links","url","culture","state","variantOption","data","DocumentVariantStateModel","repeat","link","ifDefined","nothing","css","__decorateClass","customElement","UmbDocumentLinksWorkspaceInfoAppElement$1"],"mappings":"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"}