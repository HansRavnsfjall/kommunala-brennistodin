{"version":3,"file":"document-recycle-bin.server.data-source--ty-V6sV.js","sources":["../../../src/packages/documents/documents/recycle-bin/repository/document-recycle-bin.server.data-source.ts"],"sourcesContent":["import type {\r\n\tUmbRecycleBinDataSource,\r\n\tUmbRecycleBinRestoreRequestArgs,\r\n\tUmbRecycleBinTrashRequestArgs,\r\n\tUmbRecycleBinOriginalParentRequestArgs,\r\n} from '@umbraco-cms/backoffice/recycle-bin';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { DocumentService } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\n\r\nexport class UmbDocumentRecycleBinServerDataSource implements UmbRecycleBinDataSource {\r\n\t#host: UmbControllerHost;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\ttrash(args: UmbRecycleBinTrashRequestArgs) {\r\n\t\treturn tryExecute(this.#host, DocumentService.putDocumentByIdMoveToRecycleBin({ path: { id: args.unique } }));\r\n\t}\r\n\r\n\trestore(args: UmbRecycleBinRestoreRequestArgs) {\r\n\t\treturn tryExecute(\r\n\t\t\tthis.#host,\r\n\t\t\tDocumentService.putRecycleBinDocumentByIdRestore({\r\n\t\t\t\tpath: { id: args.unique },\r\n\t\t\t\tbody: {\r\n\t\t\t\t\ttarget: args.destination.unique ? { id: args.destination.unique } : null,\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tempty() {\r\n\t\treturn tryExecute(this.#host, DocumentService.deleteRecycleBinDocument());\r\n\t}\r\n\r\n\tasync getOriginalParent(args: UmbRecycleBinOriginalParentRequestArgs) {\r\n\t\tconst { data, error } = await tryExecute(\r\n\t\t\tthis.#host,\r\n\t\t\tDocumentService.getRecycleBinDocumentByIdOriginalParent({ path: { id: args.unique } }),\r\n\t\t);\r\n\r\n\t\t// only check for undefined because data can be null if the parent is the root\r\n\t\tif (data !== undefined) {\r\n\t\t\tconst mappedData = data ? { unique: data.id } : null;\r\n\t\t\treturn { data: mappedData };\r\n\t\t}\r\n\r\n\t\treturn { error };\r\n\t}\r\n}\r\n"],"names":["UmbDocumentRecycleBinServerDataSource","#host","host","args","tryExecute","DocumentService","data","error"],"mappings":";;AAUO,MAAMA,EAAyE;AAAA,EACrFC;AAAA,EAEA,YAAYC,GAAyB;AACpC,SAAKD,KAAQC;AAAA,EACd;AAAA,EAEA,MAAMC,GAAqC;AAC1C,WAAOC,EAAW,KAAKH,IAAOI,EAAgB,gCAAgC,EAAE,MAAM,EAAE,IAAIF,EAAK,OAAA,EAAO,CAAG,CAAC;AAAA,EAC7G;AAAA,EAEA,QAAQA,GAAuC;AAC9C,WAAOC;AAAA,MACN,KAAKH;AAAA,MACLI,EAAgB,iCAAiC;AAAA,QAChD,MAAM,EAAE,IAAIF,EAAK,OAAA;AAAA,QACjB,MAAM;AAAA,UACL,QAAQA,EAAK,YAAY,SAAS,EAAE,IAAIA,EAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MACrE,CACA;AAAA,IAAA;AAAA,EAEH;AAAA,EAEA,QAAQ;AACP,WAAOC,EAAW,KAAKH,IAAOI,EAAgB,0BAA0B;AAAA,EACzE;AAAA,EAEA,MAAM,kBAAkBF,GAA8C;AACrE,UAAM,EAAE,MAAAG,GAAM,OAAAC,EAAA,IAAU,MAAMH;AAAA,MAC7B,KAAKH;AAAA,MACLI,EAAgB,wCAAwC,EAAE,MAAM,EAAE,IAAIF,EAAK,SAAO,CAAG;AAAA,IAAA;AAItF,WAAIG,MAAS,SAEL,EAAE,MADUA,IAAO,EAAE,QAAQA,EAAK,OAAO,KACjC,IAGT,EAAE,OAAAC,EAAA;AAAA,EACV;AACD;"}