{"version":3,"file":"document-tree-item.context-B0tdWQyQ.js","sources":["../../../src/packages/documents/documents/tree/tree-item/document-tree-item.context.ts"],"sourcesContent":["import type { UmbDocumentTreeItemModel, UmbDocumentTreeRootModel } from '../types.js';\r\nimport { UmbDocumentItemDataResolver } from '../../item/index.js';\r\nimport { UmbDefaultTreeItemContext } from '@umbraco-cms/backoffice/tree';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbIsTrashedEntityContext } from '@umbraco-cms/backoffice/recycle-bin';\r\nimport { UmbAncestorsEntityContext } from '@umbraco-cms/backoffice/entity';\r\n\r\nexport class UmbDocumentTreeItemContext extends UmbDefaultTreeItemContext<\r\n\tUmbDocumentTreeItemModel,\r\n\tUmbDocumentTreeRootModel\r\n> {\r\n\t// TODO: Provide this together with the EntityContext, ideally this takes part via a extension-type [NL]\r\n\t#isTrashedContext = new UmbIsTrashedEntityContext(this);\r\n\t#ancestorsContext = new UmbAncestorsEntityContext(this);\r\n\t#item = new UmbDocumentItemDataResolver(this);\r\n\r\n\treadonly name = this.#item.name;\r\n\treadonly icon = this.#item.icon;\r\n\treadonly isDraft = this.#item.isDraft;\r\n\treadonly flags = this.#item.flags;\r\n\r\n\treadonly ancestors = this._treeItem.asObservablePart((item) => item?.ancestors ?? []);\r\n\treadonly isTrashed = this._treeItem.asObservablePart((item) => item?.isTrashed ?? false);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\r\n\t\tthis.observe(this.isTrashed, (isTrashed) => {\r\n\t\t\tthis.#isTrashedContext.setIsTrashed(isTrashed);\r\n\t\t});\r\n\r\n\t\tthis.observe(this.ancestors, (ancestors) => {\r\n\t\t\tthis.#ancestorsContext.setAncestors(ancestors);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic override setTreeItem(treeItem: UmbDocumentTreeItemModel | undefined) {\r\n\t\tsuper.setTreeItem(treeItem);\r\n\t\tthis.#item.setData(treeItem);\r\n\t}\r\n}\r\n\r\nexport { UmbDocumentTreeItemContext as api };\r\n"],"names":["UmbDocumentTreeItemContext","UmbDefaultTreeItemContext","host","#isTrashedContext","UmbIsTrashedEntityContext","#ancestorsContext","UmbAncestorsEntityContext","#item","UmbDocumentItemDataResolver","item","isTrashed","ancestors","treeItem"],"mappings":";;;;;;;;;AAOO,MAAMA,UAAmCC,EAG9C;AAAA,EAcD,YAAYC,GAAyB;AACpC,UAAMA,CAAI,GAbX,KAAAC,KAAoB,IAAIC,EAA0B,IAAI,GACtD,KAAAC,KAAoB,IAAIC,EAA0B,IAAI,GACtD,KAAAC,KAAQ,IAAIC,EAA4B,IAAI,GAE5C,KAAS,OAAO,KAAKD,GAAM,MAC3B,KAAS,OAAO,KAAKA,GAAM,MAC3B,KAAS,UAAU,KAAKA,GAAM,SAC9B,KAAS,QAAQ,KAAKA,GAAM,OAE5B,KAAS,YAAY,KAAK,UAAU,iBAAiB,CAACE,MAASA,GAAM,aAAa,EAAE,GACpF,KAAS,YAAY,KAAK,UAAU,iBAAiB,CAACA,MAASA,GAAM,aAAa,EAAK,GAKtF,KAAK,QAAQ,KAAK,WAAW,CAACC,MAAc;AAC3C,WAAKP,GAAkB,aAAaO,CAAS;AAAA,IAC9C,CAAC,GAED,KAAK,QAAQ,KAAK,WAAW,CAACC,MAAc;AAC3C,WAAKN,GAAkB,aAAaM,CAAS;AAAA,IAC9C,CAAC;AAAA,EACF;AAAA,EAtBAR;AAAA,EACAE;AAAA,EACAE;AAAA,EAsBgB,YAAYK,GAAgD;AAC3E,UAAM,YAAYA,CAAQ,GAC1B,KAAKL,GAAM,QAAQK,CAAQ;AAAA,EAC5B;AACD;"}