{"version":3,"file":"document-type-detail.repository-CpC7IMIu.js","sources":["../../../src/packages/documents/document-types/repository/detail/server-data-source/document-type-detail.server.request-manager.ts","../../../src/packages/documents/document-types/repository/detail/server-data-source/document-type-detail.server.data-source.ts","../../../src/packages/documents/document-types/repository/detail/document-type-detail.repository.ts"],"sourcesContent":["/* eslint-disable local-rules/no-direct-api-import */\r\nimport { documentTypeDetailCache } from './document-type-detail.server.cache.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport {\r\n\tDocumentTypeService,\r\n\ttype CreateDocumentTypeRequestModel,\r\n\ttype DocumentTypeResponseModel,\r\n\ttype UpdateDocumentTypeRequestModel,\r\n} from '@umbraco-cms/backoffice/external/backend-api';\r\nimport {\r\n\tUmbManagementApiDetailDataRequestManager,\r\n\tUmbManagementApiInFlightRequestCache,\r\n} from '@umbraco-cms/backoffice/management-api';\r\n\r\nexport class UmbManagementApiDocumentTypeDetailDataRequestManager extends UmbManagementApiDetailDataRequestManager<\r\n\tDocumentTypeResponseModel,\r\n\tUpdateDocumentTypeRequestModel,\r\n\tCreateDocumentTypeRequestModel\r\n> {\r\n\tstatic #inflightRequestCache = new UmbManagementApiInFlightRequestCache<DocumentTypeResponseModel>();\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tcreate: (body: CreateDocumentTypeRequestModel) => DocumentTypeService.postDocumentType({ body }),\r\n\t\t\tread: (id: string) => DocumentTypeService.getDocumentTypeById({ path: { id } }),\r\n\t\t\tupdate: (id: string, body: UpdateDocumentTypeRequestModel) =>\r\n\t\t\t\tDocumentTypeService.putDocumentTypeById({ path: { id }, body }),\r\n\t\t\tdelete: (id: string) => DocumentTypeService.deleteDocumentTypeById({ path: { id } }),\r\n\t\t\tdataCache: documentTypeDetailCache,\r\n\t\t\tinflightRequestCache: UmbManagementApiDocumentTypeDetailDataRequestManager.#inflightRequestCache,\r\n\t\t});\r\n\t}\r\n}\r\n","import type { UmbDocumentTypeDetailModel } from '../../../types.js';\r\nimport { UMB_DOCUMENT_TYPE_ENTITY_TYPE } from '../../../entity.js';\r\nimport { UmbManagementApiDocumentTypeDetailDataRequestManager } from './document-type-detail.server.request-manager.js';\r\nimport { UmbId } from '@umbraco-cms/backoffice/id';\r\nimport type { UmbDetailDataSource } from '@umbraco-cms/backoffice/repository';\r\nimport type {\r\n\tCreateDocumentTypeRequestModel,\r\n\tDocumentTypeResponseModel,\r\n\tUpdateDocumentTypeRequestModel,\r\n} from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { UmbPropertyContainerTypes, UmbPropertyTypeContainerModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\n\r\n/**\r\n * A data source for the Document Type that fetches data from the server\r\n * @class UmbDocumentTypeServerDataSource\r\n * @implements {RepositoryDetailDataSource}\r\n */\r\nexport class UmbDocumentTypeDetailServerDataSource\r\n\textends UmbControllerBase\r\n\timplements UmbDetailDataSource<UmbDocumentTypeDetailModel>\r\n{\r\n\t#detailRequestManager = new UmbManagementApiDocumentTypeDetailDataRequestManager(this);\r\n\r\n\t/**\r\n\t * Creates a new Document Type scaffold\r\n\t * @param {(string | null)} parentUnique\r\n\t * @param preset\r\n\t * @returns { CreateDocumentTypeRequestModel }\r\n\t * @memberof UmbDocumentTypeServerDataSource\r\n\t */\r\n\tasync createScaffold(preset: Partial<UmbDocumentTypeDetailModel> = {}) {\r\n\t\tconst data: UmbDocumentTypeDetailModel = {\r\n\t\t\tentityType: UMB_DOCUMENT_TYPE_ENTITY_TYPE,\r\n\t\t\tunique: UmbId.new(),\r\n\t\t\tname: '',\r\n\t\t\talias: '',\r\n\t\t\tdescription: '',\r\n\t\t\ticon: 'icon-document',\r\n\t\t\tallowedAtRoot: false,\r\n\t\t\tvariesByCulture: false,\r\n\t\t\tvariesBySegment: false,\r\n\t\t\tisElement: false,\r\n\t\t\tproperties: [],\r\n\t\t\tcontainers: [],\r\n\t\t\tallowedContentTypes: [],\r\n\t\t\tcompositions: [],\r\n\t\t\tallowedTemplates: [],\r\n\t\t\tdefaultTemplate: null,\r\n\t\t\tcleanup: {\r\n\t\t\t\tpreventCleanup: false,\r\n\t\t\t\tkeepAllVersionsNewerThanDays: null,\r\n\t\t\t\tkeepLatestVersionPerDayForDays: null,\r\n\t\t\t},\r\n\t\t\tcollection: null,\r\n\t\t\t...preset,\r\n\t\t};\r\n\r\n\t\treturn { data };\r\n\t}\r\n\r\n\t/**\r\n\t * Fetches a Media Type with the given id from the server\r\n\t * @param {string} unique\r\n\t * @returns {*}\r\n\t * @memberof UmbDocumentTypeServerDataSource\r\n\t */\r\n\tasync read(unique: string) {\r\n\t\tif (!unique) throw new Error('Unique is missing');\r\n\r\n\t\tconst { data, error } = await this.#detailRequestManager.read(unique);\r\n\r\n\t\treturn { data: data ? this.#mapServerResponseModelToEntityDetailModel(data) : undefined, error };\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts a new Media Type on the server\r\n\t * @param {UmbDocumentTypeDetailModel} model\r\n\t * @param parentUnique\r\n\t * @returns {*}\r\n\t * @memberof UmbDocumentTypeServerDataSource\r\n\t */\r\n\tasync create(model: UmbDocumentTypeDetailModel, parentUnique: string | null = null) {\r\n\t\tif (!model) throw new Error('Media Type is missing');\r\n\t\tif (!model.unique) throw new Error('Media Type unique is missing');\r\n\r\n\t\t// TODO: make data mapper to prevent errors\r\n\t\tconst body: CreateDocumentTypeRequestModel = {\r\n\t\t\tparent: parentUnique ? { id: parentUnique } : null,\r\n\t\t\talias: model.alias,\r\n\t\t\tname: model.name,\r\n\t\t\tdescription: model.description,\r\n\t\t\ticon: model.icon,\r\n\t\t\tallowedAsRoot: model.allowedAtRoot,\r\n\t\t\tvariesByCulture: model.variesByCulture,\r\n\t\t\tvariesBySegment: model.variesBySegment,\r\n\t\t\tisElement: model.isElement,\r\n\t\t\tproperties: model.properties.map((property) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: property.id,\r\n\t\t\t\t\tcontainer: property.container,\r\n\t\t\t\t\tsortOrder: property.sortOrder,\r\n\t\t\t\t\talias: property.alias,\r\n\t\t\t\t\tname: property.name,\r\n\t\t\t\t\tdescription: property.description,\r\n\t\t\t\t\tdataType: { id: property.dataType.unique },\r\n\t\t\t\t\tvariesByCulture: property.variesByCulture,\r\n\t\t\t\t\tvariesBySegment: property.variesBySegment,\r\n\t\t\t\t\tvalidation: property.validation,\r\n\t\t\t\t\tappearance: property.appearance,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tcontainers: model.containers,\r\n\t\t\tallowedDocumentTypes: model.allowedContentTypes.map((allowedContentType) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdocumentType: { id: allowedContentType.contentType.unique },\r\n\t\t\t\t\tsortOrder: allowedContentType.sortOrder,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tcompositions: model.compositions.map((composition) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdocumentType: { id: composition.contentType.unique },\r\n\t\t\t\t\tcompositionType: composition.compositionType,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tid: model.unique,\r\n\t\t\tallowedTemplates: model.allowedTemplates,\r\n\t\t\tdefaultTemplate: model.defaultTemplate ? { id: model.defaultTemplate.id } : null,\r\n\t\t\tcleanup: model.cleanup,\r\n\t\t\tcollection: model.collection?.unique ? { id: model.collection?.unique } : null,\r\n\t\t};\r\n\r\n\t\tconst { data, error } = await this.#detailRequestManager.create(body);\r\n\r\n\t\treturn { data: data ? this.#mapServerResponseModelToEntityDetailModel(data) : undefined, error };\r\n\t}\r\n\r\n\t/**\r\n\t * Updates a DocumentType on the server\r\n\t * @param {UmbDocumentTypeDetailModel} DocumentType\r\n\t * @param model\r\n\t * @returns {*}\r\n\t * @memberof UmbDocumentTypeServerDataSource\r\n\t */\r\n\tasync update(model: UmbDocumentTypeDetailModel) {\r\n\t\tif (!model.unique) throw new Error('Unique is missing');\r\n\r\n\t\t// TODO: make data mapper to prevent errors\r\n\t\tconst body: UpdateDocumentTypeRequestModel = {\r\n\t\t\talias: model.alias,\r\n\t\t\tname: model.name,\r\n\t\t\tdescription: model.description,\r\n\t\t\ticon: model.icon,\r\n\t\t\tallowedAsRoot: model.allowedAtRoot,\r\n\t\t\tvariesByCulture: model.variesByCulture,\r\n\t\t\tvariesBySegment: model.variesBySegment,\r\n\t\t\tisElement: model.isElement,\r\n\t\t\tproperties: model.properties.map((property) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: property.id,\r\n\t\t\t\t\tcontainer: property.container,\r\n\t\t\t\t\tsortOrder: property.sortOrder,\r\n\t\t\t\t\talias: property.alias,\r\n\t\t\t\t\tname: property.name,\r\n\t\t\t\t\tdescription: property.description,\r\n\t\t\t\t\tdataType: { id: property.dataType.unique },\r\n\t\t\t\t\tvariesByCulture: property.variesByCulture,\r\n\t\t\t\t\tvariesBySegment: property.variesBySegment,\r\n\t\t\t\t\tvalidation: property.validation,\r\n\t\t\t\t\tappearance: property.appearance,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tcontainers: model.containers.map((container) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: container.id,\r\n\t\t\t\t\tparent: container.parent ? { id: container.parent.id } : null,\r\n\t\t\t\t\tname: container.name ?? '',\r\n\t\t\t\t\ttype: container.type as UmbPropertyContainerTypes, // TODO: check if the value is valid\r\n\t\t\t\t\tsortOrder: container.sortOrder,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tallowedDocumentTypes: model.allowedContentTypes.map((allowedContentType) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdocumentType: { id: allowedContentType.contentType.unique },\r\n\t\t\t\t\tsortOrder: allowedContentType.sortOrder,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tcompositions: model.compositions.map((composition) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdocumentType: { id: composition.contentType.unique },\r\n\t\t\t\t\tcompositionType: composition.compositionType,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tallowedTemplates: model.allowedTemplates,\r\n\t\t\tdefaultTemplate: model.defaultTemplate ? { id: model.defaultTemplate.id } : null,\r\n\t\t\tcleanup: model.cleanup,\r\n\t\t\tcollection: model.collection?.unique ? { id: model.collection?.unique } : null,\r\n\t\t};\r\n\r\n\t\tconst { data, error } = await this.#detailRequestManager.update(model.unique, body);\r\n\r\n\t\treturn { data: data ? this.#mapServerResponseModelToEntityDetailModel(data) : undefined, error };\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes a Media Type on the server\r\n\t * @param {string} unique\r\n\t * @returns {*}\r\n\t * @memberof UmbDocumentTypeServerDataSource\r\n\t */\r\n\tasync delete(unique: string) {\r\n\t\tif (!unique) throw new Error('Unique is missing');\r\n\t\treturn this.#detailRequestManager.delete(unique);\r\n\t}\r\n\r\n\t// TODO: change this to a mapper extension when the endpoints returns a $type for DocumentTypeResponseModel\r\n\t#mapServerResponseModelToEntityDetailModel(data: DocumentTypeResponseModel): UmbDocumentTypeDetailModel {\r\n\t\treturn {\r\n\t\t\tentityType: UMB_DOCUMENT_TYPE_ENTITY_TYPE,\r\n\t\t\tunique: data.id,\r\n\t\t\tname: data.name,\r\n\t\t\talias: data.alias,\r\n\t\t\tdescription: data.description ?? '',\r\n\t\t\ticon: data.icon,\r\n\t\t\tallowedAtRoot: data.allowedAsRoot,\r\n\t\t\tvariesByCulture: data.variesByCulture,\r\n\t\t\tvariesBySegment: data.variesBySegment,\r\n\t\t\tisElement: data.isElement,\r\n\t\t\tproperties: data.properties.map((property) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: property.id,\r\n\t\t\t\t\tunique: property.id,\r\n\t\t\t\t\tcontainer: property.container,\r\n\t\t\t\t\tsortOrder: property.sortOrder,\r\n\t\t\t\t\talias: property.alias,\r\n\t\t\t\t\tname: property.name,\r\n\t\t\t\t\tdescription: property.description,\r\n\t\t\t\t\tdataType: { unique: property.dataType.id },\r\n\t\t\t\t\tvariesByCulture: property.variesByCulture,\r\n\t\t\t\t\tvariesBySegment: property.variesBySegment,\r\n\t\t\t\t\tvalidation: property.validation,\r\n\t\t\t\t\tappearance: property.appearance,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tcontainers: data.containers as UmbPropertyTypeContainerModel[],\r\n\t\t\tallowedContentTypes: data.allowedDocumentTypes.map((allowedDocumentType) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcontentType: { unique: allowedDocumentType.documentType.id },\r\n\t\t\t\t\tsortOrder: allowedDocumentType.sortOrder,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tcompositions: data.compositions.map((composition) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcontentType: { unique: composition.documentType.id },\r\n\t\t\t\t\tcompositionType: composition.compositionType,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tallowedTemplates: data.allowedTemplates,\r\n\t\t\tdefaultTemplate: data.defaultTemplate ? { id: data.defaultTemplate.id } : null,\r\n\t\t\tcleanup: data.cleanup,\r\n\t\t\tcollection: data.collection ? { unique: data.collection?.id } : null,\r\n\t\t};\r\n\t}\r\n}\r\n","import type { UmbDocumentTypeDetailModel } from '../../types.js';\r\nimport { UMB_DOCUMENT_TYPE_DETAIL_STORE_CONTEXT } from './document-type-detail.store.context-token.js';\r\nimport { UmbDocumentTypeDetailServerDataSource } from './server-data-source/document-type-detail.server.data-source.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbDetailRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nexport class UmbDocumentTypeDetailRepository extends UmbDetailRepositoryBase<UmbDocumentTypeDetailModel> {\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UmbDocumentTypeDetailServerDataSource, UMB_DOCUMENT_TYPE_DETAIL_STORE_CONTEXT);\r\n\t}\r\n}\r\n\r\nexport { UmbDocumentTypeDetailRepository as api };\r\n"],"names":["UmbManagementApiDocumentTypeDetailDataRequestManager","UmbManagementApiDetailDataRequestManager","#inflightRequestCache","UmbManagementApiInFlightRequestCache","host","body","DocumentTypeService","id","documentTypeDetailCache","UmbDocumentTypeDetailServerDataSource","UmbControllerBase","#detailRequestManager","preset","UMB_DOCUMENT_TYPE_ENTITY_TYPE","UmbId","unique","data","error","#mapServerResponseModelToEntityDetailModel","model","parentUnique","property","allowedContentType","composition","container","allowedDocumentType","UmbDocumentTypeDetailRepository","UmbDetailRepositoryBase","UMB_DOCUMENT_TYPE_DETAIL_STORE_CONTEXT"],"mappings":"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"}