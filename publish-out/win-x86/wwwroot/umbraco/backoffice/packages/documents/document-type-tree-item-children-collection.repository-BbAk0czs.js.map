{"version":3,"file":"document-type-tree-item-children-collection.repository-BbAk0czs.js","sources":["../../../src/packages/documents/document-types/tree/tree-item-children/collection/repository/document-type-tree-item-children-collection.repository.ts"],"sourcesContent":["import { UmbDocumentTypeTreeRepository } from '../../../document-type-tree.repository.js';\r\nimport type { UmbCollectionFilterModel, UmbCollectionRepository } from '@umbraco-cms/backoffice/collection';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nimport { UMB_ENTITY_CONTEXT, type UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\n\r\nexport class UmbDocumentTypeTreeItemChildrenCollectionRepository\r\n\textends UmbRepositoryBase\r\n\timplements UmbCollectionRepository\r\n{\r\n\t#treeRepository = new UmbDocumentTypeTreeRepository(this);\r\n\r\n\tasync requestCollection(filter: UmbCollectionFilterModel) {\r\n\t\t// TODO: get parent from args\r\n\t\tconst entityContext = await this.getContext(UMB_ENTITY_CONTEXT);\r\n\t\tif (!entityContext) throw new Error('Entity context not found');\r\n\r\n\t\tconst entityType = entityContext.getEntityType();\r\n\t\tconst unique = entityContext.getUnique();\r\n\r\n\t\tif (!entityType) throw new Error('Entity type not found');\r\n\t\tif (unique === undefined) throw new Error('Unique not found');\r\n\r\n\t\tconst parent: UmbEntityModel = { entityType, unique };\r\n\r\n\t\tif (parent.unique === null) {\r\n\t\t\treturn this.#treeRepository.requestTreeRootItems({ skip: filter.skip, take: filter.take });\r\n\t\t} else {\r\n\t\t\treturn this.#treeRepository.requestTreeItemsOf({ parent, skip: filter.skip, take: filter.take });\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { UmbDocumentTypeTreeItemChildrenCollectionRepository as api };\r\n"],"names":["UmbDocumentTypeTreeItemChildrenCollectionRepository","UmbRepositoryBase","#treeRepository","UmbDocumentTypeTreeRepository","filter","entityContext","UMB_ENTITY_CONTEXT","entityType","unique","parent"],"mappings":";;;AAKO,MAAMA,UACJC,EAET;AAAA,EACCC,KAAkB,IAAIC,EAA8B,IAAI;AAAA,EAExD,MAAM,kBAAkBC,GAAkC;AAEzD,UAAMC,IAAgB,MAAM,KAAK,WAAWC,CAAkB;AAC9D,QAAI,CAACD,EAAe,OAAM,IAAI,MAAM,0BAA0B;AAE9D,UAAME,IAAaF,EAAc,cAAA,GAC3BG,IAASH,EAAc,UAAA;AAE7B,QAAI,CAACE,EAAY,OAAM,IAAI,MAAM,uBAAuB;AACxD,QAAIC,MAAW,OAAW,OAAM,IAAI,MAAM,kBAAkB;AAE5D,UAAMC,IAAyB,EAAE,YAAAF,GAAY,QAAAC,EAAA;AAE7C,WAAIC,EAAO,WAAW,OACd,KAAKP,GAAgB,qBAAqB,EAAE,MAAME,EAAO,MAAM,MAAMA,EAAO,MAAM,IAElF,KAAKF,GAAgB,mBAAmB,EAAE,QAAAO,GAAQ,MAAML,EAAO,MAAM,MAAMA,EAAO,KAAA,CAAM;AAAA,EAEjG;AACD;"}