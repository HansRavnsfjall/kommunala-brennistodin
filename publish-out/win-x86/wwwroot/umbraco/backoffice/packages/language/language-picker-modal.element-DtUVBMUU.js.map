{"version":3,"file":"language-picker-modal.element-DtUVBMUU.js","sources":["../../../src/packages/language/modals/language-picker/language-picker-modal.element.ts"],"sourcesContent":["import { UmbLanguageCollectionRepository } from '../../collection/index.js';\r\nimport type { UmbLanguageItemModel } from '../../types.js';\r\nimport type { UmbLanguagePickerModalValue, UmbLanguagePickerModalData } from './language-picker-modal.token.js';\r\nimport { html, customElement, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbSelectionManager } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\n\r\n@customElement('umb-language-picker-modal')\r\nexport class UmbLanguagePickerModalElement extends UmbModalBaseElement<\r\n\tUmbLanguagePickerModalData,\r\n\tUmbLanguagePickerModalValue\r\n> {\r\n\t@state()\r\n\tprivate _languages: Array<UmbLanguageItemModel> = [];\r\n\r\n\t#collectionRepository = new UmbLanguageCollectionRepository(this);\r\n\t#selectionManager = new UmbSelectionManager(this);\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis.#selectionManager.setSelectable(true);\r\n\t\tthis.#selectionManager.setMultiple(this.data?.multiple ?? false);\r\n\t\tthis.#selectionManager.setSelection(this.value?.selection ?? []);\r\n\r\n\t\tthis.observe(this.#selectionManager.selection, (selection) => {\r\n\t\t\tthis.value = { selection };\r\n\t\t});\r\n\t}\r\n\r\n\toverride async firstUpdated() {\r\n\t\tconst { data } = await this.#collectionRepository.requestCollection({});\r\n\t\tthis._languages = data?.items ?? [];\r\n\t}\r\n\r\n\tget #filteredLanguages() {\r\n\t\tif (this.data?.filter) {\r\n\t\t\treturn this._languages.filter(this.data.filter);\r\n\t\t} else {\r\n\t\t\treturn this._languages;\r\n\t\t}\r\n\t}\r\n\r\n\t#submit() {\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<umb-body-layout headline=\"Select languages\">\r\n\t\t\t<uui-box>\r\n\t\t\t\t${this.#filteredLanguages.length > 0\r\n\t\t\t\t\t? repeat(\r\n\t\t\t\t\t\t\tthis.#filteredLanguages,\r\n\t\t\t\t\t\t\t(item) => item.unique,\r\n\t\t\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\t\t\tlabel=${item.name ?? ''}\r\n\t\t\t\t\t\t\t\t\tselectable\r\n\t\t\t\t\t\t\t\t\t@selected=${() => this.#selectionManager.select(item.unique)}\r\n\t\t\t\t\t\t\t\t\t@deselected=${() => this.#selectionManager.deselect(item.unique)}\r\n\t\t\t\t\t\t\t\t\t?selected=${this.value.selection.includes(item.unique)}>\r\n\t\t\t\t\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-globe\"></uui-icon>\r\n\t\t\t\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t: html`<umb-localize key=\"language_noFallbackLanguages\">\r\n\t\t\t\t\t\t\tThere are no other languages to choose from\r\n\t\t\t\t\t\t</umb-localize>`}\r\n\t\t\t</uui-box>\r\n\t\t\t<div slot=\"actions\">\r\n\t\t\t\t<uui-button label=\"Close\" @click=${this.#close}></uui-button>\r\n\t\t\t\t<uui-button label=\"Submit\" look=\"primary\" color=\"positive\" @click=${this.#submit}></uui-button>\r\n\t\t\t</div>\r\n\t\t</umb-body-layout> `;\r\n\t}\r\n}\r\n\r\nexport default UmbLanguagePickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-language-picker-modal': UmbLanguagePickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_collectionRepository","_selectionManager","_UmbLanguagePickerModalElement_instances","filteredLanguages_get","submit_fn","close_fn","UmbLanguagePickerModalElement","UmbModalBaseElement","__privateAdd","UmbLanguageCollectionRepository","UmbSelectionManager","__privateGet","selection","data","html","repeat","item","__privateMethod","__decorateClass","state","customElement","UmbLanguagePickerModalElement$1"],"mappings":";;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAQO,IAAMC,IAAN,cAA4CC,EAGjD;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAN,CAAA,GAKN,KAAQ,aAA0C,CAAA,GAElDM,EAAA,MAAAR,GAAwB,IAAIS,EAAgC,IAAI,CAAA,GAChED,EAAA,MAAAP,GAAoB,IAAIS,EAAoB,IAAI,CAAA;AAAA,EAAA;AAAA,EAEvC,oBAA0B;AAClC,UAAM,kBAAA,GACNC,EAAA,MAAKV,CAAA,EAAkB,cAAc,EAAI,GACzCU,EAAA,MAAKV,CAAA,EAAkB,YAAY,KAAK,MAAM,YAAY,EAAK,GAC/DU,EAAA,MAAKV,GAAkB,aAAa,KAAK,OAAO,aAAa,EAAE,GAE/D,KAAK,QAAQU,EAAA,MAAKV,CAAA,EAAkB,WAAW,CAACW,MAAc;AAC7D,WAAK,QAAQ,EAAE,WAAAA,EAAA;AAAA,IAChB,CAAC;AAAA,EACF;AAAA,EAEA,MAAe,eAAe;AAC7B,UAAM,EAAE,MAAAC,MAAS,MAAMF,QAAKX,CAAA,EAAsB,kBAAkB,EAAE;AACtE,SAAK,aAAaa,GAAM,SAAS,CAAA;AAAA,EAClC;AAAA,EAkBS,SAAS;AACjB,WAAOC;AAAA;AAAA,MAEHH,EAAA,MAAKT,GAAAC,CAAA,EAAmB,SAAS,IAChCY;AAAA,MACAJ,EAAA,MAAKT,GAAAC,CAAA;AAAA,MACL,CAACa,MAASA,EAAK;AAAA,MACf,CAACA,MAASF;AAAA;AAAA,iBAEAE,EAAK,QAAQ,EAAE;AAAA;AAAA,qBAEX,MAAML,EAAA,MAAKV,CAAA,EAAkB,OAAOe,EAAK,MAAM,CAAC;AAAA,uBAC9C,MAAML,EAAA,MAAKV,CAAA,EAAkB,SAASe,EAAK,MAAM,CAAC;AAAA,qBACpD,KAAK,MAAM,UAAU,SAASA,EAAK,MAAM,CAAC;AAAA;AAAA;AAAA;AAAA,IAAA,IAKxDF;AAAA;AAAA,sBAEe;AAAA;AAAA;AAAA,uCAGiBG,QAAKf,GAAAG,CAAA,CAAM;AAAA,wEACsBY,QAAKf,GAAAE,CAAA,CAAO;AAAA;AAAA;AAAA,EAGnF;AACD;AA/DCJ,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AARMC,IAAA,oBAAA,QAAA;AA0BFC,IAAkB,WAAG;AACxB,SAAI,KAAK,MAAM,SACP,KAAK,WAAW,OAAO,KAAK,KAAK,MAAM,IAEvC,KAAK;AAEd;AAEAC,IAAO,WAAG;AACT,OAAK,cAAc,OAAA;AACpB;AAEAC,IAAM,WAAG;AACR,OAAK,cAAc,OAAA;AACpB;AAnCQa,EAAA;AAAA,EADPC,EAAA;AAAM,GAJKb,EAKJ,WAAA,cAAA,CAAA;AALIA,IAANY,EAAA;AAAA,EADNE,EAAc,2BAA2B;AAAA,GAC7Bd,CAAA;AAwEb,MAAAe,IAAef;"}