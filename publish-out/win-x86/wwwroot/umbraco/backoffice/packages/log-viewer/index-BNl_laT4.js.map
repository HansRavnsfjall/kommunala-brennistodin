{"version":3,"file":"index-BNl_laT4.js","sources":["../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-level-tag.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-log-level-filter-menu.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-message.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-messages-list.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-polling-button.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-search-input.element.ts","../../../src/packages/log-viewer/workspace/views/search/log-search-view.element.ts","../../../src/packages/log-viewer/workspace/views/search/index.ts"],"sourcesContent":["import type { UUIInterfaceColor, UUIInterfaceLook } from '@umbraco-cms/backoffice/external/uui';\r\nimport { html, LitElement, ifDefined, customElement, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { LogLevelModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\ninterface LevelMapStyles {\r\n\tlook?: UUIInterfaceLook;\r\n\tcolor?: UUIInterfaceColor;\r\n\tstyle?: string;\r\n}\r\n\r\n@customElement('umb-log-viewer-level-tag')\r\nexport class UmbLogViewerLevelTagElement extends LitElement {\r\n\t@property()\r\n\tlevel?: LogLevelModel;\r\n\r\n\tlevelMap: Record<LogLevelModel, LevelMapStyles> = {\r\n\t\tVerbose: { look: 'secondary' },\r\n\t\tDebug: {\r\n\t\t\tlook: 'primary',\r\n\t\t\tstyle: 'background-color: var(--umb-log-viewer-debug-color)',\r\n\t\t},\r\n\t\tInformation: { look: 'primary', color: 'positive' },\r\n\t\tWarning: { look: 'primary', color: 'warning' },\r\n\t\tError: { look: 'primary', color: 'danger' },\r\n\t\tFatal: {\r\n\t\t\tlook: 'primary',\r\n\t\t\tstyle: 'background-color: var(--umb-log-viewer-fatal-color)',\r\n\t\t},\r\n\t};\r\n\r\n\toverride render() {\r\n\t\treturn html`<uui-tag\r\n\t\t\tlook=${ifDefined(this.level ? this.levelMap[this.level]?.look : undefined)}\r\n\t\t\tcolor=${ifDefined(this.level ? this.levelMap[this.level]?.color : undefined)}\r\n\t\t\tstyle=\"${ifDefined(this.level ? this.levelMap[this.level]?.style : undefined)}\"\r\n\t\t\t>${this.level}<slot></slot\r\n\t\t></uui-tag>`;\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-level-tag': UmbLogViewerLevelTagElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport type { UUICheckboxElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, customElement, queryAll, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { debounce } from '@umbraco-cms/backoffice/utils';\r\nimport { LogLevelModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { path, query, toQueryString } from '@umbraco-cms/backoffice/router';\r\n\r\n@customElement('umb-log-viewer-log-level-filter-menu')\r\nexport class UmbLogViewerLogLevelFilterMenuElement extends UmbLitElement {\r\n\t@queryAll('#log-level-selector > uui-checkbox')\r\n\tprivate _logLevelSelectorCheckboxes!: NodeListOf<UUICheckboxElement>;\r\n\r\n\t@state()\r\n\tprivate _logLevelFilter: LogLevelModel[] = [];\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeLogLevelFilter();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeLogLevelFilter() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.observe(this.#logViewerContext.logLevelsFilter, (levelsFilter) => {\r\n\t\t\tthis._logLevelFilter = levelsFilter ?? [];\r\n\t\t});\r\n\t}\r\n\r\n\t#setLogLevel() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tconst logLevels = Array.from(this._logLevelSelectorCheckboxes)\r\n\t\t\t.filter((checkbox) => checkbox.checked)\r\n\t\t\t.map((checkbox) => checkbox.value as LogLevelModel);\r\n\r\n\t\tlet q = query();\r\n\r\n\t\tif (logLevels.length) {\r\n\t\t\tq = { ...q, loglevels: logLevels.join(',') };\r\n\t\t} else {\r\n\t\t\tdelete q.loglevels;\r\n\t\t}\r\n\r\n\t\twindow.history.pushState({}, '', `${path()}?${toQueryString(q)}`);\r\n\t}\r\n\r\n\tsetLogLevelDebounce = debounce(this.#setLogLevel, 300);\r\n\r\n\t#selectAllLogLevels() {\r\n\t\tthis._logLevelSelectorCheckboxes.forEach((checkbox) => (checkbox.checked = true));\r\n\t\tthis.#setLogLevel();\r\n\t}\r\n\r\n\t#deselectAllLogLevels() {\r\n\t\tthis._logLevelSelectorCheckboxes.forEach((checkbox) => (checkbox.checked = false));\r\n\t\tthis.#setLogLevel();\r\n\t}\r\n\r\n\t#renderLogLevelSelector() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"log-level-selector\" @change=${this.setLogLevelDebounce}>\r\n\t\t\t\t${Object.values(LogLevelModel).map(\r\n\t\t\t\t\t(logLevel) =>\r\n\t\t\t\t\t\thtml`<uui-checkbox\r\n\t\t\t\t\t\t\tclass=\"log-level-menu-item\"\r\n\t\t\t\t\t\t\t.checked=${this._logLevelFilter.includes(logLevel)}\r\n\t\t\t\t\t\t\t.value=${logLevel}\r\n\t\t\t\t\t\t\tlabel=\"${logLevel}\">\r\n\t\t\t\t\t\t\t<umb-log-viewer-level-tag .level=${logLevel}></umb-log-viewer-level-tag>\r\n\t\t\t\t\t\t</uui-checkbox>`,\r\n\t\t\t\t)}\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tclass=\"log-level-menu-item\"\r\n\t\t\t\t\t@click=${this.#selectAllLogLevels}\r\n\t\t\t\t\tlabel=${this.localize.term('general_selectAll')}></uui-button>\r\n\t\t\t\t<uui-button class=\"log-level-menu-item\" @click=${this.#deselectAllLogLevels} label=\"Deselect all\"\r\n\t\t\t\t\t>Deselect all</uui-button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-dropdown label=\"Select log levels\">\r\n\t\t\t\t<span slot=\"label\">\r\n\t\t\t\t\tLog Level:\r\n\t\t\t\t\t${this._logLevelFilter.length > 0\r\n\t\t\t\t\t\t? this._logLevelFilter.map((level) => html`<span class=\"log-level-button-indicator\">${level}</span>`)\r\n\t\t\t\t\t\t: 'All'}\r\n\t\t\t\t</span>\r\n\t\t\t\t${this.#renderLogLevelSelector()}\r\n\t\t\t</umb-dropdown>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#log-level-selector {\r\n\t\t\t\tpadding: var(--uui-box-default-padding, var(--uui-size-space-5, 18px));\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tbox-shadow: var(--uui-shadow-depth-3);\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\t.log-level-button-indicator {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.log-level-button-indicator:not(:last-of-type)::after {\r\n\t\t\t\tcontent: ', ';\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-log-level-filter-menu': UmbLogViewerLogLevelFilterMenuElement;\r\n\t}\r\n}\r\n","import { css, customElement, html, property, query, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { query as getQuery, toQueryString } from '@umbraco-cms/backoffice/router';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { LogLevelModel, LogMessagePropertyPresentationModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { PropertyValueMap } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n//TODO: check how to display EventId field in the message properties\r\n@customElement('umb-log-viewer-message')\r\nexport class UmbLogViewerMessageElement extends UmbLitElement {\r\n\t@query('details')\r\n\tdetails!: HTMLDetailsElement;\r\n\r\n\t@property()\r\n\ttimestamp = '';\r\n\r\n\t@state()\r\n\tdate?: Date;\r\n\r\n\t@property()\r\n\tlevel: LogLevelModel | '' = '';\r\n\r\n\t@property()\r\n\tmessageTemplate = '';\r\n\r\n\t@property()\r\n\trenderedMessage = '';\r\n\r\n\t@property({ attribute: false })\r\n\tproperties: Array<LogMessagePropertyPresentationModel> = [];\r\n\r\n\t@property({ type: Boolean })\r\n\topen = false;\r\n\r\n\t@property()\r\n\texception = '';\r\n\r\n\toverride willUpdate(changedProperties: Map<string | number | symbol, unknown>) {\r\n\t\tif (changedProperties.has('timestamp')) {\r\n\t\t\tthis.date = new Date(this.timestamp);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected override updated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tif (_changedProperties.has('open')) {\r\n\t\t\tif (this.open) {\r\n\t\t\t\tthis.details.setAttribute('open', 'true');\r\n\t\t\t} else {\r\n\t\t\t\tthis.details.removeAttribute('open');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _searchMenuData: Array<{ label: string; href: () => string; icon: string; title: string }> = [\r\n\t\t{\r\n\t\t\tlabel: 'Search with Google',\r\n\t\t\ttitle: '#logViewer_searchThisMessageWithGoogle',\r\n\t\t\thref: () => `https://www.google.com/search?q=${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-google',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search with Bing',\r\n\t\t\ttitle: 'Search this message with Microsoft Bing',\r\n\t\t\thref: () => `https://www.bing.com/search?q=${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-search',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search in Umbraco Forum',\r\n\t\t\ttitle: 'Search this message on the Umbraco forum',\r\n\t\t\thref: () => `https://forum.umbraco.com/search?q=${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-umbraco',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search in Umbraco Forum with Google',\r\n\t\t\ttitle: 'Search Umbraco Forum using Google',\r\n\t\t\thref: () => `https://www.google.com/?q=site:forum.umbraco.com%20${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-google',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search Umbraco source code',\r\n\t\t\ttitle: 'Search the Umbraco source code on GitHub',\r\n\t\t\thref: () =>\r\n\t\t\t\t`https://github.com/umbraco/Umbraco-CMS/search?q=${\r\n\t\t\t\t\tthis.properties.find((property) => property.name === 'SourceContext')?.value\r\n\t\t\t\t}`,\r\n\t\t\ticon: 'icon-github',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search Umbraco Issues',\r\n\t\t\ttitle: 'Search Umbraco Issues on GitHub',\r\n\t\t\thref: () =>\r\n\t\t\t\t`https://github.com/umbraco/Umbraco-CMS/issues?q=${\r\n\t\t\t\t\tthis.properties.find((property) => property.name === 'SourceContext')?.value\r\n\t\t\t\t}`,\r\n\t\t\ticon: 'icon-github',\r\n\t\t},\r\n\t];\r\n\r\n\tprivate _propertiesWithSearchMenu: Array<string> = ['HttpRequestNumber', 'SourceContext', 'MachineName'];\r\n\r\n\tprivate _findLogsWithProperty({ name, value }: LogMessagePropertyPresentationModel) {\r\n\t\tif (!name) return '';\r\n\r\n\t\tlet query = getQuery();\r\n\t\tlet sanitizedValue = value ?? '';\r\n\r\n\t\tif (isNaN(+(value ?? ''))) {\r\n\t\t\tsanitizedValue = \"'\" + value + \"'\";\r\n\t\t}\r\n\r\n\t\tquery = {\r\n\t\t\t...query,\r\n\t\t\tlq: `${name}=${sanitizedValue}`,\r\n\t\t};\r\n\r\n\t\tconst queryString = toQueryString(query);\r\n\r\n\t\treturn queryString;\r\n\t}\r\n\r\n\t#setOpen(event: Event) {\r\n\t\tthis.open = (event.target as HTMLDetailsElement).open;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<details @open=${this.#setOpen}>\r\n\t\t\t\t<summary>\r\n\t\t\t\t\t<div id=\"timestamp\">${this.date?.toLocaleString()}</div>\r\n\t\t\t\t\t<div id=\"level\">\r\n\t\t\t\t\t\t<umb-log-viewer-level-tag .level=${this.level ? this.level : 'Information'}></umb-log-viewer-level-tag>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"machine\">${this.properties.find((property) => property.name === 'MachineName')?.value}</div>\r\n\t\t\t\t\t<div id=\"message\"><uui-scroll-container>${this.renderedMessage}</uui-scroll-container></div>\r\n\t\t\t\t</summary>\r\n\t\t\t\t${this.exception ? html`<pre id=\"exception\">${this.exception}</pre>` : ''}\r\n\t\t\t\t<ul id=\"properties-list\">\r\n\t\t\t\t\t<li class=\"property\">\r\n\t\t\t\t\t\t<div class=\"property-name\">Timestamp</div>\r\n\t\t\t\t\t\t<div class=\"property-value\">${this.date?.toLocaleString()}</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"property\">\r\n\t\t\t\t\t\t<div class=\"property-name\">@MessageTemplate</div>\r\n\t\t\t\t\t\t<div class=\"property-value\">${this.messageTemplate}</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t${this.properties.map(\r\n\t\t\t\t\t\t(property) =>\r\n\t\t\t\t\t\t\thtml`<li class=\"property\">\r\n\t\t\t\t\t\t\t\t<div class=\"property-name\">${property.name}:</div>\r\n\t\t\t\t\t\t\t\t<div class=\"property-value\">\r\n\t\t\t\t\t\t\t\t\t${property.value}\r\n\t\t\t\t\t\t\t\t\t${this._propertiesWithSearchMenu.includes(property.name ?? '')\r\n\t\t\t\t\t\t\t\t\t\t? html`<uui-button\r\n\t\t\t\t\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Find logs with ${property.name}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Find logs with ${property.name}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\thref=${`section/settings/workspace/logviewer/view/search/?${this._findLogsWithProperty(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproperty,\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uui-icon name=\"icon-search\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t\t\t</uui-button>`\r\n\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<umb-dropdown look=\"secondary\" placement=\"bottom-start\" id=\"search-button\" label=\"Search\">\r\n\t\t\t\t\t<span slot=\"label\"><uui-icon name=\"icon-search\"></uui-icon> Search</span>\r\n\t\t\t\t\t${this._searchMenuData.map(\r\n\t\t\t\t\t\t(menuItem) => html`\r\n\t\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\t\tclass=\"search-item\"\r\n\t\t\t\t\t\t\t\thref=${menuItem.href()}\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\tlabel=${menuItem.label}\r\n\t\t\t\t\t\t\t\ttitle=${menuItem.title}>\r\n\t\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\t\tmenuItem.icon,\r\n\t\t\t\t\t\t\t\t\t(icon) => html`<uui-icon slot=\"icon\" name=${icon}></uui-icon>`,\r\n\t\t\t\t\t\t\t\t\t() => html`<uui-icon slot=\"icon\" name=\"icon-search\"></uui-icon>`,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t\t\t`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</umb-dropdown>\r\n\t\t\t</details>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host > details {\r\n\t\t\t\tborder-top: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t:host(:last-child) > details {\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\tsummary {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\tdetails[open] {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tsummary:hover {\r\n\t\t\t\tbackground-color: var(--uui-color-surface-emphasis);\r\n\t\t\t\tcolor: var(--uui-color-interactive-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t#properties-list {\r\n\t\t\t\tpadding: 0;\r\n\t\t\t\tlist-style: none;\r\n\t\t\t}\r\n\r\n\t\t\t.property {\r\n\t\t\t\tpadding: 10px 20px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tborder-top: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.property:first-child {\r\n\t\t\t\tborder-top: transparent;\r\n\t\t\t}\r\n\r\n\t\t\t#properties-list,\r\n\t\t\tpre {\r\n\t\t\t\tmargin: 0 var(--uui-size-layout-1);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbackground-color: var(--uui-color-background);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tpre {\r\n\t\t\t\tborder-left: 4px solid #d42054;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tfont-family:\r\n\t\t\t\t\tLato,\r\n\t\t\t\t\tHelvetica Neue,\r\n\t\t\t\t\tHelvetica,\r\n\t\t\t\t\tArial,\r\n\t\t\t\t\tsans-serif;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\toverflow-x: auto;\r\n\t\t\t\tpadding: 9.5px;\r\n\t\t\t\twhite-space: pre-wrap;\r\n\t\t\t}\r\n\r\n\t\t\tsummary > div {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tpadding: 10px 20px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#timestamp {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#level,\r\n\t\t\t#machine {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\tuui-menu-item {\r\n\t\t\t\t--uui-menu-item-flat-structure: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#message {\r\n\t\t\t\tflex: 6 0 14ch;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t}\r\n\t\t\t#search-button {\r\n\t\t\t\tmargin-left: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\t.property-name,\r\n\t\t\t.property-value {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t.property-name {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tflex: 1 1 20ch;\r\n\t\t\t}\r\n\r\n\t\t\t.property-value {\r\n\t\t\t\tflex: 3 0 20ch;\r\n\t\t\t}\r\n\r\n\t\t\t.search-item {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-message': UmbLogViewerMessageElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport type { UUIScrollContainerElement, UUIPaginationElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, customElement, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { LogMessageResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { DirectionModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\n@customElement('umb-log-viewer-messages-list')\r\nexport class UmbLogViewerMessagesListElement extends UmbLitElement {\r\n\t@query('#logs-scroll-container')\r\n\tprivate _logsScrollContainer!: UUIScrollContainerElement;\r\n\r\n\t@state()\r\n\tprivate _sortingDirection: DirectionModel = DirectionModel.ASCENDING;\r\n\r\n\t@state()\r\n\tprivate _logs: LogMessageResponseModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _logsTotal = 0;\r\n\r\n\t@state()\r\n\tprivate _isLoading = true;\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeLogs();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeLogs() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.observe(this.#logViewerContext.logs, (logs) => {\r\n\t\t\tthis._logs = logs ?? [];\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.isLoadingLogs, (isLoading) => {\r\n\t\t\tthis._isLoading = isLoading === null ? this._isLoading : isLoading;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.logsTotal, (total) => {\r\n\t\t\tthis._logsTotal = total ?? 0;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.sortingDirection, (direction) => {\r\n\t\t\tthis._sortingDirection = direction;\r\n\t\t});\r\n\t}\r\n\r\n\t#sortLogs() {\r\n\t\tthis.#logViewerContext?.toggleSortOrder();\r\n\t\tthis.#logViewerContext?.setCurrentPage(1);\r\n\t\tthis.#logViewerContext?.getLogs();\r\n\t}\r\n\r\n\t#onPageChange(event: Event): void {\r\n\t\tconst current = (event.target as UUIPaginationElement).current;\r\n\t\tthis.#logViewerContext?.setCurrentPage(current);\r\n\t\tthis.#logViewerContext?.getLogs();\r\n\t\tthis._logsScrollContainer.scrollTop = 0;\r\n\t}\r\n\r\n\tprivate _renderPagination() {\r\n\t\tif (!this._logsTotal) return '';\r\n\r\n\t\tconst totalPages = Math.ceil(this._logsTotal / 100);\r\n\r\n\t\tif (totalPages <= 1) return '';\r\n\r\n\t\treturn html`<div id=\"pagination\">\r\n\t\t\t<uui-pagination\r\n\t\t\t\t.total=${totalPages}\r\n\t\t\t\tfirstlabel=${this.localize.term('general_first')}\r\n\t\t\t\tpreviouslabel=${this.localize.term('general_previous')}\r\n\t\t\t\tnextlabel=${this.localize.term('general_next')}\r\n\t\t\t\tlastlabel=${this.localize.term('general_last')}\r\n\t\t\t\t@change=\"${this.#onPageChange}\"></uui-pagination>\r\n\t\t</div>`;\r\n\t}\r\n\r\n\t#renderLogs() {\r\n\t\treturn html`${this._logs.length > 0\r\n\t\t\t? html` ${this._logs.map(\r\n\t\t\t\t\t(log) =>\r\n\t\t\t\t\t\thtml`<umb-log-viewer-message\r\n\t\t\t\t\t\t\t.timestamp=${log.timestamp ?? ''}\r\n\t\t\t\t\t\t\t.level=${log.level ?? ''}\r\n\t\t\t\t\t\t\t.renderedMessage=${log.renderedMessage ?? ''}\r\n\t\t\t\t\t\t\t.properties=${log.properties ?? []}\r\n\t\t\t\t\t\t\t.exception=${log.exception ?? ''}\r\n\t\t\t\t\t\t\t.messageTemplate=${log.messageTemplate ?? ''}></umb-log-viewer-message>`,\r\n\t\t\t\t)}`\r\n\t\t\t: html`\r\n\t\t\t\t\t<span id=\"empty\">\r\n\t\t\t\t\t\t<uui-icon name=\"icon-search\"></uui-icon>Sorry, we cannot find what you are looking for.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t`}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\t// TODO: the table should scroll instead of the whole main div\r\n\t\treturn html`<uui-box>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<div id=\"timestamp\">\r\n\t\t\t\t\t\tTimestamp\r\n\t\t\t\t\t\t<uui-button compact @click=${this.#sortLogs} label=\"Sort logs\">\r\n\t\t\t\t\t\t\t<uui-symbol-sort\r\n\t\t\t\t\t\t\t\t?descending=${this._sortingDirection === DirectionModel.DESCENDING}\r\n\t\t\t\t\t\t\t\tactive></uui-symbol-sort>\r\n\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"level\">Level</div>\r\n\t\t\t\t\t<div id=\"machine\">Machine name</div>\r\n\t\t\t\t\t<div id=\"message\">Message</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t${this._isLoading\r\n\t\t\t\t\t\t? html` <span id=\"empty\"> <uui-loader-circle></uui-loader-circle>Loading log messages... </span> `\r\n\t\t\t\t\t\t: html`${this.#renderLogs()}`}\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\t\t\t${this._renderPagination()} `;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tuui-pagination {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0;\r\n\t\t\t}\r\n\r\n\t\t\t:host {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#header > div {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tpadding: 10px 20px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#main {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#timestamp {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#level,\r\n\t\t\t#machine {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#message {\r\n\t\t\t\tflex: 6 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#empty {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\tmargin: var(--uui-size-space-5) 0;\r\n\t\t\t}\r\n\r\n\t\t\t#pagination {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin: var(--uui-size-space-5) 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-messages-list': UmbLogViewerMessagesListElement;\r\n\t}\r\n}\r\n","import type {\r\n\tUmbPoolingConfig,\r\n\tUmbPoolingInterval,\r\n\tUmbLogViewerWorkspaceContext,\r\n} from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport { css, html, customElement, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbDropdownElement } from '@umbraco-cms/backoffice/components';\r\n\r\n@customElement('umb-log-viewer-polling-button')\r\nexport class UmbLogViewerPollingButtonElement extends UmbLitElement {\r\n\t@query('#polling-rate-dropdown')\r\n\tprivate _dropdownElement?: UmbDropdownElement;\r\n\r\n\t@state()\r\n\tprivate _poolingConfig: UmbPoolingConfig = { enabled: false, interval: 0 };\r\n\r\n\t#pollingIntervals: UmbPoolingInterval[] = [2000, 5000, 10000, 20000, 30000];\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observePoolingConfig();\r\n\t\t});\r\n\t}\r\n\r\n\t#observePoolingConfig() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.observe(this.#logViewerContext.polling, (poolingConfig) => {\r\n\t\t\tthis._poolingConfig = { ...poolingConfig };\r\n\t\t});\r\n\t}\r\n\r\n\t#togglePolling() {\r\n\t\tthis.#logViewerContext?.togglePolling();\r\n\t}\r\n\r\n\t#setPolingInterval = (interval: UmbPoolingInterval) => {\r\n\t\tthis.#logViewerContext?.setPollingInterval(interval);\r\n\r\n\t\tthis.#closePoolingPopover();\r\n\t};\r\n\r\n\t#closePoolingPopover() {\r\n\t\tif (this._dropdownElement) {\r\n\t\t\tthis._dropdownElement.open = false;\r\n\t\t}\r\n\r\n\t\tthis.#togglePolling();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-button-group>\r\n\t\t\t\t<uui-button label=\"Start pooling\" @click=${this.#togglePolling}\r\n\t\t\t\t\t>${this._poolingConfig.enabled\r\n\t\t\t\t\t\t? html`<uui-icon name=\"icon-axis-rotation\" id=\"polling-enabled-icon\"></uui-icon>Polling\r\n\t\t\t\t\t\t\t\t${this._poolingConfig.interval / 1000} seconds`\r\n\t\t\t\t\t\t: 'Polling'}</uui-button\r\n\t\t\t\t>\r\n\r\n\t\t\t\t<umb-dropdown id=\"polling-rate-dropdown\" compact label=\"Choose pooling time\">\r\n\t\t\t\t\t${this.#pollingIntervals.map(\r\n\t\t\t\t\t\t(interval: UmbPoolingInterval) =>\r\n\t\t\t\t\t\t\thtml`<uui-menu-item\r\n\t\t\t\t\t\t\t\tlabel=\"Every ${interval / 1000} seconds\"\r\n\t\t\t\t\t\t\t\t@click-label=${() => this.#setPolingInterval(interval)}></uui-menu-item>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</umb-dropdown>\r\n\t\t\t</uui-button-group>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#polling-enabled-icon {\r\n\t\t\t\tmargin-right: var(--uui-size-space-3);\r\n\t\t\t\tmargin-bottom: 1px;\r\n\t\t\t\t-webkit-animation: rotate-center 0.8s ease-in-out infinite both;\r\n\t\t\t\tanimation: rotate-center 0.8s ease-in-out infinite both;\r\n\t\t\t}\r\n\r\n\t\t\t@-webkit-keyframes rotate-center {\r\n\t\t\t\t0% {\r\n\t\t\t\t\t-webkit-transform: rotate(0);\r\n\t\t\t\t\ttransform: rotate(0);\r\n\t\t\t\t}\r\n\t\t\t\t100% {\r\n\t\t\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t@keyframes rotate-center {\r\n\t\t\t\t0% {\r\n\t\t\t\t\t-webkit-transform: rotate(0);\r\n\t\t\t\t\ttransform: rotate(0);\r\n\t\t\t\t}\r\n\t\t\t\t100% {\r\n\t\t\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-polling-button': UmbLogViewerPollingButtonElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport { UMB_LOG_VIEWER_SAVE_SEARCH_MODAL } from './log-viewer-search-input-modal.modal-token.js';\r\nimport { css, html, customElement, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { escapeHTML } from '@umbraco-cms/backoffice/utils';\r\nimport { query as getQuery, path, toQueryString } from '@umbraco-cms/backoffice/router';\r\nimport { Subject, debounceTime, tap } from '@umbraco-cms/backoffice/external/rxjs';\r\nimport { umbConfirmModal, umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { SavedLogSearchResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { UmbDropdownElement } from '@umbraco-cms/backoffice/components';\r\nimport type { UUIInputElement } from '@umbraco-cms/backoffice/external/uui';\r\n\r\nimport './log-viewer-search-input-modal.element.js';\r\n\r\n@customElement('umb-log-viewer-search-input')\r\nexport class UmbLogViewerSearchInputElement extends UmbLitElement {\r\n\t@query('#search-dropdown')\r\n\tprivate _searchDropdownElement!: UmbDropdownElement;\r\n\r\n\t@state()\r\n\tprivate _savedSearches: SavedLogSearchResponseModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _inputQuery = '';\r\n\r\n\t@state()\r\n\tprivate _showLoader = false;\r\n\r\n\t@state()\r\n\tprivate _isQuerySaved = false;\r\n\r\n\t// TODO: Revisit this code, to not use RxJS directly:\r\n\t#inputQuery$ = new Subject<string>();\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeStuff();\r\n\t\t\tthis.#logViewerContext?.getSavedSearches();\r\n\t\t});\r\n\r\n\t\tthis.#inputQuery$\r\n\t\t\t.pipe(\r\n\t\t\t\ttap(() => (this._showLoader = true)),\r\n\t\t\t\tdebounceTime(250),\r\n\t\t\t)\r\n\t\t\t.subscribe((query) => {\r\n\t\t\t\tthis.#logViewerContext?.setFilterExpression(query);\r\n\t\t\t\tthis.#persist(query);\r\n\t\t\t\tthis._isQuerySaved = this._savedSearches.some((search) => search.query === query);\r\n\t\t\t\tthis._showLoader = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\t#observeStuff() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\t\tthis.observe(this.#logViewerContext.savedSearches, (savedSearches) => {\r\n\t\t\tthis._savedSearches = savedSearches?.items ?? [];\r\n\t\t\tthis._isQuerySaved = this._savedSearches.some((search) => search.query === this._inputQuery);\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.filterExpression, (query) => {\r\n\t\t\tthis._inputQuery = query;\r\n\t\t\tthis._isQuerySaved = this._savedSearches.some((search) => search.query === query);\r\n\t\t});\r\n\t}\r\n\r\n\t#setQuery(event: Event) {\r\n\t\tconst target = event.target as UUIInputElement;\r\n\t\tthis.#inputQuery$.next(target.value as string);\r\n\t}\r\n\r\n\t#setQueryFromSavedSearch(query: string) {\r\n\t\tthis.#inputQuery$.next(query);\r\n\t\tthis._searchDropdownElement.open = false;\r\n\t}\r\n\r\n\t#persist(filter: string) {\r\n\t\tlet query = getQuery();\r\n\r\n\t\tquery = {\r\n\t\t\t...query,\r\n\t\t\tlq: filter,\r\n\t\t};\r\n\r\n\t\twindow.history.pushState({}, '', `${path()}?${toQueryString(query)}`);\r\n\t}\r\n\r\n\t#clearQuery() {\r\n\t\tthis.#inputQuery$.next('');\r\n\t\tthis.#logViewerContext?.setFilterExpression('');\r\n\t}\r\n\r\n\t#saveSearch(savedSearch: SavedLogSearchResponseModel) {\r\n\t\tthis.#logViewerContext?.saveSearch(savedSearch);\r\n\t}\r\n\r\n\tasync #removeSearch(name: string) {\r\n\t\tawait umbConfirmModal(this, {\r\n\t\t\theadline: this.localize.term('logViewer_deleteSavedSearch'),\r\n\t\t\tcontent: this.localize.term('defaultdialogs_confirmdelete', escapeHTML(name)),\r\n\t\t\tcolor: 'danger',\r\n\t\t\tconfirmLabel: 'Delete',\r\n\t\t});\r\n\r\n\t\tthis.#logViewerContext?.removeSearch({ name });\r\n\t\t//this.dispatchEvent(new UmbDeleteEvent());\r\n\t}\r\n\r\n\tasync #openSaveSearchDialog() {\r\n\t\tumbOpenModal(this, UMB_LOG_VIEWER_SAVE_SEARCH_MODAL, {\r\n\t\t\tdata: { query: this._inputQuery },\r\n\t\t})\r\n\t\t\t.then((savedSearch) => {\r\n\t\t\t\tif (savedSearch) {\r\n\t\t\t\t\tthis.#saveSearch(savedSearch);\r\n\t\t\t\t\tthis._isQuerySaved = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-input\r\n\t\t\t\tid=\"search-input\"\r\n\t\t\t\tlabel=\"Search logs\"\r\n\t\t\t\t.placeholder=${'Search logs...'}\r\n\t\t\t\tslot=\"trigger\"\r\n\t\t\t\t@input=${this.#setQuery}\r\n\t\t\t\t.value=${this._inputQuery}>\r\n\t\t\t\t${this._showLoader\r\n\t\t\t\t\t? html`<div id=\"loader-container\" slot=\"append\">\r\n\t\t\t\t\t\t\t<uui-loader-circle></uui-loader-circle>\r\n\t\t\t\t\t\t</div>`\r\n\t\t\t\t\t: ''}\r\n\t\t\t\t${this._inputQuery\r\n\t\t\t\t\t? html`${!this._isQuerySaved\r\n\t\t\t\t\t\t\t\t? html`<uui-button compact slot=\"append\" label=\"Save search\" @click=${this.#openSaveSearchDialog}\r\n\t\t\t\t\t\t\t\t\t\t><uui-icon name=\"icon-favorite\"></uui-icon\r\n\t\t\t\t\t\t\t\t\t></uui-button>`\r\n\t\t\t\t\t\t\t\t: ''}<uui-button compact slot=\"append\" label=\"Clear\" @click=${this.#clearQuery}\r\n\t\t\t\t\t\t\t\t><uui-icon name=\"icon-delete\"></uui-icon\r\n\t\t\t\t\t\t\t></uui-button>`\r\n\t\t\t\t\t: html``}\r\n\t\t\t\t<umb-dropdown id=\"search-dropdown\" slot=\"append\" label=${this.localize.term('logViewer_savedSearches')}>\r\n\t\t\t\t\t<span slot=\"label\"><umb-localize key=\"logViewer_savedSearches\">Saved searches</umb-localize></span>\r\n\t\t\t\t\t<uui-scroll-container id=\"saved-searches-container\" role=\"list\">\r\n\t\t\t\t\t\t${this._savedSearches.map(\r\n\t\t\t\t\t\t\t(search) =>\r\n\t\t\t\t\t\t\t\thtml`<li class=\"saved-search-item\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Search for ${search.name}\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"saved-search-item-button\"\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#setQueryFromSavedSearch(search.query ?? '')}>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"saved-search-item-name\">${search.name}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"saved-search-item-query\">${search.query}</span></button\r\n\t\t\t\t\t\t\t\t\t><uui-button\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Remove saved search\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#removeSearch(search.name ?? '')}\r\n\t\t\t\t\t\t\t\t\t\t><uui-icon name=\"icon-trash\"></uui-icon\r\n\t\t\t\t\t\t\t\t\t></uui-button>\r\n\t\t\t\t\t\t\t\t</li>`,\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</uui-scroll-container>\r\n\t\t\t\t</umb-dropdown>\r\n\t\t\t</uui-input>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t#search-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#saved-searches-button {\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\r\n\t\t\t#saved-searches-popover {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#loader-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin: 0 var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: stretch;\r\n\t\t\t\tborder-bottom: 1px solid #e9e9eb;\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item-button {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-family: inherit;\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tbackground: 0 0;\r\n\t\t\t\tpadding: 0 0;\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tclear: both;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\tcolor: var(--uui-color-interactive);\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item-button:hover {\r\n\t\t\t\tbackground-color: var(--uui-color-surface-emphasis, rgb(250, 250, 250));\r\n\t\t\t\tcolor: var(--color-standalone);\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item-name {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tmargin: 0 var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\t#polling-symbol-expand,\r\n\t\t\t#saved-search-expand-symbol,\r\n\t\t\tuui-symbol-sort {\r\n\t\t\t\tmargin-left: var(--uui-size-space-3);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-search-input': UmbLogViewerSearchInputElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../logviewer-workspace.context-token.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbObserverController } from '@umbraco-cms/backoffice/observable-api';\r\n\r\n@customElement('umb-log-viewer-search-view')\r\nexport class UmbLogViewerSearchViewElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _canShowLogs = true;\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\t#canShowLogsObserver?: UmbObserverController<boolean | null>;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeCanShowLogs();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeCanShowLogs() {\r\n\t\tif (this.#canShowLogsObserver) this.#canShowLogsObserver.destroy();\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.#canShowLogsObserver = this.observe(this.#logViewerContext.canShowLogs, (canShowLogs) => {\r\n\t\t\tthis._canShowLogs = canShowLogs ?? this._canShowLogs;\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout header-transparent header-fit-height>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<div id=\"levels-container\">\r\n\t\t\t\t\t\t<umb-log-viewer-log-level-filter-menu></umb-log-viewer-log-level-filter-menu>\r\n\t\t\t\t\t\t<div id=\"dates-polling-container\">\r\n\t\t\t\t\t\t\t<umb-log-viewer-date-range-selector horizontal></umb-log-viewer-date-range-selector>\r\n\t\t\t\t\t\t\t<umb-log-viewer-polling-button> </umb-log-viewer-polling-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"input-container\">\r\n\t\t\t\t\t\t<umb-log-viewer-search-input></umb-log-viewer-search-input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this._canShowLogs\r\n\t\t\t\t\t? html`<umb-log-viewer-messages-list></umb-log-viewer-messages-list>`\r\n\t\t\t\t\t: html`<umb-log-viewer-to-many-logs-warning id=\"to-many-logs-warning\"></umb-log-viewer-to-many-logs-warning>`}\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0;\r\n\t\t\t}\r\n\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#levels-container,\r\n\t\t\t#input-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#levels-container {\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t}\r\n\r\n\t\t\t#dates-polling-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: baseline;\r\n\t\t\t}\r\n\r\n\t\t\tumb-log-viewer-search-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\tumb-log-viewer-date-range-selector {\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-search-view': UmbLogViewerSearchViewElement;\r\n\t}\r\n}\r\n","import './components/index.js';\r\nimport { UmbLogViewerSearchViewElement } from './log-search-view.element.js';\r\n\r\nexport default UmbLogViewerSearchViewElement;\r\n"],"names":["UmbLogViewerLevelTagElement","LitElement","html","ifDefined","__decorateClass","property","customElement","_logViewerContext","_UmbLogViewerLogLevelFilterMenuElement_instances","observeLogLevelFilter_fn","setLogLevel_fn","selectAllLogLevels_fn","deselectAllLogLevels_fn","renderLogLevelSelector_fn","UmbLogViewerLogLevelFilterMenuElement","UmbLitElement","__privateAdd","debounce","__privateMethod","UMB_APP_LOG_VIEWER_CONTEXT","instance","__privateSet","level","__privateGet","levelsFilter","logLevels","checkbox","q","query","path","toQueryString","LogLevelModel","logLevel","css","queryAll","state","_UmbLogViewerMessageElement_instances","setOpen_fn","UmbLogViewerMessageElement","changedProperties","_changedProperties","name","value","getQuery","sanitizedValue","menuItem","when","icon","event","UmbTextStyles","_UmbLogViewerMessagesListElement_instances","observeLogs_fn","sortLogs_fn","onPageChange_fn","renderLogs_fn","UmbLogViewerMessagesListElement","DirectionModel","totalPages","logs","isLoading","total","direction","current","log","_pollingIntervals","_UmbLogViewerPollingButtonElement_instances","observePoolingConfig_fn","togglePolling_fn","_setPolingInterval","closePoolingPopover_fn","UmbLogViewerPollingButtonElement","interval","poolingConfig","_inputQuery$","_UmbLogViewerSearchInputElement_instances","observeStuff_fn","setQuery_fn","setQueryFromSavedSearch_fn","persist_fn","clearQuery_fn","saveSearch_fn","removeSearch_fn","openSaveSearchDialog_fn","UmbLogViewerSearchInputElement","Subject","tap","debounceTime","search","savedSearches","target","filter","savedSearch","umbConfirmModal","escapeHTML","umbOpenModal","UMB_LOG_VIEWER_SAVE_SEARCH_MODAL","_canShowLogsObserver","_UmbLogViewerSearchViewElement_instances","observeCanShowLogs_fn","UmbLogViewerSearchViewElement","canShowLogs"],"mappings":"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"}