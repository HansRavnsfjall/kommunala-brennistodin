{"version":3,"file":"media-type-import.repository-CzkM04nS.js","sources":["../../../src/packages/media/media-types/entity-actions/import/repository/media-type-import.server.data-source.ts","../../../src/packages/media/media-types/entity-actions/import/repository/media-type-import.repository.ts"],"sourcesContent":["import { MediaTypeService, type ImportMediaTypeRequestModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\n\r\n/**\r\n * Media Type Import Server Data Source\r\n * @Import\r\n * @class UmbMediaTypeImportServerDataSource\r\n */\r\nexport class UmbMediaTypeImportServerDataSource {\r\n\t#host: UmbControllerHost;\r\n\r\n\t/**\r\n\t * Creates an instance of UmbMediaTypeImportServerDataSource.\r\n\t * @param {UmbControllerHost} host\r\n\t * @memberof UmbMediaTypeImportServerDataSource\r\n\t */\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\t/**\r\n\t * Import an item for the given id to the destination unique\r\n\t * @param {temporaryUnique} temporaryUnique\r\n\t * @returns {*}\r\n\t * @memberof UmbMediaTypeImportServerDataSource\r\n\t */\r\n\tasync import(temporaryUnique: string) {\r\n\t\tif (!temporaryUnique) throw new Error('Unique is missing');\r\n\r\n\t\tconst body: ImportMediaTypeRequestModel = {\r\n\t\t\tfile: { id: temporaryUnique },\r\n\t\t};\r\n\r\n\t\treturn tryExecute(this.#host, MediaTypeService.postMediaTypeImport({ body }));\r\n\t}\r\n}\r\n","import { UmbMediaTypeImportServerDataSource } from './media-type-import.server.data-source.js';\r\nimport { UMB_NOTIFICATION_CONTEXT } from '@umbraco-cms/backoffice/notification';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\n\r\nexport class UmbMediaTypeImportRepository extends UmbRepositoryBase {\r\n\t#importSource = new UmbMediaTypeImportServerDataSource(this);\r\n\r\n\tasync requestImport(temporaryUnique: string) {\r\n\t\tconst { data, error } = await this.#importSource.import(temporaryUnique);\r\n\r\n\t\tif (!error) {\r\n\t\t\tconst notificationContext = await this.getContext(UMB_NOTIFICATION_CONTEXT);\r\n\t\t\tif (!notificationContext) {\r\n\t\t\t\tthrow new Error('Notification context not found');\r\n\t\t\t}\r\n\t\t\tconst notification = { data: { message: `Imported` } };\r\n\t\t\tnotificationContext.peek('positive', notification);\r\n\t\t}\r\n\r\n\t\treturn { data, error };\r\n\t}\r\n}\r\n\r\nexport { UmbMediaTypeImportRepository as api };\r\n"],"names":["UmbMediaTypeImportServerDataSource","#host","host","temporaryUnique","body","tryExecute","MediaTypeService","UmbMediaTypeImportRepository","UmbRepositoryBase","#importSource","data","error","notificationContext","UMB_NOTIFICATION_CONTEXT","notification"],"mappings":";;;;AASO,MAAMA,EAAmC;AAAA,EAC/CC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,YAAYC,GAAyB;AACpC,SAAKD,KAAQC;AAAA,EACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,MAAM,OAAOC,GAAyB;AACrC,QAAI,CAACA,EAAiB,OAAM,IAAI,MAAM,mBAAmB;AAEzD,UAAMC,IAAoC;AAAA,MACzC,MAAM,EAAE,IAAID,EAAA;AAAA,IAAgB;AAG7B,WAAOE,EAAW,KAAKJ,IAAOK,EAAiB,oBAAoB,EAAE,MAAAF,EAAA,CAAM,CAAC;AAAA,EAC7E;AACD;AChCO,MAAMG,UAAqCC,EAAkB;AAAA,EACnEC,KAAgB,IAAIT,EAAmC,IAAI;AAAA,EAE3D,MAAM,cAAcG,GAAyB;AAC5C,UAAM,EAAE,MAAAO,GAAM,OAAAC,EAAA,IAAU,MAAM,KAAKF,GAAc,OAAON,CAAe;AAEvE,QAAI,CAACQ,GAAO;AACX,YAAMC,IAAsB,MAAM,KAAK,WAAWC,CAAwB;AAC1E,UAAI,CAACD;AACJ,cAAM,IAAI,MAAM,gCAAgC;AAEjD,YAAME,IAAe,EAAE,MAAM,EAAE,SAAS,aAAW;AACnD,MAAAF,EAAoB,KAAK,YAAYE,CAAY;AAAA,IAClD;AAEA,WAAO,EAAE,MAAAJ,GAAM,OAAAC,EAAA;AAAA,EAChB;AACD;"}