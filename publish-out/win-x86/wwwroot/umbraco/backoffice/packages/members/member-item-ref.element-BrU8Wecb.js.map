{"version":3,"file":"member-item-ref.element-BrU8Wecb.js","sources":["../../../src/packages/members/member/item/member-item-ref.element.ts"],"sourcesContent":["import { UMB_MEMBER_ENTITY_TYPE } from '../entity.js';\r\nimport { UMB_MEMBER_MANAGEMENT_SECTION_ALIAS } from '../../section/constants.js';\r\nimport { UMB_EDIT_MEMBER_WORKSPACE_PATH_PATTERN } from '../paths.js';\r\nimport type { UmbMemberItemModel } from './repository/types.js';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { customElement, html, ifDefined, nothing, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS } from '@umbraco-cms/backoffice/section';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\n\r\n@customElement('umb-member-item-ref')\r\nexport class UmbMemberItemRefElement extends UmbLitElement {\r\n\t#item?: UmbMemberItemModel | undefined;\r\n\r\n\t@property({ type: Object })\r\n\tpublic get item(): UmbMemberItemModel | undefined {\r\n\t\treturn this.#item;\r\n\t}\r\n\tpublic set item(value: UmbMemberItemModel | undefined) {\r\n\t\tthis.#item = value;\r\n\t}\r\n\r\n\t@property({ type: Boolean })\r\n\treadonly = false;\r\n\r\n\t@property({ type: Boolean })\r\n\tstandalone = false;\r\n\r\n\t@state()\r\n\tprivate _editPath = '';\r\n\r\n\t@state()\r\n\tprivate _userHasSectionAccess = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tcreateExtensionApiByAlias(this, UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS, [\r\n\t\t\t{\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\tmatch: UMB_MEMBER_MANAGEMENT_SECTION_ALIAS,\r\n\t\t\t\t},\r\n\t\t\t\tonChange: (permitted: boolean) => {\r\n\t\t\t\t\tthis._userHasSectionAccess = permitted;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addUniquePaths(['unique'])\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_MEMBER_ENTITY_TYPE, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editPath = routeBuilder({});\r\n\t\t\t});\r\n\t}\r\n\r\n\t#getHref(item: UmbMemberItemModel) {\r\n\t\tif (!this._editPath) return;\r\n\t\tconst path = UMB_EDIT_MEMBER_WORKSPACE_PATH_PATTERN.generateLocal({ unique: item.unique });\r\n\t\treturn `${this._editPath}/${path}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.item) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node-member\r\n\t\t\t\tname=${this.item.name}\r\n\t\t\t\thref=${ifDefined(this.#getHref(this.item))}\r\n\t\t\t\t?readonly=${this.readonly || !this._userHasSectionAccess}\r\n\t\t\t\t?standalone=${this.standalone}>\r\n\t\t\t\t<slot name=\"actions\" slot=\"actions\"></slot>\r\n\t\t\t\t${this.#renderIcon(this.item)}\r\n\t\t\t</uui-ref-node-member>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderIcon(item: UmbMemberItemModel) {\r\n\t\tif (!item.memberType.icon) return;\r\n\t\treturn html`<umb-icon slot=\"icon\" name=${item.memberType.icon}></umb-icon>`;\r\n\t}\r\n}\r\n\r\nexport { UmbMemberItemRefElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-member-item-ref': UmbMemberItemRefElement;\r\n\t}\r\n}\r\n"],"names":["_item","_UmbMemberItemRefElement_instances","getHref_fn","renderIcon_fn","UmbMemberItemRefElement","UmbLitElement","__privateAdd","createExtensionApiByAlias","UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS","UMB_MEMBER_MANAGEMENT_SECTION_ALIAS","permitted","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_MEMBER_ENTITY_TYPE","routeBuilder","__privateGet","value","__privateSet","html","ifDefined","__privateMethod","nothing","item","path","UMB_EDIT_MEMBER_WORKSPACE_PATH_PATTERN","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAYO,IAAMC,IAAN,cAAsCC,EAAc;AAAA,EAuB1D,cAAc;AACb,UAAA,GAxBKC,EAAA,MAAAL,CAAA,GACNK,EAAA,MAAAN,CAAA,GAWA,KAAA,WAAW,IAGX,KAAA,aAAa,IAGb,KAAQ,YAAY,IAGpB,KAAQ,wBAAwB,IAK/BO,EAA0B,MAAMC,GAA6C;AAAA,MAC5E;AAAA,QACC,QAAQ;AAAA,UACP,OAAOC;AAAA,QAAA;AAAA,QAER,UAAU,CAACC,MAAuB;AACjC,eAAK,wBAAwBA;AAAA,QAC9B;AAAA,MAAA;AAAA,IACD,CACA,GAED,IAAIC,EAAoC,MAAMC,CAAmB,EAC/D,eAAe,CAAC,QAAQ,CAAC,EACzB,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYC,GAAwB,QAAQ,CAAA,IAAG,EAChE,EACA,oBAAoB,CAACC,MAAiB;AACtC,WAAK,YAAYA,EAAa,EAAE;AAAA,IACjC,CAAC;AAAA,EACH;AAAA,EAzCA,IAAW,OAAuC;AACjD,WAAOC,EAAA,MAAKf,CAAA;AAAA,EACb;AAAA,EACA,IAAW,KAAKgB,GAAuC;AACtD,IAAAC,EAAA,MAAKjB,GAAQgB,CAAA;AAAA,EACd;AAAA,EA4CS,SAAS;AACjB,WAAK,KAAK,OAEHE;AAAA;AAAA,WAEE,KAAK,KAAK,IAAI;AAAA,WACdC,EAAUC,EAAA,MAAKnB,GAAAC,CAAA,EAAL,KAAA,MAAc,KAAK,KAAK,CAAC;AAAA,gBAC9B,KAAK,YAAY,CAAC,KAAK,qBAAqB;AAAA,kBAC1C,KAAK,UAAU;AAAA;AAAA,MAE3BkB,EAAA,MAAKnB,GAAAE,CAAA,EAAL,KAAA,MAAiB,KAAK,IAAA,CAAK;AAAA;AAAA,MATRkB;AAAA,EAYxB;AAMD;AAvECrB,IAAA,oBAAA,QAAA;AADMC,IAAA,oBAAA,QAAA;AA+CNC,IAAQ,SAACoB,GAA0B;AAClC,MAAI,CAAC,KAAK,UAAW;AACrB,QAAMC,IAAOC,EAAuC,cAAc,EAAE,QAAQF,EAAK,QAAQ;AACzF,SAAO,GAAG,KAAK,SAAS,IAAIC,CAAI;AACjC;AAiBApB,IAAW,SAACmB,GAA0B;AACrC,MAAKA,EAAK,WAAW;AACrB,WAAOJ,+BAAkCI,EAAK,WAAW,IAAI;AAC9D;AAnEWG,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,OAAA,CAAQ;AAAA,GAHdtB,EAID,WAAA,QAAA,CAAA;AAQXqB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAA,CAAS;AAAA,GAXftB,EAYZ,WAAA,YAAA,CAAA;AAGAqB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAA,CAAS;AAAA,GAdftB,EAeZ,WAAA,cAAA,CAAA;AAGQqB,EAAA;AAAA,EADPE,EAAA;AAAM,GAjBKvB,EAkBJ,WAAA,aAAA,CAAA;AAGAqB,EAAA;AAAA,EADPE,EAAA;AAAM,GApBKvB,EAqBJ,WAAA,yBAAA,CAAA;AArBIA,IAANqB,EAAA;AAAA,EADNG,EAAc,qBAAqB;AAAA,GACvBxB,CAAA;"}