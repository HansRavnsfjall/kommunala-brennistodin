{"version":3,"file":"dynamic-root-origin-picker-modal.element-DA8OCjCi.js","sources":["../../../src/packages/property-editors/content-picker/dynamic-root/modals/dynamic-root-origin-picker-modal.element.ts"],"sourcesContent":["import type { UmbContentPickerDynamicRoot } from '../../types.js';\r\nimport type { ManifestDynamicRootOrigin } from '../dynamic-root.extension.js';\r\nimport type { UmbContentPickerDocumentRootOriginModalData } from './index.js';\r\nimport { customElement, html, ifDefined, repeat, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbDocumentPickerInputContext } from '@umbraco-cms/backoffice/document';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\n\r\n@customElement('umb-dynamic-root-origin-picker-modal')\r\nexport class UmbDynamicRootOriginPickerModalModalElement extends UmbModalBaseElement<UmbContentPickerDocumentRootOriginModalData> {\r\n\t@state()\r\n\tprivate _origins: Array<ManifestDynamicRootOrigin> = [];\r\n\r\n\t#documentPickerContext = new UmbDocumentPickerInputContext(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#documentPickerContext.max = 1;\r\n\t}\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.data) {\r\n\t\t\tthis._origins = this.data.items;\r\n\t\t}\r\n\t}\r\n\r\n\t#choose(item: ManifestDynamicRootOrigin) {\r\n\t\tswitch (item.meta.originAlias) {\r\n\t\t\t// NOTE: Edge-case. Currently this is the only one that uses a document picker,\r\n\t\t\t// but other custom origins may want other configuration options. [LK:2024-01-25]\r\n\t\t\tcase 'ByKey':\r\n\t\t\t\tthis.#openDocumentPicker(item.meta.originAlias);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.#submit({ originAlias: item.meta.originAlias });\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\tasync #openDocumentPicker(originAlias: string) {\r\n\t\tawait this.#documentPickerContext.openPicker({\r\n\t\t\thideTreeRoot: true,\r\n\t\t});\r\n\r\n\t\tconst selectedItems = this.#documentPickerContext.getSelection();\r\n\t\tif (selectedItems.length !== 1) return;\r\n\r\n\t\tthis.#submit({\r\n\t\t\toriginAlias,\r\n\t\t\toriginKey: selectedItems[0],\r\n\t\t});\r\n\t}\r\n\r\n\t#submit(value: UmbContentPickerDynamicRoot) {\r\n\t\tthis.modalContext?.setValue(value);\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('dynamicRoot_pickDynamicRootOriginTitle')}>\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<uui-ref-list>\r\n\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\tthis._origins,\r\n\t\t\t\t\t\t\t\t(item) => item.alias,\r\n\t\t\t\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t\t\t<umb-ref-item\r\n\t\t\t\t\t\t\t\t\t\tname=${ifDefined(item.meta.label)}\r\n\t\t\t\t\t\t\t\t\t\tdetail=${ifDefined(item.meta.description)}\r\n\t\t\t\t\t\t\t\t\t\ticon=${ifDefined(item.meta.icon)}\r\n\t\t\t\t\t\t\t\t\t\t@open=${() => this.#choose(item)}>\r\n\t\t\t\t\t\t\t\t\t</umb-ref-item>\r\n\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</uui-ref-list>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button look=\"default\" label=${this.localize.term('general_close')} @click=${this.#close}></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbDynamicRootOriginPickerModalModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dynamic-root-origin-picker-modal': UmbDynamicRootOriginPickerModalModalElement;\r\n\t}\r\n}\r\n"],"names":["_documentPickerContext","_UmbDynamicRootOriginPickerModalModalElement_instances","choose_fn","close_fn","openDocumentPicker_fn","submit_fn","UmbDynamicRootOriginPickerModalModalElement","UmbModalBaseElement","__privateAdd","UmbDocumentPickerInputContext","__privateGet","html","repeat","item","ifDefined","__privateMethod","originAlias","selectedItems","value","__decorateClass","state","customElement","UmbDynamicRootOriginPickerModalModalElement$1"],"mappings":";;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAQO,IAAMC,IAAN,cAA0DC,EAAiE;AAAA,EAMjI,cAAc;AACb,UAAA,GAPKC,EAAA,MAAAP,CAAA,GAEN,KAAQ,WAA6C,CAAA,GAErDO,EAAA,MAAAR,GAAyB,IAAIS,EAA8B,IAAI,CAAA,GAK9DC,EAAA,MAAKV,GAAuB,MAAM;AAAA,EACnC;AAAA,EAES,oBAAoB;AAC5B,UAAM,kBAAA,GAEF,KAAK,SACR,KAAK,WAAW,KAAK,KAAK;AAAA,EAE5B;AAAA,EAsCS,SAAS;AACjB,WAAOW;AAAA,+BACsB,KAAK,SAAS,KAAK,wCAAwC,CAAC;AAAA;AAAA;AAAA;AAAA,SAIlFC;AAAA,MACD,KAAK;AAAA,MACL,CAACC,MAASA,EAAK;AAAA,MACf,CAACA,MAASF;AAAA;AAAA,iBAEDG,EAAUD,EAAK,KAAK,KAAK,CAAC;AAAA,mBACxBC,EAAUD,EAAK,KAAK,WAAW,CAAC;AAAA,iBAClCC,EAAUD,EAAK,KAAK,IAAI,CAAC;AAAA,kBACxB,MAAME,EAAA,MAAKd,GAAAC,CAAA,EAAL,KAAA,MAAaW,CAAA,CAAK;AAAA;AAAA;AAAA,IAAA,CAGlC;AAAA;AAAA;AAAA;AAAA;AAAA,wCAKgC,KAAK,SAAS,KAAK,eAAe,CAAC,WAAWE,QAAKd,GAAAE,CAAA,CAAM;AAAA;AAAA;AAAA;AAAA,EAIhG;AACD;AA/ECH,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAoBNC,IAAO,SAACW,GAAiC;AACxC,UAAQA,EAAK,KAAK,aAAA;AAAA;AAAA;AAAA,IAGjB,KAAK;AACJ,MAAAE,EAAA,MAAKd,GAAAG,CAAA,EAAL,KAAA,MAAyBS,EAAK,KAAK,WAAA;AACnC;AAAA,IACD;AACC,MAAAE,EAAA,MAAKd,MAAL,KAAA,MAAa,EAAE,aAAaY,EAAK,KAAK,YAAA,CAAY;AAClD;AAAA,EAAA;AAEH;AAEAV,IAAM,WAAG;AACR,OAAK,cAAc,OAAA;AACpB;AAEMC,IAAmB,eAACY,GAAqB;AAC9C,QAAMN,EAAA,MAAKV,GAAuB,WAAW;AAAA,IAC5C,cAAc;AAAA,EAAA,CACd;AAED,QAAMiB,IAAgBP,EAAA,MAAKV,CAAA,EAAuB,aAAA;AAClD,EAAIiB,EAAc,WAAW,KAE7BF,EAAA,MAAKd,MAAL,KAAA,MAAa;AAAA,IACZ,aAAAe;AAAA,IACA,WAAWC,EAAc,CAAC;AAAA,EAAA,CAC3B;AACD;AAEAZ,IAAO,SAACa,GAAoC;AAC3C,OAAK,cAAc,SAASA,CAAK,GACjC,KAAK,cAAc,OAAA;AACpB;AApDQC,EAAA;AAAA,EADPC,EAAA;AAAM,GADKd,EAEJ,WAAA,YAAA,CAAA;AAFIA,IAANa,EAAA;AAAA,EADNE,EAAc,sCAAsC;AAAA,GACxCf,CAAA;AAqFb,MAAAgB,IAAehB;"}