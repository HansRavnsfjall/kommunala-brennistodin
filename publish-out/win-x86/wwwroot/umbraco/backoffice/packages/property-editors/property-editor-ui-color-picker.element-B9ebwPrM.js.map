{"version":3,"file":"property-editor-ui-color-picker.element-B9ebwPrM.js","sources":["../../../src/packages/property-editors/color-picker/property-editor-ui-color-picker.element.ts"],"sourcesContent":["import { html, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type {\r\n\tUmbPropertyEditorConfigCollection,\r\n\tUmbPropertyEditorUiElement,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport type { UmbSwatchDetails } from '@umbraco-cms/backoffice/models';\r\nimport type { UUIColorSwatchesEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n/**\r\n * @element umb-property-editor-ui-color-picker\r\n */\r\n@customElement('umb-property-editor-ui-color-picker')\r\nexport class UmbPropertyEditorUIColorPickerElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t#defaultShowLabels = false;\r\n\r\n\t@property({ type: Object })\r\n\tpublic set value(value: UmbSwatchDetails | undefined) {\r\n\t\tthis.#value = value ? this.#ensureHashPrefix(value) : undefined;\r\n\t}\r\n\tpublic get value(): UmbSwatchDetails | undefined {\r\n\t\treturn this.#value;\r\n\t}\r\n\t#value?: UmbSwatchDetails | undefined;\r\n\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@state()\r\n\tprivate _showLabels = this.#defaultShowLabels;\r\n\r\n\t@state()\r\n\tprivate _swatches: Array<UmbSwatchDetails> = [];\r\n\r\n\tpublic set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n\t\tif (!config) return;\r\n\r\n\t\tthis._showLabels = config?.getValueByAlias<boolean>('useLabel') ?? this.#defaultShowLabels;\r\n\r\n\t\tconst swatches = config?.getValueByAlias<Array<UmbSwatchDetails>>('items') ?? [];\r\n\t\tthis._swatches = swatches.map((swatch) => this.#ensureHashPrefix(swatch));\r\n\t}\r\n\r\n\t#ensureHashPrefix(swatch: UmbSwatchDetails): UmbSwatchDetails {\r\n\t\treturn {\r\n\t\t\tlabel: swatch.label,\r\n\t\t\t// hex color regex adapted from: https://stackoverflow.com/a/9682781/12787\r\n\t\t\tvalue: swatch.value.match(/^(?:[0-9a-f]{3}){1,2}$/i) ? `#${swatch.value}` : swatch.value,\r\n\t\t};\r\n\t}\r\n\r\n\t#onChange(event: UUIColorSwatchesEvent) {\r\n\t\tconst value = event.target.value;\r\n\t\tthis.value = this._swatches.find((swatch) => swatch.value === value);\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<umb-input-color\r\n\t\t\tvalue=${this.value?.value ?? ''}\r\n\t\t\t.swatches=${this._swatches}\r\n\t\t\t?showLabels=${this._showLabels}\r\n\t\t\t@change=${this.#onChange}\r\n\t\t\t?readonly=${this.readonly}></umb-input-color>`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIColorPickerElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-color-picker': UmbPropertyEditorUIColorPickerElement;\r\n\t}\r\n}\r\n"],"names":["_defaultShowLabels","_value","_UmbPropertyEditorUIColorPickerElement_instances","ensureHashPrefix_fn","onChange_fn","UmbPropertyEditorUIColorPickerElement","UmbLitElement","__privateAdd","__privateGet","value","__privateSet","__privateMethod","config","swatches","swatch","html","event","UmbChangeEvent","__decorateClass","property","state","customElement","UmbPropertyEditorUIColorPickerElement$1"],"mappings":";;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAcO,IAAMC,IAAN,cAAoDC,EAAoD;AAAA,EAAxG,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GACNK,EAAA,MAAAP,GAAqB,EAAA,GASrBO,EAAA,MAAAN,CAAA,GASA,KAAA,WAAW,IAGX,KAAQ,cAAcO,EAAA,MAAKR,CAAA,GAG3B,KAAQ,YAAqC,CAAA;AAAA,EAAC;AAAA,EArB9C,IAAW,MAAMS,GAAqC;AACrD,IAAAC,EAAA,MAAKT,GAASQ,IAAQE,EAAA,MAAKT,GAAAC,CAAA,EAAL,WAAuBM,CAAA,IAAS,MAAA;AAAA,EACvD;AAAA,EACA,IAAW,QAAsC;AAChD,WAAOD,EAAA,MAAKP,CAAA;AAAA,EACb;AAAA,EAkBA,IAAW,OAAOW,GAAuD;AACxE,QAAI,CAACA,EAAQ;AAEb,SAAK,cAAcA,GAAQ,gBAAyB,UAAU,KAAKJ,EAAA,MAAKR,CAAA;AAExE,UAAMa,IAAWD,GAAQ,gBAAyC,OAAO,KAAK,CAAA;AAC9E,SAAK,YAAYC,EAAS,IAAI,CAACC,MAAWH,EAAA,MAAKT,GAAAC,CAAA,EAAL,WAAuBW,CAAA,CAAO;AAAA,EACzE;AAAA,EAgBS,SAAS;AACjB,WAAOC;AAAA,WACE,KAAK,OAAO,SAAS,EAAE;AAAA,eACnB,KAAK,SAAS;AAAA,iBACZ,KAAK,WAAW;AAAA,aACpBJ,QAAKT,GAAAE,CAAA,CAAS;AAAA,eACZ,KAAK,QAAQ;AAAA,EAC3B;AACD;AAzDCJ,IAAA,oBAAA,QAAA;AASAC,IAAA,oBAAA,QAAA;AAVMC,IAAA,oBAAA,QAAA;AAoCNC,IAAiB,SAACW,GAA4C;AAC7D,SAAO;AAAA,IACN,OAAOA,EAAO;AAAA;AAAA,IAEd,OAAOA,EAAO,MAAM,MAAM,yBAAyB,IAAI,IAAIA,EAAO,KAAK,KAAKA,EAAO;AAAA,EAAA;AAErF;AAEAV,IAAS,SAACY,GAA8B;AACvC,QAAMP,IAAQO,EAAM,OAAO;AAC3B,OAAK,QAAQ,KAAK,UAAU,KAAK,CAACF,MAAWA,EAAO,UAAUL,CAAK,GACnE,KAAK,cAAc,IAAIQ,GAAgB;AACxC;AA5CWC,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,OAAA,CAAQ;AAAA,GAHdd,EAID,WAAA,SAAA,CAAA;AAeXa,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,SAAS,SAAS,IAAM;AAAA,GAlB9Bd,EAmBZ,WAAA,YAAA,CAAA;AAGQa,EAAA;AAAA,EADPE,EAAA;AAAM,GArBKf,EAsBJ,WAAA,eAAA,CAAA;AAGAa,EAAA;AAAA,EADPE,EAAA;AAAM,GAxBKf,EAyBJ,WAAA,aAAA,CAAA;AAzBIA,IAANa,EAAA;AAAA,EADNG,EAAc,qCAAqC;AAAA,GACvChB,CAAA;AA4Db,MAAAiB,IAAejB;"}