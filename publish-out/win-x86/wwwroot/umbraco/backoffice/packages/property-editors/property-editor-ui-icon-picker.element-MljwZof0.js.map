{"version":3,"file":"property-editor-ui-icon-picker.element-MljwZof0.js","sources":["../../../src/packages/property-editors/icon-picker/property-editor-ui-icon-picker.element.ts"],"sourcesContent":["import { html, customElement, property, state, ifDefined } from '@umbraco-cms/backoffice/external/lit';\r\nimport type {\r\n\tUmbPropertyEditorConfigCollection,\r\n\tUmbPropertyEditorUiElement,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_ICON_PICKER_MODAL } from '@umbraco-cms/backoffice/icon';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { extractUmbColorVariable } from '@umbraco-cms/backoffice/resources';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\nimport { UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\n\r\n/**\r\n * @element umb-property-editor-ui-icon-picker\r\n */\r\n@customElement('umb-property-editor-ui-icon-picker')\r\nexport class UmbPropertyEditorUIIconPickerElement\r\n\textends UmbFormControlMixin<string, typeof UmbLitElement, undefined>(UmbLitElement, undefined)\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t@property({ type: Boolean })\r\n\tmandatory = false;\r\n\r\n\tprotected override firstUpdated(): void {\r\n\t\tthis.addValidator(\r\n\t\t\t'valueMissing',\r\n\t\t\t() => 'Icon is required',\r\n\t\t\t() => this.mandatory && !this._icon,\r\n\t\t);\r\n\t}\r\n\r\n\t@property()\r\n\tpublic override set value(v: string) {\r\n\t\tconst val = v ?? '';\r\n\t\tsuper.value = val;\r\n\r\n\t\tconst parts = val.split(' ');\r\n\t\tif (parts.length === 2) {\r\n\t\t\tthis._icon = parts[0];\r\n\t\t\tthis._color = parts[1].replace('color-', '');\r\n\t\t} else {\r\n\t\t\tthis._icon = val;\r\n\t\t\tthis._color = '';\r\n\t\t}\r\n\t}\r\n\r\n\tpublic override get value() {\r\n\t\treturn (super.value as string) ?? '';\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _icon = '';\r\n\r\n\t@state()\r\n\tprivate _color = '';\r\n\r\n\t@state()\r\n\tprivate _placeholderIcon = '';\r\n\r\n\tpublic set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n\t\tif (!config) return;\r\n\t\tconst placeholder = config.getValueByAlias('placeholder');\r\n\t\tthis._placeholderIcon = typeof placeholder === 'string' ? placeholder : '';\r\n\t}\r\n\r\n\tprivate async _openModal() {\r\n\t\tconst data = await umbOpenModal(this, UMB_ICON_PICKER_MODAL, {\r\n\t\t\tvalue: {\r\n\t\t\t\ticon: this._icon,\r\n\t\t\t\tcolor: this._color,\r\n\t\t\t},\r\n\t\t\tdata: { placeholder: this._placeholderIcon, showEmptyOption: !this.mandatory },\r\n\t\t}).catch(() => undefined);\r\n\r\n\t\tif (!data) return;\r\n\r\n\t\tif (!data.icon) {\r\n\t\t\tthis.value = '';\r\n\t\t} else if (data.color) {\r\n\t\t\tthis.value = `${data.icon} color-${data.color}`;\r\n\t\t} else {\r\n\t\t\tthis.value = data.icon as string;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst isEmpty = !this._icon;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tcompact\r\n\t\t\t\tlook=\"outline\"\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_selectIcon')}\r\n\t\t\t\t@click=${this._openModal}>\r\n\t\t\t\t${isEmpty\r\n\t\t\t\t\t? html` <uui-icon name=\"${ifDefined(this._placeholderIcon)}\" style=\"opacity:.35\"></uui-icon> `\r\n\t\t\t\t\t: this._color\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<uui-icon name=\"${this._icon}\" style=\"color:var(${extractUmbColorVariable(this._color)})\"> </uui-icon>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t: html`<uui-icon name=\"${this._icon}\"></uui-icon>`}\r\n\t\t\t</uui-button>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIIconPickerElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-icon-picker': UmbPropertyEditorUIIconPickerElement;\r\n\t}\r\n}\r\n"],"names":["UmbPropertyEditorUIIconPickerElement","UmbFormControlMixin","UmbLitElement","v","val","parts","config","placeholder","data","umbOpenModal","UMB_ICON_PICKER_MODAL","UmbChangeEvent","isEmpty","html","ifDefined","extractUmbColorVariable","__decorateClass","property","state","customElement","UmbPropertyEditorUIIconPickerElement$1"],"mappings":";;;;;;;;;;;;AAiBO,IAAMA,IAAN,cACEC,EAA6DC,GAAe,MAAS,EAE9F;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAKN,KAAA,YAAY,IA8BZ,KAAQ,QAAQ,IAGhB,KAAQ,SAAS,IAGjB,KAAQ,mBAAmB;AAAA,EAAA;AAAA,EAlCR,eAAqB;AACvC,SAAK;AAAA,MACJ;AAAA,MACA,MAAM;AAAA,MACN,MAAM,KAAK,aAAa,CAAC,KAAK;AAAA,IAAA;AAAA,EAEhC;AAAA,EAGA,IAAoB,MAAMC,GAAW;AACpC,UAAMC,IAAMD,KAAK;AACjB,UAAM,QAAQC;AAEd,UAAMC,IAAQD,EAAI,MAAM,GAAG;AAC3B,IAAIC,EAAM,WAAW,KACpB,KAAK,QAAQA,EAAM,CAAC,GACpB,KAAK,SAASA,EAAM,CAAC,EAAE,QAAQ,UAAU,EAAE,MAE3C,KAAK,QAAQD,GACb,KAAK,SAAS;AAAA,EAEhB;AAAA,EAEA,IAAoB,QAAQ;AAC3B,WAAQ,MAAM,SAAoB;AAAA,EACnC;AAAA,EAWA,IAAW,OAAOE,GAAuD;AACxE,QAAI,CAACA,EAAQ;AACb,UAAMC,IAAcD,EAAO,gBAAgB,aAAa;AACxD,SAAK,mBAAmB,OAAOC,KAAgB,WAAWA,IAAc;AAAA,EACzE;AAAA,EAEA,MAAc,aAAa;AAC1B,UAAMC,IAAO,MAAMC,EAAa,MAAMC,GAAuB;AAAA,MAC5D,OAAO;AAAA,QACN,MAAM,KAAK;AAAA,QACX,OAAO,KAAK;AAAA,MAAA;AAAA,MAEb,MAAM,EAAE,aAAa,KAAK,kBAAkB,iBAAiB,CAAC,KAAK,UAAA;AAAA,IAAU,CAC7E,EAAE,MAAM,MAAA;AAAA,KAAe;AAExB,IAAKF,MAEAA,EAAK,OAECA,EAAK,QACf,KAAK,QAAQ,GAAGA,EAAK,IAAI,UAAUA,EAAK,KAAK,KAE7C,KAAK,QAAQA,EAAK,OAJlB,KAAK,QAAQ,IAOd,KAAK,cAAc,IAAIG,GAAgB;AAAA,EACxC;AAAA,EAES,SAAS;AACjB,UAAMC,IAAU,CAAC,KAAK;AAEtB,WAAOC;AAAA;AAAA;AAAA;AAAA,YAIG,KAAK,SAAS,KAAK,2BAA2B,CAAC;AAAA,aAC9C,KAAK,UAAU;AAAA,MACtBD,IACCC,qBAAwBC,EAAU,KAAK,gBAAgB,CAAC,uCACxD,KAAK,SACJD;AAAA,0BACkB,KAAK,KAAK,sBAAsBE,EAAwB,KAAK,MAAM,CAAC;AAAA,WAEtFF,oBAAuB,KAAK,KAAK,eAAe;AAAA;AAAA;AAAA,EAGvD;AACD;AArFCG,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAA,CAAS;AAAA,GAJfjB,EAKZ,WAAA,aAAA,CAAA;AAWoBgB,EAAA;AAAA,EADnBC,EAAA;AAAS,GAfEjB,EAgBQ,WAAA,SAAA,CAAA;AAmBZgB,EAAA;AAAA,EADPE,EAAA;AAAM,GAlCKlB,EAmCJ,WAAA,SAAA,CAAA;AAGAgB,EAAA;AAAA,EADPE,EAAA;AAAM,GArCKlB,EAsCJ,WAAA,UAAA,CAAA;AAGAgB,EAAA;AAAA,EADPE,EAAA;AAAM,GAxCKlB,EAyCJ,WAAA,oBAAA,CAAA;AAzCIA,IAANgB,EAAA;AAAA,EADNG,EAAc,oCAAoC;AAAA,GACtCnB,CAAA;AA4Fb,MAAAoB,IAAepB;"}