{"version":3,"file":"property-editor-ui-missing-base.element-CjVjCvCs.js","sources":["../../../src/packages/property-editors/missing/property-editor-ui-missing-base.element.ts"],"sourcesContent":["import { css, html, nothing, property, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\nimport { UMB_PROPERTY_TYPE_BASED_PROPERTY_CONTEXT } from '@umbraco-cms/backoffice/content';\r\nimport { UmbDataTypeDetailRepository, type UmbDataTypeDetailModel } from '@umbraco-cms/backoffice/data-type';\r\nimport type { UmbPropertyTypeModel } from '@umbraco-cms/backoffice/content-type';\r\n\r\nexport class UmbPropertyEditorUIMissingBaseElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t@property()\r\n\tvalue = '';\r\n\r\n\t@state()\r\n\tprivate _expanded = false;\r\n\r\n\t@query('#details')\r\n\tfocalPointElement!: HTMLElement;\r\n\r\n\tprivate _dataTypeDetailModel?: UmbDataTypeDetailModel | undefined;\r\n\tprivate _dataTypeDetailRepository = new UmbDataTypeDetailRepository(this);\r\n\r\n\tprotected _titleKey: string = '';\r\n\tprotected _detailsDescriptionKey: string = '';\r\n\tprotected _displayPropertyEditorUi: boolean = true;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_TYPE_BASED_PROPERTY_CONTEXT, (propertyContext) => {\r\n\t\t\tif (!propertyContext?.dataType) return;\r\n\t\t\tthis.observe(propertyContext.dataType, (dt) => {\r\n\t\t\t\tif (!dt?.unique) return;\r\n\t\t\t\tthis._updateEditorAlias(dt);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate async _updateEditorAlias(dataType: UmbPropertyTypeModel['dataType']) {\r\n\t\tthis.observe(await this._dataTypeDetailRepository.byUnique(dataType.unique), (dataType) => {\r\n\t\t\tthis._dataTypeDetailModel = dataType;\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onDetails() {\r\n\t\tthis._expanded = !this._expanded;\r\n\t\tif (this._expanded) {\r\n\t\t\tawait this.updateComplete;\r\n\t\t\tthis.focalPointElement?.focus();\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<uui-box id=\"info\">\r\n\t\t\t<div slot=\"headline\"><uui-icon id=\"alert\" name=\"alert\"></uui-icon>${this.localize.term(this._titleKey)}</div>\r\n\t\t\t<div id=\"content\">\r\n\t\t\t\t<umb-localize key=\"missingEditor_description\"></umb-localize>\r\n\t\t\t\t${this._expanded ? this._renderDetails() : nothing}\r\n\t\t\t</div>\r\n\r\n\t\t\t<uui-button\r\n\t\t\t\tid=\"details-button\"\r\n\t\t\t\tcompact\r\n\t\t\t\tlabel=\"${this.localize.term(this._expanded ? 'missingEditor_detailsHide' : 'missingEditor_detailsShow')}\"\r\n\t\t\t\t@click=${this.#onDetails}>\r\n\t\t\t\t<span>${this.localize.term(this._expanded ? 'missingEditor_detailsHide' : 'missingEditor_detailsShow')}</span\r\n\t\t\t\t><uui-symbol-expand id=\"expand-symbol\" .open=${this._expanded}></uui-symbol-expand>\r\n\t\t\t</uui-button>\r\n\t\t</uui-box>`;\r\n\t}\r\n\r\n\tprivate _renderDetails() {\r\n\t\treturn html` <div id=\"details\" tabindex=\"0\">\r\n\t\t\t<umb-localize id=\"details-title\" key=\"missingEditor_detailsTitle\"></umb-localize>\r\n\t\t\t<p>\r\n\t\t\t\t<umb-localize key=${this._detailsDescriptionKey}></umb-localize>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<strong><umb-localize key=\"missingEditor_detailsDataType\"></umb-localize></strong>:\r\n\t\t\t\t<code>${this._dataTypeDetailModel?.name}</code><br />\r\n\t\t\t\t<strong><umb-localize key=\"missingEditor_detailsPropertyEditor\"></umb-localize></strong>:\r\n\t\t\t\t<code>${this._dataTypeDetailModel?.editorAlias}</code>\r\n\t\t\t\t${this._displayPropertyEditorUi\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<strong><umb-localize key=\"missingEditor_detailsPropertyEditorUi\"></umb-localize></strong>:\r\n\t\t\t\t\t\t\t<code>${this._dataTypeDetailModel?.editorUiAlias}</code>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t: nothing}\r\n\t\t\t</p>\r\n\t\t\t<umb-code-block id=\"codeblock\" copy language=\"${this.localize.term('missingEditor_detailsData')}\"\r\n\t\t\t\t>${typeof this.value === 'object' ? JSON.stringify(this.value, null, 2) : String(this.value)}</umb-code-block\r\n\t\t\t>\r\n\t\t</div>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\t--uui-box-default-padding: 0;\r\n\t\t\t}\r\n\t\t\t#content {\r\n\t\t\t\tpadding: var(--uui-size-space-5);\r\n\t\t\t\tpadding-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\t\t\t#alert {\r\n\t\t\t\tpadding-right: var(--uui-size-space-2);\r\n\t\t\t}\r\n\t\t\t#details-button {\r\n\t\t\t\tfloat: right;\r\n\t\t\t}\r\n\t\t\t#details {\r\n\t\t\t\tmargin-top: var(--uui-size-space-5);\r\n\t\t\t}\r\n\t\t\t#details-title {\r\n\t\t\t\tfont-weight: 800;\r\n\t\t\t}\r\n\t\t\t#expand-symbol {\r\n\t\t\t\ttransform: rotate(90deg);\r\n\t\t\t}\r\n\t\t\t#expand-symbol[open] {\r\n\t\t\t\ttransform: rotate(180deg);\r\n\t\t\t}\r\n\t\t\t#codeblock {\r\n\t\t\t\tmax-height: 400px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n"],"names":["UmbPropertyEditorUIMissingBaseElement","UmbLitElement","UmbDataTypeDetailRepository","UMB_PROPERTY_TYPE_BASED_PROPERTY_CONTEXT","propertyContext","dt","dataType","#onDetails","html","nothing","css","__decorateClass","property","state","query"],"mappings":";;;;;;;;;AAOO,MAAMA,UAA8CC,EAAoD;AAAA,EAiB9G,cAAc;AACb,UAAA,GAhBD,KAAA,QAAQ,IAGR,KAAQ,YAAY,IAMpB,KAAQ,4BAA4B,IAAIC,EAA4B,IAAI,GAExE,KAAU,YAAoB,IAC9B,KAAU,yBAAiC,IAC3C,KAAU,2BAAoC,IAK7C,KAAK,eAAeC,GAA0C,CAACC,MAAoB;AAClF,MAAKA,GAAiB,YACtB,KAAK,QAAQA,EAAgB,UAAU,CAACC,MAAO;AAC9C,QAAKA,GAAI,UACT,KAAK,mBAAmBA,CAAE;AAAA,MAC3B,CAAC;AAAA,IACF,CAAC;AAAA,EACF;AAAA,EAEA,MAAc,mBAAmBC,GAA4C;AAC5E,SAAK,QAAQ,MAAM,KAAK,0BAA0B,SAASA,EAAS,MAAM,GAAG,CAACA,MAAa;AAC1F,WAAK,uBAAuBA;AAAAA,IAC7B,CAAC;AAAA,EACF;AAAA,EAEA,MAAMC,KAAa;AAClB,SAAK,YAAY,CAAC,KAAK,WACnB,KAAK,cACR,MAAM,KAAK,gBACX,KAAK,mBAAmB,MAAA;AAAA,EAE1B;AAAA,EAES,SAAS;AACjB,WAAOC;AAAA,uEAC8D,KAAK,SAAS,KAAK,KAAK,SAAS,CAAC;AAAA;AAAA;AAAA,MAGnG,KAAK,YAAY,KAAK,eAAA,IAAmBC,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAMzC,KAAK,SAAS,KAAK,KAAK,YAAY,8BAA8B,2BAA2B,CAAC;AAAA,aAC9F,KAAKF,EAAU;AAAA,YAChB,KAAK,SAAS,KAAK,KAAK,YAAY,8BAA8B,2BAA2B,CAAC;AAAA,mDACvD,KAAK,SAAS;AAAA;AAAA;AAAA,EAGhE;AAAA,EAEQ,iBAAiB;AACxB,WAAOC;AAAA;AAAA;AAAA,wBAGe,KAAK,sBAAsB;AAAA;AAAA;AAAA;AAAA,YAIvC,KAAK,sBAAsB,IAAI;AAAA;AAAA,YAE/B,KAAK,sBAAsB,WAAW;AAAA,MAC5C,KAAK,2BACJA;AAAA;AAAA;AAAA,eAGQ,KAAK,sBAAsB,aAAa;AAAA,UAEhDC,CAAO;AAAA;AAAA,mDAEqC,KAAK,SAAS,KAAK,2BAA2B,CAAC;AAAA,OAC3F,OAAO,KAAK,SAAU,WAAW,KAAK,UAAU,KAAK,OAAO,MAAM,CAAC,IAAI,OAAO,KAAK,KAAK,CAAC;AAAA;AAAA;AAAA,EAG/F;AAAA,EAEA,OAAA;AAAA,SAAgB,SAAS;AAAA,MACxBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA;AAAA,EAmCD;AACD;AA1HCC,EAAA;AAAA,EADCC,EAAA;AAAS,GADEZ,EAEZ,WAAA,OAAA;AAGQW,EAAA;AAAA,EADPE,EAAA;AAAM,GAJKb,EAKJ,WAAA,WAAA;AAGRW,EAAA;AAAA,EADCG,EAAM,UAAU;AAAA,GAPLd,EAQZ,WAAA,mBAAA;"}