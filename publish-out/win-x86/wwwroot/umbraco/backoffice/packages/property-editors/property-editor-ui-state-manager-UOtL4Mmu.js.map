{"version":3,"file":"property-editor-ui-state-manager-UOtL4Mmu.js","sources":["../../../src/packages/property-editors/utils/property-editor-ui-state-manager.ts"],"sourcesContent":["/**\r\n * Utility functions for managing property editor UI state updates\r\n * when values are set programmatically.\r\n */\r\n\r\n/**\r\n * Interface for items that can be selected/checked\r\n */\r\nexport interface UmbSelectableItem {\r\n\tvalue: string;\r\n\tselected?: boolean;\r\n\tchecked?: boolean;\r\n}\r\n\r\n/**\r\n * Updates the selected state of items based on current selection.\r\n * This function is for internal use only within the property-editors package and should not be exposed\r\n * to external consumers to avoid unwanted external dependencies.\r\n * @internal\r\n * @template T\r\n * @param {T[]} items - Array of items to update\r\n * @param {string[]} selection - Array of selected values\r\n * @param {'selected' | 'checked'} stateProperty - Property name to update ('selected' or 'checked')\r\n * @returns {T[]} New array with updated state, or original array if no changes needed\r\n */\r\nexport function updateItemsSelectedState<T extends UmbSelectableItem>(\r\n\titems: T[],\r\n\tselection: string[],\r\n\tstateProperty: 'selected' | 'checked' = 'selected',\r\n): T[] {\r\n\t// Convert to Set for O(1) lookups instead of O(n) includes\r\n\tconst selectionSet = new Set(selection);\r\n\r\n\t// Check if any state changes are needed to avoid unnecessary array allocations\r\n\tlet hasChanges = false;\r\n\tfor (const item of items) {\r\n\t\tconst shouldBeSelected = selectionSet.has(item.value);\r\n\t\tconst currentState = item[stateProperty] ?? false;\r\n\t\tif (currentState !== shouldBeSelected) {\r\n\t\t\thasChanges = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// Return original array if no changes needed\r\n\tif (!hasChanges) {\r\n\t\treturn items;\r\n\t}\r\n\r\n\t// Only create new array if changes are needed\r\n\treturn items.map((item) => ({\r\n\t\t...item,\r\n\t\t[stateProperty]: selectionSet.has(item.value),\r\n\t}));\r\n}\r\n\r\n/**\r\n * Helper function to ensure a value is an array\r\n * @param {string | string[] | null | undefined} value - Value to convert to array\r\n * @returns {string[]} Array representation of the value\r\n */\r\nexport function ensureArray(value: string | string[] | null | undefined): string[] {\r\n\treturn Array.isArray(value) ? value : value ? [value] : [];\r\n}\r\n"],"names":["updateItemsSelectedState","items","selection","stateProperty","selectionSet","hasChanges","item","shouldBeSelected","ensureArray","value"],"mappings":"AAyBO,SAASA,EACfC,GACAC,GACAC,IAAwC,YAClC;AAEN,QAAMC,IAAe,IAAI,IAAIF,CAAS;AAGtC,MAAIG,IAAa;AACjB,aAAWC,KAAQL,GAAO;AACzB,UAAMM,IAAmBH,EAAa,IAAIE,EAAK,KAAK;AAEpD,SADqBA,EAAKH,CAAa,KAAK,QACvBI,GAAkB;AACtC,MAAAF,IAAa;AACb;AAAA,IACD;AAAA,EACD;AAGA,SAAKA,IAKEJ,EAAM,IAAI,CAACK,OAAU;AAAA,IAC3B,GAAGA;AAAA,IACH,CAACH,CAAa,GAAGC,EAAa,IAAIE,EAAK,KAAK;AAAA,EAAA,EAC3C,IAPML;AAQT;AAOO,SAASO,EAAYC,GAAuD;AAClF,SAAO,MAAM,QAAQA,CAAK,IAAIA,IAAQA,IAAQ,CAACA,CAAK,IAAI,CAAA;AACzD;"}