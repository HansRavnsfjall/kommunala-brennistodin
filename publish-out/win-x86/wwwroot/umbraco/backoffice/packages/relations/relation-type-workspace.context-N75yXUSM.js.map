{"version":3,"file":"relation-type-workspace.context-N75yXUSM.js","sources":["../../../src/packages/relations/workspace/paths.ts","../../../src/packages/relations/relation-types/workspace/relation-type/relation-type-workspace-editor.element.ts","../../../src/packages/relations/relation-types/workspace/relation-type/relation-type-workspace.context.ts"],"sourcesContent":["import { UMB_SETTINGS_SECTION_PATHNAME } from '@umbraco-cms/backoffice/settings';\r\nimport { UMB_WORKSPACE_PATH_PATTERN } from '@umbraco-cms/backoffice/workspace';\r\n\r\nexport const UMB_RELATIONS_ROOT_WORKSPACE_PATH = UMB_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n\tsectionName: UMB_SETTINGS_SECTION_PATHNAME,\r\n\tentityType: 'relations-root',\r\n});\r\n","import { UMB_RELATIONS_ROOT_WORKSPACE_PATH } from '../../../workspace/paths.js';\r\nimport { UMB_RELATION_TYPE_WORKSPACE_CONTEXT } from './relation-type-workspace.context-token.js';\r\nimport { observeMultiple } from '@umbraco-cms/backoffice/observable-api';\r\nimport { css, html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n/**\r\n * @element umb-relation-type-workspace-editor\r\n * @description - Element for displaying a Relation Type Workspace\r\n */\r\n@customElement('umb-relation-type-workspace-editor')\r\nexport class UmbRelationTypeWorkspaceEditorElement extends UmbLitElement {\r\n\t#workspaceContext?: typeof UMB_RELATION_TYPE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _name?: string = '';\r\n\r\n\t@state()\r\n\tprivate _alias?: string = '';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_RELATION_TYPE_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#observeRelationType();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeRelationType() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(observeMultiple([this.#workspaceContext.name, this.#workspaceContext.alias]), ([name, alias]) => {\r\n\t\t\tthis._name = name;\r\n\t\t\tthis._alias = alias;\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-workspace-editor back-path=\"${UMB_RELATIONS_ROOT_WORKSPACE_PATH}\">\r\n\t\t\t\t<umb-input-with-alias\r\n\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\tslot=\"header\"\r\n\t\t\t\t\tlabel=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t.value=${this._name ?? ''}\r\n\t\t\t\t\t.alias=${this._alias ?? ''}\r\n\t\t\t\t\treadonly>\r\n\t\t\t\t</umb-input-with-alias>\r\n\t\t\t</umb-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#name {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbRelationTypeWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-relation-type-workspace-editor': UmbRelationTypeWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import { UmbRelationTypeDetailRepository } from '../../repository/detail/index.js';\r\nimport type { UmbRelationTypeDetailModel } from '../../types.js';\r\nimport { UmbRelationTypeWorkspaceEditorElement } from './relation-type-workspace-editor.element.js';\r\nimport { UMB_RELATION_TYPE_WORKSPACE_CONTEXT } from './relation-type-workspace.context-token.js';\r\nimport { UmbWorkspaceRouteManager } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbObjectState } from '@umbraco-cms/backoffice/observable-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\n\r\nexport class UmbRelationTypeWorkspaceContext extends UmbContextBase {\r\n\tpublic readonly workspaceAlias = 'Umb.Workspace.RelationType';\r\n\tpublic readonly repository = new UmbRelationTypeDetailRepository(this);\r\n\r\n\t#data = new UmbObjectState<UmbRelationTypeDetailModel | undefined>(undefined);\r\n\treadonly data = this.#data.asObservable();\r\n\r\n\treadonly unique = this.#data.asObservablePart((data) => data?.unique);\r\n\treadonly name = this.#data.asObservablePart((data) => data?.name);\r\n\treadonly alias = this.#data.asObservablePart((data) => data?.alias);\r\n\treadonly parent = this.#data.asObservablePart((data) => data?.parent);\r\n\treadonly child = this.#data.asObservablePart((data) => data?.child);\r\n\treadonly isBidirectional = this.#data.asObservablePart((data) => data?.isBidirectional);\r\n\treadonly isDependency = this.#data.asObservablePart((data) => data?.isDependency);\r\n\r\n\treadonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_RELATION_TYPE_WORKSPACE_CONTEXT);\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UmbRelationTypeWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tasync load(unique: string) {\r\n\t\tconst { data } = await this.repository.requestByUnique(unique);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis.#data.setValue(data);\r\n\t\t}\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this.#data.getValue();\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this.getData()?.unique;\r\n\t}\r\n\r\n\tgetEntityType() {\r\n\t\treturn 'relation-type';\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tthis.#data.destroy();\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nexport { UmbRelationTypeWorkspaceContext as api };\r\n"],"names":["UMB_RELATIONS_ROOT_WORKSPACE_PATH","UMB_WORKSPACE_PATH_PATTERN","UMB_SETTINGS_SECTION_PATHNAME","_workspaceContext","_UmbRelationTypeWorkspaceEditorElement_instances","observeRelationType_fn","UmbRelationTypeWorkspaceEditorElement","UmbLitElement","__privateAdd","UMB_RELATION_TYPE_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","html","__privateGet","observeMultiple","name","alias","css","__decorateClass","state","customElement","UmbRelationTypeWorkspaceContext","UmbContextBase","host","UmbRelationTypeDetailRepository","#data","UmbObjectState","data","UmbWorkspaceRouteManager","_component","info","unique"],"mappings":"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"}