{"version":3,"file":"index.js","sources":["../../../../src/packages/relations/relations/global-components/confirm-action-modal-entity-references.element.ts","../../../../src/packages/relations/relations/global-components/confirm-bulk-action-modal-entity-references.element.ts","../../../../src/packages/relations/relations/utils.ts"],"sourcesContent":["import type { UmbEntityReferenceRepository, UmbReferenceItemModel } from '../reference/types.js';\r\nimport {\r\n\thtml,\r\n\tcustomElement,\r\n\tcss,\r\n\tstate,\r\n\tnothing,\r\n\ttype PropertyValues,\r\n\tproperty,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbItemRepository } from '@umbraco-cms/backoffice/repository';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\nexport interface UmbConfirmActionModalEntityReferencesConfig {\r\n\titemRepositoryAlias: string;\r\n\treferenceRepositoryAlias: string;\r\n\tunique: string;\r\n}\r\n\r\n@customElement('umb-confirm-action-modal-entity-references')\r\nexport class UmbConfirmActionModalEntityReferencesElement extends UmbLitElement {\r\n\t@property({ type: Object, attribute: false })\r\n\tconfig?: UmbConfirmActionModalEntityReferencesConfig;\r\n\r\n\t@state()\r\n\tprivate _referencedByItems: Array<UmbReferenceItemModel> = [];\r\n\r\n\t@state()\r\n\tprivate _totalReferencedByItems: number = 0;\r\n\r\n\t@state()\r\n\tprivate _totalDescendantsWithReferences: number = 0;\r\n\r\n\t@state()\r\n\tprivate _descendantsWithReferences: Array<any> = [];\r\n\r\n\t#itemRepository?: UmbItemRepository<any>;\r\n\t#referenceRepository?: UmbEntityReferenceRepository;\r\n\r\n\t#limitItems = 3;\r\n\r\n\tgetTotalReferencedBy() {\r\n\t\treturn this._totalReferencedByItems;\r\n\t}\r\n\r\n\tgetTotalDescendantsWithReferences() {\r\n\t\treturn this._totalDescendantsWithReferences;\r\n\t}\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValues): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.#initData();\r\n\t}\r\n\r\n\tasync #initData() {\r\n\t\tif (!this.config) {\r\n\t\t\tthis.#itemRepository?.destroy();\r\n\t\t\tthis.#referenceRepository?.destroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this.config?.referenceRepositoryAlias) {\r\n\t\t\tthrow new Error('Missing referenceRepositoryAlias in config.');\r\n\t\t}\r\n\r\n\t\tthis.#referenceRepository = await createExtensionApiByAlias<UmbEntityReferenceRepository>(\r\n\t\t\tthis,\r\n\t\t\tthis.config?.referenceRepositoryAlias,\r\n\t\t);\r\n\r\n\t\tif (!this.config?.itemRepositoryAlias) {\r\n\t\t\tthrow new Error('Missing itemRepositoryAlias in config.');\r\n\t\t}\r\n\r\n\t\tthis.#itemRepository = await createExtensionApiByAlias<UmbItemRepository<any>>(\r\n\t\t\tthis,\r\n\t\t\tthis.config.itemRepositoryAlias,\r\n\t\t);\r\n\r\n\t\tthis.#loadReferencedBy();\r\n\t\tthis.#loadDescendantsWithReferences();\r\n\t}\r\n\r\n\tasync #loadReferencedBy() {\r\n\t\tif (!this.#referenceRepository) {\r\n\t\t\tthrow new Error('Failed to create reference repository.');\r\n\t\t}\r\n\r\n\t\tif (!this.config?.unique) {\r\n\t\t\tthrow new Error('Missing unique in data.');\r\n\t\t}\r\n\r\n\t\tconst { data } = await this.#referenceRepository.requestReferencedBy(this.config.unique, 0, this.#limitItems);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._referencedByItems = [...data.items];\r\n\t\t\tthis._totalReferencedByItems = data.total;\r\n\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t}\r\n\t}\r\n\r\n\tasync #loadDescendantsWithReferences() {\r\n\t\tif (!this.#referenceRepository) {\r\n\t\t\tthrow new Error('Failed to create reference repository.');\r\n\t\t}\r\n\r\n\t\tif (!this.#itemRepository) {\r\n\t\t\tthrow new Error('Failed to create item repository.');\r\n\t\t}\r\n\r\n\t\t// If the repository does not have the method, we don't need to load the referenced descendants.\r\n\t\tif (!this.#referenceRepository.requestDescendantsWithReferences) return;\r\n\r\n\t\tif (!this.config?.unique) {\r\n\t\t\tthrow new Error('Missing unique in data.');\r\n\t\t}\r\n\r\n\t\tconst { data } = await this.#referenceRepository.requestDescendantsWithReferences(\r\n\t\t\tthis.config.unique,\r\n\t\t\t0,\r\n\t\t\tthis.#limitItems,\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._totalDescendantsWithReferences = data.total;\r\n\t\t\tconst uniques = data.items.map((item) => item.unique).filter((unique) => unique) as Array<string>;\r\n\t\t\tconst { data: items } = await this.#itemRepository.requestItems(uniques);\r\n\t\t\tthis._descendantsWithReferences = items ?? [];\r\n\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this.#renderItems('references_labelDependsOnThis', this._referencedByItems, this._totalReferencedByItems)}\r\n\t\t\t${this.#renderItems(\r\n\t\t\t\t'references_labelDependentDescendants',\r\n\t\t\t\tthis._descendantsWithReferences,\r\n\t\t\t\tthis._totalDescendantsWithReferences,\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItems(headline: string, items: Array<UmbReferenceItemModel>, total: number) {\r\n\t\tif (total === 0) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<h5 class=\"uui-h5\" id=\"reference-headline\">${this.localize.term(headline)}</h5>\r\n\t\t\t<uui-ref-list>\r\n\t\t\t\t${items.map(\r\n\t\t\t\t\t(item) =>\r\n\t\t\t\t\t\thtml`<umb-entity-item-ref .item=${item} readonly ?standalone=${total === 1}></umb-entity-item-ref> `,\r\n\t\t\t\t)}\r\n\t\t\t</uui-ref-list>\r\n\t\t\t${total > this.#limitItems\r\n\t\t\t\t? html`<span>${this.localize.term('references_labelMoreReferences', total - this.#limitItems)}</span>`\r\n\t\t\t\t: nothing}\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#reference-headline {\r\n\t\t\t\tmargin-bottom: var(--uui-size-3);\r\n\t\t\t}\r\n\r\n\t\t\tuui-ref-list {\r\n\t\t\t\tmargin-bottom: var(--uui-size-2);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-confirm-action-modal-entity-references': UmbConfirmActionModalEntityReferencesElement;\r\n\t}\r\n}\r\n","import type { UmbEntityReferenceRepository } from '../reference/types.js';\r\nimport {\r\n\thtml,\r\n\tcustomElement,\r\n\tcss,\r\n\tstate,\r\n\tnothing,\r\n\ttype PropertyValues,\r\n\tproperty,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbItemRepository } from '@umbraco-cms/backoffice/repository';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\nexport interface UmbConfirmBulkActionModalEntityReferencesConfig {\r\n\tuniques: Array<string>;\r\n\titemRepositoryAlias: string;\r\n\treferenceRepositoryAlias: string;\r\n}\r\n\r\n@customElement('umb-confirm-bulk-action-modal-entity-references')\r\nexport class UmbConfirmBulkActionModalEntityReferencesElement extends UmbLitElement {\r\n\t@property({ type: Object, attribute: false })\r\n\tconfig?: {\r\n\t\tuniques: Array<string>;\r\n\t\titemRepositoryAlias: string;\r\n\t\treferenceRepositoryAlias: string;\r\n\t};\r\n\r\n\t@state()\r\n\tprivate _items: Array<any> = [];\r\n\r\n\t@state()\r\n\tprivate _totalItems: number = 0;\r\n\r\n\t#itemRepository?: UmbItemRepository<any>;\r\n\t#referenceRepository?: UmbEntityReferenceRepository;\r\n\r\n\t#limitItems = 5;\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValues): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.#initData();\r\n\t}\r\n\r\n\tasync #initData() {\r\n\t\tif (!this.config) {\r\n\t\t\tthis.#itemRepository?.destroy();\r\n\t\t\tthis.#referenceRepository?.destroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this.config?.referenceRepositoryAlias) {\r\n\t\t\tthrow new Error('Missing referenceRepositoryAlias in config.');\r\n\t\t}\r\n\r\n\t\tthis.#referenceRepository = await createExtensionApiByAlias<UmbEntityReferenceRepository>(\r\n\t\t\tthis,\r\n\t\t\tthis.config?.referenceRepositoryAlias,\r\n\t\t);\r\n\r\n\t\tif (!this.config?.itemRepositoryAlias) {\r\n\t\t\tthrow new Error('Missing itemRepositoryAlias in config.');\r\n\t\t}\r\n\r\n\t\tthis.#itemRepository = await createExtensionApiByAlias<UmbItemRepository<any>>(\r\n\t\t\tthis,\r\n\t\t\tthis.config.itemRepositoryAlias,\r\n\t\t);\r\n\r\n\t\tthis.#loadAreReferenced();\r\n\t}\r\n\r\n\tasync #loadAreReferenced() {\r\n\t\tif (!this.#referenceRepository) {\r\n\t\t\tthrow new Error('Failed to create reference repository.');\r\n\t\t}\r\n\r\n\t\tif (!this.#itemRepository) {\r\n\t\t\tthrow new Error('Failed to create item repository.');\r\n\t\t}\r\n\r\n\t\tif (!this.config?.uniques) {\r\n\t\t\tthrow new Error('Missing uniques in config.');\r\n\t\t}\r\n\r\n\t\tconst { data } = await this.#referenceRepository.requestAreReferenced(this.config.uniques, 0, this.#limitItems);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._totalItems = data.total;\r\n\t\t\tconst uniques = data.items.map((item) => item.unique).filter((unique) => unique) as Array<string>;\r\n\t\t\tconst { data: items } = await this.#itemRepository.requestItems(uniques);\r\n\t\t\tthis._items = items ?? [];\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (this._totalItems === 0) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<h5 id=\"reference-headline\">The following items are used by other content.</h5>\r\n\t\t\t<uui-ref-list>\r\n\t\t\t\t${this._items.map(\r\n\t\t\t\t\t(item) =>\r\n\t\t\t\t\t\thtml`<umb-entity-item-ref\r\n\t\t\t\t\t\t\t.item=${item}\r\n\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t?standalone=${this._totalItems === 1}></umb-entity-item-ref> `,\r\n\t\t\t\t)}\r\n\t\t\t</uui-ref-list>\r\n\t\t\t${this._totalItems > this.#limitItems\r\n\t\t\t\t? html`<span\r\n\t\t\t\t\t\t>${this.localize.term('references_labelMoreReferences', this._totalItems - this.#limitItems)}</span\r\n\t\t\t\t\t>`\r\n\t\t\t\t: nothing}\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#reference-headline {\r\n\t\t\t\tmargin-bottom: var(--uui-size-3);\r\n\t\t\t}\r\n\r\n\t\t\tuui-ref-list {\r\n\t\t\t\tmargin-bottom: var(--uui-size-2);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-confirm-bulk-action-modal-entity-references': UmbConfirmBulkActionModalEntityReferencesElement;\r\n\t}\r\n}\r\n","import type { UmbReferenceModel } from './types.js';\r\nimport type {\r\n\tDefaultReferenceResponseModel,\r\n\tDocumentReferenceResponseModel,\r\n\tMediaReferenceResponseModel,\r\n\tMemberReferenceResponseModel,\r\n} from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\n/**\r\n *\r\n * @param item\r\n */\r\nexport function isDocumentReference(item: UmbReferenceModel): item is DocumentReferenceResponseModel {\r\n\treturn typeof (item as DocumentReferenceResponseModel).documentType !== 'undefined';\r\n}\r\n\r\n/**\r\n *\r\n * @param item\r\n */\r\nexport function isMediaReference(item: UmbReferenceModel): item is MediaReferenceResponseModel {\r\n\treturn typeof (item as MediaReferenceResponseModel).mediaType !== 'undefined';\r\n}\r\n\r\n/**\r\n *\r\n * @param item\r\n */\r\nexport function isMemberReference(item: UmbReferenceModel): item is MemberReferenceResponseModel {\r\n\treturn typeof (item as MemberReferenceResponseModel).memberType !== 'undefined';\r\n}\r\n\r\n/**\r\n *\r\n * @param item\r\n */\r\nexport function isDefaultReference(item: UmbReferenceModel): item is DefaultReferenceResponseModel {\r\n\treturn typeof (item as DefaultReferenceResponseModel).type !== 'undefined';\r\n}\r\n"],"names":["_itemRepository","_referenceRepository","_limitItems","_UmbConfirmActionModalEntityReferencesElement_instances","initData_fn","loadReferencedBy_fn","loadDescendantsWithReferences_fn","renderItems_fn","UmbConfirmActionModalEntityReferencesElement","UmbLitElement","__privateAdd","_changedProperties","__privateMethod","html","__privateGet","__privateSet","createExtensionApiByAlias","data","UmbChangeEvent","uniques","item","unique","items","headline","total","nothing","UmbTextStyles","css","__decorateClass","property","state","customElement","_UmbConfirmBulkActionModalEntityReferencesElement_instances","loadAreReferenced_fn","UmbConfirmBulkActionModalEntityReferencesElement","isDocumentReference","isMediaReference","isMemberReference","isDefaultReference"],"mappings":"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"}