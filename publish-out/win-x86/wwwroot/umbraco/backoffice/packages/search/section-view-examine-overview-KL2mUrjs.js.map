{"version":3,"file":"section-view-examine-overview-KL2mUrjs.js","sources":["../../../src/packages/search/examine-management-dashboard/views/section-view-examine-overview.ts"],"sourcesContent":["import { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, nothing, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\n\r\nimport type { IndexResponseModel, SearcherResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { HealthStatusModel, IndexerService, SearcherService } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\n\r\n@customElement('umb-dashboard-examine-overview')\r\nexport class UmbDashboardExamineOverviewElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _indexers?: IndexResponseModel[];\r\n\r\n\t@state()\r\n\tprivate _searchers?: SearcherResponseModel[];\r\n\r\n\t@state()\r\n\tprivate _loadingIndexers = false;\r\n\r\n\t@state()\r\n\tprivate _loadingSearchers = false;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis._getIndexers();\r\n\t\tthis._getSearchers();\r\n\t}\r\n\r\n\tprivate async _getIndexers() {\r\n\t\tthis._loadingIndexers = true;\r\n\t\tconst { data } = await tryExecute(this, IndexerService.getIndexer({ query: { take: 9999, skip: 0 } }));\r\n\t\tthis._indexers = data?.items ?? [];\r\n\t\tthis._loadingIndexers = false;\r\n\t}\r\n\r\n\tprivate async _getSearchers() {\r\n\t\tthis._loadingSearchers = true;\r\n\t\tconst { data } = await tryExecute(this, SearcherService.getSearcher({ query: { take: 9999, skip: 0 } }));\r\n\t\tthis._searchers = data?.items ?? [];\r\n\t\tthis._loadingSearchers = false;\r\n\t}\r\n\r\n\t#renderStatus(status: HealthStatusModel) {\r\n\t\tswitch (status) {\r\n\t\t\tcase HealthStatusModel.HEALTHY:\r\n\t\t\t\treturn html`<umb-icon name=\"icon-check color-green\"></umb-icon>`;\r\n\t\t\tcase HealthStatusModel.CORRUPT:\r\n\t\t\tcase HealthStatusModel.UNHEALTHY:\r\n\t\t\t\treturn html`<umb-icon name=\"icon-alert color-red\"></umb-icon>`;\r\n\t\t\tcase HealthStatusModel.REBUILDING:\r\n\t\t\t\treturn html`<umb-icon name=\"icon-time color-yellow\"></umb-icon>`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=${this.localize.term('examineManagement_indexers')} class=\"overview\">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<strong><umb-localize key=\"examineManagement_manageIndexes\">Manage Examine's indexes</umb-localize></strong\r\n\t\t\t\t\t><br />\r\n\t\t\t\t\t<umb-localize key=\"examineManagement_manageIndexesDescription\"\r\n\t\t\t\t\t\t>Allows you to view the details of each index and provides some tools for managing the indexes</umb-localize\r\n\t\t\t\t\t>\r\n\t\t\t\t</p>\r\n\t\t\t\t${this.#renderIndexersList()}\r\n\t\t\t</uui-box>\r\n\t\t\t<uui-box headline=${this.localize.term('examineManagement_searchers')}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<strong><umb-localize key=\"examineManagement_configuredSearchers\">Configured Searchers</umb-localize></strong\r\n\t\t\t\t\t><br />\r\n\t\t\t\t\t<umb-localize key=\"examineManagement_configuredSearchersDescription\"\r\n\t\t\t\t\t\t>Shows properties and tools for any configured Searcher (i.e. such as a multi-index searcher)</umb-localize\r\n\t\t\t\t\t>\r\n\t\t\t\t</p>\r\n\t\t\t\t${this.#renderSearchersList()}\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderIndexersList() {\r\n\t\tif (this._loadingIndexers) return html`<uui-loader></uui-loader>`;\r\n\t\tif (!this._indexers) return nothing;\r\n\t\treturn html` <uui-table class=\"overview\">\r\n\t\t\t${this._indexers.map((index) => {\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-table-row>\r\n\t\t\t\t\t\t<uui-table-cell style=\"width:0px\"> ${this.#renderStatus(index.healthStatus.status)} </uui-table-cell>\r\n\t\t\t\t\t\t<uui-table-cell>\r\n\t\t\t\t\t\t\t<a href=\"${window.location.href.replace(/\\/+$/, '')}/index/${index.name}\">${index.name}</a>\r\n\t\t\t\t\t\t</uui-table-cell>\r\n\t\t\t\t\t</uui-table-row>\r\n\t\t\t\t`;\r\n\t\t\t})}\r\n\t\t</uui-table>`;\r\n\t}\r\n\r\n\t#renderSearchersList() {\r\n\t\tif (this._loadingSearchers) return html`<uui-loader></uui-loader>`;\r\n\t\tif (!this._searchers) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-table class=\"overview2\">\r\n\t\t\t\t${this._searchers.map((searcher) => {\r\n\t\t\t\t\treturn html`<uui-table-row>\r\n\t\t\t\t\t\t\t<uui-table-cell style=\"width:0px\">\r\n\t\t\t\t\t\t\t\t<uui-icon-essentials>\r\n\t\t\t\t\t\t\t\t\t<uui-icon\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"vertical-align: top\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"info\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t</uui-icon>\r\n\t\t\t\t\t\t\t\t</uui-icon-essentials>\r\n\t\t\t\t\t\t\t</uui-table-cell>\r\n\t\t\t\t\t\t<uui-table-cell><a href=\"${window.location.href.replace(/\\/+$/, '')}/searcher/${searcher.name}\">${searcher.name}</a>\r\n\t\t\t\t\t</uui-table-cell>\r\n\t\t\t\t\t</uui-table-row>`;\r\n\t\t\t\t})}\r\n\t\t\t</uui-table>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box + uui-box {\r\n\t\t\t\tmargin-top: var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box p {\r\n\t\t\t\tmargin-top: 0;\r\n\t\t\t}\r\n\r\n\t\t\ta {\r\n\t\t\t\tcolor: var(--uui-color-text);\r\n\t\t\t\tbackground: transparent;\r\n\t\t\t\tborder: none;\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t}\r\n\r\n\t\t\tuui-table-cell {\r\n\t\t\t\tline-height: 0;\r\n\t\t\t\tvertical-align: middle;\r\n\t\t\t}\r\n\r\n\t\t\tuui-table-row:last-child uui-table-cell {\r\n\t\t\t\tpadding-bottom: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.positive {\r\n\t\t\t\tcolor: var(--uui-color-positive);\r\n\t\t\t}\r\n\r\n\t\t\t.danger {\r\n\t\t\t\tcolor: var(--uui-color-danger);\r\n\t\t\t}\r\n\r\n\t\t\t.not-found-message {\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDashboardExamineOverviewElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dashboard-examine-overview': UmbDashboardExamineOverviewElement;\r\n\t}\r\n}\r\n"],"names":["_UmbDashboardExamineOverviewElement_instances","renderStatus_fn","renderIndexersList_fn","renderSearchersList_fn","UmbDashboardExamineOverviewElement","UmbLitElement","__privateAdd","data","tryExecute","IndexerService","SearcherService","html","__privateMethod","status","HealthStatusModel","index","nothing","searcher","UmbTextStyles","css","__decorateClass","state","customElement","UmbDashboardExamineOverviewElement$1"],"mappings":"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"}