{"version":3,"file":"section-view-examine-searchers-BQHhHYlZ.js","sources":["../../../src/packages/search/examine-management-dashboard/views/section-view-examine-searchers.ts"],"sourcesContent":["import type { UmbSearchFieldPresentationModel, UmbSearchResultModel } from '../../types.js';\r\nimport { UMB_EXAMINE_FIELDS_SETTINGS_MODAL, UMB_EXAMINE_FIELDS_VIEWER_MODAL } from '../modal/constants.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, nothing, customElement, state, query, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { SearcherService } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { UmbLitElement, umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\nimport { UmbPaginationManager } from '@umbraco-cms/backoffice/utils';\r\nimport type { UUIPaginationEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\ninterface ExposedSearchResultField {\r\n\tname: string;\r\n\texposed: boolean;\r\n}\r\n\r\n@customElement('umb-dashboard-examine-searcher')\r\nexport class UmbDashboardExamineSearcherElement extends UmbLitElement {\r\n\t@property()\r\n\tsearcherName!: string;\r\n\r\n\t@state()\r\n\tprivate _searchResults?: UmbSearchResultModel[];\r\n\r\n\t@state()\r\n\tprivate _exposedFields?: ExposedSearchResultField[];\r\n\r\n\t@state()\r\n\tprivate _searchLoading = false;\r\n\r\n\t@query('#search-input')\r\n\tprivate _searchInput!: HTMLInputElement;\r\n\r\n\t@state()\r\n\tprivate _workspacePath = 'aa';\r\n\r\n\t@state()\r\n\tprivate _totalPages = 1;\r\n\r\n\t@state()\r\n\tprivate _currentPage = 1;\r\n\r\n\t@state()\r\n\tprivate _totalNumberOfResults = 0;\r\n\r\n\t#paginationManager = new UmbPaginationManager();\r\n\r\n\tprivate _onKeyPress(e: KeyboardEvent) {\r\n\t\tif (e.key == 'Enter') {\r\n\t\t\tthis._onSearch();\r\n\t\t}\r\n\t}\r\n\r\n\t#entityType = '';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#paginationManager.setPageSize(100);\r\n\r\n\t\tthis.observe(this.#paginationManager.currentPage, (number) => (this._currentPage = number));\r\n\t\tthis.observe(this.#paginationManager.totalPages, (number) => (this._totalPages = number));\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addAdditionalPath(':entityType')\r\n\t\t\t.onSetup((routingInfo) => {\r\n\t\t\t\treturn { data: { entityType: routingInfo.entityType, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._workspacePath = routeBuilder({ entityType: this.#entityType });\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate async _onSearch() {\r\n\t\tif (!this._searchInput.value.length) return;\r\n\t\tthis._searchLoading = true;\r\n\r\n\t\tconst { data } = await tryExecute(\r\n\t\t\tthis,\r\n\t\t\tSearcherService.getSearcherBySearcherNameQuery({\r\n\t\t\t\tpath: { searcherName: this.searcherName },\r\n\t\t\t\tquery: {\r\n\t\t\t\t\tterm: this._searchInput.value,\r\n\t\t\t\t\ttake: this.#paginationManager.getPageSize(),\r\n\t\t\t\t\tskip: this.#paginationManager.getSkip(),\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t);\r\n\r\n\t\tthis._searchResults = data?.items ?? [];\r\n\t\tthis.#paginationManager.setTotalItems(data.total);\r\n\t\tthis._totalNumberOfResults = data.total;\r\n\t\tthis._updateFieldFilter();\r\n\t\tthis._searchLoading = false;\r\n\t}\r\n\r\n\tprivate _updateFieldFilter() {\r\n\t\tthis._searchResults?.map((doc) => {\r\n\t\t\tconst document = doc.fields?.filter((field) => {\r\n\t\t\t\treturn field.name?.toUpperCase() !== 'NODENAME';\r\n\t\t\t});\r\n\t\t\tif (document) {\r\n\t\t\t\tconst newFieldNames = document.map((field) => {\r\n\t\t\t\t\treturn field.name ?? '';\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// TODO: I don't get this code, not sure what the purpose is, it seems like a mistake: [NL]\r\n\t\t\t\tthis._exposedFields = this._exposedFields\r\n\t\t\t\t\t? this._exposedFields.filter((field) => {\r\n\t\t\t\t\t\t\treturn { name: field.name, exposed: field.exposed };\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t: newFieldNames?.map((name) => {\r\n\t\t\t\t\t\t\treturn { name, exposed: false };\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onFieldFilterClick() {\r\n\t\tconst value = await umbOpenModal(this, UMB_EXAMINE_FIELDS_SETTINGS_MODAL, {\r\n\t\t\tvalue: { fields: this._exposedFields ?? [] },\r\n\t\t}).catch(() => undefined);\r\n\r\n\t\tthis._exposedFields = value?.fields;\r\n\t}\r\n\r\n\tasync #onFieldViewClick(rowData: UmbSearchResultModel) {\r\n\t\tawait umbOpenModal(this, UMB_EXAMINE_FIELDS_VIEWER_MODAL, {\r\n\t\t\tmodal: {\r\n\t\t\t\ttype: 'sidebar',\r\n\t\t\t\tsize: 'medium',\r\n\t\t\t},\r\n\t\t\tdata: { searchResult: rowData, name: this.#getSearchResultNodeName(rowData) },\r\n\t\t}).catch(() => undefined);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=${this.localize.term('general_search')}>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<umb-localize key=\"examineManagement_searchDescription\"\r\n\t\t\t\t\t\t>Search the ${this.searcherName} and view the results</umb-localize\r\n\t\t\t\t\t>\r\n\t\t\t\t</p>\r\n\t\t\t\t<div class=\"flex\">\r\n\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\ttype=\"search\"\r\n\t\t\t\t\t\tid=\"search-input\"\r\n\t\t\t\t\t\tplaceholder=${this.localize.term('placeholders_filter')}\r\n\t\t\t\t\t\tlabel=${this.localize.term('placeholders_filter')}\r\n\t\t\t\t\t\t@keypress=${this._onKeyPress}\r\n\t\t\t\t\t\t${umbFocus()}>\r\n\t\t\t\t\t</uui-input>\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\t\tlabel=${this.localize.term('general_search')}\r\n\t\t\t\t\t\t@click=\"${this._onSearch}\"></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t\t${this.#renderSearchResults()}\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t// Find the field named 'nodeName' and return its value if it exists in the fields array\r\n\t#getSearchResultNodeName(searchResult: UmbSearchResultModel): string {\r\n\t\tconst nodeNameField = searchResult.fields?.find((field) => field.name?.toUpperCase() === 'NODENAME');\r\n\t\treturn nodeNameField?.values?.join(', ') ?? '';\r\n\t}\r\n\r\n\t#getEntityTypeFromIndexType(indexType: string) {\r\n\t\tswitch (indexType) {\r\n\t\t\tcase 'content':\r\n\t\t\t\treturn 'document';\r\n\t\t\tdefault:\r\n\t\t\t\treturn indexType;\r\n\t\t}\r\n\t}\r\n\r\n\t#onPageChange(event: UUIPaginationEvent) {\r\n\t\tthis.#paginationManager.setCurrentPageNumber(event.target?.current);\r\n\t\tthis._onSearch();\r\n\t}\r\n\r\n\t#renderSearchResults() {\r\n\t\tif (this._searchLoading) return html`<uui-loader></uui-loader>`;\r\n\t\tif (!this._searchResults) return nothing;\r\n\t\tif (!this._searchResults.length) {\r\n\t\t\treturn html`<p>${this.localize.term('examineManagement_noResults')}</p>`;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div>\r\n\t\t\t\t${this.localize.term(\r\n\t\t\t\t\t'examineManagement_searchResultsFound',\r\n\t\t\t\t\tthis.#paginationManager.getDisplayStart(),\r\n\t\t\t\t\tthis.#paginationManager.getDisplayEnd(),\r\n\t\t\t\t\tthis._totalNumberOfResults,\r\n\t\t\t\t\tthis._currentPage,\r\n\t\t\t\t\tthis._totalPages,\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"table-container\">\r\n\t\t\t\t<uui-scroll-container>\r\n\t\t\t\t\t<uui-table class=\"search\">\r\n\t\t\t\t\t\t<uui-table-head>\r\n\t\t\t\t\t\t\t<uui-table-head-cell style=\"width:0\">Score</uui-table-head-cell>\r\n\t\t\t\t\t\t\t<uui-table-head-cell style=\"width:0\">${this.localize.term('general_id')}</uui-table-head-cell>\r\n\t\t\t\t\t\t\t<uui-table-head-cell>${this.localize.term('general_name')}</uui-table-head-cell>\r\n\t\t\t\t\t\t\t<uui-table-head-cell>${this.localize.term('examineManagement_fields')}</uui-table-head-cell>\r\n\t\t\t\t\t\t\t${this.renderHeadCells()}\r\n\t\t\t\t\t\t</uui-table-head>\r\n\t\t\t\t\t\t${this._searchResults?.map((rowData) => {\r\n\t\t\t\t\t\t\tconst indexType = rowData.fields?.find((field) => field.name === '__IndexType')?.values?.join(', ') ?? '';\r\n\t\t\t\t\t\t\tthis.#entityType = this.#getEntityTypeFromIndexType(indexType);\r\n\t\t\t\t\t\t\tconst unique = rowData.fields?.find((field) => field.name === '__Key')?.values?.join(', ') ?? '';\r\n\r\n\t\t\t\t\t\t\treturn html`<uui-table-row>\r\n\t\t\t\t\t\t\t\t<uui-table-cell> ${rowData.score} </uui-table-cell>\r\n\t\t\t\t\t\t\t\t<uui-table-cell> ${rowData.id} </uui-table-cell>\r\n\t\t\t\t\t\t\t\t<uui-table-cell>\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('actions_editContent')}\r\n\t\t\t\t\t\t\t\t\t\thref=${this._workspacePath + this.#entityType + '/edit/' + unique}>\r\n\t\t\t\t\t\t\t\t\t\t${this.#getSearchResultNodeName(rowData)}\r\n\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t</uui-table-cell>\r\n\t\t\t\t\t\t\t\t<uui-table-cell>\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tclass=\"bright\"\r\n\t\t\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('examineManagement_fieldValues')}\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#onFieldViewClick(rowData)}>\r\n\t\t\t\t\t\t\t\t\t\t${rowData.fields ? Object.keys(rowData.fields).length : ''}\r\n\t\t\t\t\t\t\t\t\t\t${this.localize.term('examineManagement_fields')}\r\n\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t</uui-table-cell>\r\n\t\t\t\t\t\t\t\t${rowData.fields ? this.renderBodyCells(rowData.fields) : ''}\r\n\t\t\t\t\t\t\t</uui-table-row>`;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</uui-table>\r\n\t\t\t\t</uui-scroll-container>\r\n\t\t\t\t<button class=\"field-adder\" @click=\"${this.#onFieldFilterClick}\">\r\n\t\t\t\t\t<uui-icon-registry-essential>\r\n\t\t\t\t\t\t<uui-tag look=\"secondary\">\r\n\t\t\t\t\t\t\t<uui-icon name=\"add\"></uui-icon>\r\n\t\t\t\t\t\t</uui-tag>\r\n\t\t\t\t\t</uui-icon-registry-essential>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<uui-pagination\r\n\t\t\t\t.total=${this._totalPages}\r\n\t\t\t\t.current=${this._currentPage}\r\n\t\t\t\tfirstlabel=${this.localize.term('general_first')}\r\n\t\t\t\tpreviouslabel=${this.localize.term('general_previous')}\r\n\t\t\t\tnextlabel=${this.localize.term('general_next')}\r\n\t\t\t\tlastlabel=${this.localize.term('general_last')}\r\n\t\t\t\t@change=${this.#onPageChange}></uui-pagination>\r\n\t\t`;\r\n\t}\r\n\r\n\trenderHeadCells() {\r\n\t\treturn html`${this._exposedFields?.map((field) => {\r\n\t\t\treturn field.exposed\r\n\t\t\t\t? html`<uui-table-head-cell class=\"exposed-field\">\r\n\t\t\t\t\t\t<div class=\"exposed-field-container\">\r\n\t\t\t\t\t\t\t<span>${field.name}</span>\r\n\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\tlabel=\"${this.localize.term('actions_remove')} ${field.name}\"\r\n\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t@click=\"${() => {\r\n\t\t\t\t\t\t\t\t\tthis._exposedFields = this._exposedFields?.map((f) => {\r\n\t\t\t\t\t\t\t\t\t\treturn f.name === field.name ? { name: f.name, exposed: false } : f;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}\"\r\n\t\t\t\t\t\t\t\t>x</uui-button\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</uui-table-head-cell>`\r\n\t\t\t\t: html``;\r\n\t\t})}`;\r\n\t}\r\n\r\n\trenderBodyCells(cellData: UmbSearchFieldPresentationModel[]) {\r\n\t\treturn html`${this._exposedFields?.map((slot) => {\r\n\t\t\treturn cellData.map((field) => {\r\n\t\t\t\treturn slot.exposed && field.name == slot.name\r\n\t\t\t\t\t? html`<uui-table-cell clip-text>${field.values}</uui-table-cell>`\r\n\t\t\t\t\t: html``;\r\n\t\t\t});\r\n\t\t})}`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box p {\r\n\t\t\t\tmargin-top: 0;\r\n\t\t\t}\r\n\r\n\t\t\tdiv.flex {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\t\t\tdiv.flex > uui-button {\r\n\t\t\t\tpadding-left: var(--uui-size-space-4);\r\n\t\t\t\theight: 0;\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\tuui-table-head-cell {\r\n\t\t\t\ttext-transform: capitalize;\r\n\t\t\t}\r\n\r\n\t\t\tuui-table-row:last-child uui-table-cell {\r\n\t\t\t\tpadding-bottom: 0;\r\n\t\t\t}\r\n\r\n\t\t\tuui-table-cell {\r\n\t\t\t\tmin-width: 100px;\r\n\t\t\t}\r\n\r\n\t\t\tbutton.bright {\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tcolor: var(--uui-color-positive-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t.field-adder {\r\n\t\t\t\tline-height: 0;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tvertical-align: top;\r\n\t\t\t\tbackground: transparent;\r\n\t\t\t\tborder: none;\r\n\t\t\t}\r\n\r\n\t\t\t.table-container uui-scroll-container {\r\n\t\t\t\tpadding-bottom: var(--uui-size-space-4);\r\n\t\t\t\tmax-width: 100%;\r\n\t\t\t\toverflow-x: scroll;\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\t.table-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: flex-start;\r\n\t\t\t}\r\n\t\t\tuui-tag {\r\n\t\t\t\tmargin-block: var(--uui-size-5, 15px);\r\n\t\t\t}\r\n\r\n\t\t\t.exposed-field uui-button {\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-weight: normal;\r\n\t\t\t\tfont-size: 10px;\r\n\t\t\t\theight: 10px;\r\n\t\t\t\twidth: 10px;\r\n\t\t\t\tmargin-top: -5px;\r\n\t\t\t}\r\n\r\n\t\t\t.exposed-field-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDashboardExamineSearcherElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dashboard-examine-searcher': UmbDashboardExamineSearcherElement;\r\n\t}\r\n}\r\n"],"names":["_paginationManager","_entityType","_UmbDashboardExamineSearcherElement_instances","onFieldFilterClick_fn","onFieldViewClick_fn","getSearchResultNodeName_fn","getEntityTypeFromIndexType_fn","onPageChange_fn","renderSearchResults_fn","UmbDashboardExamineSearcherElement","UmbLitElement","__privateAdd","UmbPaginationManager","__privateGet","number","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","routingInfo","routeBuilder","data","tryExecute","SearcherService","doc","document","field","newFieldNames","name","html","umbFocus","__privateMethod","f","cellData","slot","value","umbOpenModal","UMB_EXAMINE_FIELDS_SETTINGS_MODAL","rowData","UMB_EXAMINE_FIELDS_VIEWER_MODAL","searchResult","indexType","event","__privateSet","unique","nothing","UmbTextStyles","css","__decorateClass","property","state","query","customElement","UmbDashboardExamineSearcherElement$1"],"mappings":"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"}