{"version":3,"file":"property-editor-ui-static-file-picker.element-DMwOEZAy.js","sources":["../../../src/packages/static-file/property-editors/static-file-picker/property-editor-ui-static-file-picker.element.ts"],"sourcesContent":["import type { UmbInputStaticFileElement } from '../../components/index.js';\r\nimport type {\r\n\tUmbPropertyEditorUiElement,\r\n\tUmbPropertyEditorConfigCollection,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { customElement, html, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbNumberRangeValueType } from '@umbraco-cms/backoffice/models';\r\nimport '../../components/input-static-file/index.js';\r\nimport { UmbServerFilePathUniqueSerializer } from '@umbraco-cms/backoffice/server-file-system';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-property-editor-ui-static-file-picker')\r\nexport class UmbPropertyEditorUIStaticFilePickerElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t#singleItemMode = false;\r\n\t// TODO: get rid of UmbServerFilePathUniqueSerializer in v.15 [NL]\r\n\t#serverFilePathUniqueSerializer = new UmbServerFilePathUniqueSerializer();\r\n\r\n\t@state()\r\n\tprivate _value?: string | Array<string>;\r\n\r\n\t@property({ attribute: false })\r\n\tpublic set value(value: string | Array<string> | undefined) {\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tthis._value = value.map((unique) => this.#serverFilePathUniqueSerializer.toUnique(unique));\r\n\t\t} else if (value) {\r\n\t\t\tthis._value = this.#serverFilePathUniqueSerializer.toUnique(value);\r\n\t\t} else {\r\n\t\t\tthis._value = undefined;\r\n\t\t}\r\n\t}\r\n\tpublic get value(): string | Array<string> | undefined {\r\n\t\tif (Array.isArray(this._value)) {\r\n\t\t\treturn this._value.map((unique) => this.#serverFilePathUniqueSerializer.toServerPath(unique) ?? '');\r\n\t\t} else if (this._value) {\r\n\t\t\treturn this.#serverFilePathUniqueSerializer.toServerPath(this._value) ?? '';\r\n\t\t} else {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n\t\tthis.#singleItemMode = config?.getValueByAlias<boolean>('singleItemMode') ?? false;\r\n\t\tconst validationLimit = config?.getValueByAlias<UmbNumberRangeValueType>('validationLimit');\r\n\r\n\t\tthis._limitMin = validationLimit?.min ?? 0;\r\n\t\tthis._limitMax = this.#singleItemMode ? 1 : (validationLimit?.max ?? Infinity);\r\n\t}\r\n\r\n\t@state()\r\n\tprivate _limitMin: number = 0;\r\n\t@state()\r\n\tprivate _limitMax: number = Infinity;\r\n\r\n\tprivate _onChange(event: CustomEvent) {\r\n\t\tif (this.#singleItemMode) {\r\n\t\t\tthis._value = (event.target as UmbInputStaticFileElement).selection[0];\r\n\t\t} else {\r\n\t\t\tthis._value = (event.target as UmbInputStaticFileElement).selection;\r\n\t\t}\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t// TODO: Implement mandatory?\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-input-static-file\r\n\t\t\t\t.selection=${this._value ? (Array.isArray(this._value) ? this._value : [this._value]) : []}\r\n\t\t\t\t.min=${this._limitMin ?? 0}\r\n\t\t\t\t.max=${this._limitMax ?? Infinity}\r\n\t\t\t\t@change=${this._onChange}></umb-input-static-file>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIStaticFilePickerElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-static-file-picker': UmbPropertyEditorUIStaticFilePickerElement;\r\n\t}\r\n}\r\n"],"names":["_singleItemMode","_serverFilePathUniqueSerializer","UmbPropertyEditorUIStaticFilePickerElement","UmbLitElement","__privateAdd","UmbServerFilePathUniqueSerializer","value","unique","__privateGet","config","__privateSet","validationLimit","event","UmbChangeEvent","html","__decorateClass","state","property","customElement","UmbPropertyEditorUIStaticFilePickerElement$1"],"mappings":";;;;;;;;;;;;;gVAAAA,GAAAC;AAaO,IAAMC,IAAN,cAAyDC,EAAoD;AAAA,EAA7G,cAAA;AAAA,UAAA,GAAA,SAAA,GACNC,EAAA,MAAAJ,GAAkB,EAAA,GAElBI,EAAA,MAAAH,GAAkC,IAAII,EAAA,CAAkC,GAkCxE,KAAQ,YAAoB,GAE5B,KAAQ,YAAoB;AAAA,EAAA;AAAA,EA9B5B,IAAW,MAAMC,GAA2C;AAC3D,IAAI,MAAM,QAAQA,CAAK,IACtB,KAAK,SAASA,EAAM,IAAI,CAACC,MAAWC,EAAA,MAAKP,CAAA,EAAgC,SAASM,CAAM,CAAC,IAC/ED,IACV,KAAK,SAASE,EAAA,MAAKP,CAAA,EAAgC,SAASK,CAAK,IAEjE,KAAK,SAAS;AAAA,EAEhB;AAAA,EACA,IAAW,QAA4C;AACtD,WAAI,MAAM,QAAQ,KAAK,MAAM,IACrB,KAAK,OAAO,IAAI,CAACC,MAAWC,QAAKP,CAAA,EAAgC,aAAaM,CAAM,KAAK,EAAE,IACxF,KAAK,SACRC,EAAA,MAAKP,CAAA,EAAgC,aAAa,KAAK,MAAM,KAAK,KAEzE;AAAA,EAEF;AAAA,EAEA,IAAW,OAAOQ,GAAuD;AACxE,IAAAC,EAAA,MAAKV,GAAkBS,GAAQ,gBAAyB,gBAAgB,KAAK,EAAA;AAC7E,UAAME,IAAkBF,GAAQ,gBAAyC,iBAAiB;AAE1F,SAAK,YAAYE,GAAiB,OAAO,GACzC,KAAK,YAAYH,EAAA,MAAKR,CAAA,IAAkB,IAAKW,GAAiB,OAAO;AAAA,EACtE;AAAA,EAOQ,UAAUC,GAAoB;AACrC,IAAIJ,QAAKR,CAAA,IACR,KAAK,SAAUY,EAAM,OAAqC,UAAU,CAAC,IAErE,KAAK,SAAUA,EAAM,OAAqC,WAE3D,KAAK,cAAc,IAAIC,GAAgB;AAAA,EACxC;AAAA;AAAA,EAGS,SAAS;AACjB,WAAOC;AAAA;AAAA,iBAEQ,KAAK,SAAU,MAAM,QAAQ,KAAK,MAAM,IAAI,KAAK,SAAS,CAAC,KAAK,MAAM,IAAK,CAAA,CAAE;AAAA,WACnF,KAAK,aAAa,CAAC;AAAA,WACnB,KAAK,aAAa,KAAQ;AAAA,cACvB,KAAK,SAAS;AAAA;AAAA,EAE3B;AACD;AA3DCd,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAGQc,EAAA;AAAA,EADPC,EAAA;AAAM,GALKd,EAMJ,WAAA,UAAA,CAAA;AAGGa,EAAA;AAAA,EADVE,EAAS,EAAE,WAAW,GAAA,CAAO;AAAA,GARlBf,EASD,WAAA,SAAA,CAAA;AA4BHa,EAAA;AAAA,EADPC,EAAA;AAAM,GApCKd,EAqCJ,WAAA,aAAA,CAAA;AAEAa,EAAA;AAAA,EADPC,EAAA;AAAM,GAtCKd,EAuCJ,WAAA,aAAA,CAAA;AAvCIA,IAANa,EAAA;AAAA,EADNG,EAAc,2CAA2C;AAAA,GAC7ChB,CAAA;AA8Db,MAAAiB,IAAejB;"}