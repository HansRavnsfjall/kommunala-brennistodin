{"version":3,"file":"html-attr-class.tiptap-api-Ca9xv2He.js","sources":["../../../src/packages/tiptap/extensions/html-attr-class/html-attr-class.tiptap-api.ts"],"sourcesContent":["import { UmbTiptapExtensionApiBase } from '../tiptap-extension-api-base.js';\r\nimport { Extension } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport type { Attributes } from '@umbraco-cms/backoffice/external/tiptap';\r\n\r\ndeclare module '@tiptap/core' {\r\n\tinterface Commands<ReturnType> {\r\n\t\thtmlClassAttribute: {\r\n\t\t\tsetClassName: (className?: string, type?: string) => ReturnType;\r\n\t\t\ttoggleClassName: (className?: string, type?: string) => ReturnType;\r\n\t\t\tunsetClassName: (type?: string) => ReturnType;\r\n\t\t};\r\n\t}\r\n}\r\n\r\ninterface HtmlClassAttributeOptions {\r\n\ttypes: Array<string>;\r\n}\r\n\r\nconst HtmlClassAttribute = Extension.create<HtmlClassAttributeOptions>({\r\n\tname: 'htmlClassAttribute',\r\n\r\n\taddOptions() {\r\n\t\treturn { types: [] };\r\n\t},\r\n\r\n\taddGlobalAttributes() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\ttypes: this.options.types,\r\n\t\t\t\tattributes: { class: {} } as Attributes,\r\n\t\t\t},\r\n\t\t];\r\n\t},\r\n\r\n\taddCommands() {\r\n\t\treturn {\r\n\t\t\tsetClassName:\r\n\t\t\t\t(className, type) =>\r\n\t\t\t\t({ commands }) => {\r\n\t\t\t\t\tif (!className) return false;\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\treturn types\r\n\t\t\t\t\t\t.map((type) => commands.updateAttributes(type, { class: className }))\r\n\t\t\t\t\t\t.every((response) => response);\r\n\t\t\t\t},\r\n\t\t\ttoggleClassName:\r\n\t\t\t\t(className, type) =>\r\n\t\t\t\t({ commands, editor }) => {\r\n\t\t\t\t\tif (!className) return false;\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\tconst existing = types.map((type) => editor.getAttributes(type)?.class as string).filter((x) => x);\r\n\t\t\t\t\treturn existing.length ? commands.unsetClassName(type) : commands.setClassName(className, type);\r\n\t\t\t\t},\r\n\t\t\tunsetClassName:\r\n\t\t\t\t(type) =>\r\n\t\t\t\t({ commands }) => {\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\treturn types.map((type) => commands.resetAttributes(type, 'class')).every((response) => response);\r\n\t\t\t\t},\r\n\t\t};\r\n\t},\r\n});\r\n\r\nexport default class UmbTiptapHtmlAttributeClassExtensionApi extends UmbTiptapExtensionApiBase {\r\n\tgetTiptapExtensions = () => [\r\n\t\tHtmlClassAttribute.configure({\r\n\t\t\ttypes: [\r\n\t\t\t\t'bold',\r\n\t\t\t\t'blockquote',\r\n\t\t\t\t'bulletList',\r\n\t\t\t\t'codeBlock',\r\n\t\t\t\t'div',\r\n\t\t\t\t'figcaption',\r\n\t\t\t\t'figure',\r\n\t\t\t\t'heading',\r\n\t\t\t\t'horizontalRule',\r\n\t\t\t\t'italic',\r\n\t\t\t\t'image',\r\n\t\t\t\t'link',\r\n\t\t\t\t'orderedList',\r\n\t\t\t\t'paragraph',\r\n\t\t\t\t'span',\r\n\t\t\t\t'strike',\r\n\t\t\t\t'subscript',\r\n\t\t\t\t'superscript',\r\n\t\t\t\t'table',\r\n\t\t\t\t'tableHeader',\r\n\t\t\t\t'tableRow',\r\n\t\t\t\t'tableCell',\r\n\t\t\t\t'underline',\r\n\t\t\t\t'umbLink',\r\n\t\t\t],\r\n\t\t}),\r\n\t];\r\n}\r\n"],"names":["HtmlClassAttribute","Extension","className","type","commands","response","editor","x","UmbTiptapHtmlAttributeClassExtensionApi","UmbTiptapExtensionApiBase"],"mappings":";;AAkBA,MAAMA,IAAqBC,EAAU,OAAkC;AAAA,EACtE,MAAM;AAAA,EAEN,aAAa;AACZ,WAAO,EAAE,OAAO,GAAC;AAAA,EAClB;AAAA,EAEA,sBAAsB;AACrB,WAAO;AAAA,MACN;AAAA,QACC,OAAO,KAAK,QAAQ;AAAA,QACpB,YAAY,EAAE,OAAO,CAAA,EAAC;AAAA,MAAE;AAAA,IACzB;AAAA,EAEF;AAAA,EAEA,cAAc;AACb,WAAO;AAAA,MACN,cACC,CAACC,GAAWC,MACZ,CAAC,EAAE,UAAAC,QACGF,KACSC,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OAEzC,IAAI,CAACA,MAASC,EAAS,iBAAiBD,GAAM,EAAE,OAAOD,EAAA,CAAW,CAAC,EACnE,MAAM,CAACG,MAAaA,CAAQ,IAJP;AAAA,MAMzB,iBACC,CAACH,GAAWC,MACZ,CAAC,EAAE,UAAAC,GAAU,QAAAE,QACPJ,KACSC,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OACpB,IAAI,CAACA,MAASG,EAAO,cAAcH,CAAI,GAAG,KAAe,EAAE,OAAO,CAACI,MAAMA,CAAC,EACjF,SAASH,EAAS,eAAeD,CAAI,IAAIC,EAAS,aAAaF,GAAWC,CAAI,IAHvE;AAAA,MAKzB,gBACC,CAACA,MACD,CAAC,EAAE,UAAAC,SACYD,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OAC9B,IAAI,CAACA,MAASC,EAAS,gBAAgBD,GAAM,OAAO,CAAC,EAAE,MAAM,CAACE,MAAaA,CAAQ;AAAA,IACjG;AAAA,EAEH;AACD,CAAC;AAED,MAAqBG,UAAgDC,EAA0B;AAAA,EAA/F,cAAA;AAAA,UAAA,GAAA,SAAA,GACC,KAAA,sBAAsB,MAAM;AAAA,MAC3BT,EAAmB,UAAU;AAAA,QAC5B,OAAO;AAAA,UACN;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QAAA;AAAA,MACD,CACA;AAAA,IAAA;AAAA,EACF;AACD;"}