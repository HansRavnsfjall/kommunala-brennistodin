{"version":3,"file":"html-attr-id.tiptap-api-ClV-pFof.js","sources":["../../../src/packages/tiptap/extensions/html-attr-id/html-attr-id.tiptap-api.ts"],"sourcesContent":["import { UmbTiptapExtensionApiBase } from '../tiptap-extension-api-base.js';\r\nimport { Extension } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport type { Attributes } from '@umbraco-cms/backoffice/external/tiptap';\r\n\r\ndeclare module '@tiptap/core' {\r\n\tinterface Commands<ReturnType> {\r\n\t\thtmlIdAttribute: {\r\n\t\t\tsetId: (id?: string, type?: string) => ReturnType;\r\n\t\t\ttoggleId: (id?: string, type?: string) => ReturnType;\r\n\t\t\tunsetId: (type?: string) => ReturnType;\r\n\t\t};\r\n\t}\r\n}\r\n\r\ninterface HtmlIdAttributeOptions {\r\n\ttypes: Array<string>;\r\n}\r\n\r\nconst HtmlIdAttribute = Extension.create<HtmlIdAttributeOptions>({\r\n\tname: 'htmlIdAttribute',\r\n\r\n\taddOptions() {\r\n\t\treturn { types: [] };\r\n\t},\r\n\r\n\taddGlobalAttributes() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\ttypes: this.options.types,\r\n\t\t\t\tattributes: { id: {} } as Attributes,\r\n\t\t\t},\r\n\t\t];\r\n\t},\r\n\r\n\taddCommands() {\r\n\t\treturn {\r\n\t\t\tsetId:\r\n\t\t\t\t(id, type) =>\r\n\t\t\t\t({ commands }) => {\r\n\t\t\t\t\tif (!id) return false;\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\treturn types.map((type) => commands.updateAttributes(type, { id })).every((response) => response);\r\n\t\t\t\t},\r\n\t\t\ttoggleId:\r\n\t\t\t\t(id, type) =>\r\n\t\t\t\t({ commands, editor }) => {\r\n\t\t\t\t\tif (!id) return false;\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\tconst existing = types.map((type) => editor.getAttributes(type)?.id as string).filter((x) => x);\r\n\t\t\t\t\treturn existing.length ? commands.unsetId(type) : commands.setId(id, type);\r\n\t\t\t\t},\r\n\t\t\tunsetId:\r\n\t\t\t\t(type) =>\r\n\t\t\t\t({ commands }) => {\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\treturn types.map((type) => commands.resetAttributes(type, 'id')).every((response) => response);\r\n\t\t\t\t},\r\n\t\t};\r\n\t},\r\n});\r\n\r\nexport default class UmbTiptapHtmlAttributeIdExtensionApi extends UmbTiptapExtensionApiBase {\r\n\tgetTiptapExtensions = () => [\r\n\t\tHtmlIdAttribute.configure({\r\n\t\t\ttypes: [\r\n\t\t\t\t'bold',\r\n\t\t\t\t'blockquote',\r\n\t\t\t\t'bulletList',\r\n\t\t\t\t'codeBlock',\r\n\t\t\t\t'div',\r\n\t\t\t\t'figcaption',\r\n\t\t\t\t'figure',\r\n\t\t\t\t'heading',\r\n\t\t\t\t'horizontalRule',\r\n\t\t\t\t'italic',\r\n\t\t\t\t'image',\r\n\t\t\t\t'link',\r\n\t\t\t\t'orderedList',\r\n\t\t\t\t'paragraph',\r\n\t\t\t\t'span',\r\n\t\t\t\t'strike',\r\n\t\t\t\t'subscript',\r\n\t\t\t\t'superscript',\r\n\t\t\t\t'table',\r\n\t\t\t\t'tableHeader',\r\n\t\t\t\t'tableRow',\r\n\t\t\t\t'tableCell',\r\n\t\t\t\t'underline',\r\n\t\t\t\t'umbLink',\r\n\t\t\t],\r\n\t\t}),\r\n\t];\r\n}\r\n"],"names":["HtmlIdAttribute","Extension","id","type","commands","response","editor","x","UmbTiptapHtmlAttributeIdExtensionApi","UmbTiptapExtensionApiBase"],"mappings":";;AAkBA,MAAMA,IAAkBC,EAAU,OAA+B;AAAA,EAChE,MAAM;AAAA,EAEN,aAAa;AACZ,WAAO,EAAE,OAAO,GAAC;AAAA,EAClB;AAAA,EAEA,sBAAsB;AACrB,WAAO;AAAA,MACN;AAAA,QACC,OAAO,KAAK,QAAQ;AAAA,QACpB,YAAY,EAAE,IAAI,CAAA,EAAC;AAAA,MAAE;AAAA,IACtB;AAAA,EAEF;AAAA,EAEA,cAAc;AACb,WAAO;AAAA,MACN,OACC,CAACC,GAAIC,MACL,CAAC,EAAE,UAAAC,QACGF,KACSC,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OAC9B,IAAI,CAACA,MAASC,EAAS,iBAAiBD,GAAM,EAAE,IAAAD,EAAA,CAAI,CAAC,EAAE,MAAM,CAACG,MAAaA,CAAQ,IAFhF;AAAA,MAIlB,UACC,CAACH,GAAIC,MACL,CAAC,EAAE,UAAAC,GAAU,QAAAE,QACPJ,KACSC,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OACpB,IAAI,CAACA,MAASG,EAAO,cAAcH,CAAI,GAAG,EAAY,EAAE,OAAO,CAACI,MAAMA,CAAC,EAC9E,SAASH,EAAS,QAAQD,CAAI,IAAIC,EAAS,MAAMF,GAAIC,CAAI,IAHzD;AAAA,MAKlB,SACC,CAACA,MACD,CAAC,EAAE,UAAAC,SACYD,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OAC9B,IAAI,CAACA,MAASC,EAAS,gBAAgBD,GAAM,IAAI,CAAC,EAAE,MAAM,CAACE,MAAaA,CAAQ;AAAA,IAC9F;AAAA,EAEH;AACD,CAAC;AAED,MAAqBG,UAA6CC,EAA0B;AAAA,EAA5F,cAAA;AAAA,UAAA,GAAA,SAAA,GACC,KAAA,sBAAsB,MAAM;AAAA,MAC3BT,EAAgB,UAAU;AAAA,QACzB,OAAO;AAAA,UACN;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QAAA;AAAA,MACD,CACA;AAAA,IAAA;AAAA,EACF;AACD;"}