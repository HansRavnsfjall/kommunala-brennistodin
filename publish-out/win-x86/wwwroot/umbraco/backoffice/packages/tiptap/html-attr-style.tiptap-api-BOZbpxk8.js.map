{"version":3,"file":"html-attr-style.tiptap-api-BOZbpxk8.js","sources":["../../../src/packages/tiptap/extensions/html-attr-style/html-attr-style.tiptap-api.ts"],"sourcesContent":["import { UmbTiptapExtensionApiBase } from '../tiptap-extension-api-base.js';\r\nimport { Extension } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport type { Attributes } from '@umbraco-cms/backoffice/external/tiptap';\r\n\r\ndeclare module '@tiptap/core' {\r\n\tinterface Commands<ReturnType> {\r\n\t\thtmlStyleAttribute: {\r\n\t\t\tsetStyles: (style?: string, type?: string) => ReturnType;\r\n\t\t\ttoggleStyles: (style?: string, type?: string) => ReturnType;\r\n\t\t\tunsetStyles: (type?: string) => ReturnType;\r\n\t\t};\r\n\t}\r\n}\r\n\r\ninterface HtmlStyleAttributeOptions {\r\n\ttypes: Array<string>;\r\n}\r\n\r\nconst HtmlStyleAttribute = Extension.create<HtmlStyleAttributeOptions>({\r\n\tname: 'htmlStyleAttribute',\r\n\r\n\taddOptions() {\r\n\t\treturn { types: [] };\r\n\t},\r\n\r\n\taddGlobalAttributes() {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\ttypes: this.options.types,\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tparseHTML: (element) => (element.style.length ? element.style.cssText : null),\r\n\t\t\t\t\t},\r\n\t\t\t\t} as Attributes,\r\n\t\t\t},\r\n\t\t];\r\n\t},\r\n\r\n\taddCommands() {\r\n\t\treturn {\r\n\t\t\tsetStyles:\r\n\t\t\t\t(style, type) =>\r\n\t\t\t\t({ commands }) => {\r\n\t\t\t\t\tif (!style) return false;\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\treturn types.map((type) => commands.updateAttributes(type, { style })).every((response) => response);\r\n\t\t\t\t},\r\n\t\t\ttoggleStyles:\r\n\t\t\t\t(style, type) =>\r\n\t\t\t\t({ commands, editor }) => {\r\n\t\t\t\t\tif (!style) return false;\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\tconst existing = types.map((type) => editor.getAttributes(type)?.style as string).filter((x) => x);\r\n\t\t\t\t\treturn existing.length ? commands.unsetStyles(type) : commands.setStyles(style, type);\r\n\t\t\t\t},\r\n\t\t\tunsetStyles:\r\n\t\t\t\t(type) =>\r\n\t\t\t\t({ commands }) => {\r\n\t\t\t\t\tconst types = type ? [type] : this.options.types;\r\n\t\t\t\t\treturn types.map((type) => commands.resetAttributes(type, 'style')).every((response) => response);\r\n\t\t\t\t},\r\n\t\t};\r\n\t},\r\n});\r\n\r\nexport default class UmbTiptapHtmlAttributeStyleExtensionApi extends UmbTiptapExtensionApiBase {\r\n\tgetTiptapExtensions = () => [\r\n\t\tHtmlStyleAttribute.configure({\r\n\t\t\ttypes: [\r\n\t\t\t\t'bold',\r\n\t\t\t\t'blockquote',\r\n\t\t\t\t'bulletList',\r\n\t\t\t\t'codeBlock',\r\n\t\t\t\t'div',\r\n\t\t\t\t'figcaption',\r\n\t\t\t\t'figure',\r\n\t\t\t\t'heading',\r\n\t\t\t\t'horizontalRule',\r\n\t\t\t\t'italic',\r\n\t\t\t\t'image',\r\n\t\t\t\t'link',\r\n\t\t\t\t'orderedList',\r\n\t\t\t\t'paragraph',\r\n\t\t\t\t'span',\r\n\t\t\t\t'strike',\r\n\t\t\t\t'subscript',\r\n\t\t\t\t'superscript',\r\n\t\t\t\t'table',\r\n\t\t\t\t'tableHeader',\r\n\t\t\t\t'tableRow',\r\n\t\t\t\t'tableCell',\r\n\t\t\t\t'underline',\r\n\t\t\t\t'umbLink',\r\n\t\t\t],\r\n\t\t}),\r\n\t];\r\n}\r\n"],"names":["HtmlStyleAttribute","Extension","element","style","type","commands","response","editor","x","UmbTiptapHtmlAttributeStyleExtensionApi","UmbTiptapExtensionApiBase"],"mappings":";;AAkBA,MAAMA,IAAqBC,EAAU,OAAkC;AAAA,EACtE,MAAM;AAAA,EAEN,aAAa;AACZ,WAAO,EAAE,OAAO,GAAC;AAAA,EAClB;AAAA,EAEA,sBAAsB;AACrB,WAAO;AAAA,MACN;AAAA,QACC,OAAO,KAAK,QAAQ;AAAA,QACpB,YAAY;AAAA,UACX,OAAO;AAAA,YACN,WAAW,CAACC,MAAaA,EAAQ,MAAM,SAASA,EAAQ,MAAM,UAAU;AAAA,UAAA;AAAA,QACzE;AAAA,MACD;AAAA,IACD;AAAA,EAEF;AAAA,EAEA,cAAc;AACb,WAAO;AAAA,MACN,WACC,CAACC,GAAOC,MACR,CAAC,EAAE,UAAAC,QACGF,KACSC,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OAC9B,IAAI,CAACA,MAASC,EAAS,iBAAiBD,GAAM,EAAE,OAAAD,EAAA,CAAO,CAAC,EAAE,MAAM,CAACG,MAAaA,CAAQ,IAFhF;AAAA,MAIrB,cACC,CAACH,GAAOC,MACR,CAAC,EAAE,UAAAC,GAAU,QAAAE,QACPJ,KACSC,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OACpB,IAAI,CAACA,MAASG,EAAO,cAAcH,CAAI,GAAG,KAAe,EAAE,OAAO,CAACI,MAAMA,CAAC,EACjF,SAASH,EAAS,YAAYD,CAAI,IAAIC,EAAS,UAAUF,GAAOC,CAAI,IAHjE;AAAA,MAKrB,aACC,CAACA,MACD,CAAC,EAAE,UAAAC,SACYD,IAAO,CAACA,CAAI,IAAI,KAAK,QAAQ,OAC9B,IAAI,CAACA,MAASC,EAAS,gBAAgBD,GAAM,OAAO,CAAC,EAAE,MAAM,CAACE,MAAaA,CAAQ;AAAA,IACjG;AAAA,EAEH;AACD,CAAC;AAED,MAAqBG,UAAgDC,EAA0B;AAAA,EAA/F,cAAA;AAAA,UAAA,GAAA,SAAA,GACC,KAAA,sBAAsB,MAAM;AAAA,MAC3BV,EAAmB,UAAU;AAAA,QAC5B,OAAO;AAAA,UACN;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QAAA;AAAA,MACD,CACA;AAAA,IAAA;AAAA,EACF;AACD;"}