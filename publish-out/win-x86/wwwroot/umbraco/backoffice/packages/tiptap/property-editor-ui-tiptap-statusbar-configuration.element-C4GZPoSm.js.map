{"version":3,"file":"property-editor-ui-tiptap-statusbar-configuration.element-C4GZPoSm.js","sources":["../../../src/packages/tiptap/property-editors/statusbar-configuration/tiptap-statusbar-configuration.context.ts","../../../src/packages/tiptap/property-editors/statusbar-configuration/property-editor-ui-tiptap-statusbar-configuration.element.ts"],"sourcesContent":["import type { UmbTiptapStatusbarExtension, UmbTiptapStatusbarViewModel } from '../types.js';\r\nimport type { UmbTiptapStatusbarValue } from '../../components/types.js';\r\nimport { UMB_TIPTAP_STATUSBAR_CONFIGURATION_CONTEXT } from './tiptap-statusbar-configuration.context-token.js';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbArrayState, UmbBooleanState } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { UmbId } from '@umbraco-cms/backoffice/id';\r\nimport { UMB_PROPERTY_DATASET_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbTiptapStatusbarConfigurationContext extends UmbContextBase {\r\n\t#extensions = new UmbArrayState<UmbTiptapStatusbarExtension>([], (x) => x.alias);\r\n\tpublic readonly extensions = this.#extensions.asObservable();\r\n\r\n\t#reload = new UmbBooleanState(false);\r\n\tpublic readonly reload = this.#reload.asObservable();\r\n\r\n\t#extensionsEnabled = new Set<string>();\r\n\r\n\t#extensionsInUse = new Set<string>();\r\n\r\n\t#lookup?: Map<string, UmbTiptapStatusbarExtension>;\r\n\r\n\t#statusbar = new UmbArrayState<UmbTiptapStatusbarViewModel>([], (x) => x.unique);\r\n\tpublic readonly statusbar = this.#statusbar.asObservable();\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_TIPTAP_STATUSBAR_CONFIGURATION_CONTEXT);\r\n\r\n\t\tthis.observe(umbExtensionsRegistry.byType('tiptapStatusbarExtension'), (extensions) => {\r\n\t\t\tconst _extensions = extensions\r\n\t\t\t\t.sort((a, b) => a.alias.localeCompare(b.alias))\r\n\t\t\t\t.map((ext) => ({\r\n\t\t\t\t\tkind: 'default',\r\n\t\t\t\t\talias: ext.alias,\r\n\t\t\t\t\tlabel: ext.meta.label,\r\n\t\t\t\t\ticon: ext.meta.icon,\r\n\t\t\t\t\tdependencies: ext.forExtensions,\r\n\t\t\t\t}));\r\n\r\n\t\t\tthis.#extensions.setValue(_extensions);\r\n\r\n\t\t\tthis.#lookup = new Map(_extensions.map((ext) => [ext.alias, ext]));\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_DATASET_CONTEXT, async (dataset) => {\r\n\t\t\tthis.observe(\r\n\t\t\t\tawait dataset?.propertyValueByAlias<Array<string>>('extensions'),\r\n\t\t\t\t(extensions) => {\r\n\t\t\t\t\tif (extensions) {\r\n\t\t\t\t\t\tthis.#extensionsEnabled.clear();\r\n\t\t\t\t\t\tthis.#reload.setValue(false);\r\n\r\n\t\t\t\t\t\tthis.#extensions\r\n\t\t\t\t\t\t\t.getValue()\r\n\t\t\t\t\t\t\t.filter((x) => !x.dependencies || x.dependencies.every((z) => extensions.includes(z)))\r\n\t\t\t\t\t\t\t.map((x) => x.alias)\r\n\t\t\t\t\t\t\t.forEach((alias) => this.#extensionsEnabled.add(alias));\r\n\r\n\t\t\t\t\t\tthis.#reload.setValue(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t'_observeExtensions',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic cloneStatusbarValue(value?: UmbTiptapStatusbarValue | null): UmbTiptapStatusbarValue {\r\n\t\tif (!this.isValidStatusbarValue(value)) return [[], []];\r\n\t\treturn value.map((area) => [...area]);\r\n\t}\r\n\r\n\tpublic filterExtensions(query: string): Array<UmbTiptapStatusbarExtension> {\r\n\t\treturn this.#extensions\r\n\t\t\t.getValue()\r\n\t\t\t.filter((ext) => ext.alias?.toLowerCase().includes(query) || ext.label?.toLowerCase().includes(query));\r\n\t}\r\n\r\n\tpublic getExtensionByAlias(alias: string): UmbTiptapStatusbarExtension {\r\n\t\treturn this.#lookup?.get(alias) ?? { label: '', alias, icon: '', kind: 'unknown' };\r\n\t}\r\n\r\n\tpublic isExtensionEnabled(alias: string): boolean {\r\n\t\treturn this.#extensionsEnabled.has(alias);\r\n\t}\r\n\r\n\tpublic isExtensionInUse(alias: string): boolean {\r\n\t\treturn this.#extensionsInUse.has(alias);\r\n\t}\r\n\r\n\tpublic isValidStatusbarValue(value: unknown): value is UmbTiptapStatusbarValue {\r\n\t\tif (!Array.isArray(value)) return false;\r\n\t\tfor (const area of value) {\r\n\t\t\tif (!Array.isArray(area)) return false;\r\n\t\t\tfor (const alias of area) {\r\n\t\t\t\tif (typeof alias !== 'string') return false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic insertStatusbarItem(alias: string, to: [number, number]) {\r\n\t\tconst statusbar = [...this.#statusbar.getValue()];\r\n\r\n\t\tconst [areaIndex, itemIndex] = to;\r\n\r\n\t\tconst area = statusbar[areaIndex];\r\n\t\tconst items = [...area.data];\r\n\r\n\t\titems.splice(itemIndex, 0, alias);\r\n\t\tthis.#extensionsInUse.add(alias);\r\n\r\n\t\tstatusbar[areaIndex] = { unique: area.unique, data: items };\r\n\r\n\t\tthis.#statusbar.setValue(statusbar);\r\n\t}\r\n\r\n\tpublic moveStatusbarItem(from: [number, number], to: [number, number]) {\r\n\t\tconst [fromAreaIndex, fromItemIndex] = from;\r\n\t\tconst [toAreaIndex, toItemIndex] = to;\r\n\r\n\t\tconst statusbar = [...this.#statusbar.getValue()];\r\n\r\n\t\tconst fromArea = statusbar[fromAreaIndex];\r\n\t\tconst fromItems = [...fromArea.data];\r\n\r\n\t\tconst toBeMoved = fromItems.splice(fromItemIndex, 1);\r\n\r\n\t\tstatusbar[fromAreaIndex] = { unique: fromArea.unique, data: fromItems };\r\n\r\n\t\tconst toArea = statusbar[toAreaIndex];\r\n\t\tconst toItems = [...toArea.data];\r\n\r\n\t\ttoItems.splice(toItemIndex, 0, toBeMoved[0]);\r\n\r\n\t\tstatusbar[toAreaIndex] = { unique: toArea.unique, data: toItems };\r\n\r\n\t\tthis.#statusbar.setValue(statusbar);\r\n\t}\r\n\r\n\tpublic removeStatusbarItem(from: [number, number]) {\r\n\t\tconst [areaIndex, itemIndex] = from;\r\n\r\n\t\tconst statusbar = [...this.#statusbar.getValue()];\r\n\r\n\t\tconst area = statusbar[areaIndex];\r\n\t\tconst items = [...area.data];\r\n\r\n\t\tconst removed = items.splice(itemIndex, 1);\r\n\t\tremoved.forEach((alias) => this.#extensionsInUse.delete(alias));\r\n\r\n\t\tstatusbar[areaIndex] = { unique: area.unique, data: items };\r\n\r\n\t\tthis.#statusbar.setValue(statusbar);\r\n\t}\r\n\r\n\tpublic setStatusbar(value?: UmbTiptapStatusbarValue | null) {\r\n\t\tif (!this.isValidStatusbarValue(value)) {\r\n\t\t\tvalue = [[], []];\r\n\t\t}\r\n\r\n\t\tif (value.length === 1) {\r\n\t\t\tvalue = [[], value[0]];\r\n\t\t}\r\n\r\n\t\tthis.#extensionsInUse.clear();\r\n\t\tvalue.forEach((area) => area.forEach((alias) => this.#extensionsInUse.add(alias)));\r\n\r\n\t\tconst statusbar = value.map((area) => ({ unique: UmbId.new(), data: area }));\r\n\r\n\t\tthis.#statusbar.setValue(statusbar);\r\n\t}\r\n}\r\n","import type { UmbTiptapStatusbarValue } from '../../components/types.js';\r\nimport type { UmbTiptapStatusbarViewModel, UmbTiptapStatusbarExtension } from '../types.js';\r\nimport { UmbTiptapStatusbarConfigurationContext } from './tiptap-statusbar-configuration.context.js';\r\nimport { customElement, css, html, property, when, repeat, nothing, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { debounce } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_PROPERTY_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\n\r\n@customElement('umb-property-editor-ui-tiptap-statusbar-configuration')\r\nexport class UmbPropertyEditorUiTiptapStatusbarConfigurationElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t#context = new UmbTiptapStatusbarConfigurationContext(this);\r\n\r\n\t#currentDragItem?: { alias: string; fromPos?: [number, number] };\r\n\r\n\t#debouncedFilter = debounce((query: string) => {\r\n\t\tthis._availableExtensions = this.#context.filterExtensions(query);\r\n\t}, 250);\r\n\r\n\t#initialized = false;\r\n\r\n\t@state()\r\n\tprivate _availableExtensions: Array<UmbTiptapStatusbarExtension> = [];\r\n\r\n\t@state()\r\n\tprivate _statusbar: Array<UmbTiptapStatusbarViewModel> = [];\r\n\r\n\t@property({ attribute: false })\r\n\tset value(value: UmbTiptapStatusbarValue | undefined) {\r\n\t\tif (!value) value = [[], []];\r\n\t\tif (value === this.#value) return;\r\n\t\tthis.#value = value;\r\n\t}\r\n\tget value(): UmbTiptapStatusbarValue | undefined {\r\n\t\tif (this.#value === undefined) return undefined;\r\n\t\treturn this.#context.cloneStatusbarValue(this.#value);\r\n\t}\r\n\t#value?: UmbTiptapStatusbarValue;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_CONTEXT, (propertyContext) => {\r\n\t\t\tthis.observe(this.#context.extensions, (extensions) => {\r\n\t\t\t\tthis._availableExtensions = extensions;\r\n\t\t\t});\r\n\r\n\t\t\tthis.observe(this.#context.reload, (reload) => {\r\n\t\t\t\tif (reload) this.requestUpdate();\r\n\t\t\t});\r\n\r\n\t\t\tthis.observe(this.#context.statusbar, (statusbar) => {\r\n\t\t\t\tif (!statusbar.length) return;\r\n\t\t\t\tthis._statusbar = statusbar;\r\n\t\t\t\tif (this.#initialized) {\r\n\t\t\t\t\tthis.#value = statusbar.map((area) => [...area.data]);\r\n\t\t\t\t\tpropertyContext?.setValue(this.#value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprotected override firstUpdated() {\r\n\t\tthis.#context.setStatusbar(this.#value);\r\n\t\tthis.#initialized = true;\r\n\t}\r\n\r\n\t#onClick(item: UmbTiptapStatusbarExtension) {\r\n\t\tconst lastArea = (this.#value?.length ?? 1) - 1;\r\n\t\tconst lastItem = this.#value?.[lastArea].length ?? 0;\r\n\t\tthis.#context.insertStatusbarItem(item.alias, [lastArea, lastItem]);\r\n\t}\r\n\r\n\t#onDragStart(event: DragEvent, alias: string, fromPos?: [number, number]) {\r\n\t\tevent.dataTransfer!.effectAllowed = 'move';\r\n\t\tthis.#currentDragItem = { alias, fromPos };\r\n\t}\r\n\r\n\t#onDragOver(event: DragEvent) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.dataTransfer!.dropEffect = 'move';\r\n\t}\r\n\r\n\t#onDragEnd(event: DragEvent) {\r\n\t\tevent.preventDefault();\r\n\t\tif (event.dataTransfer?.dropEffect === 'none') {\r\n\t\t\tconst { fromPos } = this.#currentDragItem ?? {};\r\n\t\t\tif (!fromPos) return;\r\n\r\n\t\t\tthis.#context.removeStatusbarItem(fromPos);\r\n\t\t}\r\n\t}\r\n\r\n\t#onDrop(event: DragEvent, toPos?: [number, number]) {\r\n\t\tevent.preventDefault();\r\n\t\tconst { alias, fromPos } = this.#currentDragItem ?? {};\r\n\r\n\t\t// Remove item if no destination position is provided\r\n\t\tif (fromPos && !toPos) {\r\n\t\t\tthis.#context.removeStatusbarItem(fromPos);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Move item if both source and destination positions are available\r\n\t\tif (fromPos && toPos) {\r\n\t\t\tthis.#context.moveStatusbarItem(fromPos, toPos);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Insert item if an alias and a destination position are provided\r\n\t\tif (alias && toPos) {\r\n\t\t\tthis.#context.insertStatusbarItem(alias, toPos);\r\n\t\t}\r\n\t}\r\n\r\n\t#onFilterInput(event: InputEvent & { target: HTMLInputElement }) {\r\n\t\tconst query = (event.target.value ?? '').toLocaleLowerCase();\r\n\t\tthis.#debouncedFilter(query);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`${this.#renderDesigner()} ${this.#renderAvailableItems()}`;\r\n\t}\r\n\r\n\t#renderAvailableItems() {\r\n\t\tconst label = this.localize.term('placeholders_filter');\r\n\t\treturn html`\r\n\t\t\t<uui-box id=\"toolbox\" headline=${this.localize.term('tiptap_statusbar_availableItems')}>\r\n\t\t\t\t<div slot=\"header-actions\">\r\n\t\t\t\t\t<uui-input type=\"search\" autocomplete=\"off\" label=${label} placeholder=${label} @input=${this.#onFilterInput}>\r\n\t\t\t\t\t\t<div slot=\"prepend\">\r\n\t\t\t\t\t\t\t<uui-icon name=\"search\"></uui-icon>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</uui-input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<uui-scroll-container>\r\n\t\t\t\t\t<div class=\"available-items\" dropzone=\"move\" @drop=${this.#onDrop} @dragover=${this.#onDragOver}>\r\n\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\tthis._availableExtensions.length === 0,\r\n\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\thtml`<umb-localize key=\"tiptap_statusbar_availableItemsEmpty\"\r\n\t\t\t\t\t\t\t\t\t>There are no statusbar extensions to show</umb-localize\r\n\t\t\t\t\t\t\t\t>`,\r\n\t\t\t\t\t\t\t() => repeat(this._availableExtensions, (item) => this.#renderAvailableItem(item)),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</uui-scroll-container>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderAvailableItem(item: UmbTiptapStatusbarExtension) {\r\n\t\tconst forbidden = !this.#context.isExtensionEnabled(item.alias);\r\n\t\tconst inUse = this.#context.isExtensionInUse(item.alias);\r\n\t\tif (inUse || forbidden) return nothing;\r\n\t\tconst label = this.localize.string(item.label);\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tcompact\r\n\t\t\t\tclass=${forbidden ? 'forbidden' : ''}\r\n\t\t\t\tdata-mark=\"tiptap-statusbar-item:${item.alias}\"\r\n\t\t\t\tdraggable=\"true\"\r\n\t\t\t\tlabel=${label}\r\n\t\t\t\tlook=${forbidden ? 'placeholder' : 'outline'}\r\n\t\t\t\t?disabled=${forbidden || inUse}\r\n\t\t\t\t@click=${() => this.#onClick(item)}\r\n\t\t\t\t@dragstart=${(e: DragEvent) => this.#onDragStart(e, item.alias)}\r\n\t\t\t\t@dragend=${this.#onDragEnd}>\r\n\t\t\t\t<div class=\"inner\">\r\n\t\t\t\t\t${when(item.icon, () => html`<umb-icon .name=${item.icon}></umb-icon>`)}\r\n\t\t\t\t\t<span>${label}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDesigner() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"statusbar\">\r\n\t\t\t\t<div id=\"areas\">\r\n\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\tthis._statusbar,\r\n\t\t\t\t\t\t(area) => area.unique,\r\n\t\t\t\t\t\t(area, idx) => this.#renderArea(area, idx),\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderArea(area?: UmbTiptapStatusbarViewModel, areaIndex = 0) {\r\n\t\tif (!area) return nothing;\r\n\t\treturn html`\r\n\t\t\t<div\r\n\t\t\t\tclass=\"area\"\r\n\t\t\t\tdropzone=\"move\"\r\n\t\t\t\t@dragover=${this.#onDragOver}\r\n\t\t\t\t@drop=${(e: DragEvent) => this.#onDrop(e, [areaIndex, area.data.length - 1])}>\r\n\t\t\t\t<div class=\"items\">\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\tarea?.data.length === 0,\r\n\t\t\t\t\t\t() => html`<em><umb-localize key=\"tiptap_toolbar_emptyGroup\">Empty</umb-localize></em>`,\r\n\t\t\t\t\t\t() => html`${area!.data.map((alias, idx) => this.#renderItem(alias, areaIndex, idx))}`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(alias: string, areaIndex = 0, itemIndex = 0) {\r\n\t\tconst item = this.#context?.getExtensionByAlias(alias);\r\n\r\n\t\tconst forbidden = !this.#context?.isExtensionEnabled(item.alias);\r\n\t\tconst label = this.localize.string(item.label) || item.alias;\r\n\r\n\t\tswitch (item.kind) {\r\n\t\t\tcase 'unknown':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\tclass=\"missing\"\r\n\t\t\t\t\t\tdata-mark=\"tiptap-statusbar-item:${item.alias}\"\r\n\t\t\t\t\t\tcolor=\"danger\"\r\n\t\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t\tlabel=\"Missing extension\"\r\n\t\t\t\t\t\ttitle=\"Missing extension: ${item.alias}\"\r\n\t\t\t\t\t\t@click=${() => this.#context.removeStatusbarItem([areaIndex, itemIndex])}></uui-button>\r\n\t\t\t\t`;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\tclass=${forbidden ? 'forbidden' : ''}\r\n\t\t\t\t\t\tdata-mark=\"tiptap-statusbar-item:${item.alias}\"\r\n\t\t\t\t\t\tdraggable=\"true\"\r\n\t\t\t\t\t\tlabel=${label}\r\n\t\t\t\t\t\tlook=${forbidden ? 'placeholder' : 'outline'}\r\n\t\t\t\t\t\ttitle=${label}\r\n\t\t\t\t\t\t@click=${() => this.#context.removeStatusbarItem([areaIndex, itemIndex])}\r\n\t\t\t\t\t\t@dragend=${this.#onDragEnd}\r\n\t\t\t\t\t\t@dragstart=${(e: DragEvent) => this.#onDragStart(e, alias, [areaIndex, itemIndex])}>\r\n\t\t\t\t\t\t<div class=\"inner\">\r\n\t\t\t\t\t\t\t${when(item.icon, (icon) => html`<umb-icon .name=${icon}></umb-icon>`)}\r\n\t\t\t\t\t\t\t<span>${label}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\tflex-grow: 1;\r\n\t\t\t}\r\n\r\n\t\t\t@media (min-width: 1400px) {\r\n\t\t\t\t:host {\r\n\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t}\r\n\t\t\t\t#toolbox {\r\n\t\t\t\t\twidth: 500px;\r\n\t\t\t\t\tmax-width: 33%;\r\n\t\t\t\t\tflex-grow: 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#statusbar {\r\n\t\t\t\t\tflex-grow: 100;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#toolbox {\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\t[slot='header-actions'] {\r\n\t\t\t\t\tmargin-bottom: var(--uui-size-2);\r\n\r\n\t\t\t\t\tuui-icon {\r\n\t\t\t\t\t\tcolor: var(--uui-color-border);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tuui-scroll-container {\r\n\t\t\t\tmax-height: 350px;\r\n\t\t\t}\r\n\r\n\t\t\t.available-items {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\tgap: var(--uui-size-3);\r\n\r\n\t\t\t\tuui-button {\r\n\t\t\t\t\t--uui-button-font-weight: normal;\r\n\r\n\t\t\t\t\t&[draggable='true'],\r\n\t\t\t\t\t&[draggable='true'] > .inner {\r\n\t\t\t\t\t\tcursor: move;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&[disabled],\r\n\t\t\t\t\t&[disabled] > .inner {\r\n\t\t\t\t\t\tcursor: not-allowed;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.forbidden {\r\n\t\t\t\t\t\t--color: var(--uui-color-danger);\r\n\t\t\t\t\t\t--color-standalone: var(--uui-color-danger-standalone);\r\n\t\t\t\t\t\t--color-emphasis: var(--uui-color-danger-emphasis);\r\n\t\t\t\t\t\t--color-contrast: var(--uui-color-danger);\r\n\t\t\t\t\t\t--uui-button-contrast: var(--uui-color-danger);\r\n\t\t\t\t\t\t--uui-button-border-color: var(--uui-color-danger);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdiv {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\t\t\t\t\t\talign-items: flex-end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#areas {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-1);\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.area {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: flex-start;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\tborder: 1px dashed transparent;\r\n\t\t\t\t\tpadding: var(--uui-size-3);\r\n\r\n\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\tjustify-content: flex-end;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus-within,\r\n\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\tborder-color: var(--uui-color-border-standalone);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.items {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\r\n\t\t\t\t\t\tuui-button {\r\n\t\t\t\t\t\t\t--uui-button-font-weight: normal;\r\n\r\n\t\t\t\t\t\t\t&[draggable='true'],\r\n\t\t\t\t\t\t\t&[draggable='true'] > .inner {\r\n\t\t\t\t\t\t\t\tcursor: move;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&[disabled],\r\n\t\t\t\t\t\t\t&[disabled] > .inner {\r\n\t\t\t\t\t\t\t\tcursor: not-allowed;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&.forbidden {\r\n\t\t\t\t\t\t\t\t--color: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t--color-standalone: var(--uui-color-danger-standalone);\r\n\t\t\t\t\t\t\t\t--color-emphasis: var(--uui-color-danger-emphasis);\r\n\t\t\t\t\t\t\t\t--color-contrast: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t--uui-button-contrast-disabled: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t--uui-button-border-color-disabled: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tdiv {\r\n\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\t\t\t\t\t\t\t\talign-items: flex-end;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#btnAddRow {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-top: var(--uui-size-1);\r\n\t\t\t}\r\n\r\n\t\t\t.handle {\r\n\t\t\t\tcursor: move;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbPropertyEditorUiTiptapStatusbarConfigurationElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-tiptap-statusbar-configuration': UmbPropertyEditorUiTiptapStatusbarConfigurationElement;\r\n\t}\r\n}\r\n"],"names":["UmbTiptapStatusbarConfigurationContext","UmbContextBase","host","UMB_TIPTAP_STATUSBAR_CONFIGURATION_CONTEXT","#extensions","UmbArrayState","x","#reload","UmbBooleanState","#extensionsEnabled","#extensionsInUse","#statusbar","umbExtensionsRegistry","extensions","_extensions","a","b","ext","#lookup","UMB_PROPERTY_DATASET_CONTEXT","dataset","z","alias","value","area","query","to","statusbar","areaIndex","itemIndex","items","from","fromAreaIndex","fromItemIndex","toAreaIndex","toItemIndex","fromArea","fromItems","toBeMoved","toArea","toItems","UmbId","_context","_currentDragItem","_debouncedFilter","_initialized","_value","_UmbPropertyEditorUiTiptapStatusbarConfigurationElement_instances","onClick_fn","onDragStart_fn","onDragOver_fn","onDragEnd_fn","onDrop_fn","onFilterInput_fn","renderAvailableItems_fn","renderAvailableItem_fn","renderDesigner_fn","renderArea_fn","renderItem_fn","UmbPropertyEditorUiTiptapStatusbarConfigurationElement","UmbLitElement","__privateAdd","debounce","__privateGet","UMB_PROPERTY_CONTEXT","propertyContext","reload","__privateSet","html","__privateMethod","item","lastArea","lastItem","event","fromPos","toPos","label","when","repeat","forbidden","inUse","nothing","e","idx","icon","css","__decorateClass","state","property","customElement"],"mappings":"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"}