{"version":3,"file":"property-editor-ui-tiptap-toolbar-configuration.element-BRa6FkD3.js","sources":["../../../src/packages/tiptap/property-editors/tiptap/contexts/tiptap-toolbar-configuration.context.ts","../../../src/packages/tiptap/property-editors/tiptap/components/property-editor-ui-tiptap-toolbar-configuration.element.ts"],"sourcesContent":["import type { UmbTiptapToolbarValue } from '../../../components/types.js';\r\nimport type {\r\n\tUmbTiptapToolbarExtension,\r\n\tUmbTiptapToolbarGroupViewModel,\r\n\tUmbTiptapToolbarRowViewModel,\r\n} from '../types.js';\r\nimport { UMB_TIPTAP_TOOLBAR_CONFIGURATION_CONTEXT } from './tiptap-toolbar-configuration.context-token.js';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UmbArrayState, UmbBooleanState } from '@umbraco-cms/backoffice/observable-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { UmbId } from '@umbraco-cms/backoffice/id';\r\nimport { UMB_PROPERTY_DATASET_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbTiptapToolbarConfigurationContext extends UmbContextBase {\r\n\t#extensions = new UmbArrayState<UmbTiptapToolbarExtension>([], (x) => x.alias);\r\n\tpublic readonly extensions = this.#extensions.asObservable();\r\n\r\n\t#reload = new UmbBooleanState(false);\r\n\tpublic readonly reload = this.#reload.asObservable();\r\n\r\n\t#extensionsEnabled = new Set<string>();\r\n\r\n\t#extensionsInUse = new Set<string>();\r\n\r\n\t#lookup?: Map<string, UmbTiptapToolbarExtension>;\r\n\r\n\t#toolbar = new UmbArrayState<UmbTiptapToolbarRowViewModel>([], (x) => x.unique);\r\n\tpublic readonly toolbar = this.#toolbar.asObservable();\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_TIPTAP_TOOLBAR_CONFIGURATION_CONTEXT);\r\n\r\n\t\tthis.observe(umbExtensionsRegistry.byType('tiptapToolbarExtension'), (extensions) => {\r\n\t\t\tconst _extensions = extensions\r\n\t\t\t\t.sort((a, b) => a.alias.localeCompare(b.alias))\r\n\t\t\t\t.map((ext) => ({\r\n\t\t\t\t\tkind: (ext.kind as string) ?? 'button',\r\n\t\t\t\t\talias: ext.alias,\r\n\t\t\t\t\tlabel: ext.meta.label,\r\n\t\t\t\t\ticon: ext.meta.icon,\r\n\t\t\t\t\tdependencies: ext.forExtensions,\r\n\t\t\t\t}));\r\n\r\n\t\t\tthis.#extensions.setValue(_extensions);\r\n\r\n\t\t\tthis.#lookup = new Map(_extensions.map((ext) => [ext.alias, ext]));\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_DATASET_CONTEXT, async (dataset) => {\r\n\t\t\tthis.observe(\r\n\t\t\t\tawait dataset?.propertyValueByAlias<Array<string>>('extensions'),\r\n\t\t\t\t(extensions) => {\r\n\t\t\t\t\tif (extensions) {\r\n\t\t\t\t\t\tthis.#extensionsEnabled.clear();\r\n\t\t\t\t\t\tthis.#reload.setValue(false);\r\n\r\n\t\t\t\t\t\tthis.#extensions\r\n\t\t\t\t\t\t\t.getValue()\r\n\t\t\t\t\t\t\t.filter((x) => !x.dependencies || x.dependencies.every((z) => extensions.includes(z)))\r\n\t\t\t\t\t\t\t.map((x) => x.alias)\r\n\t\t\t\t\t\t\t.forEach((alias) => this.#extensionsEnabled.add(alias));\r\n\r\n\t\t\t\t\t\tthis.#reload.setValue(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t'_observeExtensions',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic cloneToolbarValue(value?: UmbTiptapToolbarValue | null): UmbTiptapToolbarValue {\r\n\t\tif (!this.isValidToolbarValue(value)) return [[[]]];\r\n\t\treturn value.map((row) => row.map((group) => [...group]));\r\n\t}\r\n\r\n\tpublic filterExtensions(query: string): Array<UmbTiptapToolbarExtension> {\r\n\t\treturn this.#extensions\r\n\t\t\t.getValue()\r\n\t\t\t.filter((ext) => ext.alias?.toLowerCase().includes(query) || ext.label?.toLowerCase().includes(query));\r\n\t}\r\n\r\n\tpublic getExtensionByAlias(alias: string): UmbTiptapToolbarExtension | undefined {\r\n\t\treturn this.#lookup?.get(alias);\r\n\t}\r\n\r\n\tpublic isExtensionEnabled(alias: string): boolean {\r\n\t\treturn this.#extensionsEnabled.has(alias);\r\n\t}\r\n\r\n\tpublic isExtensionInUse(alias: string): boolean {\r\n\t\treturn this.#extensionsInUse.has(alias);\r\n\t}\r\n\r\n\tpublic isValidToolbarValue(value: unknown): value is UmbTiptapToolbarValue {\r\n\t\tif (!Array.isArray(value)) return false;\r\n\t\tfor (const row of value) {\r\n\t\t\tif (!Array.isArray(row)) return false;\r\n\t\t\tfor (const group of row) {\r\n\t\t\t\tif (!Array.isArray(group)) return false;\r\n\t\t\t\tfor (const alias of group) {\r\n\t\t\t\t\tif (typeof alias !== 'string') return false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic insertToolbarItem(alias: string, to: [number, number, number]) {\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\r\n\t\tconst [rowIndex, groupIndex, itemIndex] = to;\r\n\r\n\t\tconst row = toolbar[rowIndex];\r\n\t\tconst rowData = [...row.data];\r\n\t\tconst group = rowData[groupIndex];\r\n\t\tconst items = [...group.data];\r\n\r\n\t\titems.splice(itemIndex, 0, alias);\r\n\t\tthis.#extensionsInUse.add(alias);\r\n\r\n\t\trowData[groupIndex] = { unique: group.unique, data: items };\r\n\t\ttoolbar[rowIndex] = { unique: row.unique, data: rowData };\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic insertToolbarGroup(rowIndex: number, groupIndex: number) {\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\t\tconst row = toolbar[rowIndex];\r\n\t\tconst groups = [...row.data];\r\n\t\tgroups.splice(groupIndex, 0, { unique: UmbId.new(), data: [] });\r\n\t\ttoolbar[rowIndex] = { unique: row.unique, data: groups };\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic insertToolbarRow(rowIndex: number) {\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\t\ttoolbar.splice(rowIndex, 0, { unique: UmbId.new(), data: [{ unique: UmbId.new(), data: [] }] });\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic moveToolbarItem(from: [number, number, number], to: [number, number, number]) {\r\n\t\tconst [fromRowIndex, fromGroupIndex, fromItemIndex] = from;\r\n\t\tconst [toRowIndex, toGroupIndex, toItemIndex] = to;\r\n\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\r\n\t\tconst fromRow = toolbar[fromRowIndex];\r\n\t\tconst fromRowData = [...fromRow.data];\r\n\t\tconst fromGroup = fromRowData[fromGroupIndex];\r\n\t\tconst fromItems = [...fromGroup.data];\r\n\r\n\t\tconst toBeMoved = fromItems.splice(fromItemIndex, 1);\r\n\r\n\t\tfromRowData[fromGroupIndex] = { unique: fromGroup.unique, data: fromItems };\r\n\t\ttoolbar[fromRowIndex] = { unique: fromRow.unique, data: fromRowData };\r\n\r\n\t\tconst toRow = toolbar[toRowIndex];\r\n\t\tconst toRowData = [...toRow.data];\r\n\t\tconst toGroup = toRowData[toGroupIndex];\r\n\t\tconst toItems = [...toGroup.data];\r\n\r\n\t\ttoItems.splice(toItemIndex, 0, toBeMoved[0]);\r\n\r\n\t\ttoRowData[toGroupIndex] = { unique: toGroup.unique, data: toItems };\r\n\t\ttoolbar[toRowIndex] = { unique: toRow.unique, data: toRowData };\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic removeToolbarItem(from: [number, number, number]) {\r\n\t\tconst [rowIndex, groupIndex, itemIndex] = from;\r\n\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\t\tconst row = toolbar[rowIndex];\r\n\t\tconst rowData = [...row.data];\r\n\t\tconst group = rowData[groupIndex];\r\n\t\tconst items = [...group.data];\r\n\r\n\t\tconst removed = items.splice(itemIndex, 1);\r\n\t\tremoved.forEach((alias) => this.#extensionsInUse.delete(alias));\r\n\r\n\t\trowData[groupIndex] = { unique: group.unique, data: items };\r\n\t\ttoolbar[rowIndex] = { unique: row.unique, data: rowData };\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic removeToolbarGroup(rowIndex: number, groupIndex: number) {\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\r\n\t\tif (toolbar[rowIndex].data.length > groupIndex) {\r\n\t\t\tconst row = toolbar[rowIndex];\r\n\t\t\tconst groups = [...row.data];\r\n\t\t\tconst removed = groups.splice(groupIndex, 1);\r\n\t\t\tremoved.forEach((group) => group.data.forEach((alias) => this.#extensionsInUse.delete(alias)));\r\n\t\t\ttoolbar[rowIndex] = { unique: row.unique, data: groups };\r\n\t\t}\r\n\r\n\t\t// Prevent leaving an empty group\r\n\t\tif (toolbar[rowIndex].data.length === 0) {\r\n\t\t\ttoolbar[rowIndex].data[0] = { unique: UmbId.new(), data: [] };\r\n\t\t}\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic removeToolbarRow(rowIndex: number) {\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\r\n\t\tif (toolbar.length > rowIndex) {\r\n\t\t\tconst removed = toolbar.splice(rowIndex, 1);\r\n\t\t\tremoved.forEach((row) =>\r\n\t\t\t\trow.data.forEach((group) => group.data.forEach((alias) => this.#extensionsInUse.delete(alias))),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Prevent leaving an empty row\r\n\t\tif (toolbar.length === 0) {\r\n\t\t\ttoolbar[0] = { unique: UmbId.new(), data: [{ unique: UmbId.new(), data: [] }] };\r\n\t\t}\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic setToolbar(value?: UmbTiptapToolbarValue | null) {\r\n\t\tif (!this.isValidToolbarValue(value)) {\r\n\t\t\tvalue = [[[]]];\r\n\t\t}\r\n\r\n\t\tthis.#extensionsInUse.clear();\r\n\t\tvalue.forEach((row) => row.forEach((group) => group.forEach((alias) => this.#extensionsInUse.add(alias))));\r\n\r\n\t\tconst toolbar = value.map((row) => ({\r\n\t\t\tunique: UmbId.new(),\r\n\t\t\tdata: row.map((group) => ({ unique: UmbId.new(), data: group })),\r\n\t\t}));\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n\r\n\tpublic updateToolbarRow(rowIndex: number, groups: Array<UmbTiptapToolbarGroupViewModel>) {\r\n\t\tconst toolbar = [...this.#toolbar.getValue()];\r\n\r\n\t\tconst row = toolbar[rowIndex];\r\n\t\ttoolbar[rowIndex] = { unique: row.unique, data: groups };\r\n\r\n\t\tthis.#toolbar.setValue(toolbar);\r\n\t}\r\n}\r\n","import { UmbTiptapToolbarConfigurationContext } from '../contexts/tiptap-toolbar-configuration.context.js';\r\nimport type {\r\n\tUmbTiptapToolbarExtension,\r\n\tUmbTiptapToolbarGroupViewModel,\r\n\tUmbTiptapToolbarRowViewModel,\r\n} from '../types.js';\r\nimport type { UmbTiptapToolbarValue } from '../../../components/types.js';\r\nimport { customElement, css, html, property, repeat, state, when, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { debounce } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_PROPERTY_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\n\r\n@customElement('umb-property-editor-ui-tiptap-toolbar-configuration')\r\nexport class UmbPropertyEditorUiTiptapToolbarConfigurationElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t#context = new UmbTiptapToolbarConfigurationContext(this);\r\n\r\n\t#currentDragItem?: { alias: string; fromPos?: [number, number, number] };\r\n\r\n\t#debouncedFilter = debounce((query: string) => {\r\n\t\tthis._availableExtensions = this.#context.filterExtensions(query);\r\n\t}, 250);\r\n\r\n\t@state()\r\n\tprivate _availableExtensions: Array<UmbTiptapToolbarExtension> = [];\r\n\r\n\t@state()\r\n\tprivate _toolbar: Array<UmbTiptapToolbarRowViewModel> = [];\r\n\r\n\t@property({ attribute: false })\r\n\tset value(value: UmbTiptapToolbarValue | undefined) {\r\n\t\tif (!value) value = [[[]]];\r\n\t\tif (value === this.#value) return;\r\n\t\tthis.#value = this.#context.isValidToolbarValue(value) ? value : [[[]]];\r\n\t}\r\n\tget value(): UmbTiptapToolbarValue | undefined {\r\n\t\treturn this.#context.cloneToolbarValue(this.#value);\r\n\t}\r\n\t#value?: UmbTiptapToolbarValue;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_CONTEXT, (propertyContext) => {\r\n\t\t\tthis.observe(this.#context.extensions, (extensions) => {\r\n\t\t\t\tthis._availableExtensions = extensions;\r\n\t\t\t});\r\n\r\n\t\t\tthis.observe(this.#context.reload, (reload) => {\r\n\t\t\t\tif (reload) {\r\n\t\t\t\t\tthis.requestUpdate();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.observe(this.#context.toolbar, (toolbar) => {\r\n\t\t\t\tif (!toolbar.length) return;\r\n\t\t\t\tthis._toolbar = toolbar;\r\n\t\t\t\tthis.#value = toolbar.map((rows) => rows.data.map((groups) => [...groups.data]));\r\n\t\t\t\tpropertyContext?.setValue(this.#value);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprotected override firstUpdated() {\r\n\t\tthis.#context.setToolbar(this.value);\r\n\t}\r\n\r\n\t#onClick(item: UmbTiptapToolbarExtension) {\r\n\t\tconst lastRow = (this.#value?.length ?? 1) - 1;\r\n\t\tconst lastGroup = (this.#value?.[lastRow].length ?? 1) - 1;\r\n\t\tconst lastItem = this.#value?.[lastRow][lastGroup].length ?? 0;\r\n\t\tthis.#context.insertToolbarItem(item.alias, [lastRow, lastGroup, lastItem]);\r\n\t}\r\n\r\n\t#onDragStart(event: DragEvent, alias: string, fromPos?: [number, number, number]) {\r\n\t\tevent.dataTransfer!.effectAllowed = 'move';\r\n\t\tthis.#currentDragItem = { alias, fromPos };\r\n\t}\r\n\r\n\t#onDragOver(event: DragEvent) {\r\n\t\tevent.preventDefault();\r\n\t\tevent.dataTransfer!.dropEffect = 'move';\r\n\t}\r\n\r\n\t#onDragEnd(event: DragEvent) {\r\n\t\tevent.preventDefault();\r\n\t\tif (event.dataTransfer?.dropEffect === 'none') {\r\n\t\t\tconst { fromPos } = this.#currentDragItem ?? {};\r\n\t\t\tif (!fromPos) return;\r\n\r\n\t\t\tthis.#context.removeToolbarItem(fromPos);\r\n\t\t}\r\n\t}\r\n\r\n\t#onDrop(event: DragEvent, toPos?: [number, number, number]) {\r\n\t\tevent.preventDefault();\r\n\t\tconst { alias, fromPos } = this.#currentDragItem ?? {};\r\n\r\n\t\t// Remove item if no destination position is provided\r\n\t\tif (fromPos && !toPos) {\r\n\t\t\tthis.#context.removeToolbarItem(fromPos);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Move item if both source and destination positions are available\r\n\t\tif (fromPos && toPos) {\r\n\t\t\tthis.#context.moveToolbarItem(fromPos, toPos);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Insert item if an alias and a destination position are provided\r\n\t\tif (alias && toPos) {\r\n\t\t\tthis.#context.insertToolbarItem(alias, toPos);\r\n\t\t}\r\n\t}\r\n\r\n\t#onFilterInput(event: InputEvent & { target: HTMLInputElement }) {\r\n\t\tconst query = (event.target.value ?? '').toLocaleLowerCase();\r\n\t\tthis.#debouncedFilter(query);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`${this.#renderDesigner()} ${this.#renderAvailableItems()}`;\r\n\t}\r\n\r\n\t#renderAvailableItems() {\r\n\t\treturn html`\r\n\t\t\t<uui-box id=\"toolbox\" headline=${this.localize.term('tiptap_toobar_availableItems')}>\r\n\t\t\t\t<div slot=\"header-actions\">\r\n\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\ttype=\"search\"\r\n\t\t\t\t\t\tautocomplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=${this.localize.term('placeholders_filter')}\r\n\t\t\t\t\t\t@input=${this.#onFilterInput}>\r\n\t\t\t\t\t\t<div slot=\"prepend\">\r\n\t\t\t\t\t\t\t<uui-icon name=\"search\"></uui-icon>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</uui-input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<uui-scroll-container>\r\n\t\t\t\t\t<div class=\"available-items\" dropzone=\"move\" @drop=${this.#onDrop} @dragover=${this.#onDragOver}>\r\n\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\tthis._availableExtensions.length === 0,\r\n\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\thtml`<umb-localize key=\"tiptap_toobar_availableItemsEmpty\"\r\n\t\t\t\t\t\t\t\t\t>There are no toolbar extensions to show</umb-localize\r\n\t\t\t\t\t\t\t\t>`,\r\n\t\t\t\t\t\t\t() => repeat(this._availableExtensions, (item) => this.#renderAvailableItem(item)),\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</uui-scroll-container>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderAvailableItem(item: UmbTiptapToolbarExtension) {\r\n\t\tconst forbidden = !this.#context.isExtensionEnabled(item.alias);\r\n\t\tconst inUse = this.#context.isExtensionInUse(item.alias);\r\n\t\tif (inUse || forbidden) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\tcompact\r\n\t\t\t\tclass=${forbidden ? 'forbidden' : ''}\r\n\t\t\t\tdata-mark=\"tiptap-toolbar-item:${item.alias}\"\r\n\t\t\t\tdraggable=\"true\"\r\n\t\t\t\tlook=${forbidden ? 'placeholder' : 'outline'}\r\n\t\t\t\t?disabled=${forbidden || inUse}\r\n\t\t\t\t@click=${() => this.#onClick(item)}\r\n\t\t\t\t@dragstart=${(e: DragEvent) => this.#onDragStart(e, item.alias)}\r\n\t\t\t\t@dragend=${this.#onDragEnd}>\r\n\t\t\t\t<div class=\"inner\">\r\n\t\t\t\t\t${when(item.icon, () => html`<umb-icon .name=${item.icon}></umb-icon>`)}\r\n\t\t\t\t\t<span>${this.localize.string(item.label)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDesigner() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"toolbar\">\r\n\t\t\t\t<div id=\"rows\">\r\n\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\tthis._toolbar,\r\n\t\t\t\t\t\t(row) => row.unique,\r\n\t\t\t\t\t\t(row, idx) => this.#renderRow(row, idx),\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tid=\"btnAddRow\"\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\tlabel=${this.localize.term('tiptap_toolbar_addRow')}\r\n\t\t\t\t\t@click=${() => this.#context.insertToolbarRow(this._toolbar.length)}></uui-button>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderRow(row?: UmbTiptapToolbarRowViewModel, rowIndex = 0) {\r\n\t\tif (!row) return nothing;\r\n\t\tconst hideActionBar = this._toolbar.length === 1;\r\n\t\treturn html`\r\n\t\t\t<uui-button-inline-create\r\n\t\t\t\tlabel=${this.localize.term('tiptap_toolbar_addRow')}\r\n\t\t\t\t@click=${() => this.#context?.insertToolbarRow(rowIndex)}></uui-button-inline-create>\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"groups\">\r\n\t\t\t\t\t<uui-button-inline-create\r\n\t\t\t\t\t\tvertical\r\n\t\t\t\t\t\tlabel=${this.localize.term('tiptap_toolbar_addGroup')}\r\n\t\t\t\t\t\t@click=${() => this.#context?.insertToolbarGroup(rowIndex, 0)}></uui-button-inline-create>\r\n\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\trow.data,\r\n\t\t\t\t\t\t(group) => group.unique,\r\n\t\t\t\t\t\t(group, idx) => this.#renderGroup(group, rowIndex, idx),\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t${when(\r\n\t\t\t\t\t!hideActionBar,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<uui-action-bar>\r\n\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\tlabel=${this.localize.term('tiptap_toolbar_removeRow')}\r\n\t\t\t\t\t\t\t\t@click=${() => this.#context?.removeToolbarRow(rowIndex)}>\r\n\t\t\t\t\t\t\t\t<uui-icon name=\"icon-trash\"></uui-icon>\r\n\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t</uui-action-bar>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderGroup(group?: UmbTiptapToolbarGroupViewModel, rowIndex = 0, groupIndex = 0) {\r\n\t\tif (!group) return nothing;\r\n\t\tconst showActionBar = this._toolbar[rowIndex].data.length > 1 && group.data.length === 0;\r\n\t\treturn html`\r\n\t\t\t<div\r\n\t\t\t\tclass=\"group\"\r\n\t\t\t\tdropzone=\"move\"\r\n\t\t\t\t@dragover=${this.#onDragOver}\r\n\t\t\t\t@drop=${(e: DragEvent) => this.#onDrop(e, [rowIndex, groupIndex, group.data.length - 1])}>\r\n\t\t\t\t<div class=\"items\">\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\tgroup?.data.length === 0,\r\n\t\t\t\t\t\t() => html`<em><umb-localize key=\"tiptap_toolbar_emptyGroup\">Empty</umb-localize></em>`,\r\n\t\t\t\t\t\t() => html`${group!.data.map((alias, idx) => this.#renderItem(alias, rowIndex, groupIndex, idx))}`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t${when(\r\n\t\t\t\t\tshowActionBar,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<uui-action-bar>\r\n\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\tlabel=${this.localize.term('tiptap_toolbar_removeGroup')}\r\n\t\t\t\t\t\t\t\t@click=${() => this.#context?.removeToolbarGroup(rowIndex, groupIndex)}>\r\n\t\t\t\t\t\t\t\t<uui-icon name=\"icon-trash\"></uui-icon>\r\n\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t</uui-action-bar>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<uui-button-inline-create\r\n\t\t\t\tvertical\r\n\t\t\t\tlabel=${this.localize.term('tiptap_toolbar_addGroup')}\r\n\t\t\t\t@click=${() => this.#context?.insertToolbarGroup(rowIndex, groupIndex + 1)}></uui-button-inline-create>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(alias: string, rowIndex = 0, groupIndex = 0, itemIndex = 0) {\r\n\t\tconst item = this.#context?.getExtensionByAlias(alias);\r\n\t\tif (!item) return nothing;\r\n\r\n\t\tconst forbidden = !this.#context?.isExtensionEnabled(item.alias);\r\n\r\n\t\tswitch (item.kind) {\r\n\t\t\tcase 'styleMenu':\r\n\t\t\tcase 'menu':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\tclass=${forbidden ? 'forbidden' : ''}\r\n\t\t\t\t\t\tdraggable=\"true\"\r\n\t\t\t\t\t\tlook=${forbidden ? 'placeholder' : 'outline'}\r\n\t\t\t\t\t\ttitle=${this.localize.string(item.label)}\r\n\t\t\t\t\t\t?disabled=${forbidden}\r\n\t\t\t\t\t\t@click=${() => this.#context.removeToolbarItem([rowIndex, groupIndex, itemIndex])}\r\n\t\t\t\t\t\t@dragend=${this.#onDragEnd}\r\n\t\t\t\t\t\t@dragstart=${(e: DragEvent) => this.#onDragStart(e, alias, [rowIndex, groupIndex, itemIndex])}>\r\n\t\t\t\t\t\t<div class=\"inner\">\r\n\t\t\t\t\t\t\t<span>${this.localize.string(item.label)}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<uui-symbol-expand slot=\"extra\" open></uui-symbol-expand>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t`;\r\n\r\n\t\t\tcase 'button':\r\n\t\t\tdefault:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\tclass=${forbidden ? 'forbidden' : ''}\r\n\t\t\t\t\t\tdata-mark=\"tiptap-toolbar-item:${item.alias}\"\r\n\t\t\t\t\t\tdraggable=\"true\"\r\n\t\t\t\t\t\tlook=${forbidden ? 'placeholder' : 'outline'}\r\n\t\t\t\t\t\ttitle=${this.localize.string(item.label)}\r\n\t\t\t\t\t\t?disabled=${forbidden}\r\n\t\t\t\t\t\t@click=${() => this.#context.removeToolbarItem([rowIndex, groupIndex, itemIndex])}\r\n\t\t\t\t\t\t@dragend=${this.#onDragEnd}\r\n\t\t\t\t\t\t@dragstart=${(e: DragEvent) => this.#onDragStart(e, alias, [rowIndex, groupIndex, itemIndex])}>\r\n\t\t\t\t\t\t<div class=\"inner\">\r\n\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\titem.icon,\r\n\t\t\t\t\t\t\t\t() => html`<umb-icon .name=${item.icon}></umb-icon>`,\r\n\t\t\t\t\t\t\t\t() => html`<span>${this.localize.string(item.label)}</span>`,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\tflex-grow: 1;\r\n\t\t\t}\r\n\r\n\t\t\t@media (min-width: 1400px) {\r\n\t\t\t\t:host {\r\n\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t}\r\n\t\t\t\t#toolbox {\r\n\t\t\t\t\twidth: 500px;\r\n\t\t\t\t\tmax-width: 33%;\r\n\t\t\t\t\tflex-grow: 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#toolbar {\r\n\t\t\t\t\tflex-grow: 100;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#toolbox {\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\t[slot='header-actions'] {\r\n\t\t\t\t\tmargin-bottom: var(--uui-size-2);\r\n\r\n\t\t\t\t\tuui-icon {\r\n\t\t\t\t\t\tcolor: var(--uui-color-border);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tuui-scroll-container {\r\n\t\t\t\tmax-height: 350px;\r\n\t\t\t}\r\n\r\n\t\t\t.available-items {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\tgap: var(--uui-size-3);\r\n\r\n\t\t\t\tuui-button {\r\n\t\t\t\t\t--uui-button-font-weight: normal;\r\n\r\n\t\t\t\t\t&[draggable='true'],\r\n\t\t\t\t\t&[draggable='true'] > .inner {\r\n\t\t\t\t\t\tcursor: move;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&[disabled],\r\n\t\t\t\t\t&[disabled] > .inner {\r\n\t\t\t\t\t\tcursor: not-allowed;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.forbidden {\r\n\t\t\t\t\t\t--color: var(--uui-color-danger);\r\n\t\t\t\t\t\t--color-standalone: var(--uui-color-danger-standalone);\r\n\t\t\t\t\t\t--color-emphasis: var(--uui-color-danger-emphasis);\r\n\t\t\t\t\t\t--color-contrast: var(--uui-color-danger);\r\n\t\t\t\t\t\t--uui-button-contrast-disabled: var(--uui-color-danger);\r\n\t\t\t\t\t\t--uui-button-border-color-disabled: var(--uui-color-danger);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdiv {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tuui-button-inline-create:not([vertical]) {\r\n\t\t\t\tmargin-bottom: -4px;\r\n\t\t\t}\r\n\r\n\t\t\t#rows {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-1);\r\n\r\n\t\t\t\t.row {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: flex-start;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\tgap: var(--uui-size-3);\r\n\r\n\t\t\t\t\t&:not(:last-child) {\r\n\t\t\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus-within,\r\n\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\tborder-color: var(--uui-color-border-standalone);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.groups {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\r\n\t\t\t\t\t\tuui-button-inline-create {\r\n\t\t\t\t\t\t\theight: 50px;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.group {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\t\tgap: var(--uui-size-3);\r\n\r\n\t\t\t\t\t\t\tborder: 1px dashed transparent;\r\n\t\t\t\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\t\t\t\tpadding: var(--uui-size-3);\r\n\r\n\t\t\t\t\t\t\t> uui-action-bar {\r\n\t\t\t\t\t\t\t\topacity: 0;\r\n\t\t\t\t\t\t\t\ttransition: opacity 120ms;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&:focus-within,\r\n\t\t\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\t\t\tborder-color: var(--uui-color-border-standalone);\r\n\t\t\t\t\t\t\t\t> uui-action-bar {\r\n\t\t\t\t\t\t\t\t\topacity: 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.items {\r\n\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\r\n\t\t\t\t\t\t\t\tuui-button {\r\n\t\t\t\t\t\t\t\t\t--uui-button-font-weight: normal;\r\n\r\n\t\t\t\t\t\t\t\t\t&[draggable='true'],\r\n\t\t\t\t\t\t\t\t\t&[draggable='true'] > .inner {\r\n\t\t\t\t\t\t\t\t\t\tcursor: move;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t&[disabled],\r\n\t\t\t\t\t\t\t\t\t&[disabled] > .inner {\r\n\t\t\t\t\t\t\t\t\t\tcursor: not-allowed;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t&.forbidden {\r\n\t\t\t\t\t\t\t\t\t\t--color: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t\t\t--color-standalone: var(--uui-color-danger-standalone);\r\n\t\t\t\t\t\t\t\t\t\t--color-emphasis: var(--uui-color-danger-emphasis);\r\n\t\t\t\t\t\t\t\t\t\t--color-contrast: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t\t\t--uui-button-contrast-disabled: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t\t\t--uui-button-border-color-disabled: var(--uui-color-danger);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tdiv {\r\n\t\t\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\t\t\tgap: var(--uui-size-1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tuui-symbol-expand {\r\n\t\t\t\t\t\t\t\t\t\tmargin-left: var(--uui-size-space-2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t#btnAddRow {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-top: var(--uui-size-1);\r\n\t\t\t}\r\n\r\n\t\t\t.handle {\r\n\t\t\t\tcursor: move;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbPropertyEditorUiTiptapToolbarConfigurationElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-tiptap-toolbar-configuration': UmbPropertyEditorUiTiptapToolbarConfigurationElement;\r\n\t}\r\n}\r\n"],"names":["UmbTiptapToolbarConfigurationContext","UmbContextBase","host","UMB_TIPTAP_TOOLBAR_CONFIGURATION_CONTEXT","#extensions","UmbArrayState","x","#reload","UmbBooleanState","#extensionsEnabled","#extensionsInUse","#toolbar","umbExtensionsRegistry","extensions","_extensions","a","b","ext","#lookup","UMB_PROPERTY_DATASET_CONTEXT","dataset","z","alias","value","row","group","query","to","toolbar","rowIndex","groupIndex","itemIndex","rowData","items","groups","UmbId","from","fromRowIndex","fromGroupIndex","fromItemIndex","toRowIndex","toGroupIndex","toItemIndex","fromRow","fromRowData","fromGroup","fromItems","toBeMoved","toRow","toRowData","toGroup","toItems","_context","_currentDragItem","_debouncedFilter","_value","_UmbPropertyEditorUiTiptapToolbarConfigurationElement_instances","onClick_fn","onDragStart_fn","onDragOver_fn","onDragEnd_fn","onDrop_fn","onFilterInput_fn","renderAvailableItems_fn","renderAvailableItem_fn","renderDesigner_fn","renderRow_fn","renderGroup_fn","renderItem_fn","UmbPropertyEditorUiTiptapToolbarConfigurationElement","UmbLitElement","__privateAdd","debounce","__privateGet","UMB_PROPERTY_CONTEXT","propertyContext","reload","__privateSet","rows","html","__privateMethod","item","lastRow","lastGroup","lastItem","event","fromPos","toPos","when","repeat","forbidden","inUse","nothing","e","idx","hideActionBar","showActionBar","css","__decorateClass","state","property","customElement"],"mappings":"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"}