{"version":3,"file":"word-count.tiptap-statusbar-element-DOmLAO_4.js","sources":["../../../src/packages/tiptap/extensions/word-count/word-count.tiptap-statusbar-element.ts"],"sourcesContent":["import { customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-tiptap-statusbar-word-count')\r\nexport class UmbTiptapStatusbarWordCountElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _characters = 0;\r\n\r\n\t@state()\r\n\tprivate _words = 0;\r\n\r\n\t@state()\r\n\tprivate _showCharacters = false;\r\n\r\n\tpublic editor?: Editor;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.editor) {\r\n\t\t\tthis.editor.on('update', this.#onEditorUpdate);\r\n\t\t\tthis.#onEditorUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\toverride disconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\r\n\t\tif (this.editor) {\r\n\t\t\tthis.editor.off('update', this.#onEditorUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\treadonly #onEditorUpdate = () => {\r\n\t\tthis._characters = this.editor?.storage.characterCount.characters() ?? 0;\r\n\t\tthis._words = this.editor?.storage.characterCount.words() ?? 0;\r\n\t};\r\n\r\n\treadonly #onClick = () => (this._showCharacters = !this._showCharacters);\r\n\r\n\toverride render() {\r\n\t\tconst label = this._showCharacters\r\n\t\t\t? this.localize.term('tiptap_statusbar_characters', this._characters)\r\n\t\t\t: this.localize.term('tiptap_statusbar_words', this._words);\r\n\t\treturn html`<uui-button compact label=${label} @click=${this.#onClick}></uui-button>`;\r\n\t}\r\n}\r\n\r\nexport { UmbTiptapStatusbarWordCountElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tiptap-statusbar-word-count': UmbTiptapStatusbarWordCountElement;\r\n\t}\r\n}\r\n"],"names":["_onEditorUpdate","_onClick","UmbTiptapStatusbarWordCountElement","UmbLitElement","__privateAdd","__privateGet","label","html","__decorateClass","state","customElement"],"mappings":";;;;;;;;uQAAAA,GAAAC;AAKO,IAAMC,IAAN,cAAiDC,EAAc;AAAA,EAA/D,cAAA;AAAA,UAAA,GAAA,SAAA,GAEN,KAAQ,cAAc,GAGtB,KAAQ,SAAS,GAGjB,KAAQ,kBAAkB,IAqB1BC,EAAA,MAASJ,GAAkB,MAAM;AAChC,WAAK,cAAc,KAAK,QAAQ,QAAQ,eAAe,gBAAgB,GACvE,KAAK,SAAS,KAAK,QAAQ,QAAQ,eAAe,WAAW;AAAA,IAC9D,CAAA,GAEAI,EAAA,MAASH,GAAW,MAAO,KAAK,kBAAkB,CAAC,KAAK,eAAA;AAAA,EAAA;AAAA,EAtB/C,oBAAoB;AAC5B,UAAM,kBAAA,GAEF,KAAK,WACR,KAAK,OAAO,GAAG,UAAUI,EAAA,MAAKL,CAAA,CAAe,GAC7CK,EAAA,MAAKL,CAAA,EAAL,KAAA,IAAA;AAAA,EAEF;AAAA,EAES,uBAAuB;AAC/B,UAAM,qBAAA,GAEF,KAAK,UACR,KAAK,OAAO,IAAI,UAAUK,EAAA,MAAKL,CAAA,CAAe;AAAA,EAEhD;AAAA,EASS,SAAS;AACjB,UAAMM,IAAQ,KAAK,kBAChB,KAAK,SAAS,KAAK,+BAA+B,KAAK,WAAW,IAClE,KAAK,SAAS,KAAK,0BAA0B,KAAK,MAAM;AAC3D,WAAOC,8BAAiCD,CAAK,WAAWD,EAAA,MAAKJ,CAAA,CAAQ;AAAA,EACtE;AACD;AAbUD,IAAA,oBAAA,QAAA;AAKAC,IAAA,oBAAA,QAAA;AAhCDO,EAAA;AAAA,EADPC,EAAA;AAAM,GADKP,EAEJ,WAAA,eAAA,CAAA;AAGAM,EAAA;AAAA,EADPC,EAAA;AAAM,GAJKP,EAKJ,WAAA,UAAA,CAAA;AAGAM,EAAA;AAAA,EADPC,EAAA;AAAM,GAPKP,EAQJ,WAAA,mBAAA,CAAA;AARIA,IAANM,EAAA;AAAA,EADNE,EAAc,iCAAiC;AAAA,GACnCR,CAAA;"}