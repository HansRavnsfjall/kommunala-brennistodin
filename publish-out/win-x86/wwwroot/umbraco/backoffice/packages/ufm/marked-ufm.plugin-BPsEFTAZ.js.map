{"version":3,"file":"marked-ufm.plugin-BPsEFTAZ.js","sources":["../../../src/packages/ufm/plugins/marked-ufm.plugin.ts"],"sourcesContent":["import type { UfmPlugin } from './types.js';\r\nimport type { MarkedExtension } from '@umbraco-cms/backoffice/external/marked';\r\n\r\n/**\r\n * @param {Array<UfmPlugin>} plugins - An array of UFM plugins.\r\n * @returns {MarkedExtension} A Marked extension object.\r\n */\r\nexport function ufm(plugins: Array<UfmPlugin> = []): MarkedExtension {\r\n\treturn {\r\n\t\textensions: plugins.map(({ alias, marker, render }) => {\r\n\t\t\tconst prefix = `(${alias}:${marker ? `|${marker}` : ''})`;\r\n\t\t\treturn {\r\n\t\t\t\tname: alias,\r\n\t\t\t\tlevel: 'inline',\r\n\t\t\t\tstart: (src: string) => src.search(`{${prefix}`),\r\n\t\t\t\ttokenizer: (src: string) => {\r\n\t\t\t\t\tconst pattern = `^\\\\{${prefix}([^}]*)\\\\}`;\r\n\t\t\t\t\tconst regex = new RegExp(pattern);\r\n\t\t\t\t\tconst match = src.match(regex);\r\n\r\n\t\t\t\t\tif (match) {\r\n\t\t\t\t\t\tconst [raw, prefix, content = ''] = match;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: alias,\r\n\t\t\t\t\t\t\traw: raw,\r\n\t\t\t\t\t\t\ttokens: [],\r\n\t\t\t\t\t\t\tprefix: prefix,\r\n\t\t\t\t\t\t\ttext: content.trim(),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t},\r\n\t\t\t\trenderer: render,\r\n\t\t\t};\r\n\t\t}),\r\n\t};\r\n}\r\n"],"names":["ufm","plugins","alias","marker","render","prefix","src","pattern","regex","match","raw","content"],"mappings":"AAOO,SAASA,EAAIC,IAA4B,IAAqB;AACpE,SAAO;AAAA,IACN,YAAYA,EAAQ,IAAI,CAAC,EAAE,OAAAC,GAAO,QAAAC,GAAQ,QAAAC,QAAa;AACtD,YAAMC,IAAS,IAAIH,CAAK,IAAIC,IAAS,IAAIA,CAAM,KAAK,EAAE;AACtD,aAAO;AAAA,QACN,MAAMD;AAAA,QACN,OAAO;AAAA,QACP,OAAO,CAACI,MAAgBA,EAAI,OAAO,IAAID,CAAM,EAAE;AAAA,QAC/C,WAAW,CAACC,MAAgB;AAC3B,gBAAMC,IAAU,OAAOF,CAAM,cACvBG,IAAQ,IAAI,OAAOD,CAAO,GAC1BE,IAAQH,EAAI,MAAME,CAAK;AAE7B,cAAIC,GAAO;AACV,kBAAM,CAACC,GAAKL,GAAQM,IAAU,EAAE,IAAIF;AACpC,mBAAO;AAAA,cACN,MAAMP;AAAA,cACN,KAAAQ;AAAA,cACA,QAAQ,CAAA;AAAA,cACR,QAAQL;AAAAA,cACR,MAAMM,EAAQ,KAAA;AAAA,YAAK;AAAA,UAErB;AAAA,QAGD;AAAA,QACA,UAAUP;AAAA,MAAA;AAAA,IAEZ,CAAC;AAAA,EAAA;AAEH;"}