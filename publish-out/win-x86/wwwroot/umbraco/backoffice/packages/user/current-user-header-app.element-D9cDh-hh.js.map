{"version":3,"file":"current-user-header-app.element-D9cDh-hh.js","sources":["../../../src/packages/user/current-user/current-user-header-app.element.ts"],"sourcesContent":["import { UMB_CURRENT_USER_MODAL } from './modals/current-user/current-user-modal.token.js';\r\nimport type { UmbCurrentUserModel } from './types.js';\r\nimport { UMB_CURRENT_USER_CONTEXT } from './constants.js';\r\nimport { css, html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbHeaderAppButtonElement } from '@umbraco-cms/backoffice/components';\r\n\r\n@customElement('umb-current-user-header-app')\r\nexport class UmbCurrentUserHeaderAppElement extends UmbHeaderAppButtonElement {\r\n\t@state()\r\n\tprivate _currentUser?: UmbCurrentUserModel;\r\n\r\n\t#currentUserContext?: typeof UMB_CURRENT_USER_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_CURRENT_USER_CONTEXT, (instance) => {\r\n\t\t\tthis.#currentUserContext = instance;\r\n\t\t\tthis._observeCurrentUser();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate async _observeCurrentUser() {\r\n\t\tif (!this.#currentUserContext) return;\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#currentUserContext.currentUser,\r\n\t\t\t(currentUser) => {\r\n\t\t\t\tthis._currentUser = currentUser;\r\n\t\t\t},\r\n\t\t\t'umbCurrentUserObserver',\r\n\t\t);\r\n\t}\r\n\r\n\tasync #handleUserClick() {\r\n\t\tawait umbOpenModal(this, UMB_CURRENT_USER_MODAL).catch(() => undefined);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-button\r\n\t\t\t\t@click=${this.#handleUserClick}\r\n\t\t\t\tlook=\"primary\"\r\n\t\t\t\tlabel=${this.localize.term('visuallyHiddenTexts_profileOptions')}\r\n\t\t\t\tcompact>\r\n\t\t\t\t<umb-user-avatar\r\n\t\t\t\t\tid=\"Avatar\"\r\n\t\t\t\t\t.name=${this._currentUser?.name}\r\n\t\t\t\t\t.imgUrls=${this._currentUser?.avatarUrls || []}></umb-user-avatar>\r\n\t\t\t</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\t...UmbHeaderAppButtonElement.styles,\r\n\t\tcss`\r\n\t\t\tuui-button {\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbCurrentUserHeaderAppElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-current-user-header-app': UmbCurrentUserHeaderAppElement;\r\n\t}\r\n}\r\n"],"names":["_currentUserContext","_UmbCurrentUserHeaderAppElement_instances","handleUserClick_fn","UmbCurrentUserHeaderAppElement","UmbHeaderAppButtonElement","__privateAdd","UMB_CURRENT_USER_CONTEXT","instance","__privateSet","__privateGet","currentUser","html","__privateMethod","umbOpenModal","UMB_CURRENT_USER_MODAL","css","__decorateClass","state","customElement","UmbCurrentUserHeaderAppElement$1"],"mappings":";;;;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC;AAQO,IAAMC,IAAN,cAA6CC,EAA0B;AAAA,EAM7E,cAAc;AACb,UAAA,GAPKC,EAAA,MAAAJ,CAAA,GAINI,EAAA,MAAAL,CAAA,GAKC,KAAK,eAAeM,GAA0B,CAACC,MAAa;AAC3D,MAAAC,EAAA,MAAKR,GAAsBO,CAAA,GAC3B,KAAK,oBAAA;AAAA,IACN,CAAC;AAAA,EACF;AAAA,EAEA,MAAc,sBAAsB;AACnC,IAAKE,QAAKT,CAAA,KAEV,KAAK;AAAA,MACJS,QAAKT,CAAA,EAAoB;AAAA,MACzB,CAACU,MAAgB;AAChB,aAAK,eAAeA;AAAA,MACrB;AAAA,MACA;AAAA,IAAA;AAAA,EAEF;AAAA,EAMS,SAAS;AACjB,WAAOC;AAAA;AAAA,aAEIC,QAAKX,GAAAC,CAAA,CAAgB;AAAA;AAAA,YAEtB,KAAK,SAAS,KAAK,oCAAoC,CAAC;AAAA;AAAA;AAAA;AAAA,aAIvD,KAAK,cAAc,IAAI;AAAA,gBACpB,KAAK,cAAc,cAAc,EAAE;AAAA;AAAA;AAAA,EAGlD;AAUD;AAlDCF,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AA2BAC,IAAgB,iBAAG;AACxB,QAAMW,EAAa,MAAMC,CAAsB,EAAE,MAAM,MAAA;AAAA,GAAe;AACvE;AA7BYX,EA8Ca,SAAS;AAAA,EACjC,GAAGC,EAA0B;AAAA,EAC7BW;AAAA;AAAA;AAAA;AAAA;AAKD;AAnDQC,EAAA;AAAA,EADPC,EAAA;AAAM,GADKd,EAEJ,WAAA,gBAAA,CAAA;AAFIA,IAANa,EAAA;AAAA,EADNE,EAAc,6BAA6B;AAAA,GAC/Bf,CAAA;AAwDb,MAAAgB,IAAehB;"}