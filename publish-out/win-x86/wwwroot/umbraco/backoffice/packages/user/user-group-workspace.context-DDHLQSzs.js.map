{"version":3,"file":"user-group-workspace.context-DDHLQSzs.js","sources":["../../../src/packages/user/user-group/workspace/user-group/components/user-group-entity-user-permission-list.element.ts","../../../src/packages/user/user-group/workspace/user-group/components/user-group-granular-permission-list.element.ts","../../../src/packages/user/user-group/workspace/user-group/user-group-workspace-editor.element.ts","../../../src/packages/user/user-group/workspace/user-group/user-group-workspace.context.ts"],"sourcesContent":["import { UMB_USER_GROUP_WORKSPACE_CONTEXT } from '../user-group-workspace.context-token.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbSelectionChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n@customElement('umb-user-group-entity-user-permission-list')\r\nexport class UmbUserGroupEntityUserPermissionListElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _fallBackPermissions?: Array<string>;\r\n\r\n\t@state()\r\n\tprivate _groups: Array<{ entityType: string; headline: string }> = [];\r\n\r\n\t#userGroupWorkspaceContext?: typeof UMB_USER_GROUP_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#observeEntityUserPermissions();\r\n\r\n\t\tthis.consumeContext(UMB_USER_GROUP_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#userGroupWorkspaceContext = instance;\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#userGroupWorkspaceContext?.fallbackPermissions,\r\n\t\t\t\t(fallbackPermissions) => {\r\n\t\t\t\t\tthis._fallBackPermissions = fallbackPermissions;\r\n\t\t\t\t},\r\n\t\t\t\t'umbUserGroupEntityUserPermissionsObserver',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#observeEntityUserPermissions() {\r\n\t\tthis.observe(\r\n\t\t\tumbExtensionsRegistry.byType('entityUserPermission'),\r\n\t\t\t(manifests) => {\r\n\t\t\t\tconst entityTypes = [...new Set(manifests.flatMap((manifest) => manifest.forEntityTypes))];\r\n\t\t\t\tthis._groups = entityTypes\r\n\t\t\t\t\t.map((entityType) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tentityType,\r\n\t\t\t\t\t\t\theadline: this.localize.term(`user_permissionsEntityGroup_${entityType}`),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.sort((a, b) => a.headline.localeCompare(b.headline));\r\n\t\t\t},\r\n\t\t\t'umbUserPermissionsObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#onPermissionChange(event: UmbSelectionChangeEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as any;\r\n\t\tconst verbs = target.allowedVerbs;\r\n\t\tif (verbs === undefined || verbs === null) throw new Error('The verbs are not defined');\r\n\t\tthis.#userGroupWorkspaceContext?.setFallbackPermissions(verbs);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html` ${this._groups.map((group) => this.#renderPermissionsForEntityType(group))}`;\r\n\t}\r\n\r\n\t#renderPermissionsForEntityType(group: { entityType: string; headline: string }) {\r\n\t\treturn html`\r\n\t\t\t<h4>${group.headline}</h4>\r\n\t\t\t<umb-input-entity-user-permission\r\n\t\t\t\t.entityType=${group.entityType}\r\n\t\t\t\t.allowedVerbs=${this._fallBackPermissions || []}\r\n\t\t\t\t@change=${this.#onPermissionChange}></umb-input-entity-user-permission>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [UmbTextStyles];\r\n}\r\n\r\nexport default UmbUserGroupEntityUserPermissionListElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-group-default-permission-list': UmbUserGroupEntityUserPermissionListElement;\r\n\t}\r\n}\r\n","import { UMB_USER_GROUP_WORKSPACE_CONTEXT } from '../user-group-workspace.context-token.js';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { UmbExtensionElementInitializer } from '@umbraco-cms/backoffice/extension-api';\r\nimport type { ManifestGranularUserPermission } from '@umbraco-cms/backoffice/user-permission';\r\nimport { html, customElement, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { filterFrozenArray } from '@umbraco-cms/backoffice/observable-api';\r\n\r\n@customElement('umb-user-group-granular-permission-list')\r\nexport class UmbUserGroupGranularPermissionListElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _userGroupPermissions?: Array<any>;\r\n\r\n\t@state()\r\n\tprivate _userGroupFallbackPermissions?: Array<string>;\r\n\r\n\t#workspaceContext?: typeof UMB_USER_GROUP_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_USER_GROUP_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#workspaceContext?.data,\r\n\t\t\t\t(userGroup) => {\r\n\t\t\t\t\tthis._userGroupPermissions = userGroup?.permissions;\r\n\t\t\t\t\tthis._userGroupFallbackPermissions = userGroup?.fallbackPermissions;\r\n\t\t\t\t},\r\n\t\t\t\t'umbUserGroupGranularPermissionObserver',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#onValueChange = (e: UmbChangeEvent) => {\r\n\t\te.stopPropagation();\r\n\t\t// TODO: make interface\r\n\t\tconst target = e.target as any;\r\n\t\tconst schemaType = target.manifest?.meta.schemaType;\r\n\t\tif (!schemaType) throw new Error('Schema type is not available');\r\n\r\n\t\t/* Remove all permissions of the same schema type from\r\n\t\tthe user group and append the new permissions.\r\n\t\tWe do it this way to support appends, updates and deletion without we know the\r\n\t\texact action but on the changed value */\r\n\t\tconst storedValueWithoutSchemaTypeItems = filterFrozenArray(\r\n\t\t\tthis.#workspaceContext?.getPermissions() || [],\r\n\t\t\t(x) => x.$type !== schemaType,\r\n\t\t);\r\n\r\n\t\tconst permissions = target.permissions || [];\r\n\t\tconst newCombinedValue = [...storedValueWithoutSchemaTypeItems, ...permissions];\r\n\r\n\t\tthis.#workspaceContext?.setPermissions(newCombinedValue);\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tif (!this._userGroupPermissions) return;\r\n\t\treturn html`<umb-extension-slot\r\n\t\t\ttype=\"userGranularPermission\"\r\n\t\t\t.props=${{ fallbackPermissions: this._userGroupFallbackPermissions }}\r\n\t\t\t.renderMethod=${this.#renderProperty}></umb-extension-slot>`;\r\n\t}\r\n\r\n\t#renderProperty = (extension: UmbExtensionElementInitializer<ManifestGranularUserPermission>) => {\r\n\t\tif (!this._userGroupPermissions) return nothing;\r\n\t\tif (!extension.component) return nothing;\r\n\r\n\t\tconst manifest = extension.manifest;\r\n\t\tif (!manifest) throw new Error('Manifest is not available');\r\n\r\n\t\tconst label = manifest.meta.labelKey ? this.localize.term(manifest.meta.labelKey) : manifest.meta.label;\r\n\t\tconst description = manifest.meta.descriptionKey\r\n\t\t\t? this.localize.term(manifest.meta.descriptionKey)\r\n\t\t\t: manifest.meta.description;\r\n\r\n\t\tconst schemaType = manifest.meta.schemaType;\r\n\t\tconst permissionsForSchemaType =\r\n\t\t\tthis._userGroupPermissions.filter((permission) => permission.$type === schemaType) || [];\r\n\r\n\t\t(extension.component as any).permissions = permissionsForSchemaType;\r\n\t\t(extension.component as any).fallbackPermissions = this._userGroupFallbackPermissions;\r\n\t\textension.component.addEventListener(UmbChangeEvent.TYPE, this.#onValueChange);\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout .label=${label || ''} .description=${description || ''}>\r\n\t\t\t\t<div slot=\"editor\">${extension.component}</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t};\r\n}\r\n\r\nexport default UmbUserGroupGranularPermissionListElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-group-granular-permission-list': UmbUserGroupGranularPermissionListElement;\r\n\t}\r\n}\r\n","import type { UmbUserGroupDetailModel } from '../../types.js';\r\nimport { UMB_USER_GROUP_ROOT_WORKSPACE_PATH } from '../../paths.js';\r\nimport { UMB_USER_GROUP_WORKSPACE_CONTEXT } from './user-group-workspace.context-token.js';\r\nimport type { UUIBooleanInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, nothing, customElement, state, ifDefined } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement, umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbInputSectionElement } from '@umbraco-cms/backoffice/section';\r\nimport type { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbInputLanguageElement } from '@umbraco-cms/backoffice/language';\r\nimport { UMB_ICON_PICKER_MODAL } from '@umbraco-cms/backoffice/icon';\r\nimport type { UmbInputWithAliasElement } from '@umbraco-cms/backoffice/components';\r\n\r\nimport './components/user-group-entity-user-permission-list.element.js';\r\nimport './components/user-group-granular-permission-list.element.js';\r\n\r\n@customElement('umb-user-group-workspace-editor')\r\nexport class UmbUserGroupWorkspaceEditorElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _isNew?: boolean = false;\r\n\r\n\t@state()\r\n\tprivate _unique?: UmbUserGroupDetailModel['unique'];\r\n\r\n\t@state()\r\n\tprivate _name?: UmbUserGroupDetailModel['name'];\r\n\r\n\t@state()\r\n\tprivate _alias?: UmbUserGroupDetailModel['alias'];\r\n\r\n\t@state()\r\n\tprivate _aliasCanBeChanged?: UmbUserGroupDetailModel['aliasCanBeChanged'] = true;\r\n\r\n\t@state()\r\n\tprivate _icon: UmbUserGroupDetailModel['icon'] = null;\r\n\r\n\t@state()\r\n\tprivate _sections: UmbUserGroupDetailModel['sections'] = [];\r\n\r\n\t@state()\r\n\tprivate _languages: UmbUserGroupDetailModel['languages'] = [];\r\n\r\n\t@state()\r\n\tprivate _hasAccessToAllLanguages: UmbUserGroupDetailModel['hasAccessToAllLanguages'] = false;\r\n\r\n\t@state()\r\n\tprivate _documentStartNode?: UmbUserGroupDetailModel['documentStartNode'];\r\n\r\n\t@state()\r\n\tprivate _documentRootAccess: UmbUserGroupDetailModel['documentRootAccess'] = false;\r\n\r\n\t@state()\r\n\tprivate _mediaStartNode?: UmbUserGroupDetailModel['mediaStartNode'];\r\n\r\n\t@state()\r\n\tprivate _mediaRootAccess: UmbUserGroupDetailModel['mediaRootAccess'] = false;\r\n\r\n\t#workspaceContext?: typeof UMB_USER_GROUP_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_USER_GROUP_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#observeUserGroup();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeUserGroup() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(this.#workspaceContext.isNew, (value) => (this._isNew = value), '_observeIsNew');\r\n\t\tthis.observe(this.#workspaceContext.unique, (value) => (this._unique = value ?? undefined), '_observeUnique');\r\n\t\tthis.observe(this.#workspaceContext.name, (value) => (this._name = value), '_observeName');\r\n\t\tthis.observe(this.#workspaceContext.alias, (value) => (this._alias = value), '_observeAlias');\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.aliasCanBeChanged,\r\n\t\t\t(value) => (this._aliasCanBeChanged = value),\r\n\t\t\t'_observeAliasCanBeChanged',\r\n\t\t);\r\n\t\tthis.observe(this.#workspaceContext.icon, (value) => (this._icon = value), '_observeIcon');\r\n\t\tthis.observe(this.#workspaceContext.sections, (value) => (this._sections = value), '_observeSections');\r\n\t\tthis.observe(this.#workspaceContext.languages, (value) => (this._languages = value), '_observeLanguages');\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.hasAccessToAllLanguages,\r\n\t\t\t(value) => (this._hasAccessToAllLanguages = value),\r\n\t\t\t'_observeHasAccessToAllLanguages',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.documentRootAccess,\r\n\t\t\t(value) => (this._documentRootAccess = value),\r\n\t\t\t'_observeDocumentRootAccess',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.documentStartNode,\r\n\t\t\t(value) => (this._documentStartNode = value),\r\n\t\t\t'_observeDocumentStartNode',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.mediaRootAccess,\r\n\t\t\t(value) => (this._mediaRootAccess = value),\r\n\t\t\t'_observeMediaRootAccess',\r\n\t\t);\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext.mediaStartNode,\r\n\t\t\t(value) => (this._mediaStartNode = value),\r\n\t\t\t'_observeMediaStartNode',\r\n\t\t);\r\n\t}\r\n\r\n\t#onSectionsChange(event: UmbChangeEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as UmbInputSectionElement;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('sections', target.selection);\r\n\t}\r\n\r\n\t#onAllowAllLanguagesChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('hasAccessToAllLanguages', target.checked);\r\n\t}\r\n\r\n\t#onLanguagePermissionChange(event: UmbChangeEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target as UmbInputLanguageElement;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('languages', target.selection);\r\n\t}\r\n\r\n\t#onAllowAllDocumentsChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('documentRootAccess', target.checked);\r\n\t\tthis.#workspaceContext?.updateProperty('documentStartNode', null);\r\n\t}\r\n\r\n\t#onDocumentStartNodeChange(event: CustomEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\t// TODO: get back to this when documents have been decoupled from users.\r\n\t\t// The event target is deliberately set to any to avoid an import cycle with documents.\r\n\t\tconst target = event.target as any;\r\n\t\tconst selected = target.selection?.[0];\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('documentStartNode', selected ? { unique: selected } : null);\r\n\t}\r\n\r\n\t#onAllowAllMediaChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.target;\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('mediaRootAccess', target.checked);\r\n\t\tthis.#workspaceContext?.updateProperty('mediaStartNode', null);\r\n\t}\r\n\r\n\t#onMediaStartNodeChange(event: CustomEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\t// TODO: get back to this when media have been decoupled from users.\r\n\t\t// The event target is deliberately set to any to avoid an import cycle with media.\r\n\t\tconst target = event.target as any;\r\n\t\tconst selected = target.selection?.[0];\r\n\t\t// TODO make contexts method\r\n\t\tthis.#workspaceContext?.updateProperty('mediaStartNode', selected ? { unique: selected } : null);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor class=\"uui-text\" back-path=${UMB_USER_GROUP_ROOT_WORKSPACE_PATH}>\r\n\t\t\t\t${this.#renderHeader()} ${this.#renderMain()}\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tasync #onIconClick() {\r\n\t\tconst [alias, color] = this._icon?.replace('color-', '')?.split(' ') ?? [];\r\n\t\tconst result = await umbOpenModal(this, UMB_ICON_PICKER_MODAL, {\r\n\t\t\tvalue: {\r\n\t\t\t\ticon: alias,\r\n\t\t\t\tcolor: color,\r\n\t\t\t},\r\n\t\t}).catch(() => undefined);\r\n\r\n\t\tif (!result) return;\r\n\r\n\t\tif (result.icon && result.color) {\r\n\t\t\tthis.#workspaceContext?.updateProperty('icon', `${result.icon} color-${result.color}`);\r\n\t\t} else if (result.icon) {\r\n\t\t\tthis.#workspaceContext?.updateProperty('icon', result.icon);\r\n\t\t}\r\n\t}\r\n\r\n\t#onNameAndAliasChange(event: InputEvent & { target: UmbInputWithAliasElement }) {\r\n\t\tthis.#workspaceContext?.updateProperty('name', event.target.value ?? '');\r\n\t\tthis.#workspaceContext?.updateProperty('alias', event.target.alias ?? '');\r\n\t}\r\n\r\n\t#renderHeader() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t<uui-button id=\"icon\" compact label=\"icon\" look=\"outline\" @click=${this.#onIconClick}>\r\n\t\t\t\t\t<umb-icon name=${this._icon || ''}></umb-icon>\r\n\t\t\t\t</uui-button>\r\n\r\n\t\t\t\t<umb-input-with-alias\r\n\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\tlabel=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t.value=${this._name}\r\n\t\t\t\t\talias=${ifDefined(this._alias)}\r\n\t\t\t\t\t?auto-generate-alias=${this._isNew}\r\n\t\t\t\t\t?alias-readonly=${this._aliasCanBeChanged === false}\r\n\t\t\t\t\t@change=${this.#onNameAndAliasChange}\r\n\t\t\t\t\t${umbFocus()}>\r\n\t\t\t\t</umb-input-with-alias>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderMain() {\r\n\t\tif (!this._unique) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<div id=\"main\">\r\n\t\t\t\t<umb-stack>\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<div slot=\"headline\"><umb-localize key=\"user_assignAccess\"></umb-localize></div>\r\n\r\n\t\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('main_sections')}\r\n\t\t\t\t\t\t\tdescription=${this.localize.term('user_sectionsHelp')}>\r\n\t\t\t\t\t\t\t<umb-input-section\r\n\t\t\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t\t\t.selection=${this._sections}\r\n\t\t\t\t\t\t\t\t@change=${this.#onSectionsChange}></umb-input-section>\r\n\t\t\t\t\t\t</umb-property-layout>\r\n\r\n\t\t\t\t\t\t${this.#renderLanguageAccess()} ${this.#renderDocumentAccess()} ${this.#renderMediaAccess()}\r\n\t\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<div slot=\"headline\"><umb-localize key=\"user_permissionsDefault\"></umb-localize></div>\r\n\r\n\t\t\t\t\t\t<umb-property-layout\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('user_entityPermissionsLabel')}\r\n\t\t\t\t\t\t\tdescription=${this.localize.term('user_entityPermissionsDescription')}>\r\n\t\t\t\t\t\t\t<umb-user-group-entity-user-permission-list slot=\"editor\"></umb-user-group-entity-user-permission-list>\r\n\t\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<div slot=\"headline\"><umb-localize key=\"user_permissionsGranular\"></umb-localize></div>\r\n\t\t\t\t\t\t<umb-user-group-granular-permission-list></umb-user-group-granular-permission-list>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t</umb-stack>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderLanguageAccess() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('treeHeaders_languages')}\r\n\t\t\t\tdescription=${this.localize.term('user_languagesHelp')}>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\tstyle=\"margin-bottom: var(--uui-size-space-3);\"\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('user_allowAccessToAllLanguages')}\"\r\n\t\t\t\t\t\t.checked=${this._hasAccessToAllLanguages}\r\n\t\t\t\t\t\t@change=${this.#onAllowAllLanguagesChange}></uui-toggle>\r\n\r\n\t\t\t\t\t${this._hasAccessToAllLanguages === false\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<umb-input-language\r\n\t\t\t\t\t\t\t\t\t.selection=${this._languages}\r\n\t\t\t\t\t\t\t\t\t@change=${this.#onLanguagePermissionChange}></umb-input-language>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t: nothing}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDocumentAccess() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_selectContentStartNode')}\r\n\t\t\t\tdescription=${this.localize.term('user_startnodehelp')}>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\tstyle=\"margin-bottom: var(--uui-size-space-3);\"\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('user_allowAccessToAllDocuments')}\"\r\n\t\t\t\t\t\t.checked=${this._documentRootAccess}\r\n\t\t\t\t\t\t@change=${this.#onAllowAllDocumentsChange}></uui-toggle>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this._documentRootAccess === false\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<umb-input-document\r\n\t\t\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t\t\t.selection=${this._documentStartNode?.unique ? [this._documentStartNode.unique] : []}\r\n\t\t\t\t\t\t\t\t@change=${this.#onDocumentStartNodeChange}></umb-input-document>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t: nothing}\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderMediaAccess() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('defaultdialogs_selectMediaStartNode')}\r\n\t\t\t\tdescription=${this.localize.term('user_mediastartnodehelp')}>\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-toggle\r\n\t\t\t\t\t\tstyle=\"margin-bottom: var(--uui-size-space-3);\"\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('user_allowAccessToAllMedia')}\"\r\n\t\t\t\t\t\t.checked=${this._mediaRootAccess}\r\n\t\t\t\t\t\t@change=${this.#onAllowAllMediaChange}></uui-toggle>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this._mediaRootAccess === false\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<umb-input-media\r\n\t\t\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t\t\t.selection=${this._mediaStartNode?.unique ? [this._mediaStartNode.unique] : []}\r\n\t\t\t\t\t\t\t\t@change=${this.#onMediaStartNodeChange}></umb-input-media>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t: nothing}\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#icon {\r\n\t\t\t\tfont-size: var(--uui-size-5);\r\n\t\t\t\theight: 30px;\r\n\t\t\t\twidth: 30px;\r\n\t\t\t}\r\n\r\n\t\t\t#name {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tflex: 1 1 auto;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#main {\r\n\t\t\t\tpadding: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbUserGroupWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-group-workspace-editor': UmbUserGroupWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import type { UmbUserGroupDetailModel } from '../../types.js';\r\nimport { UMB_USER_GROUP_DETAIL_REPOSITORY_ALIAS, type UmbUserGroupDetailRepository } from '../../repository/index.js';\r\nimport { UMB_USER_GROUP_ENTITY_TYPE, UMB_USER_GROUP_ROOT_ENTITY_TYPE } from '../../entity.js';\r\nimport { UmbUserGroupWorkspaceEditorElement } from './user-group-workspace-editor.element.js';\r\nimport { UMB_USER_GROUP_WORKSPACE_ALIAS } from './constants.js';\r\nimport {\r\n\tUmbEntityNamedDetailWorkspaceContextBase,\r\n\tUmbWorkspaceIsNewRedirectController,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbRoutableWorkspaceContext, UmbSubmittableWorkspaceContext } from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbUserPermissionModel } from '@umbraco-cms/backoffice/user-permission';\r\n\r\nexport class UmbUserGroupWorkspaceContext\r\n\textends UmbEntityNamedDetailWorkspaceContextBase<UmbUserGroupDetailModel, UmbUserGroupDetailRepository>\r\n\timplements UmbSubmittableWorkspaceContext, UmbRoutableWorkspaceContext\r\n{\r\n\treadonly alias = this._data.createObservablePartOfCurrent((data) => data?.alias || '');\r\n\treadonly aliasCanBeChanged = this._data.createObservablePartOfCurrent((data) => data?.aliasCanBeChanged);\r\n\treadonly icon = this._data.createObservablePartOfCurrent((data) => data?.icon || null);\r\n\treadonly sections = this._data.createObservablePartOfCurrent((data) => data?.sections || []);\r\n\treadonly languages = this._data.createObservablePartOfCurrent((data) => data?.languages || []);\r\n\treadonly hasAccessToAllLanguages = this._data.createObservablePartOfCurrent(\r\n\t\t(data) => data?.hasAccessToAllLanguages || false,\r\n\t);\r\n\treadonly documentStartNode = this._data.createObservablePartOfCurrent((data) => data?.documentStartNode || null);\r\n\treadonly documentRootAccess = this._data.createObservablePartOfCurrent((data) => data?.documentRootAccess || false);\r\n\treadonly mediaStartNode = this._data.createObservablePartOfCurrent((data) => data?.mediaStartNode || null);\r\n\treadonly mediaRootAccess = this._data.createObservablePartOfCurrent((data) => data?.mediaRootAccess || false);\r\n\treadonly fallbackPermissions = this._data.createObservablePartOfCurrent((data) => data?.fallbackPermissions || []);\r\n\treadonly permissions = this._data.createObservablePartOfCurrent((data) => data?.permissions || []);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_USER_GROUP_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_USER_GROUP_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_USER_GROUP_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'create',\r\n\t\t\t\tcomponent: UmbUserGroupWorkspaceEditorElement,\r\n\t\t\t\tsetup: async () => {\r\n\t\t\t\t\tawait this.createScaffold({ parent: { entityType: UMB_USER_GROUP_ROOT_ENTITY_TYPE, unique: null } });\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UmbUserGroupWorkspaceEditorElement,\r\n\t\t\t\tsetup: (component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tupdateProperty<Alias extends keyof UmbUserGroupDetailModel>(alias: Alias, value: UmbUserGroupDetailModel[Alias]) {\r\n\t\tthis._data.updateCurrent({ [alias]: value });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the user group user permissions.\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tgetPermissions() {\r\n\t\treturn this._data.getCurrent()?.permissions ?? [];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the user group user permissions.\r\n\t * @param {Array<UmbUserPermissionModel>} permissions\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tsetPermissions(permissions: Array<UmbUserPermissionModel>) {\r\n\t\tthis._data.updateCurrent({ permissions: permissions });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the user group fallback permissions.\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tgetFallbackPermissions() {\r\n\t\treturn this._data.getCurrent()?.fallbackPermissions ?? [];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the user group fallback permissions.\r\n\t * @param {Array<string>} fallbackPermissions\r\n\t * @memberof UmbUserGroupWorkspaceContext\r\n\t */\r\n\tsetFallbackPermissions(fallbackPermissions: Array<string>) {\r\n\t\tthis._data.updateCurrent({ fallbackPermissions });\r\n\t}\r\n}\r\n\r\nexport { UmbUserGroupWorkspaceContext as api };\r\n"],"names":["_userGroupWorkspaceContext","_UmbUserGroupEntityUserPermissionListElement_instances","observeEntityUserPermissions_fn","onPermissionChange_fn","renderPermissionsForEntityType_fn","UmbUserGroupEntityUserPermissionListElement","UmbLitElement","__privateAdd","__privateMethod","UMB_USER_GROUP_WORKSPACE_CONTEXT","instance","__privateSet","__privateGet","fallbackPermissions","html","group","umbExtensionsRegistry","manifests","entityTypes","manifest","entityType","a","b","event","verbs","UmbTextStyles","__decorateClass","state","customElement","_workspaceContext","_onValueChange","_renderProperty","UmbUserGroupGranularPermissionListElement","target","schemaType","storedValueWithoutSchemaTypeItems","filterFrozenArray","x","permissions","newCombinedValue","extension","nothing","label","description","permissionsForSchemaType","permission","UmbChangeEvent","userGroup","_UmbUserGroupWorkspaceEditorElement_instances","observeUserGroup_fn","onSectionsChange_fn","onAllowAllLanguagesChange_fn","onLanguagePermissionChange_fn","onAllowAllDocumentsChange_fn","onDocumentStartNodeChange_fn","onAllowAllMediaChange_fn","onMediaStartNodeChange_fn","onIconClick_fn","onNameAndAliasChange_fn","renderHeader_fn","renderMain_fn","renderLanguageAccess_fn","renderDocumentAccess_fn","renderMediaAccess_fn","UmbUserGroupWorkspaceEditorElement","UMB_USER_GROUP_ROOT_WORKSPACE_PATH","value","selected","alias","color","result","umbOpenModal","UMB_ICON_PICKER_MODAL","ifDefined","umbFocus","css","UmbUserGroupWorkspaceContext","UmbEntityNamedDetailWorkspaceContextBase","host","UMB_USER_GROUP_WORKSPACE_ALIAS","UMB_USER_GROUP_ENTITY_TYPE","UMB_USER_GROUP_DETAIL_REPOSITORY_ALIAS","data","UMB_USER_GROUP_ROOT_ENTITY_TYPE","UmbWorkspaceIsNewRedirectController","component","info","unique"],"mappings":"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"}