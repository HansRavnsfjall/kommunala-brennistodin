{"version":3,"file":"webhook-details-workspace-view.element-ttrNnGNl.js","sources":["../../../src/packages/webhook/components/input-webhook-headers.element.ts","../../../src/packages/webhook/webhook-event/input-webhook-events.element.ts","../../../src/packages/webhook/webhook/workspace/views/webhook-details-workspace-view.element.ts"],"sourcesContent":["import type { PropertyValueMap } from '@umbraco-cms/backoffice/external/lit';\r\nimport { css, html, customElement, state, property, repeat, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport '@umbraco-cms/backoffice/culture';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-input-webhook-headers')\r\nexport class UmbInputWebhookHeadersElement extends UmbLitElement {\r\n\t@property()\r\n\tpublic headers: { [key: string]: string } = {};\r\n\r\n\t@state()\r\n\tprivate _headers: Array<{ name: string; value: string }> = [];\r\n\r\n\t@state()\r\n\tprivate _headerNames: string[] = ['Accept', 'Content-Length', 'Content-Type', 'User-Agent'];\r\n\r\n\tget #filterHeaderNames() {\r\n\t\treturn this._headerNames.filter((name) => !this._headers.find((header) => header.name === name));\r\n\t}\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\r\n\t\tif (!this.headers) return;\r\n\r\n\t\tthis._headers = Object.entries(this.headers).map(([name, value]) => ({ name, value }));\r\n\t}\r\n\r\n\tprotected override updated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tsuper.updated(_changedProperties);\r\n\r\n\t\tif (_changedProperties.has('_headers')) {\r\n\t\t\tthis.headers = this._headers.reduce(\r\n\t\t\t\t(acc, header) => {\r\n\t\t\t\t\tacc[header.name as string] = header.value;\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t},\r\n\t\t\t\t{} as { [key: string]: string },\r\n\t\t\t);\r\n\r\n\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t}\r\n\t}\r\n\r\n\t#addHeader() {\r\n\t\tthis._headers = [...this._headers, { name: '', value: '' }];\r\n\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\t// Focus newly added input\r\n\t\t\tconst inputs = this.shadowRoot?.querySelectorAll('input[type=\"text\"]');\r\n\t\t\tconst lastInput = inputs?.[inputs.length - 2] as HTMLInputElement | undefined;\r\n\t\t\tlastInput?.focus();\r\n\t\t});\r\n\t}\r\n\r\n\t#removeHeader(index: number) {\r\n\t\tthis._headers = this._headers.filter((_, i) => i !== index);\r\n\t}\r\n\r\n\t#onInput(event: Event, prop: keyof (typeof this._headers)[number], index: number) {\r\n\t\tconst value = (event.target as HTMLInputElement).value;\r\n\t\tthis._headers[index][prop] = value;\r\n\t\tthis.requestUpdate('_headers');\r\n\t}\r\n\r\n\t#renderHeaderInput(header: { name: string; value: string }, index: number) {\r\n\t\t//TODO: Use uui-input when it supports datalist\r\n\t\treturn html`\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t.value=${header.name}\r\n\t\t\t\t@input=${(e: InputEvent) => this.#onInput(e, 'name', index)}\r\n\t\t\t\tlist=\"nameList\" />\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\t.value=${header.value}\r\n\t\t\t\t@input=${(e: InputEvent) => this.#onInput(e, 'value', index)}\r\n\t\t\t\tlist=\"valueList\" />\r\n\t\t\t<uui-button @click=${() => this.#removeHeader(index)} label=${this.localize.term('general_remove')}></uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderGrid() {\r\n\t\tif (!this._headers.length) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<div id=\"grid\">${this.#renderHeaders()}</div>\r\n\r\n\t\t\t<datalist id=\"nameList\">\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis.#filterHeaderNames,\r\n\t\t\t\t\t(name) => name,\r\n\t\t\t\t\t(name) => html`<option value=${name}></option>`,\r\n\t\t\t\t)}\r\n\t\t\t</datalist>\r\n\t\t\t<datalist id=\"valueList\">\r\n\t\t\t\t<option value=\"application/json\"></option>\r\n\t\t\t</datalist>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderHeaders() {\r\n\t\tif (!this._headers.length) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<span class=\"grid-top\"><umb-localize key=\"general_name\">Name</umb-localize></span>\r\n\t\t\t<span class=\"grid-top\"><umb-localize key=\"general_value\">Value</umb-localize></span>\r\n\t\t\t<span class=\"grid-top\"></span>\r\n\t\t\t${repeat(\r\n\t\t\t\tthis._headers,\r\n\t\t\t\t(_, index) => index,\r\n\t\t\t\t(header, index) => this.#renderHeaderInput(header, index),\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this.#renderGrid()}\r\n\t\t\t<uui-button id=\"add\" look=\"placeholder\" @click=${this.#addHeader}>Add</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#grid {\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgrid-template-columns: 1fr 1fr auto;\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\r\n\t\t\t.grid-top {\r\n\t\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t\t}\r\n\r\n\t\t\t#grid > * {\r\n\t\t\t\tborder-right: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t#grid > *:nth-child(3) {\r\n\t\t\t\tborder-top-right-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\r\n\t\t\t#grid > *:nth-child(1) {\r\n\t\t\t\tborder-top-left-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\r\n\t\t\t/* Remove borders from last column */\r\n\t\t\t#grid > *:nth-child(3n) {\r\n\t\t\t\tborder-right: none;\r\n\t\t\t}\r\n\r\n\t\t\t/* Remove borders from last row */\r\n\t\t\t#grid > *:nth-child(3n + 1):nth-last-child(-n + 3),\r\n\t\t\t#grid > *:nth-child(3n + 1):nth-last-child(-n + 3) ~ * {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t#grid > *:not(uui-button) {\r\n\t\t\t\tpadding: var(--uui-size-2) var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\tuui-button {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tfont: inherit;\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tbackground-color: transparent;\r\n\t\t\t}\r\n\r\n\t\t\tinput:focus,\r\n\t\t\tuui-button:focus {\r\n\t\t\t\tz-index: 1;\r\n\t\t\t}\r\n\r\n\t\t\t/* Remove arrow in inputs linked to a datalist */\r\n\t\t\tinput[type='text']::-webkit-calendar-picker-indicator {\r\n\t\t\t\tdisplay: none !important;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInputWebhookHeadersElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-webhook-headers': UmbInputWebhookHeadersElement;\r\n\t}\r\n}\r\n","import { UMB_WEBHOOK_EVENTS_MODAL } from './modal/webhook-events-modal.token.js';\r\nimport type { UmbWebhookEventModel } from './types.js';\r\nimport { css, html, customElement, property, repeat, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport '@umbraco-cms/backoffice/culture';\r\nimport type { UmbModalManagerContext } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-input-webhook-events')\r\nexport class UmbInputWebhookEventsElement extends UmbLitElement {\r\n\t@property({ attribute: false })\r\n\tpublic events: Array<UmbWebhookEventModel> = [];\r\n\r\n\tprivate _modalContext?: UmbModalManagerContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (_instance) => {\r\n\t\t\tthis._modalContext = _instance;\r\n\t\t});\r\n\t}\r\n\r\n\tasync #openModal() {\r\n\t\tconst modal = this._modalContext?.open(this, UMB_WEBHOOK_EVENTS_MODAL, {\r\n\t\t\tmodal: { type: 'sidebar' },\r\n\t\t\tdata: { events: this.events },\r\n\t\t});\r\n\t\tif (!modal) return;\r\n\r\n\t\tawait modal.onSubmit();\r\n\r\n\t\tthis.events = modal.getValue().events;\r\n\r\n\t\tmodal.destroy();\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t#removeEvent(alias: string) {\r\n\t\tthis.events = this.events.filter((item) => item.alias !== alias);\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t#renderEvents() {\r\n\t\tif (!this.events.length) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-list>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis.events,\r\n\t\t\t\t\t(item) => item.alias,\r\n\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t<uui-ref-node name=${item.eventName} @open=${this.#openModal}>\r\n\t\t\t\t\t\t\t<umb-icon slot=\"icon\" name=\"icon-globe\"></umb-icon>\r\n\t\t\t\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('general_remove')}\r\n\t\t\t\t\t\t\t\t\t@click=${() => this.#removeEvent(item.alias)}></uui-button>\r\n\t\t\t\t\t\t\t</uui-action-bar>\r\n\t\t\t\t\t\t</uui-ref-node>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t</uui-ref-list>\r\n\t\t`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`${this.#renderEvents()}\r\n\t\t\t<uui-button\r\n\t\t\t\tid=\"btn-add\"\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\tlabel=${this.localize.term('general_choose')}\r\n\t\t\t\t@click=${this.#openModal}></uui-button>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#btn-add {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInputWebhookEventsElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-webhook-events': UmbInputWebhookEventsElement;\r\n\t}\r\n}\r\n","import { UMB_WEBHOOK_WORKSPACE_CONTEXT } from '../webhook-workspace.context-token.js';\r\nimport type { UmbInputWebhookHeadersElement } from '../../../components/input-webhook-headers.element.js';\r\nimport type { UmbInputWebhookEventsElement } from '../../../webhook-event/input-webhook-events.element.js';\r\nimport type { UmbWebhookDetailModel } from '../../types.js';\r\nimport { css, customElement, html, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { UmbInputDocumentTypeElement } from '@umbraco-cms/backoffice/document-type';\r\nimport type { UmbWorkspaceViewElement } from '@umbraco-cms/backoffice/workspace';\r\nimport type { UUIBooleanInputEvent, UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\nimport '@umbraco-cms/backoffice/culture';\r\nimport '../../../components/input-webhook-headers.element.js';\r\nimport '../../../webhook-event/input-webhook-events.element.js';\r\n\r\n@customElement('umb-webhook-details-workspace-view')\r\nexport class UmbWebhookDetailsWorkspaceViewElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t@state()\r\n\tprivate _webhook?: UmbWebhookDetailModel;\r\n\r\n\t@state()\r\n\tprivate _contentType?: string;\r\n\r\n\t#webhookWorkspaceContext?: typeof UMB_WEBHOOK_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_WEBHOOK_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#webhookWorkspaceContext = instance;\r\n\t\t\tthis.observe(this.#webhookWorkspaceContext?.data, (webhook) => {\r\n\t\t\t\tthis._webhook = webhook;\r\n\t\t\t\tthis._contentType = this._webhook?.events[0]?.eventType ?? undefined;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t#onEventsChange(event: UmbChangeEvent & { target: UmbInputWebhookEventsElement }) {\r\n\t\tconst events = event.target.events ?? [];\r\n\t\tif (events.length && events[0].eventType !== this._contentType) {\r\n\t\t\tthis.#webhookWorkspaceContext?.setTypes([]);\r\n\t\t}\r\n\t\tthis.#webhookWorkspaceContext?.setEvents(events);\r\n\t}\r\n\r\n\t#onHeadersChange(event: UmbChangeEvent) {\r\n\t\tconst headers = (event.target as UmbInputWebhookHeadersElement).headers;\r\n\t\tthis.#webhookWorkspaceContext?.setHeaders(headers);\r\n\t}\r\n\r\n\t#onTypesChange(event: UmbChangeEvent) {\r\n\t\tconst types = (event.target as UmbInputDocumentTypeElement).selection;\r\n\t\tthis.#webhookWorkspaceContext?.setTypes(types);\r\n\t}\r\n\r\n\t#onUrlChange(event: UUIInputEvent) {\r\n\t\tconst value = event.target.value;\r\n\t\tif (typeof value !== 'string') return;\r\n\r\n\t\tthis.#webhookWorkspaceContext?.setUrl(value);\r\n\t}\r\n\r\n\t#onEnabledChange(event: UUIBooleanInputEvent) {\r\n\t\tthis.#webhookWorkspaceContext?.setEnabled(event.target.checked);\r\n\t}\r\n\t#renderContentTypePicker() {\r\n\t\tif (this._contentType !== 'Content' && this._contentType !== 'Media') return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tlabel=${this.localize.term('webhooks_contentType')}\r\n\t\t\t\tdescription=${this.localize.term('webhooks_contentTypeDescription')}>\r\n\t\t\t\t${this.#renderContentTypePickerEditor()}\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderContentTypePickerEditor() {\r\n\t\tswitch (this._contentType) {\r\n\t\t\tcase 'Content':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<umb-input-document-type\r\n\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t@change=${this.#onTypesChange}\r\n\t\t\t\t\t\t.selection=${this._webhook?.contentTypes ?? []}\r\n\t\t\t\t\t\t.documentTypesOnly=${true}></umb-input-document-type>\r\n\t\t\t\t`;\r\n\t\t\tcase 'Media':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<umb-input-media-type\r\n\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t@change=${this.#onTypesChange}\r\n\t\t\t\t\t\t.selection=${this._webhook?.contentTypes ?? []}></umb-input-media-type>\r\n\t\t\t\t`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn nothing;\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._webhook) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-box>\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\tmandatory\r\n\t\t\t\t\tlabel=${this.localize.term('webhooks_url')}\r\n\t\t\t\t\tdescription=${this.localize.term('webhooks_urlDescription')}>\r\n\t\t\t\t\t<uui-input @input=${this.#onUrlChange} .value=${this._webhook.url} slot=\"editor\" required=\"true\"></uui-input>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\tlabel=${this.localize.term('webhooks_events')}\r\n\t\t\t\t\tdescription=${this.localize.term('webhooks_eventDescription')}>\r\n\t\t\t\t\t<umb-input-webhook-events\r\n\t\t\t\t\t\t@change=${this.#onEventsChange}\r\n\t\t\t\t\t\t.events=${this._webhook.events ?? []}\r\n\t\t\t\t\t\tslot=\"editor\"></umb-input-webhook-events>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t\t${this.#renderContentTypePicker()}\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\tlabel=${this.localize.term('webhooks_enabled')}\r\n\t\t\t\t\tdescription=${this.localize.term('webhooks_enabledDescription')}>\r\n\t\t\t\t\t<uui-toggle slot=\"editor\" .checked=${this._webhook.enabled} @change=${this.#onEnabledChange}></uui-toggle>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t\t<umb-property-layout\r\n\t\t\t\t\tlabel=${this.localize.term('webhooks_headers')}\r\n\t\t\t\t\tdescription=${this.localize.term('webhooks_headersDescription')}>\r\n\t\t\t\t\t<umb-input-webhook-headers\r\n\t\t\t\t\t\t@change=${this.#onHeadersChange}\r\n\t\t\t\t\t\t.headers=${this._webhook.headers}\r\n\t\t\t\t\t\tslot=\"editor\"></umb-input-webhook-headers>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding: var(--uui-size-space-6);\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tumb-property-layout:first-child {\r\n\t\t\t\tpadding-top: 0;\r\n\t\t\t}\r\n\t\t\tumb-property-layout:last-child {\r\n\t\t\t\tpadding-bottom: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbWebhookDetailsWorkspaceViewElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-webhook-details-workspace-view': UmbWebhookDetailsWorkspaceViewElement;\r\n\t}\r\n}\r\n"],"names":["_UmbInputWebhookHeadersElement_instances","filterHeaderNames_get","addHeader_fn","removeHeader_fn","onInput_fn","renderHeaderInput_fn","renderGrid_fn","renderHeaders_fn","UmbInputWebhookHeadersElement","UmbLitElement","__privateAdd","_changedProperties","name","value","acc","header","UmbChangeEvent","html","__privateMethod","inputs","index","_","i","event","prop","e","repeat","__privateGet","nothing","UmbTextStyles","css","__decorateClass","property","state","customElement","_UmbInputWebhookEventsElement_instances","openModal_fn","removeEvent_fn","renderEvents_fn","UmbInputWebhookEventsElement","UMB_MODAL_MANAGER_CONTEXT","_instance","modal","UMB_WEBHOOK_EVENTS_MODAL","alias","item","_webhookWorkspaceContext","_UmbWebhookDetailsWorkspaceViewElement_instances","onEventsChange_fn","onHeadersChange_fn","onTypesChange_fn","onUrlChange_fn","onEnabledChange_fn","renderContentTypePicker_fn","renderContentTypePickerEditor_fn","UmbWebhookDetailsWorkspaceViewElement","UMB_WEBHOOK_WORKSPACE_CONTEXT","instance","__privateSet","webhook","events","headers","types","UmbWebhookDetailsWorkspaceViewElement$1"],"mappings":"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"}