{"version":3,"file":"webhook-workspace.context-BjbGiokw.js","sources":["../../../src/packages/webhook/webhook/workspace/webhook-workspace-editor.element.ts","../../../src/packages/webhook/webhook/workspace/webhook-workspace.context.ts"],"sourcesContent":["import { UMB_WEBHOOK_ROOT_WORKSPACE_PATH } from '../../constants.js';\r\nimport { UMB_WEBHOOK_WORKSPACE_CONTEXT } from './webhook-workspace.context-token.js';\r\nimport { html, customElement, state, css } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UUIInputElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { umbFocus, UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n@customElement('umb-webhook-workspace-editor')\r\nexport class UmbWebhookWorkspaceEditorElement extends UmbLitElement {\r\n\t#workspaceContext?: typeof UMB_WEBHOOK_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _url: string = '';\r\n\r\n\t@state()\r\n\tprivate _name = '';\r\n\r\n\t@state()\r\n\tprivate _description = '';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_WEBHOOK_WORKSPACE_CONTEXT, (context) => {\r\n\t\t\tthis.#workspaceContext = context;\r\n\t\t\tthis.observe(this.#workspaceContext?.url, (url) => (this._url = url ?? ''));\r\n\t\t\tthis.observe(this.#workspaceContext?.name, (name) => (this._name = name ?? ''));\r\n\t\t\tthis.observe(this.#workspaceContext?.description, (description) => (this._description = description ?? ''));\r\n\t\t});\r\n\t}\r\n\r\n\t#onNameChange(event: InputEvent & { target: UUIInputElement }) {\r\n\t\tconst value = event.target.value.toString();\r\n\t\tthis.#workspaceContext?.setName(value);\r\n\t}\r\n\r\n\t#onDescriptionChange(event: InputEvent & { target: UUIInputElement }) {\r\n\t\tconst value = event.target.value.toString();\r\n\t\tthis.#workspaceContext?.setDescription(value);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor back-path=${UMB_WEBHOOK_ROOT_WORKSPACE_PATH}>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<div id=\"editors\">\r\n\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t\t\tplaceholder=${this.localize.term('placeholders_entername')}\r\n\t\t\t\t\t\t\t.value=${this._name}\r\n\t\t\t\t\t\t\t@change=${this.#onNameChange}\r\n\t\t\t\t\t\t\t${umbFocus()}>\r\n\t\t\t\t\t\t</uui-input>\r\n\r\n\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t.label=${this.localize.term('placeholders_enterDescription')}\r\n\t\t\t\t\t\t\t.value=${this._description}\r\n\t\t\t\t\t\t\t.placeholder=${this.localize.term('placeholders_enterDescription')}\r\n\t\t\t\t\t\t\t@input=${this.#onDescriptionChange}></uui-input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#header {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#name {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#description {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin-top: -1px;\r\n\t\t\t\t--uui-input-height: var(--uui-size-8);\r\n\t\t\t\t--uui-input-border-color: transparent;\r\n\t\t\t}\r\n\r\n\t\t\t#description:hover {\r\n\t\t\t\t--uui-input-border-color: var(--uui-color-border);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbWebhookWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-webhook-workspace-editor': UmbWebhookWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import type { UmbWebhookDetailRepository } from '../repository/index.js';\r\nimport { UMB_WEBHOOK_DETAIL_REPOSITORY_ALIAS } from '../repository/index.js';\r\nimport { UMB_WEBHOOK_ENTITY_TYPE, UMB_WEBHOOK_ROOT_ENTITY_TYPE, UMB_WEBHOOK_WORKSPACE_ALIAS } from '../../entity.js';\r\nimport type { UmbWebhookDetailModel } from '../types.js';\r\nimport type { UmbWebhookEventModel } from '../../webhook-event/types.js';\r\nimport { UmbWebhookWorkspaceEditorElement } from './webhook-workspace-editor.element.js';\r\nimport {\r\n\tUmbEntityNamedDetailWorkspaceContextBase,\r\n\tUmbWorkspaceIsNewRedirectController,\r\n\tUmbWorkspaceIsNewRedirectControllerAlias,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbSubmittableWorkspaceContext, UmbRoutableWorkspaceContext } from '@umbraco-cms/backoffice/workspace';\r\n\r\nexport class UmbWebhookWorkspaceContext\r\n\textends UmbEntityNamedDetailWorkspaceContextBase<UmbWebhookDetailModel, UmbWebhookDetailRepository>\r\n\timplements UmbSubmittableWorkspaceContext, UmbRoutableWorkspaceContext\r\n{\r\n\t// Observable states\r\n\treadonly headers = this._data.createObservablePartOfCurrent((data) => data?.headers);\r\n\treadonly enabled = this._data.createObservablePartOfCurrent((data) => data?.enabled);\r\n\treadonly url = this._data.createObservablePartOfCurrent((data) => data?.url);\r\n\treadonly description = this._data.createObservablePartOfCurrent((data) => data?.description);\r\n\treadonly events = this._data.createObservablePartOfCurrent((data) => data?.events);\r\n\treadonly contentTypes = this._data.createObservablePartOfCurrent((data) => data?.contentTypes);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_WEBHOOK_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_WEBHOOK_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_WEBHOOK_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'create',\r\n\t\t\t\tcomponent: UmbWebhookWorkspaceEditorElement,\r\n\t\t\t\tsetup: async () => {\r\n\t\t\t\t\tawait this.createScaffold({ parent: { entityType: UMB_WEBHOOK_ROOT_ENTITY_TYPE, unique: null } });\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UmbWebhookWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tthis.removeUmbControllerByAlias(UmbWorkspaceIsNewRedirectControllerAlias);\r\n\t\t\t\t\tthis.load(info.match.params.unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the events\r\n\t * @param {Array<UmbWebhookEventModel>} events - The events\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tsetEvents(events: Array<UmbWebhookEventModel>) {\r\n\t\tthis._data.updateCurrent({ events });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the events\r\n\t * @returns {Array<UmbWebhookEventModel>}\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tgetEvents(): Array<UmbWebhookEventModel> | undefined {\r\n\t\treturn this._data.getCurrent()?.events;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the headers\r\n\t * @param {{ [key: string]: string }} headers - The headers\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tsetHeaders(headers: { [key: string]: string }) {\r\n\t\tthis._data.updateCurrent({ headers });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the headers\r\n\t * @returns {UmbWebhookDetailModel['headers']} - The headers\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tgetHeaders(): UmbWebhookDetailModel['headers'] | undefined {\r\n\t\treturn this._data.getCurrent()?.headers;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the content types\r\n\t * @param {string[]} types - The content types\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tsetTypes(types: string[]) {\r\n\t\tthis._data.updateCurrent({ contentTypes: types });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the content types\r\n\t * @returns {string[]} - The content types\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tgetTypes(): string[] | undefined {\r\n\t\treturn this._data.getCurrent()?.contentTypes;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the URL\r\n\t * @param {string} url - The URL\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tsetUrl(url: string) {\r\n\t\tthis._data.updateCurrent({ url });\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the description\r\n\t * @param {string} description - The description\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tsetDescription(description: string) {\r\n\t\tthis._data.updateCurrent({ description });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the URL\r\n\t * @returns {string} - The URL\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tgetUrl(): string | undefined {\r\n\t\treturn this._data.getCurrent()?.url;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the enabled state\r\n\t * @param {boolean} enabled - The enabled state\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tsetEnabled(enabled: boolean) {\r\n\t\tthis._data.updateCurrent({ enabled });\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the enabled state\r\n\t * @returns {boolean} - The enabled state\r\n\t * @memberof UmbWebhookWorkspaceContext\r\n\t */\r\n\tgetEnabled(): boolean | undefined {\r\n\t\treturn this._data.getCurrent()?.enabled;\r\n\t}\r\n}\r\n\r\nexport { UmbWebhookWorkspaceContext as api };\r\n"],"names":["_workspaceContext","_UmbWebhookWorkspaceEditorElement_instances","onNameChange_fn","onDescriptionChange_fn","UmbWebhookWorkspaceEditorElement","UmbLitElement","__privateAdd","UMB_WEBHOOK_WORKSPACE_CONTEXT","context","__privateSet","__privateGet","url","name","description","html","UMB_WEBHOOK_ROOT_WORKSPACE_PATH","__privateMethod","umbFocus","event","value","UmbTextStyles","css","__decorateClass","state","customElement","UmbWebhookWorkspaceContext","UmbEntityNamedDetailWorkspaceContextBase","host","UMB_WEBHOOK_WORKSPACE_ALIAS","UMB_WEBHOOK_ENTITY_TYPE","UMB_WEBHOOK_DETAIL_REPOSITORY_ALIAS","data","UMB_WEBHOOK_ROOT_ENTITY_TYPE","UmbWorkspaceIsNewRedirectController","_component","info","UmbWorkspaceIsNewRedirectControllerAlias","events","headers","types","enabled"],"mappings":"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"}